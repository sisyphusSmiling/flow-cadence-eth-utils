/*! For license information please see bundle.js.LICENSE.txt */
(()=>{var e,t,r={221:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.fromMiliseconds=t.toMiliseconds=void 0;const n=r(9026);t.toMiliseconds=function(e){return e*n.ONE_THOUSAND},t.fromMiliseconds=function(e){return Math.floor(e/n.ONE_THOUSAND)}},251:(e,t)=>{t.read=function(e,t,r,n,i){var o,s,a=8*i-n-1,c=(1<<a)-1,u=c>>1,l=-7,h=r?i-1:0,f=r?-1:1,d=e[t+h];for(h+=f,o=d&(1<<-l)-1,d>>=-l,l+=a;l>0;o=256*o+e[t+h],h+=f,l-=8);for(s=o&(1<<-l)-1,o>>=-l,l+=n;l>0;s=256*s+e[t+h],h+=f,l-=8);if(0===o)o=1-u;else{if(o===c)return s?NaN:1/0*(d?-1:1);s+=Math.pow(2,n),o-=u}return(d?-1:1)*s*Math.pow(2,o-n)},t.write=function(e,t,r,n,i,o){var s,a,c,u=8*o-i-1,l=(1<<u)-1,h=l>>1,f=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,d=n?0:o-1,p=n?1:-1,g=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(a=isNaN(t)?1:0,s=l):(s=Math.floor(Math.log(t)/Math.LN2),t*(c=Math.pow(2,-s))<1&&(s--,c*=2),(t+=s+h>=1?f/c:f*Math.pow(2,1-h))*c>=2&&(s++,c/=2),s+h>=l?(a=0,s=l):s+h>=1?(a=(t*c-1)*Math.pow(2,i),s+=h):(a=t*Math.pow(2,h-1)*Math.pow(2,i),s=0));i>=8;e[r+d]=255&a,d+=p,a/=256,i-=8);for(s=s<<i|a,u+=i;u>0;e[r+d]=255&s,d+=p,s/=256,u-=8);e[r+d-p]|=128*g}},653:e=>{e.exports={CREATE_ATTESTATION:'\nimport "ETHAffiliatedAccounts"\n\ntransaction(\n    hexPublicKey: String,\n    signature: String,\n    ethAddress: String,\n    timestamp: UFix64\n) {\n\n    let manager: auth(ETHAffiliatedAccounts.Disown) &ETHAffiliatedAccounts.AttestationManager\n\n    prepare(signer: auth(BorrowValue, IssueStorageCapabilityController, PublishCapability, SaveValue, UnpublishCapability) &Account) {\n\n        if signer.storage.type(at: ETHAffiliatedAccounts.STORAGE_PATH) == nil {\n            signer.storage.save(<-ETHAffiliatedAccounts.createManager(), to: ETHAffiliatedAccounts.STORAGE_PATH)\n\n            signer.capabilities.unpublish(ETHAffiliatedAccounts.PUBLIC_PATH)\n            let mgrCap = signer.capabilities.storage.issue<&ETHAffiliatedAccounts.AttestationManager>(\n                ETHAffiliatedAccounts.STORAGE_PATH\n            )\n            signer.capabilities.publish(mgrCap, at: ETHAffiliatedAccounts.PUBLIC_PATH)\n        }\n\n        self.manager = signer.storage.borrow<auth(ETHAffiliatedAccounts.Disown) &ETHAffiliatedAccounts.AttestationManager>(\n                from: ETHAffiliatedAccounts.STORAGE_PATH\n            ) ?? panic("AttestationManager not found in signer\'s account storage. Reconfigure at (ETHAffiliatedAccounts.STORAGE_PATH) & try again.")\n\n    }\n\n    execute {\n        self.manager.createAttestation(\n            hexPublicKey: hexPublicKey,\n            signature: signature,\n            ethAddress: ethAddress,\n            timestamp: timestamp\n        )\n    }\n}\n',REMOVE_ATTESTATIONS:'\nimport "ETHAffiliatedAccounts"\n\ntransaction(ethAddresses: [String]) {\n\n    let manager: &ETHAffiliatedAccounts.AttestationManager\n\n    prepare(signer: auth(BorrowValue) &Account) {\n\n        self.manager = signer.storage.borrow<auth(ETHAffiliatedAccounts.Disown) &ETHAffiliatedAccounts.AttestationManager>(\n                from: ETHAffiliatedAccounts.STORAGE_PATH\n            ) ?? panic("AttestationManager not found in signer\'s account storage. Reconfigure at (ETHAffiliatedAccounts.STORAGE_PATH) & try again.")\n\n    }\n\n    execute {\n        for ethAddress in ethAddresses {\n            if let attestation: @ETHAffiliatedAccounts.Attestation <- self.manager.removeAttestation(ethAddress: ethAddress) {\n                destroy attestation\n            }\n        }\n    }\n}\n',GET_CURRENT_BLOCK_TIMESTAMP:"\n    access(all) fun main(): UFix64 {\n        return getCurrentBlock().timestamp\n    }\n",GET_ATTESTED_ADDRESSES:'\nimport "ETHAffiliatedAccounts"\n\naccess(all) fun main(address: Address): [String] {\n    return getAccount(address).capabilities.borrow<&ETHAffiliatedAccounts.AttestationManager>(\n            ETHAffiliatedAccounts.PUBLIC_PATH\n        )?.getAttestedAddresses() ?? []\n}\n',GET_ATTESTED_ADDRESSES_WITH_STATUS:'\nimport "ETHAffiliatedAccounts"\n\naccess(all) fun main(address: Address): {String: Bool} {\n    let manager = getAccount(address).capabilities.borrow<&ETHAffiliatedAccounts.AttestationManager>(\n            ETHAffiliatedAccounts.PUBLIC_PATH\n        ) ?? panic("Could not borrow reference to AttestationManager from the provided account")\n    let attestedAffiliates: [String] = manager.getAttestedAddresses()\n    \n    let response: {String: Bool} = {}\n    for affiliate in attestedAffiliates {\n        response.insert(key: affiliate, manager.borrowAttestation(ethAddress: affiliate)!.verify())\n    }\n\n    return response\n}\n'}},793:e=>{"use strict";function t(e){try{return JSON.stringify(e)}catch(e){return'"[Circular]"'}}e.exports=function(e,r,n){var i=n&&n.stringify||t;if("object"==typeof e&&null!==e){var o=r.length+1;if(1===o)return e;var s=new Array(o);s[0]=i(e);for(var a=1;a<o;a++)s[a]=i(r[a]);return s.join(" ")}if("string"!=typeof e)return e;var c=r.length;if(0===c)return e;for(var u="",l=0,h=-1,f=e&&e.length||0,d=0;d<f;){if(37===e.charCodeAt(d)&&d+1<f){switch(h=h>-1?h:0,e.charCodeAt(d+1)){case 100:case 102:if(l>=c)break;if(null==r[l])break;h<d&&(u+=e.slice(h,d)),u+=Number(r[l]),h=d+2,d++;break;case 105:if(l>=c)break;if(null==r[l])break;h<d&&(u+=e.slice(h,d)),u+=Math.floor(Number(r[l])),h=d+2,d++;break;case 79:case 111:case 106:if(l>=c)break;if(void 0===r[l])break;h<d&&(u+=e.slice(h,d));var p=typeof r[l];if("string"===p){u+="'"+r[l]+"'",h=d+2,d++;break}if("function"===p){u+=r[l].name||"<anonymous>",h=d+2,d++;break}u+=i(r[l]),h=d+2,d++;break;case 115:if(l>=c)break;h<d&&(u+=e.slice(h,d)),u+=String(r[l]),h=d+2,d++;break;case 37:h<d&&(u+=e.slice(h,d)),u+="%",h=d+2,d++,l--}++l}++d}return-1===h?e:(h<f&&(u+=e.slice(h)),u)}},796:e=>{"use strict";e.exports=function(){throw new Error("ws does not work in the browser. Browser clients must use the native WebSocket object")}},934:e=>{"use strict";e.exports=JSON.parse('{"contracts":{"ETHAffiliatedAccounts":{"source":"cadence/contracts/ETHAffiliatedAccounts.cdc","aliases":{"emulator":"f8d6e0586b0a20c7"}},"ETHUtils":{"source":"cadence/contracts/ETHUtils.cdc","aliases":{"emulator":"f8d6e0586b0a20c7","testnet":"6b3bdaa64e3383f2"}}},"dependencies":{"AddressUtils":{"source":"mainnet://a340dc0a4ec828ab.AddressUtils","hash":"1723f0954ef25e083483b7c84f93fd159d5cc553746ea1532a79fbbbe4450487","aliases":{"mainnet":"a340dc0a4ec828ab","testnet":"31ad40c07a2a9788"}},"ArrayUtils":{"source":"mainnet://a340dc0a4ec828ab.ArrayUtils","hash":"9e8f2d3e35be82da42b685045af834e16d23bcef1f322603ff91cedd1c9bbad9","aliases":{"mainnet":"a340dc0a4ec828ab","testnet":"31ad40c07a2a9788"}},"StringUtils":{"source":"mainnet://a340dc0a4ec828ab.StringUtils","hash":"b401c4b0f711344ed9cd02ff77c91e026f5dfbca6045f140b9ca9d4966707e83","aliases":{"mainnet":"a340dc0a4ec828ab","testnet":"31ad40c07a2a9788"}}},"networks":{"emulator":"127.0.0.1:3569","mainnet":"access.mainnet.nodes.onflow.org:9000","testnet":"access.devnet.nodes.onflow.org:9000"},"accounts":{"emulator-account":{"address":"f8d6e0586b0a20c7","key":{"type":"file","location":"emulator-account.pkey"}},"testnet-eth-affiliated-accounts":{"address":"6011e83f82b6fddb","key":{"type":"file","location":"testnet-eth-affiliated-accounts.pkey"}},"testnet-eth-utils":{"address":"6b3bdaa64e3383f2","key":{"type":"file","location":"testnet-eth-utils.pkey"}}},"deployments":{"emulator":{"emulator-account":["AddressUtils","StringUtils","ArrayUtils","ETHUtils","ETHAffiliatedAccounts"]},"testnet":{"testnet-eth-affiliated-accounts":["ETHAffiliatedAccounts"],"testnet-eth-utils":["ETHUtils"]}}}')},1089:(e,t)=>{"use strict";function r(){return"undefined"==typeof document&&"undefined"!=typeof navigator&&"ReactNative"===navigator.product}function n(){return"undefined"!=typeof process&&void 0!==process.versions&&void 0!==process.versions.node}Object.defineProperty(t,"__esModule",{value:!0}),t.isBrowser=t.isNode=t.isReactNative=void 0,t.isReactNative=r,t.isNode=n,t.isBrowser=function(){return!r()&&!n()}},1165:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=new Uint32Array([0,1,0,32898,2147483648,32906,2147483648,2147516416,0,32907,0,2147483649,2147483648,2147516545,2147483648,32777,0,138,0,136,0,2147516425,0,2147483658,0,2147516555,2147483648,139,2147483648,32905,2147483648,32771,2147483648,32770,2147483648,128,0,32778,2147483648,2147483658,2147483648,2147516545,2147483648,32896,0,2147483649,2147483648,2147516424]);t.default=r},1176:(e,t,r)=>{var n;!function(){"use strict";var i="input is invalid type",o="object"==typeof window,s=o?window:{};s.JS_SHA3_NO_WINDOW&&(o=!1);var a=!o&&"object"==typeof self;!s.JS_SHA3_NO_NODE_JS&&"object"==typeof process&&process.versions&&process.versions.node?s=r.g:a&&(s=self);var c=!s.JS_SHA3_NO_COMMON_JS&&e.exports,u=r.amdO,l=!s.JS_SHA3_NO_ARRAY_BUFFER&&"undefined"!=typeof ArrayBuffer,h="0123456789abcdef".split(""),f=[4,1024,262144,67108864],d=[0,8,16,24],p=[1,0,32898,0,32906,2147483648,2147516416,2147483648,32907,0,2147483649,0,2147516545,2147483648,32777,2147483648,138,0,136,0,2147516425,0,2147483658,0,2147516555,0,139,2147483648,32905,2147483648,32771,2147483648,32770,2147483648,128,2147483648,32778,0,2147483658,2147483648,2147516545,2147483648,32896,2147483648,2147483649,0,2147516424,2147483648],g=[224,256,384,512],m=[128,256],y=["hex","buffer","arrayBuffer","array","digest"],v={128:168,256:136};!s.JS_SHA3_NO_NODE_JS&&Array.isArray||(Array.isArray=function(e){return"[object Array]"===Object.prototype.toString.call(e)}),!l||!s.JS_SHA3_NO_ARRAY_BUFFER_IS_VIEW&&ArrayBuffer.isView||(ArrayBuffer.isView=function(e){return"object"==typeof e&&e.buffer&&e.buffer.constructor===ArrayBuffer});for(var b=function(e,t,r){return function(n){return new M(e,t,e).update(n)[r]()}},w=function(e,t,r){return function(n,i){return new M(e,t,i).update(n)[r]()}},E=function(e,t,r){return function(t,n,i,o){return k["cshake"+e].update(t,n,i,o)[r]()}},A=function(e,t,r){return function(t,n,i,o){return k["kmac"+e].update(t,n,i,o)[r]()}},_=function(e,t,r,n){for(var i=0;i<y.length;++i){var o=y[i];e[o]=t(r,n,o)}return e},x=function(e,t){var r=b(e,t,"hex");return r.create=function(){return new M(e,t,e)},r.update=function(e){return r.create().update(e)},_(r,b,e,t)},S=[{name:"keccak",padding:[1,256,65536,16777216],bits:g,createMethod:x},{name:"sha3",padding:[6,1536,393216,100663296],bits:g,createMethod:x},{name:"shake",padding:[31,7936,2031616,520093696],bits:m,createMethod:function(e,t){var r=w(e,t,"hex");return r.create=function(r){return new M(e,t,r)},r.update=function(e,t){return r.create(t).update(e)},_(r,w,e,t)}},{name:"cshake",padding:f,bits:m,createMethod:function(e,t){var r=v[e],n=E(e,0,"hex");return n.create=function(n,i,o){return i||o?new M(e,t,n).bytepad([i,o],r):k["shake"+e].create(n)},n.update=function(e,t,r,i){return n.create(t,r,i).update(e)},_(n,E,e,t)}},{name:"kmac",padding:f,bits:m,createMethod:function(e,t){var r=v[e],n=A(e,0,"hex");return n.create=function(n,i,o){return new L(e,t,i).bytepad(["KMAC",o],r).bytepad([n],r)},n.update=function(e,t,r,i){return n.create(e,r,i).update(t)},_(n,A,e,t)}}],k={},I=[],O=0;O<S.length;++O)for(var T=S[O],P=T.bits,R=0;R<P.length;++R){var N=T.name+"_"+P[R];if(I.push(N),k[N]=T.createMethod(P[R],T.padding),"sha3"!==T.name){var C=T.name+P[R];I.push(C),k[C]=k[N]}}function M(e,t,r){this.blocks=[],this.s=[],this.padding=t,this.outputBits=r,this.reset=!0,this.finalized=!1,this.block=0,this.start=0,this.blockCount=1600-(e<<1)>>5,this.byteCount=this.blockCount<<2,this.outputBlocks=r>>5,this.extraBytes=(31&r)>>3;for(var n=0;n<50;++n)this.s[n]=0}function L(e,t,r){M.call(this,e,t,r)}M.prototype.update=function(e){if(this.finalized)throw new Error("finalize already called");var t,r=typeof e;if("string"!==r){if("object"!==r)throw new Error(i);if(null===e)throw new Error(i);if(l&&e.constructor===ArrayBuffer)e=new Uint8Array(e);else if(!(Array.isArray(e)||l&&ArrayBuffer.isView(e)))throw new Error(i);t=!0}for(var n,o,s=this.blocks,a=this.byteCount,c=e.length,u=this.blockCount,h=0,f=this.s;h<c;){if(this.reset)for(this.reset=!1,s[0]=this.block,n=1;n<u+1;++n)s[n]=0;if(t)for(n=this.start;h<c&&n<a;++h)s[n>>2]|=e[h]<<d[3&n++];else for(n=this.start;h<c&&n<a;++h)(o=e.charCodeAt(h))<128?s[n>>2]|=o<<d[3&n++]:o<2048?(s[n>>2]|=(192|o>>6)<<d[3&n++],s[n>>2]|=(128|63&o)<<d[3&n++]):o<55296||o>=57344?(s[n>>2]|=(224|o>>12)<<d[3&n++],s[n>>2]|=(128|o>>6&63)<<d[3&n++],s[n>>2]|=(128|63&o)<<d[3&n++]):(o=65536+((1023&o)<<10|1023&e.charCodeAt(++h)),s[n>>2]|=(240|o>>18)<<d[3&n++],s[n>>2]|=(128|o>>12&63)<<d[3&n++],s[n>>2]|=(128|o>>6&63)<<d[3&n++],s[n>>2]|=(128|63&o)<<d[3&n++]);if(this.lastByteIndex=n,n>=a){for(this.start=n-a,this.block=s[u],n=0;n<u;++n)f[n]^=s[n];B(f),this.reset=!0}else this.start=n}return this},M.prototype.encode=function(e,t){var r=255&e,n=1,i=[r];for(r=255&(e>>=8);r>0;)i.unshift(r),r=255&(e>>=8),++n;return t?i.push(n):i.unshift(n),this.update(i),i.length},M.prototype.encodeString=function(e){var t,r=typeof e;if("string"!==r){if("object"!==r)throw new Error(i);if(null===e)throw new Error(i);if(l&&e.constructor===ArrayBuffer)e=new Uint8Array(e);else if(!(Array.isArray(e)||l&&ArrayBuffer.isView(e)))throw new Error(i);t=!0}var n=0,o=e.length;if(t)n=o;else for(var s=0;s<e.length;++s){var a=e.charCodeAt(s);a<128?n+=1:a<2048?n+=2:a<55296||a>=57344?n+=3:(a=65536+((1023&a)<<10|1023&e.charCodeAt(++s)),n+=4)}return n+=this.encode(8*n),this.update(e),n},M.prototype.bytepad=function(e,t){for(var r=this.encode(t),n=0;n<e.length;++n)r+=this.encodeString(e[n]);var i=t-r%t,o=[];return o.length=i,this.update(o),this},M.prototype.finalize=function(){if(!this.finalized){this.finalized=!0;var e=this.blocks,t=this.lastByteIndex,r=this.blockCount,n=this.s;if(e[t>>2]|=this.padding[3&t],this.lastByteIndex===this.byteCount)for(e[0]=e[r],t=1;t<r+1;++t)e[t]=0;for(e[r-1]|=2147483648,t=0;t<r;++t)n[t]^=e[t];B(n)}},M.prototype.toString=M.prototype.hex=function(){this.finalize();for(var e,t=this.blockCount,r=this.s,n=this.outputBlocks,i=this.extraBytes,o=0,s=0,a="";s<n;){for(o=0;o<t&&s<n;++o,++s)e=r[o],a+=h[e>>4&15]+h[15&e]+h[e>>12&15]+h[e>>8&15]+h[e>>20&15]+h[e>>16&15]+h[e>>28&15]+h[e>>24&15];s%t==0&&(B(r),o=0)}return i&&(e=r[o],a+=h[e>>4&15]+h[15&e],i>1&&(a+=h[e>>12&15]+h[e>>8&15]),i>2&&(a+=h[e>>20&15]+h[e>>16&15])),a},M.prototype.arrayBuffer=function(){this.finalize();var e,t=this.blockCount,r=this.s,n=this.outputBlocks,i=this.extraBytes,o=0,s=0,a=this.outputBits>>3;e=i?new ArrayBuffer(n+1<<2):new ArrayBuffer(a);for(var c=new Uint32Array(e);s<n;){for(o=0;o<t&&s<n;++o,++s)c[s]=r[o];s%t==0&&B(r)}return i&&(c[o]=r[o],e=e.slice(0,a)),e},M.prototype.buffer=M.prototype.arrayBuffer,M.prototype.digest=M.prototype.array=function(){this.finalize();for(var e,t,r=this.blockCount,n=this.s,i=this.outputBlocks,o=this.extraBytes,s=0,a=0,c=[];a<i;){for(s=0;s<r&&a<i;++s,++a)e=a<<2,t=n[s],c[e]=255&t,c[e+1]=t>>8&255,c[e+2]=t>>16&255,c[e+3]=t>>24&255;a%r==0&&B(n)}return o&&(e=a<<2,t=n[s],c[e]=255&t,o>1&&(c[e+1]=t>>8&255),o>2&&(c[e+2]=t>>16&255)),c},L.prototype=new M,L.prototype.finalize=function(){return this.encode(this.outputBits,!0),M.prototype.finalize.call(this)};var B=function(e){var t,r,n,i,o,s,a,c,u,l,h,f,d,g,m,y,v,b,w,E,A,_,x,S,k,I,O,T,P,R,N,C,M,L,B,U,D,j,F,z,q,G,H,K,V,W,$,J,Y,Q,X,Z,ee,te,re,ne,ie,oe,se,ae,ce,ue,le;for(n=0;n<48;n+=2)i=e[0]^e[10]^e[20]^e[30]^e[40],o=e[1]^e[11]^e[21]^e[31]^e[41],s=e[2]^e[12]^e[22]^e[32]^e[42],a=e[3]^e[13]^e[23]^e[33]^e[43],c=e[4]^e[14]^e[24]^e[34]^e[44],u=e[5]^e[15]^e[25]^e[35]^e[45],l=e[6]^e[16]^e[26]^e[36]^e[46],h=e[7]^e[17]^e[27]^e[37]^e[47],t=(f=e[8]^e[18]^e[28]^e[38]^e[48])^(s<<1|a>>>31),r=(d=e[9]^e[19]^e[29]^e[39]^e[49])^(a<<1|s>>>31),e[0]^=t,e[1]^=r,e[10]^=t,e[11]^=r,e[20]^=t,e[21]^=r,e[30]^=t,e[31]^=r,e[40]^=t,e[41]^=r,t=i^(c<<1|u>>>31),r=o^(u<<1|c>>>31),e[2]^=t,e[3]^=r,e[12]^=t,e[13]^=r,e[22]^=t,e[23]^=r,e[32]^=t,e[33]^=r,e[42]^=t,e[43]^=r,t=s^(l<<1|h>>>31),r=a^(h<<1|l>>>31),e[4]^=t,e[5]^=r,e[14]^=t,e[15]^=r,e[24]^=t,e[25]^=r,e[34]^=t,e[35]^=r,e[44]^=t,e[45]^=r,t=c^(f<<1|d>>>31),r=u^(d<<1|f>>>31),e[6]^=t,e[7]^=r,e[16]^=t,e[17]^=r,e[26]^=t,e[27]^=r,e[36]^=t,e[37]^=r,e[46]^=t,e[47]^=r,t=l^(i<<1|o>>>31),r=h^(o<<1|i>>>31),e[8]^=t,e[9]^=r,e[18]^=t,e[19]^=r,e[28]^=t,e[29]^=r,e[38]^=t,e[39]^=r,e[48]^=t,e[49]^=r,g=e[0],m=e[1],W=e[11]<<4|e[10]>>>28,$=e[10]<<4|e[11]>>>28,T=e[20]<<3|e[21]>>>29,P=e[21]<<3|e[20]>>>29,ae=e[31]<<9|e[30]>>>23,ce=e[30]<<9|e[31]>>>23,G=e[40]<<18|e[41]>>>14,H=e[41]<<18|e[40]>>>14,L=e[2]<<1|e[3]>>>31,B=e[3]<<1|e[2]>>>31,y=e[13]<<12|e[12]>>>20,v=e[12]<<12|e[13]>>>20,J=e[22]<<10|e[23]>>>22,Y=e[23]<<10|e[22]>>>22,R=e[33]<<13|e[32]>>>19,N=e[32]<<13|e[33]>>>19,ue=e[42]<<2|e[43]>>>30,le=e[43]<<2|e[42]>>>30,te=e[5]<<30|e[4]>>>2,re=e[4]<<30|e[5]>>>2,U=e[14]<<6|e[15]>>>26,D=e[15]<<6|e[14]>>>26,b=e[25]<<11|e[24]>>>21,w=e[24]<<11|e[25]>>>21,Q=e[34]<<15|e[35]>>>17,X=e[35]<<15|e[34]>>>17,C=e[45]<<29|e[44]>>>3,M=e[44]<<29|e[45]>>>3,S=e[6]<<28|e[7]>>>4,k=e[7]<<28|e[6]>>>4,ne=e[17]<<23|e[16]>>>9,ie=e[16]<<23|e[17]>>>9,j=e[26]<<25|e[27]>>>7,F=e[27]<<25|e[26]>>>7,E=e[36]<<21|e[37]>>>11,A=e[37]<<21|e[36]>>>11,Z=e[47]<<24|e[46]>>>8,ee=e[46]<<24|e[47]>>>8,K=e[8]<<27|e[9]>>>5,V=e[9]<<27|e[8]>>>5,I=e[18]<<20|e[19]>>>12,O=e[19]<<20|e[18]>>>12,oe=e[29]<<7|e[28]>>>25,se=e[28]<<7|e[29]>>>25,z=e[38]<<8|e[39]>>>24,q=e[39]<<8|e[38]>>>24,_=e[48]<<14|e[49]>>>18,x=e[49]<<14|e[48]>>>18,e[0]=g^~y&b,e[1]=m^~v&w,e[10]=S^~I&T,e[11]=k^~O&P,e[20]=L^~U&j,e[21]=B^~D&F,e[30]=K^~W&J,e[31]=V^~$&Y,e[40]=te^~ne&oe,e[41]=re^~ie&se,e[2]=y^~b&E,e[3]=v^~w&A,e[12]=I^~T&R,e[13]=O^~P&N,e[22]=U^~j&z,e[23]=D^~F&q,e[32]=W^~J&Q,e[33]=$^~Y&X,e[42]=ne^~oe&ae,e[43]=ie^~se&ce,e[4]=b^~E&_,e[5]=w^~A&x,e[14]=T^~R&C,e[15]=P^~N&M,e[24]=j^~z&G,e[25]=F^~q&H,e[34]=J^~Q&Z,e[35]=Y^~X&ee,e[44]=oe^~ae&ue,e[45]=se^~ce&le,e[6]=E^~_&g,e[7]=A^~x&m,e[16]=R^~C&S,e[17]=N^~M&k,e[26]=z^~G&L,e[27]=q^~H&B,e[36]=Q^~Z&K,e[37]=X^~ee&V,e[46]=ae^~ue&te,e[47]=ce^~le&re,e[8]=_^~g&y,e[9]=x^~m&v,e[18]=C^~S&I,e[19]=M^~k&O,e[28]=G^~L&U,e[29]=H^~B&D,e[38]=Z^~K&W,e[39]=ee^~V&$,e[48]=ue^~te&ne,e[49]=le^~re&ie,e[0]^=p[n],e[1]^=p[n+1]};if(c)e.exports=k;else{for(O=0;O<I.length;++O)s[I[O]]=k[I[O]];u&&(void 0===(n=function(){return k}.call(t,r,t,e))||(e.exports=n))}}()},1196:e=>{"use strict";e.exports=function(e,t){return function(r,n){var i=2*n,o=2*t;r[i]=e[o],r[i+1]=e[o+1]}}},1861:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ONE_YEAR=t.FOUR_WEEKS=t.THREE_WEEKS=t.TWO_WEEKS=t.ONE_WEEK=t.THIRTY_DAYS=t.SEVEN_DAYS=t.FIVE_DAYS=t.THREE_DAYS=t.ONE_DAY=t.TWENTY_FOUR_HOURS=t.TWELVE_HOURS=t.SIX_HOURS=t.THREE_HOURS=t.ONE_HOUR=t.SIXTY_MINUTES=t.THIRTY_MINUTES=t.TEN_MINUTES=t.FIVE_MINUTES=t.ONE_MINUTE=t.SIXTY_SECONDS=t.THIRTY_SECONDS=t.TEN_SECONDS=t.FIVE_SECONDS=t.ONE_SECOND=void 0,t.ONE_SECOND=1,t.FIVE_SECONDS=5,t.TEN_SECONDS=10,t.THIRTY_SECONDS=30,t.SIXTY_SECONDS=60,t.ONE_MINUTE=t.SIXTY_SECONDS,t.FIVE_MINUTES=5*t.ONE_MINUTE,t.TEN_MINUTES=10*t.ONE_MINUTE,t.THIRTY_MINUTES=30*t.ONE_MINUTE,t.SIXTY_MINUTES=60*t.ONE_MINUTE,t.ONE_HOUR=t.SIXTY_MINUTES,t.THREE_HOURS=3*t.ONE_HOUR,t.SIX_HOURS=6*t.ONE_HOUR,t.TWELVE_HOURS=12*t.ONE_HOUR,t.TWENTY_FOUR_HOURS=24*t.ONE_HOUR,t.ONE_DAY=t.TWENTY_FOUR_HOURS,t.THREE_DAYS=3*t.ONE_DAY,t.FIVE_DAYS=5*t.ONE_DAY,t.SEVEN_DAYS=7*t.ONE_DAY,t.THIRTY_DAYS=30*t.ONE_DAY,t.ONE_WEEK=t.SEVEN_DAYS,t.TWO_WEEKS=2*t.ONE_WEEK,t.THREE_WEEKS=3*t.ONE_WEEK,t.FOUR_WEEKS=4*t.ONE_WEEK,t.ONE_YEAR=365*t.ONE_DAY},1911:(e,t,r)=>{"use strict";var n=r(7426),i=r(7766);function o(){if(!(this instanceof o))return new o;i.call(this),this.h=[3418070365,3238371032,1654270250,914150663,2438529370,812702999,355462360,4144912697,1731405415,4290775857,2394180231,1750603025,3675008525,1694076839,1203062813,3204075428]}n.inherits(o,i),e.exports=o,o.blockSize=1024,o.outSize=384,o.hmacStrength=192,o.padLength=128,o.prototype._digest=function(e){return"hex"===e?n.toHex32(this.h.slice(0,12),"big"):n.split32(this.h.slice(0,12),"big")}},2010:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),r(5215).__exportStar(r(3093),t)},2063:(e,t,r)=>{"use strict";t.g=void 0;const n=r(8196);t.g=function(){let e,t;try{e=n.getDocumentOrThrow(),t=n.getLocationOrThrow()}catch(e){return null}function r(...t){const r=e.getElementsByTagName("meta");for(let e=0;e<r.length;e++){const n=r[e],i=["itemprop","property","name"].map((e=>n.getAttribute(e))).filter((e=>!!e&&t.includes(e)));if(i.length&&i){const e=n.getAttribute("content");if(e)return e}}return""}const i=function(){let t=r("name","og:site_name","og:title","twitter:title");return t||(t=e.title),t}();return{description:r("description","og:description","twitter:description","keywords"),url:t.origin,icons:function(){const r=e.getElementsByTagName("link"),n=[];for(let e=0;e<r.length;e++){const i=r[e],o=i.getAttribute("rel");if(o&&o.toLowerCase().indexOf("icon")>-1){const e=i.getAttribute("href");if(e)if(-1===e.toLowerCase().indexOf("https:")&&-1===e.toLowerCase().indexOf("http:")&&0!==e.indexOf("//")){let r=t.protocol+"//"+t.host;if(0===e.indexOf("/"))r+=e;else{const n=t.pathname.split("/");n.pop(),r+=n.join("/")+"/"+e}n.push(r)}else if(0===e.indexOf("//")){const r=t.protocol+e;n.push(r)}else n.push(e)}}return n}(),name:i}}},2287:(e,t,r)=>{"use strict";var n=r(7426),i=r(6166),o=r(6225),s=r(3349),a=n.sum32,c=n.sum32_4,u=n.sum32_5,l=o.ch32,h=o.maj32,f=o.s0_256,d=o.s1_256,p=o.g0_256,g=o.g1_256,m=i.BlockHash,y=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function v(){if(!(this instanceof v))return new v;m.call(this),this.h=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],this.k=y,this.W=new Array(64)}n.inherits(v,m),e.exports=v,v.blockSize=512,v.outSize=256,v.hmacStrength=192,v.padLength=64,v.prototype._update=function(e,t){for(var r=this.W,n=0;n<16;n++)r[n]=e[t+n];for(;n<r.length;n++)r[n]=c(g(r[n-2]),r[n-7],p(r[n-15]),r[n-16]);var i=this.h[0],o=this.h[1],m=this.h[2],y=this.h[3],v=this.h[4],b=this.h[5],w=this.h[6],E=this.h[7];for(s(this.k.length===r.length),n=0;n<r.length;n++){var A=u(E,d(v),l(v,b,w),this.k[n],r[n]),_=a(f(i),h(i,o,m));E=w,w=b,b=v,v=a(y,A),y=m,m=o,o=i,i=a(A,_)}this.h[0]=a(this.h[0],i),this.h[1]=a(this.h[1],o),this.h[2]=a(this.h[2],m),this.h[3]=a(this.h[3],y),this.h[4]=a(this.h[4],v),this.h[5]=a(this.h[5],b),this.h[6]=a(this.h[6],w),this.h[7]=a(this.h[7],E)},v.prototype._digest=function(e){return"hex"===e?n.toHex32(this.h,"big"):n.split32(this.h,"big")}},2347:e=>{var t="testnet";e.exports={network:t,fclConfigInfo:{emulator:{accessNode:"http://127.0.0.1:8888",discoveryWallet:"http://localhost:8701/fcl/authn",discoveryAuthInclude:[]},testnet:{accessNode:"https://rest-testnet.onflow.org",discoveryWallet:"https://fcl-discovery.onflow.org/testnet/authn",discoveryAuthnEndpoint:"https://fcl-discovery.onflow.org/api/testnet/authn",discoveryAuthInclude:["0x82ec283f88a62e65","0x9d2e44203cb13051"]},mainnet:{accessNode:"https://rest-mainnet.onflow.org",discoveryWallet:"https://fcl-discovery.onflow.org/authn",discoveryAuthnEndpoint:"https://fcl-discovery.onflow.org/api/authn",discoveryAuthInclude:["0xead892083b3e2c6c","0xe5cd26afebe62781"]}},updateAuthUI:function(e){var r=document.getElementById("loginButton"),n=document.getElementById("logoutButton"),i=document.getElementById("userAddress");if(e.loggedIn){r.style.display="none",n.style.display="block";var o="https://".concat(t,".flowview.app/account/").concat(e.addr);i.innerHTML='Welcome, <a href="'.concat(o,'" target="_blank" class="user-link">').concat(e.addr,"</a>!")}else r.style.display="block",n.style.display="none",i.textContent=""}}},2553:function(e){var t,r;e.exports=(t={418:function(e,t){!function(e,t){for(var r in t)e[r]=t[r]}(t,function(e){var t={};function r(n){if(t[n])return t[n].exports;var i=t[n]={i:n,l:!1,exports:{}};return e[n].call(i.exports,i,i.exports,r),i.l=!0,i.exports}return r.m=e,r.c=t,r.i=function(e){return e},r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:n})},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=1)}([function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(3),i=function(){function e(e,t){void 0===e&&(e={}),void 0===t&&(t={splitValues:!1});var r,i=this;this.headersMap={},e&&("undefined"!=typeof Headers&&e instanceof Headers?n.getHeaderKeys(e).forEach((function(r){n.getHeaderValues(e,r).forEach((function(e){t.splitValues?i.append(r,n.splitHeaderValue(e)):i.append(r,e)}))})):"object"==typeof(r=e)&&"object"==typeof r.headersMap&&"function"==typeof r.forEach?e.forEach((function(e,t){i.append(e,t)})):"undefined"!=typeof Map&&e instanceof Map?e.forEach((function(e,t){i.append(t,e)})):"string"==typeof e?this.appendFromString(e):"object"==typeof e&&Object.getOwnPropertyNames(e).forEach((function(t){var r=e[t];Array.isArray(r)?r.forEach((function(e){i.append(t,e)})):i.append(t,r)})))}return e.prototype.appendFromString=function(e){for(var t=e.split("\r\n"),r=0;r<t.length;r++){var n=t[r],i=n.indexOf(":");if(i>0){var o=n.substring(0,i).trim(),s=n.substring(i+1).trim();this.append(o,s)}}},e.prototype.delete=function(e,t){var r=n.normalizeName(e);if(void 0===t)delete this.headersMap[r];else{var i=this.headersMap[r];if(i){var o=i.indexOf(t);o>=0&&i.splice(o,1),0===i.length&&delete this.headersMap[r]}}},e.prototype.append=function(e,t){var r=this,i=n.normalizeName(e);Array.isArray(this.headersMap[i])||(this.headersMap[i]=[]),Array.isArray(t)?t.forEach((function(e){r.headersMap[i].push(n.normalizeValue(e))})):this.headersMap[i].push(n.normalizeValue(t))},e.prototype.set=function(e,t){var r=n.normalizeName(e);if(Array.isArray(t)){var i=[];t.forEach((function(e){i.push(n.normalizeValue(e))})),this.headersMap[r]=i}else this.headersMap[r]=[n.normalizeValue(t)]},e.prototype.has=function(e,t){var r=this.headersMap[n.normalizeName(e)];if(!Array.isArray(r))return!1;if(void 0!==t){var i=n.normalizeValue(t);return r.indexOf(i)>=0}return!0},e.prototype.get=function(e){var t=this.headersMap[n.normalizeName(e)];return void 0!==t?t.concat():[]},e.prototype.forEach=function(e){var t=this;Object.getOwnPropertyNames(this.headersMap).forEach((function(r){e(r,t.headersMap[r])}),this)},e.prototype.toHeaders=function(){if("undefined"!=typeof Headers){var e=new Headers;return this.forEach((function(t,r){r.forEach((function(r){e.append(t,r)}))})),e}throw new Error("Headers class is not defined")},e}();t.BrowserHeaders=i},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(0);t.BrowserHeaders=n.BrowserHeaders},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.iterateHeaders=function(e,t){for(var r=e[Symbol.iterator](),n=r.next();!n.done;)t(n.value[0]),n=r.next()},t.iterateHeadersKeys=function(e,t){for(var r=e.keys(),n=r.next();!n.done;)t(n.value),n=r.next()}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(2);t.normalizeName=function(e){if("string"!=typeof e&&(e=String(e)),/[^a-z0-9\-#$%&'*+.\^_`|~]/i.test(e))throw new TypeError("Invalid character in header field name");return e.toLowerCase()},t.normalizeValue=function(e){return"string"!=typeof e&&(e=String(e)),e},t.getHeaderValues=function(e,t){var r=e;if(r instanceof Headers&&r.getAll)return r.getAll(t);var n=r.get(t);return n&&"string"==typeof n?[n]:n},t.getHeaderKeys=function(e){var t=e,r={},i=[];return t.keys?n.iterateHeadersKeys(t,(function(e){r[e]||(r[e]=!0,i.push(e))})):t.forEach?t.forEach((function(e,t){r[t]||(r[t]=!0,i.push(t))})):n.iterateHeaders(t,(function(e){var t=e[0];r[t]||(r[t]=!0,i.push(t))})),i},t.splitHeaderValue=function(e){var t=[];return e.split(", ").forEach((function(e){e.split(",").forEach((function(e){t.push(e)}))})),t}}]))},617:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ChunkParser=t.ChunkType=t.encodeASCII=t.decodeASCII=void 0;var n,i=r(65);function o(e){return 9===(t=e)||10===t||13===t||e>=32&&e<=126;var t}function s(e){for(var t=0;t!==e.length;++t)if(!o(e[t]))throw new Error("Metadata is not valid (printable) ASCII");return String.fromCharCode.apply(String,Array.prototype.slice.call(e))}function a(e){return!(128&~e.getUint8(0))}function c(e){return e.getUint32(1,!1)}function u(e,t,r){return e.byteLength-t>=r}function l(e,t,r){if(e.slice)return e.slice(t,r);var n=e.length;void 0!==r&&(n=r);for(var i=new Uint8Array(n-t),o=0,s=t;s<n;s++)i[o++]=e[s];return i}t.decodeASCII=s,t.encodeASCII=function(e){for(var t=new Uint8Array(e.length),r=0;r!==e.length;++r){var n=e.charCodeAt(r);if(!o(n))throw new Error("Metadata contains invalid ASCII");t[r]=n}return t},function(e){e[e.MESSAGE=1]="MESSAGE",e[e.TRAILERS=2]="TRAILERS"}(n=t.ChunkType||(t.ChunkType={}));var h=function(){function e(){this.buffer=null,this.position=0}return e.prototype.parse=function(e,t){if(0===e.length&&t)return[];var r,o=[];if(null==this.buffer)this.buffer=e,this.position=0;else if(this.position===this.buffer.byteLength)this.buffer=e,this.position=0;else{var h=this.buffer.byteLength-this.position,f=new Uint8Array(h+e.byteLength),d=l(this.buffer,this.position);f.set(d,0);var p=new Uint8Array(e);f.set(p,h),this.buffer=f,this.position=0}for(;;){if(!u(this.buffer,this.position,5))return o;var g=l(this.buffer,this.position,this.position+5),m=new DataView(g.buffer,g.byteOffset,g.byteLength),y=c(m);if(!u(this.buffer,this.position,5+y))return o;var v=l(this.buffer,this.position+5,this.position+5+y);if(this.position+=5+y,a(m))return o.push({chunkType:n.TRAILERS,trailers:(r=v,new i.Metadata(s(r)))}),o;o.push({chunkType:n.MESSAGE,data:v})}},e}();t.ChunkParser=h},8:function(e,t){"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.httpStatusToCode=t.Code=void 0,function(e){e[e.OK=0]="OK",e[e.Canceled=1]="Canceled",e[e.Unknown=2]="Unknown",e[e.InvalidArgument=3]="InvalidArgument",e[e.DeadlineExceeded=4]="DeadlineExceeded",e[e.NotFound=5]="NotFound",e[e.AlreadyExists=6]="AlreadyExists",e[e.PermissionDenied=7]="PermissionDenied",e[e.ResourceExhausted=8]="ResourceExhausted",e[e.FailedPrecondition=9]="FailedPrecondition",e[e.Aborted=10]="Aborted",e[e.OutOfRange=11]="OutOfRange",e[e.Unimplemented=12]="Unimplemented",e[e.Internal=13]="Internal",e[e.Unavailable=14]="Unavailable",e[e.DataLoss=15]="DataLoss",e[e.Unauthenticated=16]="Unauthenticated"}(r=t.Code||(t.Code={})),t.httpStatusToCode=function(e){switch(e){case 0:return r.Internal;case 200:return r.OK;case 400:return r.InvalidArgument;case 401:return r.Unauthenticated;case 403:return r.PermissionDenied;case 404:return r.NotFound;case 409:return r.Aborted;case 412:return r.FailedPrecondition;case 429:return r.ResourceExhausted;case 499:return r.Canceled;case 500:default:return r.Unknown;case 501:return r.Unimplemented;case 503:return r.Unavailable;case 504:return r.DeadlineExceeded}}},934:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.client=void 0;var n=r(65),i=r(617),o=r(8),s=r(346),a=r(57),c=r(882);t.client=function(e,t){return new u(e,t)};var u=function(){function e(e,t){this.started=!1,this.sentFirstMessage=!1,this.completed=!1,this.closed=!1,this.finishedSending=!1,this.onHeadersCallbacks=[],this.onMessageCallbacks=[],this.onEndCallbacks=[],this.parser=new i.ChunkParser,this.methodDefinition=e,this.props=t,this.createTransport()}return e.prototype.createTransport=function(){var e=this.props.host+"/"+this.methodDefinition.service.serviceName+"/"+this.methodDefinition.methodName,t={methodDefinition:this.methodDefinition,debug:this.props.debug||!1,url:e,onHeaders:this.onTransportHeaders.bind(this),onChunk:this.onTransportChunk.bind(this),onEnd:this.onTransportEnd.bind(this)};this.props.transport?this.transport=this.props.transport(t):this.transport=a.makeDefaultTransport(t)},e.prototype.onTransportHeaders=function(e,t){if(this.props.debug&&s.debug("onHeaders",e,t),this.closed)this.props.debug&&s.debug("grpc.onHeaders received after request was closed - ignoring");else if(0===t);else{this.responseHeaders=e,this.props.debug&&s.debug("onHeaders.responseHeaders",JSON.stringify(this.responseHeaders,null,2));var r=l(e);this.props.debug&&s.debug("onHeaders.gRPCStatus",r);var n=r&&r>=0?r:o.httpStatusToCode(t);this.props.debug&&s.debug("onHeaders.code",n);var i=e.get("grpc-message")||[];if(this.props.debug&&s.debug("onHeaders.gRPCMessage",i),this.rawOnHeaders(e),n!==o.Code.OK){var a=this.decodeGRPCStatus(i[0]);this.rawOnError(n,a,e)}}},e.prototype.onTransportChunk=function(e){var t=this;if(this.closed)this.props.debug&&s.debug("grpc.onChunk received after request was closed - ignoring");else{var r=[];try{r=this.parser.parse(e)}catch(e){return this.props.debug&&s.debug("onChunk.parsing error",e,e.message),void this.rawOnError(o.Code.Internal,"parsing error: "+e.message)}r.forEach((function(e){if(e.chunkType===i.ChunkType.MESSAGE){var r=t.methodDefinition.responseType.deserializeBinary(e.data);t.rawOnMessage(r)}else e.chunkType===i.ChunkType.TRAILERS&&(t.responseHeaders?(t.responseTrailers=new n.Metadata(e.trailers),t.props.debug&&s.debug("onChunk.trailers",t.responseTrailers)):(t.responseHeaders=new n.Metadata(e.trailers),t.rawOnHeaders(t.responseHeaders)))}))}},e.prototype.onTransportEnd=function(){if(this.props.debug&&s.debug("grpc.onEnd"),this.closed)this.props.debug&&s.debug("grpc.onEnd received after request was closed - ignoring");else if(void 0!==this.responseTrailers){var e=l(this.responseTrailers);if(null!==e){var t=this.responseTrailers.get("grpc-message"),r=this.decodeGRPCStatus(t[0]);this.rawOnEnd(e,r,this.responseTrailers)}else this.rawOnError(o.Code.Internal,"Response closed without grpc-status (Trailers provided)")}else{if(void 0===this.responseHeaders)return void this.rawOnError(o.Code.Unknown,"Response closed without headers");var n=l(this.responseHeaders),i=this.responseHeaders.get("grpc-message");if(this.props.debug&&s.debug("grpc.headers only response ",n,i),null===n)return void this.rawOnEnd(o.Code.Unknown,"Response closed without grpc-status (Headers only)",this.responseHeaders);var a=this.decodeGRPCStatus(i[0]);this.rawOnEnd(n,a,this.responseHeaders)}},e.prototype.decodeGRPCStatus=function(e){if(!e)return"";try{return decodeURIComponent(e)}catch(t){return e}},e.prototype.rawOnEnd=function(e,t,r){var n=this;this.props.debug&&s.debug("rawOnEnd",e,t,r),this.completed||(this.completed=!0,this.onEndCallbacks.forEach((function(i){if(!n.closed)try{i(e,t,r)}catch(e){setTimeout((function(){throw e}),0)}})))},e.prototype.rawOnHeaders=function(e){this.props.debug&&s.debug("rawOnHeaders",e),this.completed||this.onHeadersCallbacks.forEach((function(t){try{t(e)}catch(e){setTimeout((function(){throw e}),0)}}))},e.prototype.rawOnError=function(e,t,r){var i=this;void 0===r&&(r=new n.Metadata),this.props.debug&&s.debug("rawOnError",e,t),this.completed||(this.completed=!0,this.onEndCallbacks.forEach((function(n){if(!i.closed)try{n(e,t,r)}catch(e){setTimeout((function(){throw e}),0)}})))},e.prototype.rawOnMessage=function(e){var t=this;this.props.debug&&s.debug("rawOnMessage",e.toObject()),this.completed||this.closed||this.onMessageCallbacks.forEach((function(r){if(!t.closed)try{r(e)}catch(e){setTimeout((function(){throw e}),0)}}))},e.prototype.onHeaders=function(e){this.onHeadersCallbacks.push(e)},e.prototype.onMessage=function(e){this.onMessageCallbacks.push(e)},e.prototype.onEnd=function(e){this.onEndCallbacks.push(e)},e.prototype.start=function(e){if(this.started)throw new Error("Client already started - cannot .start()");this.started=!0;var t=new n.Metadata(e||{});t.set("content-type","application/grpc-web+proto"),t.set("x-grpc-web","1"),this.transport.start(t)},e.prototype.send=function(e){if(!this.started)throw new Error("Client not started - .start() must be called before .send()");if(this.closed)throw new Error("Client already closed - cannot .send()");if(this.finishedSending)throw new Error("Client already finished sending - cannot .send()");if(!this.methodDefinition.requestStream&&this.sentFirstMessage)throw new Error("Message already sent for non-client-streaming method - cannot .send()");this.sentFirstMessage=!0;var t=c.frameRequest(e);this.transport.sendMessage(t)},e.prototype.finishSend=function(){if(!this.started)throw new Error("Client not started - .finishSend() must be called before .close()");if(this.closed)throw new Error("Client already closed - cannot .send()");if(this.finishedSending)throw new Error("Client already finished sending - cannot .finishSend()");this.finishedSending=!0,this.transport.finishSend()},e.prototype.close=function(){if(!this.started)throw new Error("Client not started - .start() must be called before .close()");if(this.closed)throw new Error("Client already closed - cannot .close()");this.closed=!0,this.props.debug&&s.debug("request.abort aborting request"),this.transport.cancel()},e}();function l(e){var t=e.get("grpc-status")||[];if(t.length>0)try{var r=t[0];return parseInt(r,10)}catch(e){return null}return null}},346:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.debug=void 0,t.debug=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];console.debug?console.debug.apply(null,e):console.log.apply(null,e)}},607:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.grpc=void 0;var n,i=r(418),o=r(57),s=r(229),a=r(540),c=r(210),u=r(859),l=r(8),h=r(938),f=r(35),d=r(934);(n=t.grpc||(t.grpc={})).setDefaultTransport=o.setDefaultTransportFactory,n.CrossBrowserHttpTransport=u.CrossBrowserHttpTransport,n.FetchReadableStreamTransport=s.FetchReadableStreamTransport,n.XhrTransport=c.XhrTransport,n.WebsocketTransport=a.WebsocketTransport,n.Code=l.Code,n.Metadata=i.BrowserHeaders,n.client=function(e,t){return d.client(e,t)},n.invoke=h.invoke,n.unary=f.unary},938:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.invoke=void 0;var n=r(934);t.invoke=function(e,t){if(e.requestStream)throw new Error(".invoke cannot be used with client-streaming methods. Use .client instead.");var r=n.client(e,{host:t.host,transport:t.transport,debug:t.debug});return t.onHeaders&&r.onHeaders(t.onHeaders),t.onMessage&&r.onMessage(t.onMessage),t.onEnd&&r.onEnd(t.onEnd),r.start(t.metadata),r.send(t.request),r.finishSend(),{close:function(){r.close()}}}},65:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Metadata=void 0;var n=r(418);Object.defineProperty(t,"Metadata",{enumerable:!0,get:function(){return n.BrowserHeaders}})},57:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.makeDefaultTransport=t.setDefaultTransportFactory=void 0;var n=r(859),i=function(e){return n.CrossBrowserHttpTransport({withCredentials:!1})(e)};t.setDefaultTransportFactory=function(e){i=e},t.makeDefaultTransport=function(e){return i(e)}},229:function(e,t,r){"use strict";var n=this&&this.__assign||function(){return(n=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.detectFetchSupport=t.FetchReadableStreamTransport=void 0;var i=r(65),o=r(346);t.FetchReadableStreamTransport=function(e){return function(t){return function(e,t){return e.debug&&o.debug("fetchRequest",e),new s(e,t)}(t,e)}};var s=function(){function e(e,t){this.cancelled=!1,this.controller=self.AbortController&&new AbortController,this.options=e,this.init=t}return e.prototype.pump=function(e,t){var r=this;if(this.reader=e,this.cancelled)return this.options.debug&&o.debug("Fetch.pump.cancel at first pump"),void this.reader.cancel().catch((function(e){r.options.debug&&o.debug("Fetch.pump.reader.cancel exception",e)}));this.reader.read().then((function(e){if(e.done)return r.options.onEnd(),t;r.options.onChunk(e.value),r.pump(r.reader,t)})).catch((function(e){r.cancelled?r.options.debug&&o.debug("Fetch.catch - request cancelled"):(r.cancelled=!0,r.options.debug&&o.debug("Fetch.catch",e.message),r.options.onEnd(e))}))},e.prototype.send=function(e){var t=this;fetch(this.options.url,n(n({},this.init),{headers:this.metadata.toHeaders(),method:"POST",body:e,signal:this.controller&&this.controller.signal})).then((function(e){if(t.options.debug&&o.debug("Fetch.response",e),t.options.onHeaders(new i.Metadata(e.headers),e.status),!e.body)return e;t.pump(e.body.getReader(),e)})).catch((function(e){t.cancelled?t.options.debug&&o.debug("Fetch.catch - request cancelled"):(t.cancelled=!0,t.options.debug&&o.debug("Fetch.catch",e.message),t.options.onEnd(e))}))},e.prototype.sendMessage=function(e){this.send(e)},e.prototype.finishSend=function(){},e.prototype.start=function(e){this.metadata=e},e.prototype.cancel=function(){var e=this;this.cancelled?this.options.debug&&o.debug("Fetch.cancel already cancelled"):(this.cancelled=!0,this.controller?(this.options.debug&&o.debug("Fetch.cancel.controller.abort"),this.controller.abort()):this.options.debug&&o.debug("Fetch.cancel.missing abort controller"),this.reader?(this.options.debug&&o.debug("Fetch.cancel.reader.cancel"),this.reader.cancel().catch((function(t){e.options.debug&&o.debug("Fetch.cancel.reader.cancel exception",t)}))):this.options.debug&&o.debug("Fetch.cancel before reader"))},e}();t.detectFetchSupport=function(){return"undefined"!=typeof Response&&Response.prototype.hasOwnProperty("body")&&"function"==typeof Headers}},859:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CrossBrowserHttpTransport=void 0;var n=r(229),i=r(210);t.CrossBrowserHttpTransport=function(e){if(n.detectFetchSupport()){var t={credentials:e.withCredentials?"include":"same-origin"};return n.FetchReadableStreamTransport(t)}return i.XhrTransport({withCredentials:e.withCredentials})}},210:function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0}),t.stringToArrayBuffer=t.MozChunkedArrayBufferXHR=t.XHR=t.XhrTransport=void 0;var o=r(65),s=r(346),a=r(849);t.XhrTransport=function(e){return function(t){if(a.detectMozXHRSupport())return new u(t,e);if(a.detectXHROverrideMimeTypeSupport())return new c(t,e);throw new Error("This environment's XHR implementation cannot support binary transfer.")}};var c=function(){function e(e,t){this.options=e,this.init=t}return e.prototype.onProgressEvent=function(){this.options.debug&&s.debug("XHR.onProgressEvent.length: ",this.xhr.response.length);var e=this.xhr.response.substr(this.index);this.index=this.xhr.response.length;var t=h(e);this.options.onChunk(t)},e.prototype.onLoadEvent=function(){this.options.debug&&s.debug("XHR.onLoadEvent"),this.options.onEnd()},e.prototype.onStateChange=function(){this.options.debug&&s.debug("XHR.onStateChange",this.xhr.readyState),this.xhr.readyState===XMLHttpRequest.HEADERS_RECEIVED&&this.options.onHeaders(new o.Metadata(this.xhr.getAllResponseHeaders()),this.xhr.status)},e.prototype.sendMessage=function(e){this.xhr.send(e)},e.prototype.finishSend=function(){},e.prototype.start=function(e){var t=this;this.metadata=e;var r=new XMLHttpRequest;this.xhr=r,r.open("POST",this.options.url),this.configureXhr(),this.metadata.forEach((function(e,t){r.setRequestHeader(e,t.join(", "))})),r.withCredentials=Boolean(this.init.withCredentials),r.addEventListener("readystatechange",this.onStateChange.bind(this)),r.addEventListener("progress",this.onProgressEvent.bind(this)),r.addEventListener("loadend",this.onLoadEvent.bind(this)),r.addEventListener("error",(function(e){t.options.debug&&s.debug("XHR.error",e),t.options.onEnd(e.error)}))},e.prototype.configureXhr=function(){this.xhr.responseType="text",this.xhr.overrideMimeType("text/plain; charset=x-user-defined")},e.prototype.cancel=function(){this.options.debug&&s.debug("XHR.abort"),this.xhr.abort()},e}();t.XHR=c;var u=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.configureXhr=function(){this.options.debug&&s.debug("MozXHR.configureXhr: setting responseType to 'moz-chunked-arraybuffer'"),this.xhr.responseType="moz-chunked-arraybuffer"},t.prototype.onProgressEvent=function(){var e=this.xhr.response;this.options.debug&&s.debug("MozXHR.onProgressEvent: ",new Uint8Array(e)),this.options.onChunk(new Uint8Array(e))},t}(c);function l(e,t){var r=e.charCodeAt(t);if(r>=55296&&r<=56319){var n=e.charCodeAt(t+1);n>=56320&&n<=57343&&(r=65536+(r-55296<<10)+(n-56320))}return r}function h(e){for(var t=new Uint8Array(e.length),r=0,n=0;n<e.length;n++){var i=String.prototype.codePointAt?e.codePointAt(n):l(e,n);t[r++]=255&i}return t}t.MozChunkedArrayBufferXHR=u,t.stringToArrayBuffer=h},849:function(e,t){"use strict";var r;function n(e){var t=function(){if(void 0!==r)return r;if(XMLHttpRequest){r=new XMLHttpRequest;try{r.open("GET","https://localhost")}catch(e){}}return r}();if(!t)return!1;try{return t.responseType=e,t.responseType===e}catch(e){}return!1}Object.defineProperty(t,"__esModule",{value:!0}),t.detectXHROverrideMimeTypeSupport=t.detectMozXHRSupport=t.xhrSupportsResponseType=void 0,t.xhrSupportsResponseType=n,t.detectMozXHRSupport=function(){return"undefined"!=typeof XMLHttpRequest&&n("moz-chunked-arraybuffer")},t.detectXHROverrideMimeTypeSupport=function(){return"undefined"!=typeof XMLHttpRequest&&XMLHttpRequest.prototype.hasOwnProperty("overrideMimeType")}},540:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WebsocketTransport=void 0;var n,i=r(346),o=r(617);!function(e){e[e.FINISH_SEND=1]="FINISH_SEND"}(n||(n={}));var s=new Uint8Array([1]);t.WebsocketTransport=function(){return function(e){return function(e){e.debug&&i.debug("websocketRequest",e);var t,r=function(e){if("https://"===e.substr(0,8))return"wss://"+e.substr(8);if("http://"===e.substr(0,7))return"ws://"+e.substr(7);throw new Error("Websocket transport constructed with non-https:// or http:// host.")}(e.url),a=[];function c(e){if(e===n.FINISH_SEND)t.send(s);else{var r=e,i=new Int8Array(r.byteLength+1);i.set(new Uint8Array([0])),i.set(r,1),t.send(i)}}return{sendMessage:function(e){t&&t.readyState!==t.CONNECTING?c(e):a.push(e)},finishSend:function(){t&&t.readyState!==t.CONNECTING?c(n.FINISH_SEND):a.push(n.FINISH_SEND)},start:function(n){(t=new WebSocket(r,["grpc-websockets"])).binaryType="arraybuffer",t.onopen=function(){var r;e.debug&&i.debug("websocketRequest.onopen"),t.send((r="",n.forEach((function(e,t){r+=e+": "+t.join(", ")+"\r\n"})),o.encodeASCII(r))),a.forEach((function(e){c(e)}))},t.onclose=function(t){e.debug&&i.debug("websocketRequest.onclose",t),e.onEnd()},t.onerror=function(t){e.debug&&i.debug("websocketRequest.onerror",t)},t.onmessage=function(t){e.onChunk(new Uint8Array(t.data))}},cancel:function(){e.debug&&i.debug("websocket.abort"),t.close()}}}(e)}}},35:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.unary=void 0;var n=r(65),i=r(934);t.unary=function(e,t){if(e.responseStream)throw new Error(".unary cannot be used with server-streaming methods. Use .invoke or .client instead.");if(e.requestStream)throw new Error(".unary cannot be used with client-streaming methods. Use .client instead.");var r=null,o=null,s=i.client(e,{host:t.host,transport:t.transport,debug:t.debug});return s.onHeaders((function(e){r=e})),s.onMessage((function(e){o=e})),s.onEnd((function(e,i,s){t.onEnd({status:e,statusMessage:i,headers:r||new n.Metadata,message:o,trailers:s})})),s.start(t.metadata),s.send(t.request),s.finishSend(),{close:function(){s.close()}}}},882:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.frameRequest=void 0,t.frameRequest=function(e){var t=e.serializeBinary(),r=new ArrayBuffer(t.byteLength+5);return new DataView(r,1,4).setUint32(0,t.length,!1),new Uint8Array(r,5).set(t),new Uint8Array(r)}}},r={},function e(n){if(r[n])return r[n].exports;var i=r[n]={exports:{}};return t[n].call(i.exports,i,i.exports,e),i.exports}(607))},2700:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=s(r(6351)),i=s(r(5841)),o=s(r(1196));function s(e){return e&&e.__esModule?e:{default:e}}t.default=function(e){var t=e.A,r=e.C,s=e.W;(0,o.default)(t,1)(s,0);for(var a=0,c=0,u=0,l=32,h=0;h<24;h++){var f=n.default[h],d=i.default[h];(0,o.default)(t,f)(r,0),a=s[0],c=s[1],l=32-d,s[u=d<32?0:1]=a<<d|c>>>l,s[(u+1)%2]=c<<d|a>>>l,(0,o.default)(s,0)(t,f),(0,o.default)(r,0)(s,0)}}},2985:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.delay=void 0,t.delay=function(e){return new Promise((t=>{setTimeout((()=>{t(!0)}),e)}))}},3093:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.IWatch=void 0,t.IWatch=class{}},3126:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,i=(n=r(1165))&&n.__esModule?n:{default:n};t.default=function(e){var t=e.A,r=2*e.roundIndex;t[0]^=i.default[r],t[1]^=i.default[r+1]}},3349:e=>{function t(e,t){if(!e)throw new Error(t||"Assertion failed")}e.exports=t,t.equal=function(e,t,r){if(e!=t)throw new Error(r||"Assertion failed: "+e+" != "+t)}},3417:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,i=r(8287),o=(n=r(8096))&&n.__esModule?n:{default:n},s=function(e,t){for(var r=0;r<e.length;r+=8){var n=r/4;t[n]^=e[r+7]<<24|e[r+6]<<16|e[r+5]<<8|e[r+4],t[n+1]^=e[r+3]<<24|e[r+2]<<16|e[r+1]<<8|e[r]}return t},a=function(e,t){for(var r=0;r<t.length;r+=8){var n=r/4;t[r]=e[n+1],t[r+1]=e[n+1]>>>8,t[r+2]=e[n+1]>>>16,t[r+3]=e[n+1]>>>24,t[r+4]=e[n],t[r+5]=e[n]>>>8,t[r+6]=e[n]>>>16,t[r+7]=e[n]>>>24}return t};t.default=function(e){var t=this,r=e.capacity,n=e.padding,c=(0,o.default)(),u=r/8,l=200-r/4,h=0,f=new Uint32Array(50),d=i.Buffer.allocUnsafe(l);return this.absorb=function(e){for(var r=0;r<e.length;r++)d[h]=e[r],(h+=1)>=l&&(s(d,f),c(f),h=0);return t},this.squeeze=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t={buffer:e.buffer||i.Buffer.allocUnsafe(u),padding:e.padding||n,queue:i.Buffer.allocUnsafe(d.length),state:new Uint32Array(f.length)};d.copy(t.queue);for(var r=0;r<f.length;r++)t.state[r]=f[r];t.queue.fill(0,h),t.queue[h]|=t.padding,t.queue[l-1]|=128,s(t.queue,t.state);for(var o=0;o<t.buffer.length;o+=l)c(t.state),a(t.state,t.buffer.slice(o,o+l));return t.buffer},this.reset=function(){return d.fill(0),f.fill(0),h=0,t},this}},3671:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,i=(n=r(1196))&&n.__esModule?n:{default:n};t.default=function(e){for(var t=e.A,r=e.C,n=e.D,o=e.W,s=0,a=0,c=0;c<5;c++){var u=2*c,l=2*(c+5),h=2*(c+10),f=2*(c+15),d=2*(c+20);r[u]=t[u]^t[l]^t[h]^t[f]^t[d],r[u+1]=t[u+1]^t[l+1]^t[h+1]^t[f+1]^t[d+1]}for(var p=0;p<5;p++){(0,i.default)(r,(p+1)%5)(o,0),s=o[0],a=o[1],o[0]=s<<1|a>>>31,o[1]=a<<1|s>>>31,n[2*p]=r[(p+4)%5*2]^o[0],n[2*p+1]=r[(p+4)%5*2+1]^o[1];for(var g=0;g<25;g+=5)t[2*(g+p)]^=n[2*p],t[2*(g+p)+1]^=n[2*p+1]}}},3836:function(e){"use strict";!function(){function t(e){return parseInt(e)===e}function r(e){if(!t(e.length))return!1;for(var r=0;r<e.length;r++)if(!t(e[r])||e[r]<0||e[r]>255)return!1;return!0}function n(e,n){if(e.buffer&&ArrayBuffer.isView(e)&&"Uint8Array"===e.name)return n&&(e=e.slice?e.slice():Array.prototype.slice.call(e)),e;if(Array.isArray(e)){if(!r(e))throw new Error("Array contains invalid value: "+e);return new Uint8Array(e)}if(t(e.length)&&r(e))return new Uint8Array(e);throw new Error("unsupported array-like object")}function i(e){return new Uint8Array(e)}function o(e,t,r,n,i){null==n&&null==i||(e=e.slice?e.slice(n,i):Array.prototype.slice.call(e,n,i)),t.set(e,r)}var s,a={toBytes:function(e){var t=[],r=0;for(e=encodeURI(e);r<e.length;){var i=e.charCodeAt(r++);37===i?(t.push(parseInt(e.substr(r,2),16)),r+=2):t.push(i)}return n(t)},fromBytes:function(e){for(var t=[],r=0;r<e.length;){var n=e[r];n<128?(t.push(String.fromCharCode(n)),r++):n>191&&n<224?(t.push(String.fromCharCode((31&n)<<6|63&e[r+1])),r+=2):(t.push(String.fromCharCode((15&n)<<12|(63&e[r+1])<<6|63&e[r+2])),r+=3)}return t.join("")}},c=(s="0123456789abcdef",{toBytes:function(e){for(var t=[],r=0;r<e.length;r+=2)t.push(parseInt(e.substr(r,2),16));return t},fromBytes:function(e){for(var t=[],r=0;r<e.length;r++){var n=e[r];t.push(s[(240&n)>>4]+s[15&n])}return t.join("")}}),u={16:10,24:12,32:14},l=[1,2,4,8,16,32,64,128,27,54,108,216,171,77,154,47,94,188,99,198,151,53,106,212,179,125,250,239,197,145],h=[99,124,119,123,242,107,111,197,48,1,103,43,254,215,171,118,202,130,201,125,250,89,71,240,173,212,162,175,156,164,114,192,183,253,147,38,54,63,247,204,52,165,229,241,113,216,49,21,4,199,35,195,24,150,5,154,7,18,128,226,235,39,178,117,9,131,44,26,27,110,90,160,82,59,214,179,41,227,47,132,83,209,0,237,32,252,177,91,106,203,190,57,74,76,88,207,208,239,170,251,67,77,51,133,69,249,2,127,80,60,159,168,81,163,64,143,146,157,56,245,188,182,218,33,16,255,243,210,205,12,19,236,95,151,68,23,196,167,126,61,100,93,25,115,96,129,79,220,34,42,144,136,70,238,184,20,222,94,11,219,224,50,58,10,73,6,36,92,194,211,172,98,145,149,228,121,231,200,55,109,141,213,78,169,108,86,244,234,101,122,174,8,186,120,37,46,28,166,180,198,232,221,116,31,75,189,139,138,112,62,181,102,72,3,246,14,97,53,87,185,134,193,29,158,225,248,152,17,105,217,142,148,155,30,135,233,206,85,40,223,140,161,137,13,191,230,66,104,65,153,45,15,176,84,187,22],f=[82,9,106,213,48,54,165,56,191,64,163,158,129,243,215,251,124,227,57,130,155,47,255,135,52,142,67,68,196,222,233,203,84,123,148,50,166,194,35,61,238,76,149,11,66,250,195,78,8,46,161,102,40,217,36,178,118,91,162,73,109,139,209,37,114,248,246,100,134,104,152,22,212,164,92,204,93,101,182,146,108,112,72,80,253,237,185,218,94,21,70,87,167,141,157,132,144,216,171,0,140,188,211,10,247,228,88,5,184,179,69,6,208,44,30,143,202,63,15,2,193,175,189,3,1,19,138,107,58,145,17,65,79,103,220,234,151,242,207,206,240,180,230,115,150,172,116,34,231,173,53,133,226,249,55,232,28,117,223,110,71,241,26,113,29,41,197,137,111,183,98,14,170,24,190,27,252,86,62,75,198,210,121,32,154,219,192,254,120,205,90,244,31,221,168,51,136,7,199,49,177,18,16,89,39,128,236,95,96,81,127,169,25,181,74,13,45,229,122,159,147,201,156,239,160,224,59,77,174,42,245,176,200,235,187,60,131,83,153,97,23,43,4,126,186,119,214,38,225,105,20,99,85,33,12,125],d=[3328402341,4168907908,4000806809,4135287693,4294111757,3597364157,3731845041,2445657428,1613770832,33620227,3462883241,1445669757,3892248089,3050821474,1303096294,3967186586,2412431941,528646813,2311702848,4202528135,4026202645,2992200171,2387036105,4226871307,1101901292,3017069671,1604494077,1169141738,597466303,1403299063,3832705686,2613100635,1974974402,3791519004,1033081774,1277568618,1815492186,2118074177,4126668546,2211236943,1748251740,1369810420,3521504564,4193382664,3799085459,2883115123,1647391059,706024767,134480908,2512897874,1176707941,2646852446,806885416,932615841,168101135,798661301,235341577,605164086,461406363,3756188221,3454790438,1311188841,2142417613,3933566367,302582043,495158174,1479289972,874125870,907746093,3698224818,3025820398,1537253627,2756858614,1983593293,3084310113,2108928974,1378429307,3722699582,1580150641,327451799,2790478837,3117535592,0,3253595436,1075847264,3825007647,2041688520,3059440621,3563743934,2378943302,1740553945,1916352843,2487896798,2555137236,2958579944,2244988746,3151024235,3320835882,1336584933,3992714006,2252555205,2588757463,1714631509,293963156,2319795663,3925473552,67240454,4269768577,2689618160,2017213508,631218106,1269344483,2723238387,1571005438,2151694528,93294474,1066570413,563977660,1882732616,4059428100,1673313503,2008463041,2950355573,1109467491,537923632,3858759450,4260623118,3218264685,2177748300,403442708,638784309,3287084079,3193921505,899127202,2286175436,773265209,2479146071,1437050866,4236148354,2050833735,3362022572,3126681063,840505643,3866325909,3227541664,427917720,2655997905,2749160575,1143087718,1412049534,999329963,193497219,2353415882,3354324521,1807268051,672404540,2816401017,3160301282,369822493,2916866934,3688947771,1681011286,1949973070,336202270,2454276571,201721354,1210328172,3093060836,2680341085,3184776046,1135389935,3294782118,965841320,831886756,3554993207,4068047243,3588745010,2345191491,1849112409,3664604599,26054028,2983581028,2622377682,1235855840,3630984372,2891339514,4092916743,3488279077,3395642799,4101667470,1202630377,268961816,1874508501,4034427016,1243948399,1546530418,941366308,1470539505,1941222599,2546386513,3421038627,2715671932,3899946140,1042226977,2521517021,1639824860,227249030,260737669,3765465232,2084453954,1907733956,3429263018,2420656344,100860677,4160157185,470683154,3261161891,1781871967,2924959737,1773779408,394692241,2579611992,974986535,664706745,3655459128,3958962195,731420851,571543859,3530123707,2849626480,126783113,865375399,765172662,1008606754,361203602,3387549984,2278477385,2857719295,1344809080,2782912378,59542671,1503764984,160008576,437062935,1707065306,3622233649,2218934982,3496503480,2185314755,697932208,1512910199,504303377,2075177163,2824099068,1841019862,739644986],p=[2781242211,2230877308,2582542199,2381740923,234877682,3184946027,2984144751,1418839493,1348481072,50462977,2848876391,2102799147,434634494,1656084439,3863849899,2599188086,1167051466,2636087938,1082771913,2281340285,368048890,3954334041,3381544775,201060592,3963727277,1739838676,4250903202,3930435503,3206782108,4149453988,2531553906,1536934080,3262494647,484572669,2923271059,1783375398,1517041206,1098792767,49674231,1334037708,1550332980,4098991525,886171109,150598129,2481090929,1940642008,1398944049,1059722517,201851908,1385547719,1699095331,1587397571,674240536,2704774806,252314885,3039795866,151914247,908333586,2602270848,1038082786,651029483,1766729511,3447698098,2682942837,454166793,2652734339,1951935532,775166490,758520603,3000790638,4004797018,4217086112,4137964114,1299594043,1639438038,3464344499,2068982057,1054729187,1901997871,2534638724,4121318227,1757008337,0,750906861,1614815264,535035132,3363418545,3988151131,3201591914,1183697867,3647454910,1265776953,3734260298,3566750796,3903871064,1250283471,1807470800,717615087,3847203498,384695291,3313910595,3617213773,1432761139,2484176261,3481945413,283769337,100925954,2180939647,4037038160,1148730428,3123027871,3813386408,4087501137,4267549603,3229630528,2315620239,2906624658,3156319645,1215313976,82966005,3747855548,3245848246,1974459098,1665278241,807407632,451280895,251524083,1841287890,1283575245,337120268,891687699,801369324,3787349855,2721421207,3431482436,959321879,1469301956,4065699751,2197585534,1199193405,2898814052,3887750493,724703513,2514908019,2696962144,2551808385,3516813135,2141445340,1715741218,2119445034,2872807568,2198571144,3398190662,700968686,3547052216,1009259540,2041044702,3803995742,487983883,1991105499,1004265696,1449407026,1316239930,504629770,3683797321,168560134,1816667172,3837287516,1570751170,1857934291,4014189740,2797888098,2822345105,2754712981,936633572,2347923833,852879335,1133234376,1500395319,3084545389,2348912013,1689376213,3533459022,3762923945,3034082412,4205598294,133428468,634383082,2949277029,2398386810,3913789102,403703816,3580869306,2297460856,1867130149,1918643758,607656988,4049053350,3346248884,1368901318,600565992,2090982877,2632479860,557719327,3717614411,3697393085,2249034635,2232388234,2430627952,1115438654,3295786421,2865522278,3633334344,84280067,33027830,303828494,2747425121,1600795957,4188952407,3496589753,2434238086,1486471617,658119965,3106381470,953803233,334231800,3005978776,857870609,3151128937,1890179545,2298973838,2805175444,3056442267,574365214,2450884487,550103529,1233637070,4289353045,2018519080,2057691103,2399374476,4166623649,2148108681,387583245,3664101311,836232934,3330556482,3100665960,3280093505,2955516313,2002398509,287182607,3413881008,4238890068,3597515707,975967766],g=[1671808611,2089089148,2006576759,2072901243,4061003762,1807603307,1873927791,3310653893,810573872,16974337,1739181671,729634347,4263110654,3613570519,2883997099,1989864566,3393556426,2191335298,3376449993,2106063485,4195741690,1508618841,1204391495,4027317232,2917941677,3563566036,2734514082,2951366063,2629772188,2767672228,1922491506,3227229120,3082974647,4246528509,2477669779,644500518,911895606,1061256767,4144166391,3427763148,878471220,2784252325,3845444069,4043897329,1905517169,3631459288,827548209,356461077,67897348,3344078279,593839651,3277757891,405286936,2527147926,84871685,2595565466,118033927,305538066,2157648768,3795705826,3945188843,661212711,2999812018,1973414517,152769033,2208177539,745822252,439235610,455947803,1857215598,1525593178,2700827552,1391895634,994932283,3596728278,3016654259,695947817,3812548067,795958831,2224493444,1408607827,3513301457,0,3979133421,543178784,4229948412,2982705585,1542305371,1790891114,3410398667,3201918910,961245753,1256100938,1289001036,1491644504,3477767631,3496721360,4012557807,2867154858,4212583931,1137018435,1305975373,861234739,2241073541,1171229253,4178635257,33948674,2139225727,1357946960,1011120188,2679776671,2833468328,1374921297,2751356323,1086357568,2408187279,2460827538,2646352285,944271416,4110742005,3168756668,3066132406,3665145818,560153121,271589392,4279952895,4077846003,3530407890,3444343245,202643468,322250259,3962553324,1608629855,2543990167,1154254916,389623319,3294073796,2817676711,2122513534,1028094525,1689045092,1575467613,422261273,1939203699,1621147744,2174228865,1339137615,3699352540,577127458,712922154,2427141008,2290289544,1187679302,3995715566,3100863416,339486740,3732514782,1591917662,186455563,3681988059,3762019296,844522546,978220090,169743370,1239126601,101321734,611076132,1558493276,3260915650,3547250131,2901361580,1655096418,2443721105,2510565781,3828863972,2039214713,3878868455,3359869896,928607799,1840765549,2374762893,3580146133,1322425422,2850048425,1823791212,1459268694,4094161908,3928346602,1706019429,2056189050,2934523822,135794696,3134549946,2022240376,628050469,779246638,472135708,2800834470,3032970164,3327236038,3894660072,3715932637,1956440180,522272287,1272813131,3185336765,2340818315,2323976074,1888542832,1044544574,3049550261,1722469478,1222152264,50660867,4127324150,236067854,1638122081,895445557,1475980887,3117443513,2257655686,3243809217,489110045,2662934430,3778599393,4162055160,2561878936,288563729,1773916777,3648039385,2391345038,2493985684,2612407707,505560094,2274497927,3911240169,3460925390,1442818645,678973480,3749357023,2358182796,2717407649,2306869641,219617805,3218761151,3862026214,1120306242,1756942440,1103331905,2578459033,762796589,252780047,2966125488,1425844308,3151392187,372911126],m=[1667474886,2088535288,2004326894,2071694838,4075949567,1802223062,1869591006,3318043793,808472672,16843522,1734846926,724270422,4278065639,3621216949,2880169549,1987484396,3402253711,2189597983,3385409673,2105378810,4210693615,1499065266,1195886990,4042263547,2913856577,3570689971,2728590687,2947541573,2627518243,2762274643,1920112356,3233831835,3082273397,4261223649,2475929149,640051788,909531756,1061110142,4160160501,3435941763,875846760,2779116625,3857003729,4059105529,1903268834,3638064043,825316194,353713962,67374088,3351728789,589522246,3284360861,404236336,2526454071,84217610,2593830191,117901582,303183396,2155911963,3806477791,3958056653,656894286,2998062463,1970642922,151591698,2206440989,741110872,437923380,454765878,1852748508,1515908788,2694904667,1381168804,993742198,3604373943,3014905469,690584402,3823320797,791638366,2223281939,1398011302,3520161977,0,3991743681,538992704,4244381667,2981218425,1532751286,1785380564,3419096717,3200178535,960056178,1246420628,1280103576,1482221744,3486468741,3503319995,4025428677,2863326543,4227536621,1128514950,1296947098,859002214,2240123921,1162203018,4193849577,33687044,2139062782,1347481760,1010582648,2678045221,2829640523,1364325282,2745433693,1077985408,2408548869,2459086143,2644360225,943212656,4126475505,3166494563,3065430391,3671750063,555836226,269496352,4294908645,4092792573,3537006015,3452783745,202118168,320025894,3974901699,1600119230,2543297077,1145359496,387397934,3301201811,2812801621,2122220284,1027426170,1684319432,1566435258,421079858,1936954854,1616945344,2172753945,1330631070,3705438115,572679748,707427924,2425400123,2290647819,1179044492,4008585671,3099120491,336870440,3739122087,1583276732,185277718,3688593069,3772791771,842159716,976899700,168435220,1229577106,101059084,606366792,1549591736,3267517855,3553849021,2897014595,1650632388,2442242105,2509612081,3840161747,2038008818,3890688725,3368567691,926374254,1835907034,2374863873,3587531953,1313788572,2846482505,1819063512,1448540844,4109633523,3941213647,1701162954,2054852340,2930698567,134748176,3132806511,2021165296,623210314,774795868,471606328,2795958615,3031746419,3334885783,3907527627,3722280097,1953799400,522133822,1263263126,3183336545,2341176845,2324333839,1886425312,1044267644,3048588401,1718004428,1212733584,50529542,4143317495,235803164,1633788866,892690282,1465383342,3115962473,2256965911,3250673817,488449850,2661202215,3789633753,4177007595,2560144171,286339874,1768537042,3654906025,2391705863,2492770099,2610673197,505291324,2273808917,3924369609,3469625735,1431699370,673740880,3755965093,2358021891,2711746649,2307489801,218961690,3217021541,3873845719,1111672452,1751693520,1094828930,2576986153,757954394,252645662,2964376443,1414855848,3149649517,370555436],y=[1374988112,2118214995,437757123,975658646,1001089995,530400753,2902087851,1273168787,540080725,2910219766,2295101073,4110568485,1340463100,3307916247,641025152,3043140495,3736164937,632953703,1172967064,1576976609,3274667266,2169303058,2370213795,1809054150,59727847,361929877,3211623147,2505202138,3569255213,1484005843,1239443753,2395588676,1975683434,4102977912,2572697195,666464733,3202437046,4035489047,3374361702,2110667444,1675577880,3843699074,2538681184,1649639237,2976151520,3144396420,4269907996,4178062228,1883793496,2403728665,2497604743,1383856311,2876494627,1917518562,3810496343,1716890410,3001755655,800440835,2261089178,3543599269,807962610,599762354,33778362,3977675356,2328828971,2809771154,4077384432,1315562145,1708848333,101039829,3509871135,3299278474,875451293,2733856160,92987698,2767645557,193195065,1080094634,1584504582,3178106961,1042385657,2531067453,3711829422,1306967366,2438237621,1908694277,67556463,1615861247,429456164,3602770327,2302690252,1742315127,2968011453,126454664,3877198648,2043211483,2709260871,2084704233,4169408201,0,159417987,841739592,504459436,1817866830,4245618683,260388950,1034867998,908933415,168810852,1750902305,2606453969,607530554,202008497,2472011535,3035535058,463180190,2160117071,1641816226,1517767529,470948374,3801332234,3231722213,1008918595,303765277,235474187,4069246893,766945465,337553864,1475418501,2943682380,4003061179,2743034109,4144047775,1551037884,1147550661,1543208500,2336434550,3408119516,3069049960,3102011747,3610369226,1113818384,328671808,2227573024,2236228733,3535486456,2935566865,3341394285,496906059,3702665459,226906860,2009195472,733156972,2842737049,294930682,1206477858,2835123396,2700099354,1451044056,573804783,2269728455,3644379585,2362090238,2564033334,2801107407,2776292904,3669462566,1068351396,742039012,1350078989,1784663195,1417561698,4136440770,2430122216,775550814,2193862645,2673705150,1775276924,1876241833,3475313331,3366754619,270040487,3902563182,3678124923,3441850377,1851332852,3969562369,2203032232,3868552805,2868897406,566021896,4011190502,3135740889,1248802510,3936291284,699432150,832877231,708780849,3332740144,899835584,1951317047,4236429990,3767586992,866637845,4043610186,1106041591,2144161806,395441711,1984812685,1139781709,3433712980,3835036895,2664543715,1282050075,3240894392,1181045119,2640243204,25965917,4203181171,4211818798,3009879386,2463879762,3910161971,1842759443,2597806476,933301370,1509430414,3943906441,3467192302,3076639029,3776767469,2051518780,2631065433,1441952575,404016761,1942435775,1408749034,1610459739,3745345300,2017778566,3400528769,3110650942,941896748,3265478751,371049330,3168937228,675039627,4279080257,967311729,135050206,3635733660,1683407248,2076935265,3576870512,1215061108,3501741890],v=[1347548327,1400783205,3273267108,2520393566,3409685355,4045380933,2880240216,2471224067,1428173050,4138563181,2441661558,636813900,4233094615,3620022987,2149987652,2411029155,1239331162,1730525723,2554718734,3781033664,46346101,310463728,2743944855,3328955385,3875770207,2501218972,3955191162,3667219033,768917123,3545789473,692707433,1150208456,1786102409,2029293177,1805211710,3710368113,3065962831,401639597,1724457132,3028143674,409198410,2196052529,1620529459,1164071807,3769721975,2226875310,486441376,2499348523,1483753576,428819965,2274680428,3075636216,598438867,3799141122,1474502543,711349675,129166120,53458370,2592523643,2782082824,4063242375,2988687269,3120694122,1559041666,730517276,2460449204,4042459122,2706270690,3446004468,3573941694,533804130,2328143614,2637442643,2695033685,839224033,1973745387,957055980,2856345839,106852767,1371368976,4181598602,1033297158,2933734917,1179510461,3046200461,91341917,1862534868,4284502037,605657339,2547432937,3431546947,2003294622,3182487618,2282195339,954669403,3682191598,1201765386,3917234703,3388507166,0,2198438022,1211247597,2887651696,1315723890,4227665663,1443857720,507358933,657861945,1678381017,560487590,3516619604,975451694,2970356327,261314535,3535072918,2652609425,1333838021,2724322336,1767536459,370938394,182621114,3854606378,1128014560,487725847,185469197,2918353863,3106780840,3356761769,2237133081,1286567175,3152976349,4255350624,2683765030,3160175349,3309594171,878443390,1988838185,3704300486,1756818940,1673061617,3403100636,272786309,1075025698,545572369,2105887268,4174560061,296679730,1841768865,1260232239,4091327024,3960309330,3497509347,1814803222,2578018489,4195456072,575138148,3299409036,446754879,3629546796,4011996048,3347532110,3252238545,4270639778,915985419,3483825537,681933534,651868046,2755636671,3828103837,223377554,2607439820,1649704518,3270937875,3901806776,1580087799,4118987695,3198115200,2087309459,2842678573,3016697106,1003007129,2802849917,1860738147,2077965243,164439672,4100872472,32283319,2827177882,1709610350,2125135846,136428751,3874428392,3652904859,3460984630,3572145929,3593056380,2939266226,824852259,818324884,3224740454,930369212,2801566410,2967507152,355706840,1257309336,4148292826,243256656,790073846,2373340630,1296297904,1422699085,3756299780,3818836405,457992840,3099667487,2135319889,77422314,1560382517,1945798516,788204353,1521706781,1385356242,870912086,325965383,2358957921,2050466060,2388260884,2313884476,4006521127,901210569,3990953189,1014646705,1503449823,1062597235,2031621326,3212035895,3931371469,1533017514,350174575,2256028891,2177544179,1052338372,741876788,1606591296,1914052035,213705253,2334669897,1107234197,1899603969,3725069491,2631447780,2422494913,1635502980,1893020342,1950903388,1120974935],b=[2807058932,1699970625,2764249623,1586903591,1808481195,1173430173,1487645946,59984867,4199882800,1844882806,1989249228,1277555970,3623636965,3419915562,1149249077,2744104290,1514790577,459744698,244860394,3235995134,1963115311,4027744588,2544078150,4190530515,1608975247,2627016082,2062270317,1507497298,2200818878,567498868,1764313568,3359936201,2305455554,2037970062,1047239e3,1910319033,1337376481,2904027272,2892417312,984907214,1243112415,830661914,861968209,2135253587,2011214180,2927934315,2686254721,731183368,1750626376,4246310725,1820824798,4172763771,3542330227,48394827,2404901663,2871682645,671593195,3254988725,2073724613,145085239,2280796200,2779915199,1790575107,2187128086,472615631,3029510009,4075877127,3802222185,4107101658,3201631749,1646252340,4270507174,1402811438,1436590835,3778151818,3950355702,3963161475,4020912224,2667994737,273792366,2331590177,104699613,95345982,3175501286,2377486676,1560637892,3564045318,369057872,4213447064,3919042237,1137477952,2658625497,1119727848,2340947849,1530455833,4007360968,172466556,266959938,516552836,0,2256734592,3980931627,1890328081,1917742170,4294704398,945164165,3575528878,958871085,3647212047,2787207260,1423022939,775562294,1739656202,3876557655,2530391278,2443058075,3310321856,547512796,1265195639,437656594,3121275539,719700128,3762502690,387781147,218828297,3350065803,2830708150,2848461854,428169201,122466165,3720081049,1627235199,648017665,4122762354,1002783846,2117360635,695634755,3336358691,4234721005,4049844452,3704280881,2232435299,574624663,287343814,612205898,1039717051,840019705,2708326185,793451934,821288114,1391201670,3822090177,376187827,3113855344,1224348052,1679968233,2361698556,1058709744,752375421,2431590963,1321699145,3519142200,2734591178,188127444,2177869557,3727205754,2384911031,3215212461,2648976442,2450346104,3432737375,1180849278,331544205,3102249176,4150144569,2952102595,2159976285,2474404304,766078933,313773861,2570832044,2108100632,1668212892,3145456443,2013908262,418672217,3070356634,2594734927,1852171925,3867060991,3473416636,3907448597,2614737639,919489135,164948639,2094410160,2997825956,590424639,2486224549,1723872674,3157750862,3399941250,3501252752,3625268135,2555048196,3673637356,1343127501,4130281361,3599595085,2957853679,1297403050,81781910,3051593425,2283490410,532201772,1367295589,3926170974,895287692,1953757831,1093597963,492483431,3528626907,1446242576,1192455638,1636604631,209336225,344873464,1015671571,669961897,3375740769,3857572124,2973530695,3747192018,1933530610,3464042516,935293895,3454686199,2858115069,1863638845,3683022916,4085369519,3292445032,875313188,1080017571,3279033885,621591778,1233856572,2504130317,24197544,3017672716,3835484340,3247465558,2220981195,3060847922,1551124588,1463996600],w=[4104605777,1097159550,396673818,660510266,2875968315,2638606623,4200115116,3808662347,821712160,1986918061,3430322568,38544885,3856137295,718002117,893681702,1654886325,2975484382,3122358053,3926825029,4274053469,796197571,1290801793,1184342925,3556361835,2405426947,2459735317,1836772287,1381620373,3196267988,1948373848,3764988233,3385345166,3263785589,2390325492,1480485785,3111247143,3780097726,2293045232,548169417,3459953789,3746175075,439452389,1362321559,1400849762,1685577905,1806599355,2174754046,137073913,1214797936,1174215055,3731654548,2079897426,1943217067,1258480242,529487843,1437280870,3945269170,3049390895,3313212038,923313619,679998e3,3215307299,57326082,377642221,3474729866,2041877159,133361907,1776460110,3673476453,96392454,878845905,2801699524,777231668,4082475170,2330014213,4142626212,2213296395,1626319424,1906247262,1846563261,562755902,3708173718,1040559837,3871163981,1418573201,3294430577,114585348,1343618912,2566595609,3186202582,1078185097,3651041127,3896688048,2307622919,425408743,3371096953,2081048481,1108339068,2216610296,0,2156299017,736970802,292596766,1517440620,251657213,2235061775,2933202493,758720310,265905162,1554391400,1532285339,908999204,174567692,1474760595,4002861748,2610011675,3234156416,3693126241,2001430874,303699484,2478443234,2687165888,585122620,454499602,151849742,2345119218,3064510765,514443284,4044981591,1963412655,2581445614,2137062819,19308535,1928707164,1715193156,4219352155,1126790795,600235211,3992742070,3841024952,836553431,1669664834,2535604243,3323011204,1243905413,3141400786,4180808110,698445255,2653899549,2989552604,2253581325,3252932727,3004591147,1891211689,2487810577,3915653703,4237083816,4030667424,2100090966,865136418,1229899655,953270745,3399679628,3557504664,4118925222,2061379749,3079546586,2915017791,983426092,2022837584,1607244650,2118541908,2366882550,3635996816,972512814,3283088770,1568718495,3499326569,3576539503,621982671,2895723464,410887952,2623762152,1002142683,645401037,1494807662,2595684844,1335535747,2507040230,4293295786,3167684641,367585007,3885750714,1865862730,2668221674,2960971305,2763173681,1059270954,2777952454,2724642869,1320957812,2194319100,2429595872,2815956275,77089521,3973773121,3444575871,2448830231,1305906550,4021308739,2857194700,2516901860,3518358430,1787304780,740276417,1699839814,1592394909,2352307457,2272556026,188821243,1729977011,3687994002,274084841,3594982253,3613494426,2701949495,4162096729,322734571,2837966542,1640576439,484830689,1202797690,3537852828,4067639125,349075736,3342319475,4157467219,4255800159,1030690015,1155237496,2951971274,1757691577,607398968,2738905026,499347990,3794078908,1011452712,227885567,2818666809,213114376,3034881240,1455525988,3414450555,850817237,1817998408,3092726480],E=[0,235474187,470948374,303765277,941896748,908933415,607530554,708780849,1883793496,2118214995,1817866830,1649639237,1215061108,1181045119,1417561698,1517767529,3767586992,4003061179,4236429990,4069246893,3635733660,3602770327,3299278474,3400528769,2430122216,2664543715,2362090238,2193862645,2835123396,2801107407,3035535058,3135740889,3678124923,3576870512,3341394285,3374361702,3810496343,3977675356,4279080257,4043610186,2876494627,2776292904,3076639029,3110650942,2472011535,2640243204,2403728665,2169303058,1001089995,899835584,666464733,699432150,59727847,226906860,530400753,294930682,1273168787,1172967064,1475418501,1509430414,1942435775,2110667444,1876241833,1641816226,2910219766,2743034109,2976151520,3211623147,2505202138,2606453969,2302690252,2269728455,3711829422,3543599269,3240894392,3475313331,3843699074,3943906441,4178062228,4144047775,1306967366,1139781709,1374988112,1610459739,1975683434,2076935265,1775276924,1742315127,1034867998,866637845,566021896,800440835,92987698,193195065,429456164,395441711,1984812685,2017778566,1784663195,1683407248,1315562145,1080094634,1383856311,1551037884,101039829,135050206,437757123,337553864,1042385657,807962610,573804783,742039012,2531067453,2564033334,2328828971,2227573024,2935566865,2700099354,3001755655,3168937228,3868552805,3902563182,4203181171,4102977912,3736164937,3501741890,3265478751,3433712980,1106041591,1340463100,1576976609,1408749034,2043211483,2009195472,1708848333,1809054150,832877231,1068351396,766945465,599762354,159417987,126454664,361929877,463180190,2709260871,2943682380,3178106961,3009879386,2572697195,2538681184,2236228733,2336434550,3509871135,3745345300,3441850377,3274667266,3910161971,3877198648,4110568485,4211818798,2597806476,2497604743,2261089178,2295101073,2733856160,2902087851,3202437046,2968011453,3936291284,3835036895,4136440770,4169408201,3535486456,3702665459,3467192302,3231722213,2051518780,1951317047,1716890410,1750902305,1113818384,1282050075,1584504582,1350078989,168810852,67556463,371049330,404016761,841739592,1008918595,775550814,540080725,3969562369,3801332234,4035489047,4269907996,3569255213,3669462566,3366754619,3332740144,2631065433,2463879762,2160117071,2395588676,2767645557,2868897406,3102011747,3069049960,202008497,33778362,270040487,504459436,875451293,975658646,675039627,641025152,2084704233,1917518562,1615861247,1851332852,1147550661,1248802510,1484005843,1451044056,933301370,967311729,733156972,632953703,260388950,25965917,328671808,496906059,1206477858,1239443753,1543208500,1441952575,2144161806,1908694277,1675577880,1842759443,3610369226,3644379585,3408119516,3307916247,4011190502,3776767469,4077384432,4245618683,2809771154,2842737049,3144396420,3043140495,2673705150,2438237621,2203032232,2370213795],A=[0,185469197,370938394,487725847,741876788,657861945,975451694,824852259,1483753576,1400783205,1315723890,1164071807,1950903388,2135319889,1649704518,1767536459,2967507152,3152976349,2801566410,2918353863,2631447780,2547432937,2328143614,2177544179,3901806776,3818836405,4270639778,4118987695,3299409036,3483825537,3535072918,3652904859,2077965243,1893020342,1841768865,1724457132,1474502543,1559041666,1107234197,1257309336,598438867,681933534,901210569,1052338372,261314535,77422314,428819965,310463728,3409685355,3224740454,3710368113,3593056380,3875770207,3960309330,4045380933,4195456072,2471224067,2554718734,2237133081,2388260884,3212035895,3028143674,2842678573,2724322336,4138563181,4255350624,3769721975,3955191162,3667219033,3516619604,3431546947,3347532110,2933734917,2782082824,3099667487,3016697106,2196052529,2313884476,2499348523,2683765030,1179510461,1296297904,1347548327,1533017514,1786102409,1635502980,2087309459,2003294622,507358933,355706840,136428751,53458370,839224033,957055980,605657339,790073846,2373340630,2256028891,2607439820,2422494913,2706270690,2856345839,3075636216,3160175349,3573941694,3725069491,3273267108,3356761769,4181598602,4063242375,4011996048,3828103837,1033297158,915985419,730517276,545572369,296679730,446754879,129166120,213705253,1709610350,1860738147,1945798516,2029293177,1239331162,1120974935,1606591296,1422699085,4148292826,4233094615,3781033664,3931371469,3682191598,3497509347,3446004468,3328955385,2939266226,2755636671,3106780840,2988687269,2198438022,2282195339,2501218972,2652609425,1201765386,1286567175,1371368976,1521706781,1805211710,1620529459,2105887268,1988838185,533804130,350174575,164439672,46346101,870912086,954669403,636813900,788204353,2358957921,2274680428,2592523643,2441661558,2695033685,2880240216,3065962831,3182487618,3572145929,3756299780,3270937875,3388507166,4174560061,4091327024,4006521127,3854606378,1014646705,930369212,711349675,560487590,272786309,457992840,106852767,223377554,1678381017,1862534868,1914052035,2031621326,1211247597,1128014560,1580087799,1428173050,32283319,182621114,401639597,486441376,768917123,651868046,1003007129,818324884,1503449823,1385356242,1333838021,1150208456,1973745387,2125135846,1673061617,1756818940,2970356327,3120694122,2802849917,2887651696,2637442643,2520393566,2334669897,2149987652,3917234703,3799141122,4284502037,4100872472,3309594171,3460984630,3545789473,3629546796,2050466060,1899603969,1814803222,1730525723,1443857720,1560382517,1075025698,1260232239,575138148,692707433,878443390,1062597235,243256656,91341917,409198410,325965383,3403100636,3252238545,3704300486,3620022987,3874428392,3990953189,4042459122,4227665663,2460449204,2578018489,2226875310,2411029155,3198115200,3046200461,2827177882,2743944855],_=[0,218828297,437656594,387781147,875313188,958871085,775562294,590424639,1750626376,1699970625,1917742170,2135253587,1551124588,1367295589,1180849278,1265195639,3501252752,3720081049,3399941250,3350065803,3835484340,3919042237,4270507174,4085369519,3102249176,3051593425,2734591178,2952102595,2361698556,2177869557,2530391278,2614737639,3145456443,3060847922,2708326185,2892417312,2404901663,2187128086,2504130317,2555048196,3542330227,3727205754,3375740769,3292445032,3876557655,3926170974,4246310725,4027744588,1808481195,1723872674,1910319033,2094410160,1608975247,1391201670,1173430173,1224348052,59984867,244860394,428169201,344873464,935293895,984907214,766078933,547512796,1844882806,1627235199,2011214180,2062270317,1507497298,1423022939,1137477952,1321699145,95345982,145085239,532201772,313773861,830661914,1015671571,731183368,648017665,3175501286,2957853679,2807058932,2858115069,2305455554,2220981195,2474404304,2658625497,3575528878,3625268135,3473416636,3254988725,3778151818,3963161475,4213447064,4130281361,3599595085,3683022916,3432737375,3247465558,3802222185,4020912224,4172763771,4122762354,3201631749,3017672716,2764249623,2848461854,2331590177,2280796200,2431590963,2648976442,104699613,188127444,472615631,287343814,840019705,1058709744,671593195,621591778,1852171925,1668212892,1953757831,2037970062,1514790577,1463996600,1080017571,1297403050,3673637356,3623636965,3235995134,3454686199,4007360968,3822090177,4107101658,4190530515,2997825956,3215212461,2830708150,2779915199,2256734592,2340947849,2627016082,2443058075,172466556,122466165,273792366,492483431,1047239e3,861968209,612205898,695634755,1646252340,1863638845,2013908262,1963115311,1446242576,1530455833,1277555970,1093597963,1636604631,1820824798,2073724613,1989249228,1436590835,1487645946,1337376481,1119727848,164948639,81781910,331544205,516552836,1039717051,821288114,669961897,719700128,2973530695,3157750862,2871682645,2787207260,2232435299,2283490410,2667994737,2450346104,3647212047,3564045318,3279033885,3464042516,3980931627,3762502690,4150144569,4199882800,3070356634,3121275539,2904027272,2686254721,2200818878,2384911031,2570832044,2486224549,3747192018,3528626907,3310321856,3359936201,3950355702,3867060991,4049844452,4234721005,1739656202,1790575107,2108100632,1890328081,1402811438,1586903591,1233856572,1149249077,266959938,48394827,369057872,418672217,1002783846,919489135,567498868,752375421,209336225,24197544,376187827,459744698,945164165,895287692,574624663,793451934,1679968233,1764313568,2117360635,1933530610,1343127501,1560637892,1243112415,1192455638,3704280881,3519142200,3336358691,3419915562,3907448597,3857572124,4075877127,4294704398,3029510009,3113855344,2927934315,2744104290,2159976285,2377486676,2594734927,2544078150],x=[0,151849742,303699484,454499602,607398968,758720310,908999204,1059270954,1214797936,1097159550,1517440620,1400849762,1817998408,1699839814,2118541908,2001430874,2429595872,2581445614,2194319100,2345119218,3034881240,3186202582,2801699524,2951971274,3635996816,3518358430,3399679628,3283088770,4237083816,4118925222,4002861748,3885750714,1002142683,850817237,698445255,548169417,529487843,377642221,227885567,77089521,1943217067,2061379749,1640576439,1757691577,1474760595,1592394909,1174215055,1290801793,2875968315,2724642869,3111247143,2960971305,2405426947,2253581325,2638606623,2487810577,3808662347,3926825029,4044981591,4162096729,3342319475,3459953789,3576539503,3693126241,1986918061,2137062819,1685577905,1836772287,1381620373,1532285339,1078185097,1229899655,1040559837,923313619,740276417,621982671,439452389,322734571,137073913,19308535,3871163981,4021308739,4104605777,4255800159,3263785589,3414450555,3499326569,3651041127,2933202493,2815956275,3167684641,3049390895,2330014213,2213296395,2566595609,2448830231,1305906550,1155237496,1607244650,1455525988,1776460110,1626319424,2079897426,1928707164,96392454,213114376,396673818,514443284,562755902,679998e3,865136418,983426092,3708173718,3557504664,3474729866,3323011204,4180808110,4030667424,3945269170,3794078908,2507040230,2623762152,2272556026,2390325492,2975484382,3092726480,2738905026,2857194700,3973773121,3856137295,4274053469,4157467219,3371096953,3252932727,3673476453,3556361835,2763173681,2915017791,3064510765,3215307299,2156299017,2307622919,2459735317,2610011675,2081048481,1963412655,1846563261,1729977011,1480485785,1362321559,1243905413,1126790795,878845905,1030690015,645401037,796197571,274084841,425408743,38544885,188821243,3613494426,3731654548,3313212038,3430322568,4082475170,4200115116,3780097726,3896688048,2668221674,2516901860,2366882550,2216610296,3141400786,2989552604,2837966542,2687165888,1202797690,1320957812,1437280870,1554391400,1669664834,1787304780,1906247262,2022837584,265905162,114585348,499347990,349075736,736970802,585122620,972512814,821712160,2595684844,2478443234,2293045232,2174754046,3196267988,3079546586,2895723464,2777952454,3537852828,3687994002,3234156416,3385345166,4142626212,4293295786,3841024952,3992742070,174567692,57326082,410887952,292596766,777231668,660510266,1011452712,893681702,1108339068,1258480242,1343618912,1494807662,1715193156,1865862730,1948373848,2100090966,2701949495,2818666809,3004591147,3122358053,2235061775,2352307457,2535604243,2653899549,3915653703,3764988233,4219352155,4067639125,3444575871,3294430577,3746175075,3594982253,836553431,953270745,600235211,718002117,367585007,484830689,133361907,251657213,2041877159,1891211689,1806599355,1654886325,1568718495,1418573201,1335535747,1184342925];function S(e){for(var t=[],r=0;r<e.length;r+=4)t.push(e[r]<<24|e[r+1]<<16|e[r+2]<<8|e[r+3]);return t}var k=function(e){if(!(this instanceof k))throw Error("AES must be instanitated with `new`");Object.defineProperty(this,"key",{value:n(e,!0)}),this._prepare()};k.prototype._prepare=function(){var e=u[this.key.length];if(null==e)throw new Error("invalid key size (must be 16, 24 or 32 bytes)");this._Ke=[],this._Kd=[];for(var t=0;t<=e;t++)this._Ke.push([0,0,0,0]),this._Kd.push([0,0,0,0]);var r,n=4*(e+1),i=this.key.length/4,o=S(this.key);for(t=0;t<i;t++)r=t>>2,this._Ke[r][t%4]=o[t],this._Kd[e-r][t%4]=o[t];for(var s,a=0,c=i;c<n;){if(s=o[i-1],o[0]^=h[s>>16&255]<<24^h[s>>8&255]<<16^h[255&s]<<8^h[s>>24&255]^l[a]<<24,a+=1,8!=i)for(t=1;t<i;t++)o[t]^=o[t-1];else{for(t=1;t<i/2;t++)o[t]^=o[t-1];for(s=o[i/2-1],o[i/2]^=h[255&s]^h[s>>8&255]<<8^h[s>>16&255]<<16^h[s>>24&255]<<24,t=i/2+1;t<i;t++)o[t]^=o[t-1]}for(t=0;t<i&&c<n;)f=c>>2,d=c%4,this._Ke[f][d]=o[t],this._Kd[e-f][d]=o[t++],c++}for(var f=1;f<e;f++)for(var d=0;d<4;d++)s=this._Kd[f][d],this._Kd[f][d]=E[s>>24&255]^A[s>>16&255]^_[s>>8&255]^x[255&s]},k.prototype.encrypt=function(e){if(16!=e.length)throw new Error("invalid plaintext size (must be 16 bytes)");for(var t=this._Ke.length-1,r=[0,0,0,0],n=S(e),o=0;o<4;o++)n[o]^=this._Ke[0][o];for(var s=1;s<t;s++){for(o=0;o<4;o++)r[o]=d[n[o]>>24&255]^p[n[(o+1)%4]>>16&255]^g[n[(o+2)%4]>>8&255]^m[255&n[(o+3)%4]]^this._Ke[s][o];n=r.slice()}var a,c=i(16);for(o=0;o<4;o++)a=this._Ke[t][o],c[4*o]=255&(h[n[o]>>24&255]^a>>24),c[4*o+1]=255&(h[n[(o+1)%4]>>16&255]^a>>16),c[4*o+2]=255&(h[n[(o+2)%4]>>8&255]^a>>8),c[4*o+3]=255&(h[255&n[(o+3)%4]]^a);return c},k.prototype.decrypt=function(e){if(16!=e.length)throw new Error("invalid ciphertext size (must be 16 bytes)");for(var t=this._Kd.length-1,r=[0,0,0,0],n=S(e),o=0;o<4;o++)n[o]^=this._Kd[0][o];for(var s=1;s<t;s++){for(o=0;o<4;o++)r[o]=y[n[o]>>24&255]^v[n[(o+3)%4]>>16&255]^b[n[(o+2)%4]>>8&255]^w[255&n[(o+1)%4]]^this._Kd[s][o];n=r.slice()}var a,c=i(16);for(o=0;o<4;o++)a=this._Kd[t][o],c[4*o]=255&(f[n[o]>>24&255]^a>>24),c[4*o+1]=255&(f[n[(o+3)%4]>>16&255]^a>>16),c[4*o+2]=255&(f[n[(o+2)%4]>>8&255]^a>>8),c[4*o+3]=255&(f[255&n[(o+1)%4]]^a);return c};var I=function(e){if(!(this instanceof I))throw Error("AES must be instanitated with `new`");this.description="Electronic Code Block",this.name="ecb",this._aes=new k(e)};I.prototype.encrypt=function(e){if((e=n(e)).length%16!=0)throw new Error("invalid plaintext size (must be multiple of 16 bytes)");for(var t=i(e.length),r=i(16),s=0;s<e.length;s+=16)o(e,r,0,s,s+16),o(r=this._aes.encrypt(r),t,s);return t},I.prototype.decrypt=function(e){if((e=n(e)).length%16!=0)throw new Error("invalid ciphertext size (must be multiple of 16 bytes)");for(var t=i(e.length),r=i(16),s=0;s<e.length;s+=16)o(e,r,0,s,s+16),o(r=this._aes.decrypt(r),t,s);return t};var O=function(e,t){if(!(this instanceof O))throw Error("AES must be instanitated with `new`");if(this.description="Cipher Block Chaining",this.name="cbc",t){if(16!=t.length)throw new Error("invalid initialation vector size (must be 16 bytes)")}else t=i(16);this._lastCipherblock=n(t,!0),this._aes=new k(e)};O.prototype.encrypt=function(e){if((e=n(e)).length%16!=0)throw new Error("invalid plaintext size (must be multiple of 16 bytes)");for(var t=i(e.length),r=i(16),s=0;s<e.length;s+=16){o(e,r,0,s,s+16);for(var a=0;a<16;a++)r[a]^=this._lastCipherblock[a];this._lastCipherblock=this._aes.encrypt(r),o(this._lastCipherblock,t,s)}return t},O.prototype.decrypt=function(e){if((e=n(e)).length%16!=0)throw new Error("invalid ciphertext size (must be multiple of 16 bytes)");for(var t=i(e.length),r=i(16),s=0;s<e.length;s+=16){o(e,r,0,s,s+16),r=this._aes.decrypt(r);for(var a=0;a<16;a++)t[s+a]=r[a]^this._lastCipherblock[a];o(e,this._lastCipherblock,0,s,s+16)}return t};var T=function(e,t,r){if(!(this instanceof T))throw Error("AES must be instanitated with `new`");if(this.description="Cipher Feedback",this.name="cfb",t){if(16!=t.length)throw new Error("invalid initialation vector size (must be 16 size)")}else t=i(16);r||(r=1),this.segmentSize=r,this._shiftRegister=n(t,!0),this._aes=new k(e)};T.prototype.encrypt=function(e){if(e.length%this.segmentSize!=0)throw new Error("invalid plaintext size (must be segmentSize bytes)");for(var t,r=n(e,!0),i=0;i<r.length;i+=this.segmentSize){t=this._aes.encrypt(this._shiftRegister);for(var s=0;s<this.segmentSize;s++)r[i+s]^=t[s];o(this._shiftRegister,this._shiftRegister,0,this.segmentSize),o(r,this._shiftRegister,16-this.segmentSize,i,i+this.segmentSize)}return r},T.prototype.decrypt=function(e){if(e.length%this.segmentSize!=0)throw new Error("invalid ciphertext size (must be segmentSize bytes)");for(var t,r=n(e,!0),i=0;i<r.length;i+=this.segmentSize){t=this._aes.encrypt(this._shiftRegister);for(var s=0;s<this.segmentSize;s++)r[i+s]^=t[s];o(this._shiftRegister,this._shiftRegister,0,this.segmentSize),o(e,this._shiftRegister,16-this.segmentSize,i,i+this.segmentSize)}return r};var P=function(e,t){if(!(this instanceof P))throw Error("AES must be instanitated with `new`");if(this.description="Output Feedback",this.name="ofb",t){if(16!=t.length)throw new Error("invalid initialation vector size (must be 16 bytes)")}else t=i(16);this._lastPrecipher=n(t,!0),this._lastPrecipherIndex=16,this._aes=new k(e)};P.prototype.encrypt=function(e){for(var t=n(e,!0),r=0;r<t.length;r++)16===this._lastPrecipherIndex&&(this._lastPrecipher=this._aes.encrypt(this._lastPrecipher),this._lastPrecipherIndex=0),t[r]^=this._lastPrecipher[this._lastPrecipherIndex++];return t},P.prototype.decrypt=P.prototype.encrypt;var R=function(e){if(!(this instanceof R))throw Error("Counter must be instanitated with `new`");0===e||e||(e=1),"number"==typeof e?(this._counter=i(16),this.setValue(e)):this.setBytes(e)};R.prototype.setValue=function(e){if("number"!=typeof e||parseInt(e)!=e)throw new Error("invalid counter value (must be an integer)");for(var t=15;t>=0;--t)this._counter[t]=e%256,e>>=8},R.prototype.setBytes=function(e){if(16!=(e=n(e,!0)).length)throw new Error("invalid counter bytes size (must be 16 bytes)");this._counter=e},R.prototype.increment=function(){for(var e=15;e>=0;e--){if(255!==this._counter[e]){this._counter[e]++;break}this._counter[e]=0}};var N=function(e,t){if(!(this instanceof N))throw Error("AES must be instanitated with `new`");this.description="Counter",this.name="ctr",t instanceof R||(t=new R(t)),this._counter=t,this._remainingCounter=null,this._remainingCounterIndex=16,this._aes=new k(e)};N.prototype.encrypt=function(e){for(var t=n(e,!0),r=0;r<t.length;r++)16===this._remainingCounterIndex&&(this._remainingCounter=this._aes.encrypt(this._counter._counter),this._remainingCounterIndex=0,this._counter.increment()),t[r]^=this._remainingCounter[this._remainingCounterIndex++];return t},N.prototype.decrypt=N.prototype.encrypt;var C={AES:k,Counter:R,ModeOfOperation:{ecb:I,cbc:O,cfb:T,ofb:P,ctr:N},utils:{hex:c,utf8:a},padding:{pkcs7:{pad:function(e){var t=16-(e=n(e,!0)).length%16,r=i(e.length+t);o(e,r);for(var s=e.length;s<r.length;s++)r[s]=t;return r},strip:function(e){if((e=n(e,!0)).length<16)throw new Error("PKCS#7 invalid length");var t=e[e.length-1];if(t>16)throw new Error("PKCS#7 padding byte out of range");for(var r=e.length-t,s=0;s<t;s++)if(e[r+s]!==t)throw new Error("PKCS#7 invalid padding byte");var a=i(r);return o(e,a,0,0,r),a}}},_arrayTest:{coerceArray:n,createArray:i,copyArray:o}};e.exports=C}()},3917:(e,t,r)=>{"use strict";var n=r(7426),i=r(6166),o=r(6225),s=n.rotl32,a=n.sum32,c=n.sum32_5,u=o.ft_1,l=i.BlockHash,h=[1518500249,1859775393,2400959708,3395469782];function f(){if(!(this instanceof f))return new f;l.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.W=new Array(80)}n.inherits(f,l),e.exports=f,f.blockSize=512,f.outSize=160,f.hmacStrength=80,f.padLength=64,f.prototype._update=function(e,t){for(var r=this.W,n=0;n<16;n++)r[n]=e[t+n];for(;n<r.length;n++)r[n]=s(r[n-3]^r[n-8]^r[n-14]^r[n-16],1);var i=this.h[0],o=this.h[1],l=this.h[2],f=this.h[3],d=this.h[4];for(n=0;n<r.length;n++){var p=~~(n/20),g=c(s(i,5),u(p,o,l,f),d,r[n],h[p]);d=f,f=l,l=s(o,30),o=i,i=g}this.h[0]=a(this.h[0],i),this.h[1]=a(this.h[1],o),this.h[2]=a(this.h[2],l),this.h[3]=a(this.h[3],f),this.h[4]=a(this.h[4],d)},f.prototype._digest=function(e){return"hex"===e?n.toHex32(this.h,"big"):n.split32(this.h,"big")}},4874:(e,t,r)=>{"use strict";const n=r(793);e.exports=s;const i=function(){function e(e){return void 0!==e&&e}try{return"undefined"!=typeof globalThis||Object.defineProperty(Object.prototype,"globalThis",{get:function(){return delete Object.prototype.globalThis,this.globalThis=this},configurable:!0}),globalThis}catch(t){return e(self)||e(window)||e(this)||{}}}().console||{},o={mapHttpRequest:f,mapHttpResponse:f,wrapRequestSerializer:d,wrapResponseSerializer:d,wrapErrorSerializer:d,req:f,res:f,err:function(e){const t={type:e.constructor.name,msg:e.message,stack:e.stack};for(const r in e)void 0===t[r]&&(t[r]=e[r]);return t}};function s(e){(e=e||{}).browser=e.browser||{};const t=e.browser.transmit;if(t&&"function"!=typeof t.send)throw Error("pino: transmit option must have a send function");const r=e.browser.write||i;e.browser.write&&(e.browser.asObject=!0);const n=e.serializers||{},o=function(e,t){return Array.isArray(e)?e.filter((function(e){return"!stdSerializers.err"!==e})):!0===e&&Object.keys(t)}(e.browser.serialize,n);let f=e.browser.serialize;Array.isArray(e.browser.serialize)&&e.browser.serialize.indexOf("!stdSerializers.err")>-1&&(f=!1),"function"==typeof r&&(r.error=r.fatal=r.warn=r.info=r.debug=r.trace=r),!1===e.enabled&&(e.level="silent");const d=e.level||"info",g=Object.create(r);g.log||(g.log=p),Object.defineProperty(g,"levelVal",{get:function(){return"silent"===this.level?1/0:this.levels.values[this.level]}}),Object.defineProperty(g,"level",{get:function(){return this._level},set:function(e){if("silent"!==e&&!this.levels.values[e])throw Error("unknown level "+e);this._level=e,a(m,g,"error","log"),a(m,g,"fatal","error"),a(m,g,"warn","error"),a(m,g,"info","log"),a(m,g,"debug","log"),a(m,g,"trace","log")}});const m={transmit:t,serialize:o,asObject:e.browser.asObject,levels:["error","fatal","warn","info","debug","trace"],timestamp:h(e)};return g.levels=s.levels,g.level=d,g.setMaxListeners=g.getMaxListeners=g.emit=g.addListener=g.on=g.prependListener=g.once=g.prependOnceListener=g.removeListener=g.removeAllListeners=g.listeners=g.listenerCount=g.eventNames=g.write=g.flush=p,g.serializers=n,g._serialize=o,g._stdErrSerialize=f,g.child=function(r,i){if(!r)throw new Error("missing bindings for child Pino");i=i||{},o&&r.serializers&&(i.serializers=r.serializers);const s=i.serializers;if(o&&s){var a=Object.assign({},n,s),h=!0===e.browser.serialize?Object.keys(a):o;delete r.serializers,c([r],h,a,this._stdErrSerialize)}function f(e){this._childLevel=1+(0|e._childLevel),this.error=u(e,r,"error"),this.fatal=u(e,r,"fatal"),this.warn=u(e,r,"warn"),this.info=u(e,r,"info"),this.debug=u(e,r,"debug"),this.trace=u(e,r,"trace"),a&&(this.serializers=a,this._serialize=h),t&&(this._logEvent=l([].concat(e._logEvent.bindings,r)))}return f.prototype=this,new f(this)},t&&(g._logEvent=l()),g}function a(e,t,r,o){const a=Object.getPrototypeOf(t);t[r]=t.levelVal>t.levels.values[r]?p:a[r]?a[r]:i[r]||i[o]||p,function(e,t,r){var o;(e.transmit||t[r]!==p)&&(t[r]=(o=t[r],function(){const a=e.timestamp(),u=new Array(arguments.length),h=Object.getPrototypeOf&&Object.getPrototypeOf(this)===i?i:this;for(var f=0;f<u.length;f++)u[f]=arguments[f];if(e.serialize&&!e.asObject&&c(u,this._serialize,this.serializers,this._stdErrSerialize),e.asObject?o.call(h,function(e,t,r,i){e._serialize&&c(r,e._serialize,e.serializers,e._stdErrSerialize);const o=r.slice();let a=o[0];const u={};i&&(u.time=i),u.level=s.levels.values[t];let l=1+(0|e._childLevel);if(l<1&&(l=1),null!==a&&"object"==typeof a){for(;l--&&"object"==typeof o[0];)Object.assign(u,o.shift());a=o.length?n(o.shift(),o):void 0}else"string"==typeof a&&(a=n(o.shift(),o));return void 0!==a&&(u.msg=a),u}(this,r,u,a)):o.apply(h,u),e.transmit){const n=e.transmit.level||t.level,i=s.levels.values[n],o=s.levels.values[r];if(o<i)return;!function(e,t,r){const n=t.send,i=t.ts,o=t.methodLevel,s=t.methodValue,a=t.val,u=e._logEvent.bindings;c(r,e._serialize||Object.keys(e.serializers),e.serializers,void 0===e._stdErrSerialize||e._stdErrSerialize),e._logEvent.ts=i,e._logEvent.messages=r.filter((function(e){return-1===u.indexOf(e)})),e._logEvent.level.label=o,e._logEvent.level.value=s,n(o,e._logEvent,a),e._logEvent=l(u)}(this,{ts:a,methodLevel:r,methodValue:o,transmitLevel:n,transmitValue:s.levels.values[e.transmit.level||t.level],send:e.transmit.send,val:t.levelVal},u)}}))}(e,t,r)}function c(e,t,r,n){for(const i in e)if(n&&e[i]instanceof Error)e[i]=s.stdSerializers.err(e[i]);else if("object"==typeof e[i]&&!Array.isArray(e[i]))for(const n in e[i])t&&t.indexOf(n)>-1&&n in r&&(e[i][n]=r[n](e[i][n]))}function u(e,t,r){return function(){const n=new Array(1+arguments.length);n[0]=t;for(var i=1;i<n.length;i++)n[i]=arguments[i-1];return e[r].apply(this,n)}}function l(e){return{ts:0,messages:[],bindings:e||[],level:{label:"",value:0}}}function h(e){return"function"==typeof e.timestamp?e.timestamp:!1===e.timestamp?g:m}function f(){return{}}function d(e){return e}function p(){}function g(){return!1}function m(){return Date.now()}s.levels={values:{fatal:60,error:50,warn:40,info:30,debug:20,trace:10},labels:{10:"trace",20:"debug",30:"info",40:"warn",50:"error",60:"fatal"}},s.stdSerializers=o,s.stdTimeFunctions=Object.assign({},{nullTime:g,epochTime:m,unixTime:function(){return Math.round(Date.now()/1e3)},isoTime:function(){return new Date(Date.now()).toISOString()}})},4945:(e,t,r)=>{var n="undefined"!=typeof globalThis&&globalThis||"undefined"!=typeof self&&self||void 0!==r.g&&r.g,i=function(){function e(){this.fetch=!1,this.DOMException=n.DOMException}return e.prototype=n,new e}();!function(e){!function(t){var n=void 0!==e&&e||"undefined"!=typeof self&&self||void 0!==r.g&&r.g||{},i="URLSearchParams"in n,o="Symbol"in n&&"iterator"in Symbol,s="FileReader"in n&&"Blob"in n&&function(){try{return new Blob,!0}catch(e){return!1}}(),a="FormData"in n,c="ArrayBuffer"in n;if(c)var u=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],l=ArrayBuffer.isView||function(e){return e&&u.indexOf(Object.prototype.toString.call(e))>-1};function h(e){if("string"!=typeof e&&(e=String(e)),/[^a-z0-9\-#$%&'*+.^_`|~!]/i.test(e)||""===e)throw new TypeError('Invalid character in header field name: "'+e+'"');return e.toLowerCase()}function f(e){return"string"!=typeof e&&(e=String(e)),e}function d(e){var t={next:function(){var t=e.shift();return{done:void 0===t,value:t}}};return o&&(t[Symbol.iterator]=function(){return t}),t}function p(e){this.map={},e instanceof p?e.forEach((function(e,t){this.append(t,e)}),this):Array.isArray(e)?e.forEach((function(e){if(2!=e.length)throw new TypeError("Headers constructor: expected name/value pair to be length 2, found"+e.length);this.append(e[0],e[1])}),this):e&&Object.getOwnPropertyNames(e).forEach((function(t){this.append(t,e[t])}),this)}function g(e){if(!e._noBody)return e.bodyUsed?Promise.reject(new TypeError("Already read")):void(e.bodyUsed=!0)}function m(e){return new Promise((function(t,r){e.onload=function(){t(e.result)},e.onerror=function(){r(e.error)}}))}function y(e){var t=new FileReader,r=m(t);return t.readAsArrayBuffer(e),r}function v(e){if(e.slice)return e.slice(0);var t=new Uint8Array(e.byteLength);return t.set(new Uint8Array(e)),t.buffer}function b(){return this.bodyUsed=!1,this._initBody=function(e){var t;this.bodyUsed=this.bodyUsed,this._bodyInit=e,e?"string"==typeof e?this._bodyText=e:s&&Blob.prototype.isPrototypeOf(e)?this._bodyBlob=e:a&&FormData.prototype.isPrototypeOf(e)?this._bodyFormData=e:i&&URLSearchParams.prototype.isPrototypeOf(e)?this._bodyText=e.toString():c&&s&&(t=e)&&DataView.prototype.isPrototypeOf(t)?(this._bodyArrayBuffer=v(e.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):c&&(ArrayBuffer.prototype.isPrototypeOf(e)||l(e))?this._bodyArrayBuffer=v(e):this._bodyText=e=Object.prototype.toString.call(e):(this._noBody=!0,this._bodyText=""),this.headers.get("content-type")||("string"==typeof e?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):i&&URLSearchParams.prototype.isPrototypeOf(e)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},s&&(this.blob=function(){var e=g(this);if(e)return e;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))}),this.arrayBuffer=function(){if(this._bodyArrayBuffer)return g(this)||(ArrayBuffer.isView(this._bodyArrayBuffer)?Promise.resolve(this._bodyArrayBuffer.buffer.slice(this._bodyArrayBuffer.byteOffset,this._bodyArrayBuffer.byteOffset+this._bodyArrayBuffer.byteLength)):Promise.resolve(this._bodyArrayBuffer));if(s)return this.blob().then(y);throw new Error("could not read as ArrayBuffer")},this.text=function(){var e,t,r,n,i,o=g(this);if(o)return o;if(this._bodyBlob)return e=this._bodyBlob,r=m(t=new FileReader),i=(n=/charset=([A-Za-z0-9_-]+)/.exec(e.type))?n[1]:"utf-8",t.readAsText(e,i),r;if(this._bodyArrayBuffer)return Promise.resolve(function(e){for(var t=new Uint8Array(e),r=new Array(t.length),n=0;n<t.length;n++)r[n]=String.fromCharCode(t[n]);return r.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},a&&(this.formData=function(){return this.text().then(A)}),this.json=function(){return this.text().then(JSON.parse)},this}p.prototype.append=function(e,t){e=h(e),t=f(t);var r=this.map[e];this.map[e]=r?r+", "+t:t},p.prototype.delete=function(e){delete this.map[h(e)]},p.prototype.get=function(e){return e=h(e),this.has(e)?this.map[e]:null},p.prototype.has=function(e){return this.map.hasOwnProperty(h(e))},p.prototype.set=function(e,t){this.map[h(e)]=f(t)},p.prototype.forEach=function(e,t){for(var r in this.map)this.map.hasOwnProperty(r)&&e.call(t,this.map[r],r,this)},p.prototype.keys=function(){var e=[];return this.forEach((function(t,r){e.push(r)})),d(e)},p.prototype.values=function(){var e=[];return this.forEach((function(t){e.push(t)})),d(e)},p.prototype.entries=function(){var e=[];return this.forEach((function(t,r){e.push([r,t])})),d(e)},o&&(p.prototype[Symbol.iterator]=p.prototype.entries);var w=["CONNECT","DELETE","GET","HEAD","OPTIONS","PATCH","POST","PUT","TRACE"];function E(e,t){if(!(this instanceof E))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');var r,i,o=(t=t||{}).body;if(e instanceof E){if(e.bodyUsed)throw new TypeError("Already read");this.url=e.url,this.credentials=e.credentials,t.headers||(this.headers=new p(e.headers)),this.method=e.method,this.mode=e.mode,this.signal=e.signal,o||null==e._bodyInit||(o=e._bodyInit,e.bodyUsed=!0)}else this.url=String(e);if(this.credentials=t.credentials||this.credentials||"same-origin",!t.headers&&this.headers||(this.headers=new p(t.headers)),this.method=(i=(r=t.method||this.method||"GET").toUpperCase(),w.indexOf(i)>-1?i:r),this.mode=t.mode||this.mode||null,this.signal=t.signal||this.signal||function(){if("AbortController"in n)return(new AbortController).signal}(),this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&o)throw new TypeError("Body not allowed for GET or HEAD requests");if(this._initBody(o),!("GET"!==this.method&&"HEAD"!==this.method||"no-store"!==t.cache&&"no-cache"!==t.cache)){var s=/([?&])_=[^&]*/;s.test(this.url)?this.url=this.url.replace(s,"$1_="+(new Date).getTime()):this.url+=(/\?/.test(this.url)?"&":"?")+"_="+(new Date).getTime()}}function A(e){var t=new FormData;return e.trim().split("&").forEach((function(e){if(e){var r=e.split("="),n=r.shift().replace(/\+/g," "),i=r.join("=").replace(/\+/g," ");t.append(decodeURIComponent(n),decodeURIComponent(i))}})),t}function _(e,t){if(!(this instanceof _))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');if(t||(t={}),this.type="default",this.status=void 0===t.status?200:t.status,this.status<200||this.status>599)throw new RangeError("Failed to construct 'Response': The status provided (0) is outside the range [200, 599].");this.ok=this.status>=200&&this.status<300,this.statusText=void 0===t.statusText?"":""+t.statusText,this.headers=new p(t.headers),this.url=t.url||"",this._initBody(e)}E.prototype.clone=function(){return new E(this,{body:this._bodyInit})},b.call(E.prototype),b.call(_.prototype),_.prototype.clone=function(){return new _(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new p(this.headers),url:this.url})},_.error=function(){var e=new _(null,{status:200,statusText:""});return e.ok=!1,e.status=0,e.type="error",e};var x=[301,302,303,307,308];_.redirect=function(e,t){if(-1===x.indexOf(t))throw new RangeError("Invalid status code");return new _(null,{status:t,headers:{location:e}})},t.DOMException=n.DOMException;try{new t.DOMException}catch(e){t.DOMException=function(e,t){this.message=e,this.name=t;var r=Error(e);this.stack=r.stack},t.DOMException.prototype=Object.create(Error.prototype),t.DOMException.prototype.constructor=t.DOMException}function S(e,r){return new Promise((function(i,o){var a=new E(e,r);if(a.signal&&a.signal.aborted)return o(new t.DOMException("Aborted","AbortError"));var u=new XMLHttpRequest;function l(){u.abort()}if(u.onload=function(){var e,t,r={statusText:u.statusText,headers:(e=u.getAllResponseHeaders()||"",t=new p,e.replace(/\r?\n[\t ]+/g," ").split("\r").map((function(e){return 0===e.indexOf("\n")?e.substr(1,e.length):e})).forEach((function(e){var r=e.split(":"),n=r.shift().trim();if(n){var i=r.join(":").trim();try{t.append(n,i)}catch(e){console.warn("Response "+e.message)}}})),t)};0===a.url.indexOf("file://")&&(u.status<200||u.status>599)?r.status=200:r.status=u.status,r.url="responseURL"in u?u.responseURL:r.headers.get("X-Request-URL");var n="response"in u?u.response:u.responseText;setTimeout((function(){i(new _(n,r))}),0)},u.onerror=function(){setTimeout((function(){o(new TypeError("Network request failed"))}),0)},u.ontimeout=function(){setTimeout((function(){o(new TypeError("Network request timed out"))}),0)},u.onabort=function(){setTimeout((function(){o(new t.DOMException("Aborted","AbortError"))}),0)},u.open(a.method,function(e){try{return""===e&&n.location.href?n.location.href:e}catch(t){return e}}(a.url),!0),"include"===a.credentials?u.withCredentials=!0:"omit"===a.credentials&&(u.withCredentials=!1),"responseType"in u&&(s?u.responseType="blob":c&&(u.responseType="arraybuffer")),r&&"object"==typeof r.headers&&!(r.headers instanceof p||n.Headers&&r.headers instanceof n.Headers)){var d=[];Object.getOwnPropertyNames(r.headers).forEach((function(e){d.push(h(e)),u.setRequestHeader(e,f(r.headers[e]))})),a.headers.forEach((function(e,t){-1===d.indexOf(t)&&u.setRequestHeader(t,e)}))}else a.headers.forEach((function(e,t){u.setRequestHeader(t,e)}));a.signal&&(a.signal.addEventListener("abort",l),u.onreadystatechange=function(){4===u.readyState&&a.signal.removeEventListener("abort",l)}),u.send(void 0===a._bodyInit?null:a._bodyInit)}))}S.polyfill=!0,n.fetch||(n.fetch=S,n.Headers=p,n.Request=E,n.Response=_),t.Headers=p,t.Request=E,t.Response=_,t.fetch=S}({})}(i),i.fetch.ponyfill=!0,delete i.fetch.polyfill;var o=n.fetch?n:i;(t=o.fetch).default=o.fetch,t.fetch=o.fetch,t.Headers=o.Headers,t.Request=o.Request,t.Response=o.Response,e.exports=t},5215:(e,t,r)=>{"use strict";r.r(t),r.d(t,{__assign:()=>o,__asyncDelegator:()=>w,__asyncGenerator:()=>b,__asyncValues:()=>E,__await:()=>v,__awaiter:()=>l,__classPrivateFieldGet:()=>S,__classPrivateFieldSet:()=>k,__createBinding:()=>f,__decorate:()=>a,__exportStar:()=>d,__extends:()=>i,__generator:()=>h,__importDefault:()=>x,__importStar:()=>_,__makeTemplateObject:()=>A,__metadata:()=>u,__param:()=>c,__read:()=>g,__rest:()=>s,__spread:()=>m,__spreadArrays:()=>y,__values:()=>p});var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},n(e,t)};function i(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}var o=function(){return o=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},o.apply(this,arguments)};function s(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]])}return r}function a(e,t,r,n){var i,o=arguments.length,s=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,r,s):i(t,r))||s);return o>3&&s&&Object.defineProperty(t,r,s),s}function c(e,t){return function(r,n){t(r,n,e)}}function u(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}function l(e,t,r,n){return new(r||(r=Promise))((function(i,o){function s(e){try{c(n.next(e))}catch(e){o(e)}}function a(e){try{c(n.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))}function h(e,t){var r,n,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,n&&(i=2&o[0]?n.return:o[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,o[1])).done)return i;switch(n=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,n=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],n=0}finally{r=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}}function f(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}function d(e,t){for(var r in e)"default"===r||t.hasOwnProperty(r)||(t[r]=e[r])}function p(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function g(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,i,o=r.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(n=o.next()).done;)s.push(n.value)}catch(e){i={error:e}}finally{try{n&&!n.done&&(r=o.return)&&r.call(o)}finally{if(i)throw i.error}}return s}function m(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(g(arguments[t]));return e}function y(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;var n=Array(e),i=0;for(t=0;t<r;t++)for(var o=arguments[t],s=0,a=o.length;s<a;s++,i++)n[i]=o[s];return n}function v(e){return this instanceof v?(this.v=e,this):new v(e)}function b(e,t,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n,i=r.apply(e,t||[]),o=[];return n={},s("next"),s("throw"),s("return"),n[Symbol.asyncIterator]=function(){return this},n;function s(e){i[e]&&(n[e]=function(t){return new Promise((function(r,n){o.push([e,t,r,n])>1||a(e,t)}))})}function a(e,t){try{(r=i[e](t)).value instanceof v?Promise.resolve(r.value.v).then(c,u):l(o[0][2],r)}catch(e){l(o[0][3],e)}var r}function c(e){a("next",e)}function u(e){a("throw",e)}function l(e,t){e(t),o.shift(),o.length&&a(o[0][0],o[0][1])}}function w(e){var t,r;return t={},n("next"),n("throw",(function(e){throw e})),n("return"),t[Symbol.iterator]=function(){return this},t;function n(n,i){t[n]=e[n]?function(t){return(r=!r)?{value:v(e[n](t)),done:"return"===n}:i?i(t):t}:i}}function E(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,r=e[Symbol.asyncIterator];return r?r.call(e):(e=p(e),t={},n("next"),n("throw"),n("return"),t[Symbol.asyncIterator]=function(){return this},t);function n(r){t[r]=e[r]&&function(t){return new Promise((function(n,i){!function(e,t,r,n){Promise.resolve(n).then((function(t){e({value:t,done:r})}),t)}(n,i,(t=e[r](t)).done,t.value)}))}}}function A(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}function _(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function x(e){return e&&e.__esModule?e:{default:e}}function S(e,t){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return t.get(e)}function k(e,t,r){if(!t.has(e))throw new TypeError("attempted to set private field on non-instance");return t.set(e,r),r}},5568:e=>{"use strict";const{AbortController:t,AbortSignal:r}="undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0;e.exports=t,e.exports.AbortSignal=r,e.exports.default=t},5682:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(5215);n.__exportStar(r(7173),t),n.__exportStar(r(1089),t)},5841:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;t.default=[1,3,6,10,15,21,28,36,45,55,2,14,27,41,56,8,25,43,62,18,39,61,20,44]},5924:(e,t,r)=>{"use strict";r.d(t,{Vw:()=>f,Fc:()=>u,Id:()=>h,O8:()=>s,qv:()=>c,po:()=>p,Ow:()=>a,ZJ:()=>l,DH:()=>o,ld:()=>d});const n="object"==typeof globalThis&&"crypto"in globalThis?globalThis.crypto:void 0;var i=r(9999);function o(e){return new Uint32Array(e.buffer,e.byteOffset,Math.floor(e.byteLength/4))}function s(e){return new DataView(e.buffer,e.byteOffset,e.byteLength)}function a(e,t){return e<<32-t|e>>>t}const c=(()=>68===new Uint8Array(new Uint32Array([287454020]).buffer)[0])();function u(e){for(let r=0;r<e.length;r++)e[r]=(t=e[r])<<24&4278190080|t<<8&16711680|t>>>8&65280|t>>>24&255;var t}function l(e){return"string"==typeof e&&(e=function(e){if("string"!=typeof e)throw new Error("utf8ToBytes expected string, got "+typeof e);return new Uint8Array((new TextEncoder).encode(e))}(e)),(0,i.DO)(e),e}function h(...e){let t=0;for(let r=0;r<e.length;r++){const n=e[r];(0,i.DO)(n),t+=n.length}const r=new Uint8Array(t);for(let t=0,n=0;t<e.length;t++){const i=e[t];r.set(i,n),n+=i.length}return r}class f{clone(){return this._cloneInto()}}function d(e){const t=t=>e().update(l(t)).digest(),r=e();return t.outputLen=r.outputLen,t.blockLen=r.blockLen,t.create=()=>e(),t}function p(e=32){if(n&&"function"==typeof n.getRandomValues)return n.getRandomValues(new Uint8Array(e));if(n&&"function"==typeof n.randomBytes)return n.randomBytes(e);throw new Error("crypto.getRandomValues must be defined")}},6166:(e,t,r)=>{"use strict";var n=r(7426),i=r(3349);function o(){this.pending=null,this.pendingTotal=0,this.blockSize=this.constructor.blockSize,this.outSize=this.constructor.outSize,this.hmacStrength=this.constructor.hmacStrength,this.padLength=this.constructor.padLength/8,this.endian="big",this._delta8=this.blockSize/8,this._delta32=this.blockSize/32}t.BlockHash=o,o.prototype.update=function(e,t){if(e=n.toArray(e,t),this.pending?this.pending=this.pending.concat(e):this.pending=e,this.pendingTotal+=e.length,this.pending.length>=this._delta8){var r=(e=this.pending).length%this._delta8;this.pending=e.slice(e.length-r,e.length),0===this.pending.length&&(this.pending=null),e=n.join32(e,0,e.length-r,this.endian);for(var i=0;i<e.length;i+=this._delta32)this._update(e,i,i+this._delta32)}return this},o.prototype.digest=function(e){return this.update(this._pad()),i(null===this.pending),this._digest(e)},o.prototype._pad=function(){var e=this.pendingTotal,t=this._delta8,r=t-(e+this.padLength)%t,n=new Array(r+this.padLength);n[0]=128;for(var i=1;i<r;i++)n[i]=0;if(e<<=3,"big"===this.endian){for(var o=8;o<this.padLength;o++)n[i++]=0;n[i++]=0,n[i++]=0,n[i++]=0,n[i++]=0,n[i++]=e>>>24&255,n[i++]=e>>>16&255,n[i++]=e>>>8&255,n[i++]=255&e}else for(n[i++]=255&e,n[i++]=e>>>8&255,n[i++]=e>>>16&255,n[i++]=e>>>24&255,n[i++]=0,n[i++]=0,n[i++]=0,n[i++]=0,o=8;o<this.padLength;o++)n[i++]=0;return n}},6225:(e,t,r)=>{"use strict";var n=r(7426).rotr32;function i(e,t,r){return e&t^~e&r}function o(e,t,r){return e&t^e&r^t&r}function s(e,t,r){return e^t^r}t.ft_1=function(e,t,r,n){return 0===e?i(t,r,n):1===e||3===e?s(t,r,n):2===e?o(t,r,n):void 0},t.ch32=i,t.maj32=o,t.p32=s,t.s0_256=function(e){return n(e,2)^n(e,13)^n(e,22)},t.s1_256=function(e){return n(e,6)^n(e,11)^n(e,25)},t.g0_256=function(e){return n(e,7)^n(e,18)^e>>>3},t.g1_256=function(e){return n(e,17)^n(e,19)^e>>>10}},6229:(e,t,r)=>{"use strict";t.sha1=r(3917),t.sha224=r(7714),t.sha256=r(2287),t.sha384=r(1911),t.sha512=r(7766)},6317:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,i=(n=r(1196))&&n.__esModule?n:{default:n};t.default=function(e){for(var t=e.A,r=e.C,n=0;n<25;n+=5){for(var o=0;o<5;o++)(0,i.default)(t,n+o)(r,o);for(var s=0;s<5;s++){var a=2*(n+s),c=(s+1)%5*2,u=(s+2)%5*2;t[a]^=~r[c]&r[u],t[a+1]^=~r[c+1]&r[u+1]}}}},6351:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;t.default=[10,7,11,17,18,3,5,16,8,21,24,4,15,23,19,13,12,2,20,14,22,9,6,1]},6698:e=>{"function"==typeof Object.create?e.exports=function(e,t){t&&(e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:e.exports=function(e,t){if(t){e.super_=t;var r=function(){};r.prototype=t.prototype,e.prototype=new r,e.prototype.constructor=e}}},6784:(e,t,r)=>{"use strict";var n=r(7426),i=r(6166),o=n.rotl32,s=n.sum32,a=n.sum32_3,c=n.sum32_4,u=i.BlockHash;function l(){if(!(this instanceof l))return new l;u.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.endian="little"}function h(e,t,r,n){return e<=15?t^r^n:e<=31?t&r|~t&n:e<=47?(t|~r)^n:e<=63?t&n|r&~n:t^(r|~n)}function f(e){return e<=15?0:e<=31?1518500249:e<=47?1859775393:e<=63?2400959708:2840853838}function d(e){return e<=15?1352829926:e<=31?1548603684:e<=47?1836072691:e<=63?2053994217:0}n.inherits(l,u),t.ripemd160=l,l.blockSize=512,l.outSize=160,l.hmacStrength=192,l.padLength=64,l.prototype._update=function(e,t){for(var r=this.h[0],n=this.h[1],i=this.h[2],u=this.h[3],l=this.h[4],v=r,b=n,w=i,E=u,A=l,_=0;_<80;_++){var x=s(o(c(r,h(_,n,i,u),e[p[_]+t],f(_)),m[_]),l);r=l,l=u,u=o(i,10),i=n,n=x,x=s(o(c(v,h(79-_,b,w,E),e[g[_]+t],d(_)),y[_]),A),v=A,A=E,E=o(w,10),w=b,b=x}x=a(this.h[1],i,E),this.h[1]=a(this.h[2],u,A),this.h[2]=a(this.h[3],l,v),this.h[3]=a(this.h[4],r,b),this.h[4]=a(this.h[0],n,w),this.h[0]=x},l.prototype._digest=function(e){return"hex"===e?n.toHex32(this.h,"little"):n.split32(this.h,"little")};var p=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],g=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],m=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],y=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]},6986:(e,t,r)=>{"use strict";r.r(t),r.d(t,{AppUtils:()=>Ju,InteractionTemplateUtils:()=>mh,LOCAL_STORAGE:()=>YR,SESSION_STORAGE:()=>JR,TestUtils:()=>_a,TransactionError:()=>tl,VERSION:()=>Jc,WalletUtils:()=>Gu,account:()=>qs,arg:()=>sa,args:()=>oa,atBlockHeight:()=>js,atBlockId:()=>Fs,authenticate:()=>eN,authorization:()=>Js,authorizations:()=>$s,authz:()=>oN,block:()=>Hs,build:()=>Hi,cadence:()=>gn,cdc:()=>gn,config:()=>ct,createSignableVoucher:()=>ts,currentUser:()=>XR,decode:()=>Ls,discovery:()=>Hl,display:()=>wt,events:()=>bl,getAccount:()=>$i,getBlock:()=>Wi,getBlockHeader:()=>Zs,getChainId:()=>bu,getCollection:()=>ea,getEvents:()=>Ys,getEventsAtBlockHeightRange:()=>Qs,getEventsAtBlockIds:()=>Xs,getNetworkParameters:()=>na,getNodeVersionInfo:()=>Ks,getTransaction:()=>ra,getTransactionStatus:()=>ta,invariant:()=>Cs,isBad:()=>Mi,isOk:()=>Ci,limit:()=>ia,logIn:()=>iN,mutate:()=>ZR,nodeVersionInfo:()=>Vs,param:()=>Sa,params:()=>xa,payer:()=>ca,ping:()=>ua,pipe:()=>Di,pluginRegistry:()=>Pl,proposer:()=>aa,query:()=>Tu,reauthenticate:()=>rN,ref:()=>la,sansPrefix:()=>vt,script:()=>ha,send:()=>Ms,serialize:()=>Qu,signUp:()=>nN,subscribeEvents:()=>ma,t:()=>n,transaction:()=>pa,tx:()=>hl,unauthenticate:()=>tN,validator:()=>Ds,verifyUserSignatures:()=>Yu,voucherIntercept:()=>ga,voucherToTxId:()=>rs,why:()=>Li,withPrefix:()=>bt});var n={};r.r(n),r.d(n,{Address:()=>lc,Array:()=>pc,Bool:()=>uc,Character:()=>cc,Dictionary:()=>gc,Enum:()=>bc,Event:()=>mc,Fix64:()=>sc,Identity:()=>Ua,InclusiveRange:()=>Ec,Int:()=>ja,Int128:()=>Ja,Int16:()=>Ga,Int256:()=>Qa,Int32:()=>Ka,Int64:()=>Wa,Int8:()=>za,Optional:()=>fc,Path:()=>wc,Reference:()=>dc,Resource:()=>yc,String:()=>ac,Struct:()=>vc,UFix64:()=>oc,UInt:()=>Da,UInt128:()=>$a,UInt16:()=>qa,UInt256:()=>Ya,UInt32:()=>Ha,UInt64:()=>Va,UInt8:()=>Fa,Void:()=>hc,Word128:()=>rc,Word16:()=>Za,Word256:()=>nc,Word32:()=>ec,Word64:()=>tc,Word8:()=>Xa,_Array:()=>pc});var i={};r.r(i),r.d(i,{identity:()=>Wv});var o={};r.r(o),r.d(o,{base2:()=>$v});var s={};r.r(s),r.d(s,{base8:()=>Jv});var a={};r.r(a),r.d(a,{base10:()=>Yv});var c={};r.r(c),r.d(c,{base16:()=>Qv,base16upper:()=>Xv});var u={};r.r(u),r.d(u,{base32:()=>Zv,base32hex:()=>nb,base32hexpad:()=>ob,base32hexpadupper:()=>sb,base32hexupper:()=>ib,base32pad:()=>tb,base32padupper:()=>rb,base32upper:()=>eb,base32z:()=>ab});var l={};r.r(l),r.d(l,{base36:()=>cb,base36upper:()=>ub});var h={};r.r(h),r.d(h,{base58btc:()=>lb,base58flickr:()=>hb});var f={};r.r(f),r.d(f,{base64:()=>fb,base64pad:()=>db,base64url:()=>pb,base64urlpad:()=>gb});var d={};r.r(d),r.d(d,{base256emoji:()=>bb});var p={};r.r(p),r.d(p,{sha256:()=>zb,sha512:()=>qb});var g={};r.r(g),r.d(g,{identity:()=>Hb});var m={};r.r(m),r.d(m,{code:()=>Vb,decode:()=>$b,encode:()=>Wb,name:()=>Kb});var y={};function v(e){return v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},v(e)}function b(){b=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,i=Object.defineProperty||function(e,t,r){e[t]=r.value},o="function"==typeof Symbol?Symbol:{},s=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function u(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,r){return e[t]=r}}function l(e,t,r,n){var o=t&&t.prototype instanceof y?t:y,s=Object.create(o.prototype),a=new N(n||[]);return i(s,"_invoke",{value:O(e,r,a)}),s}function h(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=l;var f="suspendedStart",d="suspendedYield",p="executing",g="completed",m={};function y(){}function w(){}function E(){}var A={};u(A,s,(function(){return this}));var _=Object.getPrototypeOf,x=_&&_(_(C([])));x&&x!==r&&n.call(x,s)&&(A=x);var S=E.prototype=y.prototype=Object.create(A);function k(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function I(e,t){function r(i,o,s,a){var c=h(e[i],e,o);if("throw"!==c.type){var u=c.arg,l=u.value;return l&&"object"==v(l)&&n.call(l,"__await")?t.resolve(l.__await).then((function(e){r("next",e,s,a)}),(function(e){r("throw",e,s,a)})):t.resolve(l).then((function(e){u.value=e,s(u)}),(function(e){return r("throw",e,s,a)}))}a(c.arg)}var o;i(this,"_invoke",{value:function(e,n){function i(){return new t((function(t,i){r(e,n,t,i)}))}return o=o?o.then(i,i):i()}})}function O(t,r,n){var i=f;return function(o,s){if(i===p)throw Error("Generator is already running");if(i===g){if("throw"===o)throw s;return{value:e,done:!0}}for(n.method=o,n.arg=s;;){var a=n.delegate;if(a){var c=T(a,n);if(c){if(c===m)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(i===f)throw i=g,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);i=p;var u=h(t,r,n);if("normal"===u.type){if(i=n.done?g:d,u.arg===m)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(i=g,n.method="throw",n.arg=u.arg)}}}function T(t,r){var n=r.method,i=t.iterator[n];if(i===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,T(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),m;var o=h(i,t.iterator,r.arg);if("throw"===o.type)return r.method="throw",r.arg=o.arg,r.delegate=null,m;var s=o.arg;return s?s.done?(r[t.resultName]=s.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,m):s:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,m)}function P(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function R(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function N(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(P,this),this.reset(!0)}function C(t){if(t||""===t){var r=t[s];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var i=-1,o=function r(){for(;++i<t.length;)if(n.call(t,i))return r.value=t[i],r.done=!1,r;return r.value=e,r.done=!0,r};return o.next=o}}throw new TypeError(v(t)+" is not iterable")}return w.prototype=E,i(S,"constructor",{value:E,configurable:!0}),i(E,"constructor",{value:w,configurable:!0}),w.displayName=u(E,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===w||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,E):(e.__proto__=E,u(e,c,"GeneratorFunction")),e.prototype=Object.create(S),e},t.awrap=function(e){return{__await:e}},k(I.prototype),u(I.prototype,a,(function(){return this})),t.AsyncIterator=I,t.async=function(e,r,n,i,o){void 0===o&&(o=Promise);var s=new I(l(e,r,n,i),o);return t.isGeneratorFunction(r)?s:s.next().then((function(e){return e.done?e.value:s.next()}))},k(S),u(S,c,"Generator"),u(S,s,(function(){return this})),u(S,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=C,N.prototype={constructor:N,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(R),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function i(n,i){return a.type="throw",a.arg=t,r.next=n,i&&(r.method="next",r.arg=e),!!i}for(var o=this.tryEntries.length-1;o>=0;--o){var s=this.tryEntries[o],a=s.completion;if("root"===s.tryLoc)return i("end");if(s.tryLoc<=this.prev){var c=n.call(s,"catchLoc"),u=n.call(s,"finallyLoc");if(c&&u){if(this.prev<s.catchLoc)return i(s.catchLoc,!0);if(this.prev<s.finallyLoc)return i(s.finallyLoc)}else if(c){if(this.prev<s.catchLoc)return i(s.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<s.finallyLoc)return i(s.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var s=o?o.completion:{};return s.type=e,s.arg=t,o?(this.method="next",this.next=o.finallyLoc,m):this.complete(s)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),m},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),R(r),m}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var i=n.arg;R(r)}return i}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:C(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),m}},t}function w(e){return function(e){if(Array.isArray(e))return E(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return E(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?E(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function E(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function A(e,t,r,n,i,o,s){try{var a=e[o](s),c=a.value}catch(e){return void r(e)}a.done?t(c):Promise.resolve(c).then(n,i)}function _(e){return function(){var t=this,r=arguments;return new Promise((function(n,i){var o=e.apply(t,r);function s(e){A(o,n,i,s,a,"next",e)}function a(e){A(o,n,i,s,a,"throw",e)}s(void 0)}))}}r.r(y),r.d(y,{code:()=>Xb,decode:()=>ew,encode:()=>Zb,name:()=>Qb});var x=null,S=function(e){return e[e.debug=5]="debug",e[e.info=4]="info",e[e.log=3]="log",e[e.warn=2]="warn",e[e.error=1]="error",e}({}),k=function(e){var t=e.title,r=e.message;return["\n    %c".concat(t,"\n    ============================\n\n    ").concat(r,"\n\n    ============================\n    ").replace(/\n[^\S\r\n]+/g,"\n").trim(),"font-weight:bold;font-family:monospace;"]},I=function(){var e=_(b().mark((function e(t){var r,n,i,o,s,a,c,u,l,h,f,d,p;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u=t.title,l=t.message,h=t.level,f=t.always,e.next=3,null===(n=x)||void 0===n||null===(n=n())||void 0===n?void 0:n.get("logger.level");case 3:if(e.t1=r=e.sent,e.t0=null!==e.t1,!e.t0){e.next=7;break}e.t0=void 0!==r;case 7:if(!e.t0){e.next=11;break}e.t2=r,e.next=12;break;case 11:e.t2=S.warn;case 12:if(d=e.t2,f||!(d<h)){e.next=15;break}return e.abrupt("return");case 15:p=k({title:u,message:l}),e.t3=h,e.next=e.t3===S.debug?19:e.t3===S.info?21:e.t3===S.warn?23:e.t3===S.error?25:27;break;case 19:return(i=console).debug.apply(i,w(p)),e.abrupt("break",28);case 21:return(o=console).info.apply(o,w(p)),e.abrupt("break",28);case 23:return(s=console).warn.apply(s,w(p)),e.abrupt("break",28);case 25:return(a=console).error.apply(a,w(p)),e.abrupt("break",28);case 27:(c=console).log.apply(c,w(p));case 28:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();function O(e,t){if(!e){var r,n,i=new Error("INVARIANT ".concat(t));i.stack=null===(r=i.stack)||void 0===r||null===(r=r.split("\n"))||void 0===r||null===(r=r.filter((function(e){return!/at invariant/.test(e)})))||void 0===r?void 0:r.join("\n");for(var o=arguments.length,s=new Array(o>2?o-2:0),a=2;a<o;a++)s[a-2]=arguments[a];throw(n=console).error.apply(n,["\n\n---\n\n",i,"\n\n"].concat(s,["\n\n---\n\n"])),i}}I.deprecate=function(e){var t=e.pkg,r=e.subject,n=e.transition,i=e.level,o=void 0===i?S.warn:i,s=e.message,a=void 0===s?"":s,c=e.callback,u=void 0===c?null:c,l=function(){return I({title:"".concat(t?t+" ":"","Deprecation Notice"),message:"\n      ".concat(r?"".concat((e=r,e.charAt(0).toUpperCase()+e.slice(1))," is deprecated and will cease to work in future releases").concat(t?" of "+t:"","."):"").concat(a?"\n"+a:"").concat(n?"\nYou can learn more (including a guide on common transition paths) here: ".concat(n):"","\n    ").trim(),level:o});var e};return"function"==typeof u?_(b().mark((function e(){var t=arguments;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l();case 2:return e.next=4,u.apply(void 0,t);case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)}))):l()};const T={randomUUID:"undefined"!=typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};let P;const R=new Uint8Array(16);function N(){if(!P&&(P="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!P))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return P(R)}const C=[];for(let e=0;e<256;++e)C.push((e+256).toString(16).slice(1));const M=function(e,t,r){if(T.randomUUID&&!t&&!e)return T.randomUUID();const n=(e=e||{}).random||(e.rng||N)();if(n[6]=15&n[6]|64,n[8]=63&n[8]|128,t){r=r||0;for(let e=0;e<16;++e)t[r+e]=n[e];return t}return function(e,t=0){return C[e[t+0]]+C[e[t+1]]+C[e[t+2]]+C[e[t+3]]+"-"+C[e[t+4]]+C[e[t+5]]+"-"+C[e[t+6]]+C[e[t+7]]+"-"+C[e[t+8]]+C[e[t+9]]+"-"+C[e[t+10]]+C[e[t+11]]+C[e[t+12]]+C[e[t+13]]+C[e[t+14]]+C[e[t+15]]}(n)};var L=function(e){return e.UNKNOWN="UNKNOWN",e.SCRIPT="SCRIPT",e.TRANSACTION="TRANSACTION",e.GET_TRANSACTION_STATUS="GET_TRANSACTION_STATUS",e.GET_ACCOUNT="GET_ACCOUNT",e.GET_EVENTS="GET_EVENTS",e.PING="PING",e.GET_TRANSACTION="GET_TRANSACTION",e.GET_BLOCK="GET_BLOCK",e.GET_BLOCK_HEADER="GET_BLOCK_HEADER",e.GET_COLLECTION="GET_COLLECTION",e.GET_NETWORK_PARAMETERS="GET_NETWORK_PARAMETERS",e.SUBSCRIBE_EVENTS="SUBSCRIBE_EVENTS",e.GET_NODE_VERSION_INFO="GET_NODE_VERSION_INFO",e}({}),B=function(e){return e.BAD="BAD",e.OK="OK",e}({}),U=function(e){return e.AUTHORIZER="authorizer",e.PAYER="payer",e.PROPOSER="proposer",e}({}),D=function(e){return e.ARGUMENT="ARGUMENT",e.ACCOUNT="ACCOUNT",e}({}),j=function(e){return e[e.UNKNOWN_ERROR=-1]="UNKNOWN_ERROR",e[e.TX_VALIDATION_ERROR=1e3]="TX_VALIDATION_ERROR",e[e.INVALID_TX_BYTE_SIZE_ERROR=1001]="INVALID_TX_BYTE_SIZE_ERROR",e[e.INVALID_REFERENCE_BLOCK_ERROR=1002]="INVALID_REFERENCE_BLOCK_ERROR",e[e.EXPIRED_TRANSACTION_ERROR=1003]="EXPIRED_TRANSACTION_ERROR",e[e.INVALID_SCRIPT_ERROR=1004]="INVALID_SCRIPT_ERROR",e[e.INVALID_GAS_LIMIT_ERROR=1005]="INVALID_GAS_LIMIT_ERROR",e[e.INVALID_PROPOSAL_SIGNATURE_ERROR=1006]="INVALID_PROPOSAL_SIGNATURE_ERROR",e[e.INVALID_PROPOSAL_SEQ_NUMBER_ERROR=1007]="INVALID_PROPOSAL_SEQ_NUMBER_ERROR",e[e.INVALID_PAYLOAD_SIGNATURE_ERROR=1008]="INVALID_PAYLOAD_SIGNATURE_ERROR",e[e.INVALID_ENVELOPE_SIGNATURE_ERROR=1009]="INVALID_ENVELOPE_SIGNATURE_ERROR",e[e.FVM_INTERNAL_ERROR=1050]="FVM_INTERNAL_ERROR",e[e.VALUE_ERROR=1051]="VALUE_ERROR",e[e.INVALID_ARGUMENT_ERROR=1052]="INVALID_ARGUMENT_ERROR",e[e.INVALID_ADDRESS_ERROR=1053]="INVALID_ADDRESS_ERROR",e[e.INVALID_LOCATION_ERROR=1054]="INVALID_LOCATION_ERROR",e[e.ACCOUNT_AUTHORIZATION_ERROR=1055]="ACCOUNT_AUTHORIZATION_ERROR",e[e.OPERATION_AUTHORIZATION_ERROR=1056]="OPERATION_AUTHORIZATION_ERROR",e[e.OPERATION_NOT_SUPPORTED_ERROR=1057]="OPERATION_NOT_SUPPORTED_ERROR",e[e.BLOCK_HEIGHT_OUT_OF_RANGE_ERROR=1058]="BLOCK_HEIGHT_OUT_OF_RANGE_ERROR",e[e.EXECUTION_ERROR=1100]="EXECUTION_ERROR",e[e.CADENCE_RUNTIME_ERROR=1101]="CADENCE_RUNTIME_ERROR",e[e.ENCODING_UNSUPPORTED_VALUE=1102]="ENCODING_UNSUPPORTED_VALUE",e[e.STORAGE_CAPACITY_EXCEEDED=1103]="STORAGE_CAPACITY_EXCEEDED",e[e.GAS_LIMIT_EXCEEDED_ERROR=1104]="GAS_LIMIT_EXCEEDED_ERROR",e[e.EVENT_LIMIT_EXCEEDED_ERROR=1105]="EVENT_LIMIT_EXCEEDED_ERROR",e[e.LEDGER_INTERACTION_LIMIT_EXCEEDED_ERROR=1106]="LEDGER_INTERACTION_LIMIT_EXCEEDED_ERROR",e[e.STATE_KEY_SIZE_LIMIT_ERROR=1107]="STATE_KEY_SIZE_LIMIT_ERROR",e[e.STATE_VALUE_SIZE_LIMIT_ERROR=1108]="STATE_VALUE_SIZE_LIMIT_ERROR",e[e.TRANSACTION_FEE_DEDUCTION_FAILED_ERROR=1109]="TRANSACTION_FEE_DEDUCTION_FAILED_ERROR",e[e.COMPUTATION_LIMIT_EXCEEDED_ERROR=1110]="COMPUTATION_LIMIT_EXCEEDED_ERROR",e[e.MEMORY_LIMIT_EXCEEDED_ERROR=1111]="MEMORY_LIMIT_EXCEEDED_ERROR",e[e.COULD_NOT_DECODE_EXECUTION_PARAMETER_FROM_STATE=1112]="COULD_NOT_DECODE_EXECUTION_PARAMETER_FROM_STATE",e[e.SCRIPT_EXECUTION_TIMED_OUT_ERROR=1113]="SCRIPT_EXECUTION_TIMED_OUT_ERROR",e[e.SCRIPT_EXECUTION_CANCELLED_ERROR=1114]="SCRIPT_EXECUTION_CANCELLED_ERROR",e[e.EVENT_ENCODING_ERROR=1115]="EVENT_ENCODING_ERROR",e[e.INVALID_INTERNAL_STATE_ACCESS_ERROR=1116]="INVALID_INTERNAL_STATE_ACCESS_ERROR",e[e.INSUFFICIENT_PAYER_BALANCE=1118]="INSUFFICIENT_PAYER_BALANCE",e[e.ACCOUNT_ERROR=1200]="ACCOUNT_ERROR",e[e.ACCOUNT_NOT_FOUND_ERROR=1201]="ACCOUNT_NOT_FOUND_ERROR",e[e.ACCOUNT_PUBLIC_KEY_NOT_FOUND_ERROR=1202]="ACCOUNT_PUBLIC_KEY_NOT_FOUND_ERROR",e[e.ACCOUNT_ALREADY_EXISTS_ERROR=1203]="ACCOUNT_ALREADY_EXISTS_ERROR",e[e.FROZEN_ACCOUNT_ERROR=1204]="FROZEN_ACCOUNT_ERROR",e[e.ACCOUNT_STORAGE_NOT_INITIALIZED_ERROR=1205]="ACCOUNT_STORAGE_NOT_INITIALIZED_ERROR",e[e.ACCOUNT_PUBLIC_KEY_LIMIT_ERROR=1206]="ACCOUNT_PUBLIC_KEY_LIMIT_ERROR",e[e.CONTRACT_ERROR=1250]="CONTRACT_ERROR",e[e.CONTRACT_NOT_FOUND_ERROR=1251]="CONTRACT_NOT_FOUND_ERROR",e[e.CONTRACT_NAMES_NOT_FOUND_ERROR=1252]="CONTRACT_NAMES_NOT_FOUND_ERROR",e[e.EVM_EXECUTION_ERROR=1300]="EVM_EXECUTION_ERROR",e}({});function F(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function z(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?F(Object(r),!0).forEach((function(t){q(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):F(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function q(e,t,r){return(t=function(e){var t=function(e){if("object"!=K(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=K(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==K(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function G(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return H(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?H(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,s=!0,a=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return s=e.done,e},e:function(e){a=!0,o=e},f:function(){try{s||null==r.return||r.return()}finally{if(a)throw o}}}}function H(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function K(e){return K="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},K(e)}function V(){V=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,i=Object.defineProperty||function(e,t,r){e[t]=r.value},o="function"==typeof Symbol?Symbol:{},s=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function u(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,r){return e[t]=r}}function l(e,t,r,n){var o=t&&t.prototype instanceof y?t:y,s=Object.create(o.prototype),a=new P(n||[]);return i(s,"_invoke",{value:k(e,r,a)}),s}function h(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=l;var f="suspendedStart",d="suspendedYield",p="executing",g="completed",m={};function y(){}function v(){}function b(){}var w={};u(w,s,(function(){return this}));var E=Object.getPrototypeOf,A=E&&E(E(R([])));A&&A!==r&&n.call(A,s)&&(w=A);var _=b.prototype=y.prototype=Object.create(w);function x(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function S(e,t){function r(i,o,s,a){var c=h(e[i],e,o);if("throw"!==c.type){var u=c.arg,l=u.value;return l&&"object"==K(l)&&n.call(l,"__await")?t.resolve(l.__await).then((function(e){r("next",e,s,a)}),(function(e){r("throw",e,s,a)})):t.resolve(l).then((function(e){u.value=e,s(u)}),(function(e){return r("throw",e,s,a)}))}a(c.arg)}var o;i(this,"_invoke",{value:function(e,n){function i(){return new t((function(t,i){r(e,n,t,i)}))}return o=o?o.then(i,i):i()}})}function k(t,r,n){var i=f;return function(o,s){if(i===p)throw Error("Generator is already running");if(i===g){if("throw"===o)throw s;return{value:e,done:!0}}for(n.method=o,n.arg=s;;){var a=n.delegate;if(a){var c=I(a,n);if(c){if(c===m)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(i===f)throw i=g,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);i=p;var u=h(t,r,n);if("normal"===u.type){if(i=n.done?g:d,u.arg===m)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(i=g,n.method="throw",n.arg=u.arg)}}}function I(t,r){var n=r.method,i=t.iterator[n];if(i===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,I(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),m;var o=h(i,t.iterator,r.arg);if("throw"===o.type)return r.method="throw",r.arg=o.arg,r.delegate=null,m;var s=o.arg;return s?s.done?(r[t.resultName]=s.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,m):s:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,m)}function O(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function T(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function P(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(O,this),this.reset(!0)}function R(t){if(t||""===t){var r=t[s];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var i=-1,o=function r(){for(;++i<t.length;)if(n.call(t,i))return r.value=t[i],r.done=!1,r;return r.value=e,r.done=!0,r};return o.next=o}}throw new TypeError(K(t)+" is not iterable")}return v.prototype=b,i(_,"constructor",{value:b,configurable:!0}),i(b,"constructor",{value:v,configurable:!0}),v.displayName=u(b,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===v||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,b):(e.__proto__=b,u(e,c,"GeneratorFunction")),e.prototype=Object.create(_),e},t.awrap=function(e){return{__await:e}},x(S.prototype),u(S.prototype,a,(function(){return this})),t.AsyncIterator=S,t.async=function(e,r,n,i,o){void 0===o&&(o=Promise);var s=new S(l(e,r,n,i),o);return t.isGeneratorFunction(r)?s:s.next().then((function(e){return e.done?e.value:s.next()}))},x(_),u(_,c,"Generator"),u(_,s,(function(){return this})),u(_,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=R,P.prototype={constructor:P,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(T),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function i(n,i){return a.type="throw",a.arg=t,r.next=n,i&&(r.method="next",r.arg=e),!!i}for(var o=this.tryEntries.length-1;o>=0;--o){var s=this.tryEntries[o],a=s.completion;if("root"===s.tryLoc)return i("end");if(s.tryLoc<=this.prev){var c=n.call(s,"catchLoc"),u=n.call(s,"finallyLoc");if(c&&u){if(this.prev<s.catchLoc)return i(s.catchLoc,!0);if(this.prev<s.finallyLoc)return i(s.finallyLoc)}else if(c){if(this.prev<s.catchLoc)return i(s.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<s.finallyLoc)return i(s.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var s=o?o.completion:{};return s.type=e,s.arg=t,o?(this.method="next",this.next=o.finallyLoc,m):this.complete(s)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),m},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),T(r),m}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var i=n.arg;T(r)}return i}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:R(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),m}},t}function W(e,t,r,n,i,o,s){try{var a=e[o](s),c=a.value}catch(e){return void r(e)}a.done?t(c):Promise.resolve(c).then(n,i)}function $(e){return function(){var t=this,r=arguments;return new Promise((function(n,i){var o=e.apply(t,r);function s(e){W(o,n,i,s,a,"next",e)}function a(e){W(o,n,i,s,a,"throw",e)}s(void 0)}))}}var J,Y="INIT",Q="SUBSCRIBE",X="UNSUBSCRIBE",Z="UPDATED",ee="SNAPSHOT",te="EXIT",re="TERMINATE",ne="object"===("undefined"==typeof self?"undefined":K(self))&&self.self===self&&self||"object"===(void 0===r.g?"undefined":K(r.g))&&r.g.global===r.g&&r.g||"object"===("undefined"==typeof window?"undefined":K(window))&&window.window===window&&window||{FCL_REGISTRY:null};ne.FCL_REGISTRY=null==ne.FCL_REGISTRY?{}:ne.FCL_REGISTRY;var ie=ne.FCL_REGISTRY,oe=0,se=5e3;function ae(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{expectReply:!1};return new Promise((function(i,o){var s=n.expectReply||!1,a=null!=n.timeout?n.timeout:se;s&&a&&setTimeout((function(){return o(new Error("Timeout: ".concat(a,"ms passed without a response.")))}),a);var c={to:e,from:n.from,tag:t,data:r,timeout:a,reply:i,reject:o};try{ie[e]&&ie[e].mailbox.deliver(c),s||i(!0)}catch(t){console.error("FCL.Actor -- Could Not Deliver Message",c,ie[e],t),o(t)}}))}var ce=function(e){delete ie[e]},ue=function(e){var t,r,n=function(e){if(null==e){for(;ie[String(oe)];)oe++;return String(oe)}return String(e)}(arguments.length>1&&void 0!==arguments[1]?arguments[1]:null);if(null!=ie[n])return n;ie[n]={addr:n,mailbox:(r=[],{deliver:function(e){return $(V().mark((function n(){return V().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:r.push(e),t&&(t(r.shift()),t=void 0);case 2:case"end":return n.stop()}}),n)})))()},receive:function(){return new Promise((function(e){var n=r.shift();if(n)return e(n);t=e}))}}),subs:new Set,kvs:{},error:null};var i,o,s,a=le(n);return"object"===K(e)?(o=e,i=function(){var e=$(V().mark((function e(t){var r,n;return V().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("function"!=typeof o[Y]){e.next=3;break}return e.next=3,o[Y](t);case 3:return e.next=6,t.receive();case 6:if(r=e.sent,e.prev=7,r.tag!==te){e.next=13;break}if("function"!=typeof o[re]){e.next=12;break}return e.next=12,o[re](t,r,r.data||{});case 12:return e.abrupt("break",25);case 13:return e.next=15,null===(n=o[r.tag])||void 0===n?void 0:n.call(o,t,r,r.data||{});case 15:e.next=20;break;case 17:e.prev=17,e.t0=e.catch(7),console.error("".concat(t.self()," Error"),r,e.t0);case 20:return e.prev=20,e.abrupt("continue",3);case 23:e.next=3;break;case 25:case"end":return e.stop()}}),e,null,[[7,17,20,23]])})));return function(t){return e.apply(this,arguments)}}()):i=e,s=$(V().mark((function e(){return V().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i(a);case 2:ce(n);case 3:case"end":return e.stop()}}),e)}))),(J||(J=Promise.resolve())).then(s).catch((function(e){return setTimeout((function(){throw e}),0)})),n},le=function(e){return{self:function(){return e},receive:function(){return ie[e].mailbox.receive()},send:function(t,r,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};if(null!=t)return i.from=e,ae(t,r,n,i)},sendSelf:function(t,r){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};ie[e]&&ae(e,t,r,n)},broadcast:function(t,r){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};n.from=e;var i,o=G(ie[e].subs);try{for(o.s();!(i=o.n()).done;)ae(i.value,t,r,n)}catch(e){o.e(e)}finally{o.f()}},subscribe:function(t){return null!=t&&ie[e].subs.add(t)},unsubscribe:function(t){return null!=t&&ie[e].subs.delete(t)},subscriberCount:function(){return ie[e].subs.size},hasSubs:function(){return!!ie[e].subs.size},put:function(t,r){null!=t&&(ie[e].kvs[t]=r)},get:function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,n=ie[e].kvs[t];return null==n?r:n},delete:function(t){delete ie[e].kvs[t]},update:function(t,r){null!=t&&(ie[e].kvs[t]=r(ie[e].kvs[t]))},keys:function(){return Object.keys(ie[e].kvs)},all:function(){return ie[e].kvs},where:function(t){return Object.keys(ie[e].kvs).reduce((function(r,n){return t.test(n)?z(z({},r),{},q({},n,ie[e].kvs[n])):r}),{})},merge:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object.keys(t).forEach((function(r){return ie[e].kvs[r]=t[r]}))},fatalError:function(t){ie[e].error=t;var r,n=G(ie[e].subs);try{for(n.s();!(r=n.n()).done;)ae(r.value,Z)}catch(e){n.e(e)}finally{n.f()}}}};function he(e,t,r){t(e);var n=ue(function(){var t=$(V().mark((function t(n){var i,o;return V().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n.send(e,Q);case 1:return t.next=4,n.receive();case 4:if(i=t.sent,o=ie[e].error,i.tag!==te){t.next=9;break}return n.send(e,X),t.abrupt("return");case 9:if(!o){t.next=13;break}return r(null,o),n.send(e,X),t.abrupt("return");case 13:r(i.data,null),t.next=1;break;case 16:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}());return function(){return ae(n,te)}}function fe(e,t){return t(e),ae(e,ee,null,{expectReply:!0,timeout:0})}function de(){de=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,i=Object.defineProperty||function(e,t,r){e[t]=r.value},o="function"==typeof Symbol?Symbol:{},s=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function u(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,r){return e[t]=r}}function l(e,t,r,n){var o=t&&t.prototype instanceof y?t:y,s=Object.create(o.prototype),a=new P(n||[]);return i(s,"_invoke",{value:k(e,r,a)}),s}function h(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=l;var f="suspendedStart",d="suspendedYield",p="executing",g="completed",m={};function y(){}function v(){}function b(){}var w={};u(w,s,(function(){return this}));var E=Object.getPrototypeOf,A=E&&E(E(R([])));A&&A!==r&&n.call(A,s)&&(w=A);var _=b.prototype=y.prototype=Object.create(w);function x(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function S(e,t){function r(i,o,s,a){var c=h(e[i],e,o);if("throw"!==c.type){var u=c.arg,l=u.value;return l&&"object"==Ae(l)&&n.call(l,"__await")?t.resolve(l.__await).then((function(e){r("next",e,s,a)}),(function(e){r("throw",e,s,a)})):t.resolve(l).then((function(e){u.value=e,s(u)}),(function(e){return r("throw",e,s,a)}))}a(c.arg)}var o;i(this,"_invoke",{value:function(e,n){function i(){return new t((function(t,i){r(e,n,t,i)}))}return o=o?o.then(i,i):i()}})}function k(t,r,n){var i=f;return function(o,s){if(i===p)throw Error("Generator is already running");if(i===g){if("throw"===o)throw s;return{value:e,done:!0}}for(n.method=o,n.arg=s;;){var a=n.delegate;if(a){var c=I(a,n);if(c){if(c===m)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(i===f)throw i=g,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);i=p;var u=h(t,r,n);if("normal"===u.type){if(i=n.done?g:d,u.arg===m)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(i=g,n.method="throw",n.arg=u.arg)}}}function I(t,r){var n=r.method,i=t.iterator[n];if(i===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,I(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),m;var o=h(i,t.iterator,r.arg);if("throw"===o.type)return r.method="throw",r.arg=o.arg,r.delegate=null,m;var s=o.arg;return s?s.done?(r[t.resultName]=s.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,m):s:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,m)}function O(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function T(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function P(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(O,this),this.reset(!0)}function R(t){if(t||""===t){var r=t[s];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var i=-1,o=function r(){for(;++i<t.length;)if(n.call(t,i))return r.value=t[i],r.done=!1,r;return r.value=e,r.done=!0,r};return o.next=o}}throw new TypeError(Ae(t)+" is not iterable")}return v.prototype=b,i(_,"constructor",{value:b,configurable:!0}),i(b,"constructor",{value:v,configurable:!0}),v.displayName=u(b,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===v||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,b):(e.__proto__=b,u(e,c,"GeneratorFunction")),e.prototype=Object.create(_),e},t.awrap=function(e){return{__await:e}},x(S.prototype),u(S.prototype,a,(function(){return this})),t.AsyncIterator=S,t.async=function(e,r,n,i,o){void 0===o&&(o=Promise);var s=new S(l(e,r,n,i),o);return t.isGeneratorFunction(r)?s:s.next().then((function(e){return e.done?e.value:s.next()}))},x(_),u(_,c,"Generator"),u(_,s,(function(){return this})),u(_,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=R,P.prototype={constructor:P,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(T),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function i(n,i){return a.type="throw",a.arg=t,r.next=n,i&&(r.method="next",r.arg=e),!!i}for(var o=this.tryEntries.length-1;o>=0;--o){var s=this.tryEntries[o],a=s.completion;if("root"===s.tryLoc)return i("end");if(s.tryLoc<=this.prev){var c=n.call(s,"catchLoc"),u=n.call(s,"finallyLoc");if(c&&u){if(this.prev<s.catchLoc)return i(s.catchLoc,!0);if(this.prev<s.finallyLoc)return i(s.finallyLoc)}else if(c){if(this.prev<s.catchLoc)return i(s.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<s.finallyLoc)return i(s.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var s=o?o.completion:{};return s.type=e,s.arg=t,o?(this.method="next",this.next=o.finallyLoc,m):this.complete(s)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),m},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),T(r),m}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var i=n.arg;T(r)}return i}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:R(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),m}},t}function pe(e,t,r,n,i,o,s){try{var a=e[o](s),c=a.value}catch(e){return void r(e)}a.done?t(c):Promise.resolve(c).then(n,i)}function ge(e){return function(){var t=this,r=arguments;return new Promise((function(n,i){var o=e.apply(t,r);function s(e){pe(o,n,i,s,a,"next",e)}function a(e){pe(o,n,i,s,a,"throw",e)}s(void 0)}))}}function me(e,t){return ve(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,i,o,s,a=[],c=!0,u=!1;try{if(o=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=o.call(r)).done)&&(a.push(n.value),a.length!==t);c=!0);}catch(e){u=!0,i=e}finally{try{if(!c&&null!=r.return&&(s=r.return(),Object(s)!==s))return}finally{if(u)throw i}}return a}}(e,t)||be(e,t)||ye()}function ye(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function ve(e){if(Array.isArray(e))return e}function be(e,t){if(e){if("string"==typeof e)return Ee(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Ee(e,t):void 0}}function we(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function Ee(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function Ae(e){return Ae="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ae(e)}function _e(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function xe(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?_e(Object(r),!0).forEach((function(t){Se(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):_e(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Se(e,t,r){return(t=function(e){var t=function(e){if("object"!=Ae(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=Ae(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Ae(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var ke=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return function(e){return t.reduce((function(e,t){return t(e)}),e)}},Ie=function(e){return e&&"object"===Ae(e)&&!Array.isArray(e)},Oe=function e(t){for(var r=arguments.length,n=new Array(r>1?r-1:0),i=1;i<r;i++)n[i-1]=arguments[i];if(!n.length)return t;var o=n.shift();if(Ie(t)&&Ie(o))for(var s in o)Ie(o[s])?(t[s]||Object.assign(t,Se({},s,{})),e(t[s],o[s])):Object.assign(t,Se({},s,o[s]));return e.apply(void 0,[t].concat(n))},Te=function(e){return Array.isArray(e)?Oe.apply(void 0,[{}].concat(function(e){if(Array.isArray(e))return Ee(e)}(t=e)||we(t)||be(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())):e;var t},Pe=function(e){return e.contracts?e.contracts:{}},Re=function(e){return e.dependencies?e.dependencies:{}},Ne=function(e,t){return ke(Te,function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return function(e){return t.reduce((function(t,r){return xe(xe({},t),r(e))}),{})}}(function(e){return function(t){var r=t.deployments,n=void 0===r?{}:r,i=t.accounts,o=void 0===i?{}:i,s=null==n?void 0:n[e];return s?Object.entries(s).reduce((function(e,t){var r,n=me(t,2),i=n[0],s=n[1],a=null===(r=o[i])||void 0===r?void 0:r.address;return a?s.reduce((function(e,t){return xe(xe({},e),{},Se({},t,a))}),{}):e}),{}):{}}}(t),ke(Pe,function(e){return function(t){return Object.entries(t).reduce((function(t,r){var n,i=me(r,2),o=i[0],s=i[1],a=null==s||null===(n=s.aliases)||void 0===n?void 0:n[e];return a&&(t[o]=a),t}),{})}}(t)),ke(Re,function(e){return function(t){return Object.entries(t).reduce((function(t,r){var n,i=me(r,2),o=i[0],s=i[1],a=null==s||null===(n=s.aliases)||void 0===n?void 0:n[e];return a&&(t[o]=a),t}),{})}}(t))))(e)},Ce=function(e){var t;return Object.entries(null!==(t=null==e?void 0:e.accounts)&&void 0!==t?t:[]).reduce((function(e,t){var r,n=me(t,2)[1];return!!e||n&&Object.prototype.hasOwnProperty.call(n,"key")&&"string"==typeof(r=null==n?void 0:n.key)&&/^[0-9A-Fa-f]+$/.test(r)}),!1)},Me=function(e){return Array.isArray(e)?e.some(Ce):Ce(e)},Le=function(e){var t="local"===(null==e?void 0:e.toLowerCase())?"emulator":null==e?void 0:e.toLowerCase();if("emulator"===t||"testnet"===t||"mainnet"===t||"previewnet"===t)return t;throw new Error('Invalid network "'.concat(e,'". Must be one of "emulator", "local", "testnet", or "mainnet"'))};x=ct;var Be="config",Ue="PUT_CONFIG",De="GET_CONFIG",je="GET_ALL_CONFIG",Fe="UPDATE_CONFIG",ze="DELETE_CONFIG",qe="CLEAR_CONFIG",Ge="WHERE_CONFIG",He="CONFIG/UPDATED",Ke=function(e){return e},Ve=Se(Se(Se(Se(Se(Se(Se(Se(Se({},Ue,(function(e,t,r){var n=r.key,i=r.value;if(null==n)throw new Error("Missing 'key' for config/put.");e.put(n,i),e.broadcast(He,xe({},e.all()))})),De,(function(e,t,r){var n=r.key,i=r.fallback;if(null==n)throw new Error("Missing 'key' for config/get");t.reply(e.get(n,i))})),je,(function(e,t){t.reply(xe({},e.all()))})),Fe,(function(e,t,r){var n=r.key,i=r.fn;if(null==n)throw new Error("Missing 'key' for config/update");e.update(n,i||Ke),e.broadcast(He,xe({},e.all()))})),ze,(function(e,t,r){var n=r.key;if(null==n)throw new Error("Missing 'key' for config/delete");e.delete(n),e.broadcast(He,xe({},e.all()))})),qe,(function(e){for(var t=0,r=Object.keys(e.all());t<r.length;t++){var n=r[t];e.delete(n)}e.broadcast(He,xe({},e.all()))})),Ge,(function(e,t,r){var n=r.pattern;if(null==n)throw new Error("Missing 'pattern' for config/where");t.reply(e.where(n))})),Q,(function(e,t){e.subscribe(t.from),e.send(t.from,He,xe({},e.all()))})),X,(function(e,t){e.unsubscribe(t.from)}));function We(e,t){return ae(Be,Ue,{key:e,value:t}),ct()}function $e(e,t){return ae(Be,De,{key:e,fallback:t},{expectReply:!0,timeout:10})}function Je(){return Ye.apply(this,arguments)}function Ye(){return Ye=ge(de().mark((function e(){var t,r,n,i,o,s,a=arguments;return de().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=a.length>1?a[1]:void 0,(t=a.length>0&&void 0!==a[0]?a[0]:[]).length){e.next=4;break}return e.abrupt("return",r);case 4:return n=ve(c=t)||we(c)||be(c)||ye(),i=n[0],o=n.slice(1),e.next=7,$e(i);case 7:if(null!=(s=e.sent)){e.next=10;break}return e.abrupt("return",Je(o,r));case 10:return e.abrupt("return",s);case 11:case"end":return e.stop()}var c}),e)}))),Ye.apply(this,arguments)}function Qe(){return ae(Be,je,null,{expectReply:!0,timeout:10})}function Xe(e){return ae(Be,Fe,{key:e,fn:arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ke}),ct()}function Ze(e){return ae(Be,ze,{key:e}),ct()}function et(e){return ae(Be,Ge,{pattern:e},{expectReply:!0,timeout:10})}function tt(e){return he(Be,(function(){return ue(Ve,Be)}),e)}function rt(){return nt.apply(this,arguments)}function nt(){return(nt=ge(de().mark((function e(){return de().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ae(Be,qe);case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function it(e){return ot.apply(this,arguments)}function ot(){return(ot=ge(de().mark((function e(t){return de().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",rt().then((function(){return ct(t)})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function st(e){return at.apply(this,arguments)}function at(){return at=ge(de().mark((function e(t){var r,n,i,o,s,a,c,u,l,h,f,d,p,g,m,y=arguments;return de().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=(y.length>1&&void 0!==y[1]?y[1]:{}).ignoreConflicts,n=void 0!==r&&r,e.next=3,$e("flow.network");case 3:i=e.sent,o=Le(i),s=t.flowJSON,O(Boolean(s),"config.load -- 'flowJSON' must be defined"),O(!!o,'Flow Network Required -- In order for FCL to load your contracts please define "flow.network" to "emulator", "local", "testnet", or "mainnet" in your config. See more here: https://developers.flow.com/tools/fcl-js/reference/configure-fcl'),Me(s)&&(I({title:"Private Keys Detected",message:"Private keys should be stored in a separate flow.json file for security. See more here: https://developers.flow.com/tools/flow-cli/security",level:(a="emulator"===o)?S.warn:S.error}),O(a,"Private keys should be stored in a separate flow.json file for security. See more here: https://developers.flow.com/tools/flow-cli/security")),c=0,u=Object.entries(Ne(s,o));case 10:if(!(c<u.length)){e.next=25;break}return l=me(u[c],2),h=l[0],f=l[1],d="0x".concat(h),e.next=15,$e(d);case 15:return(p=e.sent)&&p!==f&&!n?I({title:"Contract Placeholder Conflict Detected",message:"A generated contract placeholder from config.load conflicts with a placeholder you've set manually in config have the same name.",level:S.warn}):We(d,f),g="system.contracts.".concat(h),e.next=20,$e(g);case 20:(m=e.sent)&&m!==f&&!n?I({title:"Contract Placeholder Conflict Detected",message:"A generated contract placeholder from config.load conflicts with a placeholder you've set manually in config have the same name.",level:S.warn}):We(g,f);case 22:c++,e.next=10;break;case 25:case"end":return e.stop()}}),e)}))),at.apply(this,arguments)}function ct(e){return null!=e&&"object"===Ae(e)&&Object.keys(e).map((function(t){return We(t,e[t])})),{put:We,get:$e,all:Qe,first:Je,update:Xe,delete:Ze,where:et,subscribe:tt,overload:ut,load:st}}function ut(e,t){return lt.apply(this,arguments)}function lt(){return(lt=ge(de().mark((function e(t,r){var n,i;return de().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Qe();case 2:return n=e.sent,e.prev=3,ct(t),e.t0=r,e.next=8,Qe();case 8:return e.t1=e.sent,e.next=11,(0,e.t0)(e.t1);case 11:return i=e.sent,e.abrupt("return",i);case 13:return e.prev=13,e.next=16,it(n);case 16:return e.finish(13);case 17:case"end":return e.stop()}}),e,null,[[3,,13,17]])})))).apply(this,arguments)}ue(Ve,Be),ct.put=We,ct.get=$e,ct.all=Qe,ct.first=Je,ct.update=Xe,ct.delete=Ze,ct.where=et,ct.subscribe=tt,ct.overload=ut,ct.load=st;var ht=r(8287);function ft(e){if(Array.isArray(e)){for(var t=[],r=0;r<e.length;r++)t.push(ft(e[r]));var n=ht.Buffer.concat(t);return ht.Buffer.concat([dt(n.length,192),n])}var i=function(e){if(!ht.Buffer.isBuffer(e)){if("string"==typeof e)return pt(e)?ht.Buffer.from(function(e){return e.length%2?"0"+e:e}("string"!=typeof(r=e)?r:pt(r)?r.slice(2):r),"hex"):ht.Buffer.from(e);if("number"==typeof e)return e?(t=gt(e),ht.Buffer.from(t,"hex")):ht.Buffer.from([]);if(null==e)return ht.Buffer.from([]);if(e instanceof Uint8Array)return ht.Buffer.from(e);throw new Error("invalid type")}var t,r;return e}(e);return 1===i.length&&i[0]<128?i:ht.Buffer.concat([dt(i.length,128),i])}function dt(e,t){if(e<56)return ht.Buffer.from([e+t]);var r=gt(e),n=gt(t+55+r.length/2);return ht.Buffer.from(n+r,"hex")}function pt(e){return"0x"===e.slice(0,2)}function gt(e){if(e<0)throw new Error("Invalid integer as argument, must be unsigned!");var t=e.toString(16);return t.length%2?"0"+t:t}var mt=r(4945),yt=r.n(mt);function vt(e){return null==e?null:e.replace(/^0x/,"").replace(/^Fx/,"")}function bt(e){return null==e?null:"0x"+vt(e)}function wt(e){return bt(e)}var Et=r(7007),At=r.n(Et),_t=null;"undefined"!=typeof WebSocket?_t=WebSocket:"undefined"!=typeof MozWebSocket?_t=MozWebSocket:void 0!==r.g?_t=r.g.WebSocket||r.g.MozWebSocket:"undefined"!=typeof window?_t=window.WebSocket||window.MozWebSocket:"undefined"!=typeof self&&(_t=self.WebSocket||self.MozWebSocket);const xt=_t;function St(e){return St="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},St(e)}function kt(e){return function(e){if(Array.isArray(e))return Tt(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Ot(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function It(){It=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,i=Object.defineProperty||function(e,t,r){e[t]=r.value},o="function"==typeof Symbol?Symbol:{},s=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function u(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,r){return e[t]=r}}function l(e,t,r,n){var o=t&&t.prototype instanceof y?t:y,s=Object.create(o.prototype),a=new P(n||[]);return i(s,"_invoke",{value:k(e,r,a)}),s}function h(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=l;var f="suspendedStart",d="suspendedYield",p="executing",g="completed",m={};function y(){}function v(){}function b(){}var w={};u(w,s,(function(){return this}));var E=Object.getPrototypeOf,A=E&&E(E(R([])));A&&A!==r&&n.call(A,s)&&(w=A);var _=b.prototype=y.prototype=Object.create(w);function x(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function S(e,t){function r(i,o,s,a){var c=h(e[i],e,o);if("throw"!==c.type){var u=c.arg,l=u.value;return l&&"object"==St(l)&&n.call(l,"__await")?t.resolve(l.__await).then((function(e){r("next",e,s,a)}),(function(e){r("throw",e,s,a)})):t.resolve(l).then((function(e){u.value=e,s(u)}),(function(e){return r("throw",e,s,a)}))}a(c.arg)}var o;i(this,"_invoke",{value:function(e,n){function i(){return new t((function(t,i){r(e,n,t,i)}))}return o=o?o.then(i,i):i()}})}function k(t,r,n){var i=f;return function(o,s){if(i===p)throw Error("Generator is already running");if(i===g){if("throw"===o)throw s;return{value:e,done:!0}}for(n.method=o,n.arg=s;;){var a=n.delegate;if(a){var c=I(a,n);if(c){if(c===m)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(i===f)throw i=g,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);i=p;var u=h(t,r,n);if("normal"===u.type){if(i=n.done?g:d,u.arg===m)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(i=g,n.method="throw",n.arg=u.arg)}}}function I(t,r){var n=r.method,i=t.iterator[n];if(i===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,I(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),m;var o=h(i,t.iterator,r.arg);if("throw"===o.type)return r.method="throw",r.arg=o.arg,r.delegate=null,m;var s=o.arg;return s?s.done?(r[t.resultName]=s.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,m):s:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,m)}function O(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function T(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function P(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(O,this),this.reset(!0)}function R(t){if(t||""===t){var r=t[s];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var i=-1,o=function r(){for(;++i<t.length;)if(n.call(t,i))return r.value=t[i],r.done=!1,r;return r.value=e,r.done=!0,r};return o.next=o}}throw new TypeError(St(t)+" is not iterable")}return v.prototype=b,i(_,"constructor",{value:b,configurable:!0}),i(b,"constructor",{value:v,configurable:!0}),v.displayName=u(b,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===v||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,b):(e.__proto__=b,u(e,c,"GeneratorFunction")),e.prototype=Object.create(_),e},t.awrap=function(e){return{__await:e}},x(S.prototype),u(S.prototype,a,(function(){return this})),t.AsyncIterator=S,t.async=function(e,r,n,i,o){void 0===o&&(o=Promise);var s=new S(l(e,r,n,i),o);return t.isGeneratorFunction(r)?s:s.next().then((function(e){return e.done?e.value:s.next()}))},x(_),u(_,c,"Generator"),u(_,s,(function(){return this})),u(_,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=R,P.prototype={constructor:P,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(T),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function i(n,i){return a.type="throw",a.arg=t,r.next=n,i&&(r.method="next",r.arg=e),!!i}for(var o=this.tryEntries.length-1;o>=0;--o){var s=this.tryEntries[o],a=s.completion;if("root"===s.tryLoc)return i("end");if(s.tryLoc<=this.prev){var c=n.call(s,"catchLoc"),u=n.call(s,"finallyLoc");if(c&&u){if(this.prev<s.catchLoc)return i(s.catchLoc,!0);if(this.prev<s.finallyLoc)return i(s.finallyLoc)}else if(c){if(this.prev<s.catchLoc)return i(s.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<s.finallyLoc)return i(s.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var s=o?o.completion:{};return s.type=e,s.arg=t,o?(this.method="next",this.next=o.finallyLoc,m):this.complete(s)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),m},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),T(r),m}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var i=n.arg;T(r)}return i}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:R(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),m}},t}function Ot(e,t){if(e){if("string"==typeof e)return Tt(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Tt(e,t):void 0}}function Tt(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function Pt(e,t,r,n,i,o,s){try{var a=e[o](s),c=a.value}catch(e){return void r(e)}a.done?t(c):Promise.resolve(c).then(n,i)}function Rt(e){return function(){var t=this,r=arguments;return new Promise((function(n,i){var o=e.apply(t,r);function s(e){Pt(o,n,i,s,a,"next",e)}function a(e){Pt(o,n,i,s,a,"throw",e)}s(void 0)}))}}function Nt(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Mt(n.key),n)}}function Ct(e,t,r){return t&&Nt(e.prototype,t),r&&Nt(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function Mt(e){var t=function(e){if("object"!=St(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=St(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==St(t)?t:t+""}function Lt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Bt(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ft(e,t)}function Ut(e){var t=jt();return function(){var r,n=zt(e);if(t){var i=zt(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"==St(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function Dt(e){var t="function"==typeof Map?new Map:void 0;return Dt=function(e){if(null===e||!function(e){try{return-1!==Function.toString.call(e).indexOf("[native code]")}catch(t){return"function"==typeof e}}(e))return e;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,r)}function r(){return function(e,t,r){if(jt())return Reflect.construct.apply(null,arguments);var n=[null];n.push.apply(n,t);var i=new(e.bind.apply(e,n));return r&&Ft(i,r.prototype),i}(e,arguments,zt(this).constructor)}return r.prototype=Object.create(e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),Ft(r,e)},Dt(e)}function jt(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(jt=function(){return!!e})()}function Ft(e,t){return Ft=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Ft(e,t)}function zt(e){return zt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},zt(e)}function qt(e){try{return JSON.parse(e)}catch(e){return null}}var Gt=globalThis.AbortController||r(5568),Ht=function(e){Bt(r,e);var t=Ut(r);function r(e){var n;Lt(this,r);var i=e.error,o=e.hostname,s=e.path,a=e.method,c=e.requestBody,u=e.responseBody,l=e.responseStatusText,h=e.statusCode,f="\n      HTTP Request Error: An error occurred when interacting with the Access API.\n      ".concat(i?"error=".concat(i):"","\n      ").concat(o?"hostname=".concat(o):"","\n      ").concat(s?"path=".concat(s):"","\n      ").concat(a?"method=".concat(a):"","\n      ").concat(c?"requestBody=".concat(c):"","\n      ").concat(u?"responseBody=".concat(u):"","\n      ").concat(l?"responseStatusText=".concat(l):"","\n      ").concat(h?"statusCode=".concat(h):"","\n    ");return(n=t.call(this,f)).name="HTTP Request Error",n.statusCode=h,n.errorMessage=i,n}return Ct(r)}(Dt(Error));function Kt(e){return Vt.apply(this,arguments)}function Vt(){return Vt=Rt(It().mark((function e(t){var r,n,i,o,s,a,c,u,l,h,f,d,p,g,m,y,v;return It().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return v=function(){return v=Rt(It().mark((function e(){var t,r,n,i=arguments;return It().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=i.length>0&&void 0!==i[0]?i[0]:0,e.prev=1,e.next=4,m();case 4:return r=e.sent,e.abrupt("return",r);case 8:if(e.prev=8,e.t0=e.catch(1),n=[408,429,500,502,503,504],"AbortError"!==e.t0.name&&!n.includes(e.t0.statusCode)){e.next=17;break}return e.next=14,new Promise((function(r,n){t<c?(p&&console.warn("Access node unavailable, retrying in ".concat(l," ms...")),setTimeout((function(){r(y(t+1))}),l)):n(e.t0)}));case 14:return e.abrupt("return",e.sent);case 17:throw e.t0;case 18:case"end":return e.stop()}}),e,null,[[1,8]])}))),v.apply(this,arguments)},y=function(){return v.apply(this,arguments)},m=function(){var e,t,o=new Gt,a=setTimeout((function(){o.abort()}),f);return yt()((e=r,t=n,t?e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):e).toString(),{method:i,body:g,headers:s,signal:o.signal}).then(function(){var e=Rt(It().mark((function e(t){var o,s;return It().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.ok){e.next=2;break}return e.abrupt("return",t.json());case 2:return e.next=4,t.text().catch((function(){return null}));case 4:throw o=e.sent,s=qt(o),new Ht({error:null==s?void 0:s.message,hostname:r,path:n,method:i,requestBody:g,responseBody:o,responseStatusText:t.statusText,statusCode:t.status});case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch(function(){var e=Rt(It().mark((function e(t){return It().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t instanceof Ht)){e.next=2;break}throw t;case 2:if("AbortError"!==t.name){e.next=4;break}throw t;case 4:if(!p){e.next=7;break}return e.next=7,I({title:"Access Node Error",message:"The provided access node ".concat(r," does not appear to be a valid REST/HTTP access node.\n  Please verify that you are not unintentionally using a GRPC access node.\n  See more here: https://docs.onflow.org/fcl/reference/sdk-guidelines/#connect"),level:S.error});case 7:throw new Ht({error:null==t?void 0:t.message,hostname:r,path:n,method:i,requestBody:g});case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).finally((function(){clearTimeout(a)}))},r=t.hostname,n=t.path,i=t.method,o=t.body,s=t.headers,a=t.retryLimit,c=void 0===a?5:a,u=t.retryIntervalMs,l=void 0===u?1e3:u,h=t.timeoutLimit,f=void 0===h?3e4:h,d=t.enableRequestLogging,p=void 0===d||d,g=o?JSON.stringify(o):null,e.next=7,y();case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e)}))),Vt.apply(this,arguments)}function Wt(e,t,r){return $t.apply(this,arguments)}function $t(){return $t=Rt(It().mark((function e(t,r,n){var i,o;return It().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=n.httpRequest||Kt,e.next=3,i({hostname:n.node,path:"/v1/scripts?block_id=".concat(t.block.id),method:"POST",body:{script:r.Buffer.from(t.message.cadence).toString("base64"),arguments:t.message.arguments.map((function(e){return r.Buffer.from(JSON.stringify(t.arguments[e].asArgument)).toString("base64")}))}});case 3:return o=e.sent,e.abrupt("return",Zt(t,r,o));case 5:case"end":return e.stop()}}),e)}))),$t.apply(this,arguments)}function Jt(e,t,r){return Yt.apply(this,arguments)}function Yt(){return Yt=Rt(It().mark((function e(t,r,n){var i,o;return It().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=n.httpRequest||Kt,e.next=3,i({hostname:n.node,path:"/v1/scripts?block_height=".concat(t.block.height),method:"POST",body:{script:r.Buffer.from(t.message.cadence).toString("base64"),arguments:t.message.arguments.map((function(e){return r.Buffer.from(JSON.stringify(t.arguments[e].asArgument)).toString("base64")}))}});case 3:return o=e.sent,e.abrupt("return",Zt(t,r,o));case 5:case"end":return e.stop()}}),e)}))),Yt.apply(this,arguments)}function Qt(e,t,r){return Xt.apply(this,arguments)}function Xt(){return Xt=Rt(It().mark((function e(t,r,n){var i,o;return It().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=n.httpRequest||Kt,e.next=3,i({hostname:n.node,path:"/v1/scripts?block_height=".concat(t.block.isSealed?"sealed":"final"),method:"POST",body:{script:r.Buffer.from(t.message.cadence).toString("base64"),arguments:t.message.arguments.map((function(e){return r.Buffer.from(JSON.stringify(t.arguments[e].asArgument)).toString("base64")}))}});case 3:return o=e.sent,e.abrupt("return",Zt(t,r,o));case 5:case"end":return e.stop()}}),e)}))),Xt.apply(this,arguments)}function Zt(e,t,r){var n=t.response();return n.tag=e.tag,n.encodedData=JSON.parse(t.Buffer.from(r,"base64").toString()),n}function er(e){return tr.apply(this,arguments)}function tr(){return tr=Rt(It().mark((function e(t){var r,n,i=arguments;return It().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=i.length>1&&void 0!==i[1]?i[1]:{},O((n=i.length>2&&void 0!==i[2]?i[2]:{}).node,"SDK Send Execute Script Error: opts.node must be defined."),O(r.response,"SDK Send Execute Script Error: context.response must be defined."),O(r.Buffer,"SDK Send Execute Script Error: context.Buffer must be defined."),e.next=7,t;case 7:if(!(t=e.sent).block.id){e.next=14;break}return e.next=11,Wt(t,r,n);case 11:case 17:case 22:return e.abrupt("return",e.sent);case 14:if(!t.block.height){e.next=20;break}return e.next=17,Jt(t,r,n);case 20:return e.next=22,Qt(t,r,n);case 23:case"end":return e.stop()}}),e)}))),tr.apply(this,arguments)}var rr={SHA2_256:1,SHA2_384:2,SHA3_256:3,SHA3_384:4,KMAC128_BLS_BLS12_381:5},nr={ECDSA_P256:1,ECDSA_secp256k1:2,BLS_BLS12_381:3};function ir(e,t,r){return or.apply(this,arguments)}function or(){return(or=Rt(It().mark((function e(t,r,n){var i,o;return It().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=n.httpRequest||Kt,e.next=3,i({hostname:n.node,path:"/v1/accounts/".concat(t.account.addr,"?block_height=").concat(t.block.height,"&expand=contracts,keys"),method:"GET",body:null});case 3:return o=e.sent,e.abrupt("return",cr(t,r,o));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function sr(e,t,r){return ar.apply(this,arguments)}function ar(){return(ar=Rt(It().mark((function e(t,r,n){var i,o;return It().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=n.httpRequest||Kt,e.next=3,i({hostname:n.node,path:"/v1/accounts/".concat(t.account.addr,"?block_height=").concat(t.block.isSealed?"sealed":"final","&expand=contracts,keys"),method:"GET",body:null});case 3:return o=e.sent,e.abrupt("return",cr(t,r,o));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function cr(e,t,r){var n,i,o=t.response();return o.tag=e.tag,o.account={address:r.address,balance:Number(r.balance),code:"",contracts:function(e){var r={};if(!e)return r;for(var n=0,i=Object.keys(e);n<i.length;n++){var o=i[n];r[o]=t.Buffer.from(e[o],"base64").toString()}return r}(r.contracts),keys:null!==(n=null===(i=r.keys)||void 0===i?void 0:i.map((function(e){return{index:Number(e.index),publicKey:e.public_key.replace(/^0x/,""),signAlgo:nr[e.signing_algorithm],signAlgoString:e.signing_algorithm,hashAlgo:rr[e.hashing_algorithm],hashAlgoString:e.hashing_algorithm,sequenceNumber:Number(e.sequence_number),weight:Number(e.weight),revoked:e.revoked}})))&&void 0!==n?n:[]},o}function ur(e){return lr.apply(this,arguments)}function lr(){return lr=Rt(It().mark((function e(t){var r,n,i=arguments;return It().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=i.length>1&&void 0!==i[1]?i[1]:{},O((n=i.length>2&&void 0!==i[2]?i[2]:{}).node,"SDK Send Get Account Error: opts.node must be defined."),O(r.response,"SDK Send Get Account Error: context.response must be defined."),O(r.Buffer,"SDK Send Get Account Error: context.Buffer must be defined."),e.next=7,t;case 7:if(null===(t=e.sent).block.height){e.next=14;break}return e.next=11,ir(t,r,n);case 11:case 16:return e.abrupt("return",e.sent);case 14:return e.next=16,sr(t,r,n);case 17:case"end":return e.stop()}}),e)}))),lr.apply(this,arguments)}function hr(e,t,r){return fr.apply(this,arguments)}function fr(){return(fr=Rt(It().mark((function e(t,r,n){var i,o;return It().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=n.httpRequest||Kt,e.next=3,i({hostname:n.node,path:"/v1/blocks/".concat(t.block.id),method:"GET",body:null});case 3:return o=e.sent,e.abrupt("return",yr(t,r,o));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function dr(e,t,r){return pr.apply(this,arguments)}function pr(){return(pr=Rt(It().mark((function e(t,r,n){var i,o;return It().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=n.httpRequest||Kt,e.next=3,i({hostname:n.node,path:"/v1/blocks?height=".concat(t.block.height),method:"GET",body:null});case 3:return o=e.sent,e.abrupt("return",yr(t,r,o));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function gr(e,t,r){return mr.apply(this,arguments)}function mr(){return(mr=Rt(It().mark((function e(t,r,n){var i,o,s,a;return It().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=n.httpRequest||Kt,s=null!==(i=t.block)&&void 0!==i&&i.isSealed?"sealed":"final",e.next=4,o({hostname:n.node,path:"/v1/blocks?height=".concat(s),method:"GET",body:null});case 4:return a=e.sent,e.abrupt("return",yr(t,r,a));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function yr(e,t,r){var n=r.length?r[0]:null,i=t.response();return i.tag=e.tag,i.blockHeader={id:n.header.id,parentId:n.header.parent_id,height:Number(n.header.height),timestamp:n.header.timestamp},i}function vr(e){return br.apply(this,arguments)}function br(){return br=Rt(It().mark((function e(t){var r,n,i,o,s=arguments;return It().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=s.length>1&&void 0!==s[1]?s[1]:{},O((n=s.length>2&&void 0!==s[2]?s[2]:{}).node,"SDK Send Get Block Header Error: opts.node must be defined."),O(r.response,"SDK Send Get Block Header Error: context.response must be defined."),e.next=6,t;case 6:if(t=e.sent,i=null!==t.block.id,o=null!==t.block.height,!i){e.next=15;break}return e.next=12,hr(t,r,n);case 12:case 18:case 23:return e.abrupt("return",e.sent);case 15:if(!o){e.next=21;break}return e.next=18,dr(t,r,n);case 21:return e.next=23,gr(t,r,n);case 24:case"end":return e.stop()}}),e)}))),br.apply(this,arguments)}function wr(e,t,r){return Er.apply(this,arguments)}function Er(){return(Er=Rt(It().mark((function e(t,r,n){var i,o;return It().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=n.httpRequest||Kt,e.next=3,i({hostname:n.node,path:"/v1/blocks/".concat(t.block.id,"?expand=payload"),method:"GET",body:null});case 3:return o=e.sent,e.abrupt("return",kr(t,r,o));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ar(e,t,r){return _r.apply(this,arguments)}function _r(){return(_r=Rt(It().mark((function e(t,r,n){var i,o;return It().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=n.httpRequest||Kt,e.next=3,i({hostname:n.node,path:"/v1/blocks?height=".concat(t.block.height,"&expand=payload"),method:"GET",body:null});case 3:return o=e.sent,e.abrupt("return",kr(t,r,o));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function xr(e,t,r){return Sr.apply(this,arguments)}function Sr(){return(Sr=Rt(It().mark((function e(t,r,n){var i,o,s,a;return It().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=n.httpRequest||Kt,s=null!==(i=t.block)&&void 0!==i&&i.isSealed?"sealed":"final",e.next=4,o({hostname:n.node,path:"/v1/blocks?height=".concat(s,"&expand=payload"),method:"GET",body:null});case 4:return a=e.sent,e.abrupt("return",kr(t,r,a));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function kr(e,t,r){var n=r.length?r[0]:null,i=t.response();return i.tag=e.tag,i.block={id:n.header.id,parentId:n.header.parent_id,height:Number(n.header.height),timestamp:n.header.timestamp,collectionGuarantees:n.payload.collection_guarantees.map((function(e){return{collectionId:e.collection_id,signerIds:e.signer_ids}})),blockSeals:n.payload.block_seals.map((function(e){return{blockId:e.block_id,executionReceiptId:e.result_id}}))},i}function Ir(e){return Or.apply(this,arguments)}function Or(){return Or=Rt(It().mark((function e(t){var r,n,i,o,s=arguments;return It().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=s.length>1&&void 0!==s[1]?s[1]:{},O((n=s.length>2&&void 0!==s[2]?s[2]:{}).node,"SDK Send Get Block Error: opts.node must be defined."),O(r.response,"SDK Send Get Block Error: context.response must be defined."),e.next=6,t;case 6:if(t=e.sent,i=null!==t.block.id,o=null!==t.block.height,!i){e.next=15;break}return e.next=12,wr(t,r,n);case 12:case 18:case 23:return e.abrupt("return",e.sent);case 15:if(!o){e.next=21;break}return e.next=18,Ar(t,r,n);case 21:return e.next=23,xr(t,r,n);case 24:case"end":return e.stop()}}),e)}))),Or.apply(this,arguments)}function Tr(e){return Pr.apply(this,arguments)}function Pr(){return Pr=Rt(It().mark((function e(t){var r,n,i,o,s,a=arguments;return It().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.length>1&&void 0!==a[1]?a[1]:{},O((n=a.length>2&&void 0!==a[2]?a[2]:{}).node,"SDK Send Get Collection Error: opts.node must be defined."),O(r.response,"SDK Send Get Collection Error: context.response must be defined."),i=n.httpRequest||Kt,e.next=7,i({hostname:n.node,path:"/v1/collections/".concat(t.collection.id,"?expand=transactions"),method:"GET",body:null});case 7:return o=e.sent,(s=r.response()).tag=t.tag,s.collection={id:o.id,transactionIds:o.transactions.map((function(e){return e.id}))},e.abrupt("return",s);case 12:case"end":return e.stop()}}),e)}))),Pr.apply(this,arguments)}function Rr(e,t,r){return Nr.apply(this,arguments)}function Nr(){return(Nr=Rt(It().mark((function e(t,r,n){var i,o;return It().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=n.httpRequest||Kt,e.next=3,i({hostname:n.node,path:"/v1/events?type=".concat(t.events.eventType,"&start_height=").concat(t.events.start,"&end_height=").concat(t.events.end),method:"GET",body:null});case 3:return o=e.sent,e.abrupt("return",Lr(t,r,o));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Cr(e,t,r){return Mr.apply(this,arguments)}function Mr(){return(Mr=Rt(It().mark((function e(t,r,n){var i,o;return It().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=n.httpRequest||Kt,e.next=3,i({hostname:n.node,path:"/v1/events?type=".concat(t.events.eventType,"&block_ids=").concat(t.events.blockIds.join(",")),method:"GET",body:null});case 3:return o=e.sent,e.abrupt("return",Lr(t,r,o));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Lr(e,t,r){var n=t.response();return n.tag=e.tag,n.events=[],r.forEach((function(e){return e.events?e.events.forEach((function(r){return n.events.push({blockId:e.block_id,blockHeight:Number(e.block_height),blockTimestamp:e.block_timestamp,type:r.type,transactionId:r.transaction_id,transactionIndex:Number(r.transaction_index),eventIndex:Number(r.event_index),payload:JSON.parse(t.Buffer.from(r.payload,"base64").toString())})})):null})),n}function Br(e){return Ur.apply(this,arguments)}function Ur(){return Ur=Rt(It().mark((function e(t){var r,n,i,o,s=arguments;return It().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=s.length>1&&void 0!==s[1]?s[1]:{},O((n=s.length>2&&void 0!==s[2]?s[2]:{}).node,"SDK Send Get Events Error: opts.node must be defined."),O(r.response,"SDK Send Get Events Error: context.response must be defined."),O(r.Buffer,"SDK Send Get Events Error: context.Buffer must be defined."),e.next=7,t;case 7:if(t=e.sent,i=null!==t.events.start,o=Array.isArray(t.events.blockIds)&&t.events.blockIds.length>0,O(i||o,"SendGetEventsError: Unable to determine which get events request to send. Either a block height range, or block IDs must be specified."),!i){e.next=17;break}return e.next=14,Rr(t,r,n);case 14:case 19:return e.abrupt("return",e.sent);case 17:return e.next=19,Cr(t,r,n);case 20:case"end":return e.stop()}}),e)}))),Ur.apply(this,arguments)}function Dr(e){return jr.apply(this,arguments)}function jr(){return jr=Rt(It().mark((function e(t){var r,n,i,o,s,a,c,u,l=arguments;return It().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=l.length>1&&void 0!==l[1]?l[1]:{},O((n=l.length>2&&void 0!==l[2]?l[2]:{}).node,"SDK Send Get Transaction Error: opts.node must be defined."),O(r.response,"SDK Send Get Transaction Error: context.response must be defined."),O(r.Buffer,"SDK Send Get Transaction Error: context.Buffer must be defined."),i=n.httpRequest||Kt,e.next=8,t;case 8:return t=e.sent,e.next=11,i({hostname:n.node,path:"/v1/transactions/".concat(t.transaction.id),method:"GET",body:null});case 11:return o=e.sent,s=function(e){return{address:e.address,keyId:Number(e.key_index),sequenceNumber:Number(e.sequence_number)}},a=function(e){return{address:e.address,keyId:Number(e.key_index),signature:e.signature}},c=function(e){return JSON.parse(r.Buffer.from(e,"base64").toString())},(u=r.response()).tag=t.tag,u.transaction={script:r.Buffer.from(o.script,"base64").toString(),args:kt(o.arguments.map(c)),referenceBlockId:o.reference_block_id,gasLimit:Number(o.gas_limit),payer:o.payer,proposalKey:o.proposal_key?s(o.proposal_key):o.proposal_key,authorizers:o.authorizers,payloadSignatures:kt(o.payload_signatures.map(a)),envelopeSignatures:kt(o.envelope_signatures.map(a))},e.abrupt("return",u);case 19:case"end":return e.stop()}}),e)}))),jr.apply(this,arguments)}var Fr={UNKNOWN:0,PENDING:1,FINALIZED:2,EXECUTED:3,SEALED:4,EXPIRED:5};function zr(e){return qr.apply(this,arguments)}function qr(){return qr=Rt(It().mark((function e(t){var r,n,i,o,s,a=arguments;return It().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.length>1&&void 0!==a[1]?a[1]:{},O((n=a.length>2&&void 0!==a[2]?a[2]:{}).node,"SDK Send Get Transaction Status Error: opts.node must be defined."),O(r.response,"SDK Send Get Transaction Status Error: context.response must be defined."),O(r.Buffer,"SDK Send Get Transaction Status Error: context.Buffer must be defined."),i=n.httpRequest||Kt,e.next=8,t;case 8:return t=e.sent,e.next=11,i({hostname:n.node,path:"/v1/transaction_results/".concat(t.transaction.id),method:"GET",body:null});case 11:return o=e.sent,(s=r.response()).tag=t.tag,s.transactionStatus={blockId:o.block_id,status:Fr[o.status.toUpperCase()]||"",statusString:o.status.toUpperCase(),statusCode:o.status_code,errorMessage:o.error_message,events:o.events.map((function(e){return{type:e.type,transactionId:e.transaction_id,transactionIndex:Number(e.transaction_index),eventIndex:Number(e.event_index),payload:JSON.parse(r.Buffer.from(e.payload,"base64").toString())}}))},e.abrupt("return",s);case 16:case"end":return e.stop()}}),e)}))),qr.apply(this,arguments)}function Gr(e){return Hr.apply(this,arguments)}function Hr(){return Hr=Rt(It().mark((function e(t){var r,n,i,o,s=arguments;return It().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=s.length>1&&void 0!==s[1]?s[1]:{},n=s.length>2&&void 0!==s[2]?s[2]:{},O(Boolean(n.node),"SDK Send Ping Error: opts.node must be defined."),O(Boolean(r.response),"SDK Send Ping Error: context.response must be defined."),i=n.httpRequest||Kt,e.next=7,i({hostname:n.node,path:"/v1/blocks?height=sealed",method:"GET",body:null});case 7:return(o="function"==typeof(null==r?void 0:r.response)?r.response():{}).tag=t.tag,e.abrupt("return",o);case 10:case"end":return e.stop()}}),e)}))),Hr.apply(this,arguments)}var Kr=function(e){return"".concat(withPrefix(e.addr),"-").concat(e.keyId)};function Vr(e){return Wr.apply(this,arguments)}function Wr(){return Wr=Rt(It().mark((function e(t){var r,n,i,o,s,a,c,u,l,h,f,d,p,g,m,y,v=arguments;return It().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=v.length>1&&void 0!==v[1]?v[1]:{},O((n=v.length>2&&void 0!==v[2]?v[2]:{}).node,"SDK Send Transaction Error: opts.node must be defined."),O(r.response,"SDK Send Transaction Error: context.response must be defined."),O(r.Buffer,"SDK Send Transaction Error: context.Buffer must be defined."),i=n.httpRequest||Kt,e.next=8,t;case 8:t=e.sent,o=[],s=It().mark((function e(){var n,i;return It().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=c[a],e.prev=1,n.role.payer||null==n.signature||(i={address:vt(n.addr),key_index:String(n.keyId),signature:r.Buffer.from(n.signature,"hex").toString("base64")},o.find((function(e){return e.address===i.address&&e.key_index===i.key_index&&e.signature===i.signature}))||o.push(i)),e.next=9;break;case 5:throw e.prev=5,e.t0=e.catch(1),console.error("SDK HTTP Send Error: Trouble applying payload signature",{acct:n,ix:t}),e.t0;case 9:case"end":return e.stop()}}),e,null,[[1,5]])})),a=0,c=Object.values(t.accounts);case 12:if(!(a<c.length)){e.next=17;break}return e.delegateYield(s(),"t0",14);case 14:a++,e.next=12;break;case 17:u={},l=0,h=Object.values(t.accounts);case 19:if(!(l<h.length)){e.next=32;break}f=h[l],e.prev=21,f.role.payer&&null!=f.signature&&(d=f.tempId||Kr(f),u[d]=u[d]||{address:vt(f.addr),key_index:String(f.keyId),signature:r.Buffer.from(f.signature,"hex").toString("base64")}),e.next=29;break;case 25:throw e.prev=25,e.t1=e.catch(21),console.error("SDK HTTP Send Error: Trouble applying envelope signature",{acct:f,ix:t}),e.t1;case 29:l++,e.next=19;break;case 32:return u=Object.values(u),p=Date.now(),e.next=36,i({hostname:n.node,path:"/v1/transactions",method:"POST",body:{script:r.Buffer.from(t.message.cadence).toString("base64"),arguments:kt(t.message.arguments.map((function(e){return r.Buffer.from(JSON.stringify(t.arguments[e].asArgument)).toString("base64")}))),reference_block_id:t.message.refBlock?t.message.refBlock:null,gas_limit:String(t.message.computeLimit),payer:vt(t.accounts[Array.isArray(t.payer)?t.payer[0]:t.payer].addr),proposal_key:{address:vt(t.accounts[t.proposer].addr),key_index:String(t.accounts[t.proposer].keyId),sequence_number:String(t.accounts[t.proposer].sequenceNum)},authorizers:t.authorizations.map((function(e){return t.accounts[e].addr})).reduce((function(e,t){return e.find((function(e){return e===t}))?e:[].concat(kt(e),[t])}),[]).map(vt),payload_signatures:o,envelope_signatures:u}});case 36:return g=e.sent,m=Date.now(),(y=r.response()).tag=t.tag,y.transactionId=g.id,"undefined"!=typeof window&&"undefined"!=typeof CustomEvent&&window.dispatchEvent(new CustomEvent("FLOW::TX",{detail:{txId:y.transactionId,delta:m-p}})),e.abrupt("return",y);case 43:case"end":return e.stop()}}),e,null,[[21,25]])}))),Wr.apply(this,arguments)}function $r(e){return Jr.apply(this,arguments)}function Jr(){return Jr=Rt(It().mark((function e(t){var r,n,i,o,s,a,c=arguments;return It().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=c.length>1&&void 0!==c[1]?c[1]:{},O((i=c.length>2&&void 0!==c[2]?c[2]:{}).node,"SDK Send Get Network Parameters Error: opts.node must be defined."),O(n.response,"SDK Send Get Network Parameters Error: context.response must be defined."),o=i.httpRequest||Kt,e.next=7,t;case 7:return t=e.sent,e.next=10,o({hostname:i.node,path:"/v1/network/parameters",method:"GET",body:null,enableRequestLogging:null===(r=i.enableRequestLogging)||void 0===r||r});case 10:return s=e.sent,(a=n.response()).tag=t.tag,a.networkParameters={chainId:s.chain_id},e.abrupt("return",a);case 15:case"end":return e.stop()}}),e)}))),Jr.apply(this,arguments)}function Yr(e){return Qr.apply(this,arguments)}function Qr(){return Qr=Rt(It().mark((function e(t){var r,n,i,o,s,a=arguments;return It().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.length>1&&void 0!==a[1]?a[1]:{},O((n=a.length>2&&void 0!==a[2]?a[2]:{}).node,"SDK Send Get Node Version Info Error: opts.node must be defined."),O(r.response,"SDK Send Get Node Verison Info Error: context.response must be defined."),i=n.httpRequest||Kt,e.next=7,t;case 7:return t=e.sent,e.next=10,i({hostname:n.node,path:"/v1/node_version_info",method:"GET"});case 10:return o=e.sent,(s=r.response()).tag=t.tag,s.nodeVersionInfo={semver:o.semver,commit:o.commit,sporkId:o.spork_id,protocolVersion:parseInt(o.protocol_version),sporkRootBlockHeight:parseInt(o.spork_root_block_height),nodeRootBlockHeight:parseInt(o.node_root_block_height)},e.abrupt("return",s);case 15:case"end":return e.stop()}}),e)}))),Qr.apply(this,arguments)}var Xr=xt,Zr=function(e){Bt(r,e);var t=Ut(r);function r(e){var n;Lt(this,r);var i=e.code,o=e.reason,s=e.message,a=e.wasClean,c="\n      connectWs: connection closed with error".concat(s?": ".concat(s):"","\n      ").concat(i?"code: ".concat(i):"","\n      ").concat(o?"reason: ".concat(o):"","\n      ").concat(a?"wasClean: ".concat(a):"","\n    ");return(n=t.call(this,c)).name="WebsocketError",n.code=i,n.reason=o,n.wasClean=!1,n}return Ct(r)}(Dt(Error));function en(e){var t=e.hostname,r=e.path,n=e.params,i=e.getParams,o=e.retryLimit,s=void 0===o?5:o,a=e.retryIntervalMs,c=void 0===a?1e3:a;if(i&&n)throw new Error("connectWs: cannot specify both params and getParams");var u=new Et.EventEmitter,l=0,h=i||function(){return n},f=function(){};return function e(){var n=!1,i=!1,o=function(e,t,r){var n=new URL(t||"",e);return"https:"===n.protocol?n.protocol="wss:":"http:"===n.protocol&&(n.protocol="ws:"),Object.entries(r||{}).forEach((function(e){var t,r,i,o=(i=2,function(e){if(Array.isArray(e))return e}(r=e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,i,o,s,a=[],c=!0,u=!1;try{if(o=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=o.call(r)).done)&&(a.push(n.value),a.length!==t);c=!0);}catch(e){u=!0,i=e}finally{try{if(!c&&null!=r.return&&(s=r.return(),Object(s)!==s))return}finally{if(u)throw i}}return a}}(r,i)||Ot(r,i)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),s=o[0],a=o[1];a&&(t=Array.isArray(a)?a.join(","):a.toString(),n.searchParams.append(s,t))})),n.toString()}(t,r,h()),a=new Xr(o);a.onmessage=function(e){var t=qt(e.data);t?u.emit("data",t):(u.emit("error",new Zr({message:"invalid JSON data"})),this.close())},a.onclose=function(t){if(n)return u.emit("close"),void u.removeAllListeners();i?setTimeout(e,c):l<s?(l++,setTimeout(e,c)):(u.emit("error",new Zr({wasClean:t.wasClean,code:t.code,reason:t.reason,message:"failed to connect"})),setTimeout((function(){u.emit("close"),u.removeAllListeners()})))},a.onopen=function(){i=!0,l=0},f=function(){n=!0,a.close()}}(),{on:function(e,t){return u.on(e,t),this},off:function(e,t){return u.off(e,t),this},close:function(){f()}}}function tn(e,t,r){var n,i=t.response();return i.tag=e.tag,i.events=(null===(n=r.Events)||void 0===n?void 0:n.length)>0?r.Events.map((function(e){return{blockId:r.BlockID,blockHeight:Number(r.Height),blockTimestamp:r.BlockTimestamp,type:e.Type,transactionId:e.TransactionID,transactionIndex:Number(e.TransactionIndex),eventIndex:Number(e.EventIndex),payload:JSON.parse(t.Buffer.from(e.Payload,"base64").toString())}})):null,i.heartbeat={blockId:r.BlockID,blockHeight:Number(r.Height),blockTimestamp:r.BlockTimestamp},i}function rn(e,t,r){var n=t.response();return n.tag=e.tag,n.streamConnection=r,n}function nn(e){return on.apply(this,arguments)}function on(){return on=Rt(It().mark((function e(t){var r,n,i,o,s,a,c,u,l=arguments;return It().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=l.length>1&&void 0!==l[1]?l[1]:{},O((n=l.length>2&&void 0!==l[2]?l[2]:{}).node,"SDK Send Get Events Error: opts.node must be defined."),O(r.response,"SDK Send Get Events Error: context.response must be defined."),O(r.Buffer,"SDK Send Get Events Error: context.Buffer must be defined."),e.next=7,t;case 7:return i=e.sent,o=n.connectWs||en,s=new Et.EventEmitter,a=null,c=o({hostname:n.node,path:"/v1/subscribe_events",getParams:function(){var e,t,r,n,o,s,c={event_types:null===(e=i.subscribeEvents)||void 0===e?void 0:e.eventTypes,addresses:null===(t=i.subscribeEvents)||void 0===t?void 0:t.addresses,contracts:null===(r=i.subscribeEvents)||void 0===r?void 0:r.contracts,heartbeat_interval:null===(n=i.subscribeEvents)||void 0===n?void 0:n.heartbeatInterval};return a?c.start_height=a+1:(c.start_block_id=null===(o=i.subscribeEvents)||void 0===o?void 0:o.startBlockId,c.start_height=null===(s=i.subscribeEvents)||void 0===s?void 0:s.startHeight),c}}),c.on("data",(function(e){var t=tn(i,r,e);a=t.heartbeat.blockHeight,s.emit("data",t)})),c.on("error",(function(e){s.emit("error",e)})),c.on("close",(function(){s.emit("close")})),u={on:function(e,t){return s.on(e,t),this},off:function(e,t){return s.off(e,t),this},close:function(){c.close()}},e.abrupt("return",rn(i,r,u));case 17:case"end":return e.stop()}}),e)}))),on.apply(this,arguments)}var sn=function(){var e=Rt(It().mark((function e(t,r){var n,i,o,s,a,c=arguments;return It().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=c.length>2&&void 0!==c[2]?c[2]:{},O(Boolean(null==a?void 0:a.node),'SDK Send Error: Either opts.node or "accessNode.api" in config must be defined.'),O(Boolean(r.ix),"SDK Send Error: context.ix must be defined."),e.next=5,t;case 5:t=e.sent,e.t0=!0,e.next=e.t0===r.ix.isTransaction(t)?9:e.t0===r.ix.isGetTransactionStatus(t)?10:e.t0===r.ix.isGetTransaction(t)?11:e.t0===r.ix.isScript(t)?12:e.t0===r.ix.isGetAccount(t)?13:e.t0===r.ix.isGetEvents(t)?14:e.t0===(null===(n=(i=r.ix).isSubscribeEvents)||void 0===n?void 0:n.call(i,t))?15:e.t0===r.ix.isGetBlock(t)?16:e.t0===r.ix.isGetBlockHeader(t)?17:e.t0===r.ix.isGetCollection(t)?18:e.t0===r.ix.isPing(t)?19:e.t0===r.ix.isGetNetworkParameters(t)?20:e.t0===(null===(o=(s=r.ix).isGetNodeVersionInfo)||void 0===o?void 0:o.call(s,t))?21:22;break;case 9:return e.abrupt("return",a.sendTransaction?a.sendTransaction(t,r,a):Vr(t,r,a));case 10:return e.abrupt("return",a.sendGetTransactionStatus?a.sendGetTransactionStatus(t,r,a):zr(t,r,a));case 11:return e.abrupt("return",a.sendGetTransaction?a.sendGetTransaction(t,r,a):Dr(t,r,a));case 12:return e.abrupt("return",a.sendExecuteScript?a.sendExecuteScript(t,r,a):er(t,r,a));case 13:return e.abrupt("return",a.sendGetAccount?a.sendGetAccount(t,r,a):ur(t,r,a));case 14:return e.abrupt("return",a.sendGetEvents?a.sendGetEvents(t,r,a):Br(t,r,a));case 15:return e.abrupt("return",a.connectSubscribeEvents?a.connectSubscribeEvents(t,r,a):nn(t,r,a));case 16:return e.abrupt("return",a.sendGetBlock?a.sendGetBlock(t,r,a):Ir(t,r,a));case 17:return e.abrupt("return",a.sendGetBlockHeader?a.sendGetBlockHeader(t,r,a):vr(t,r,a));case 18:return e.abrupt("return",a.sendGetCollection?a.sendGetCollection(t,r,a):Tr(t,r,a));case 19:return e.abrupt("return",a.sendPing?a.sendPing(t,r,a):Gr(t,r,a));case 20:return e.abrupt("return",a.sendGetNetworkParameters?a.sendGetNetworkParameters(t,r,a):$r(t,r,a));case 21:return e.abrupt("return",a.sendGetNodeVersionInfo?a.sendGetNodeVersionInfo(t,r,a):Yr(t,r,a));case 22:return e.abrupt("return",t);case 23:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),an=r(8190);function cn(e){return function(e){if(Array.isArray(e))return e}(e)||hn(e)||ln(e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function un(e){return function(e){if(Array.isArray(e))return fn(e)}(e)||hn(e)||ln(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ln(e,t){if(e){if("string"==typeof e)return fn(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?fn(e,t):void 0}}function hn(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function fn(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function dn(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];if(!e.length&&!t.length)return r;if(!e.length)return r;if(!t.length)return r.push.apply(r,un(e)),r;var n=cn(e),i=n[0],o=n.slice(1),s=cn(t),a=s[0],c=s.slice(1);return void 0!==i&&r.push(i),void 0!==a&&r.push(a),dn(o,c,r)}function pn(e){return function(t){return"function"==typeof t?(I.deprecate({pkg:"FCL/SDK",subject:"Interopolation of functions into template literals",transition:"https://github.com/onflow/flow-js-sdk/blob/master/packages/sdk/TRANSITIONS.md#0001-deprecate-params"}),pn(e)(t(e))):String(t)}}function gn(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return"string"==typeof e?function(){return e}:"function"==typeof e?e:function(t){return dn(un(e),r.map(pn(t))).join("").trim()}}var mn=["tempId"],yn=["resolve"];function vn(e,t){return In(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,i,o,s,a=[],c=!0,u=!1;try{if(o=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=o.call(r)).done)&&(a.push(n.value),a.length!==t);c=!0);}catch(e){u=!0,i=e}finally{try{if(!c&&null!=r.return&&(s=r.return(),Object(s)!==s))return}finally{if(u)throw i}}return a}}(e,t)||Bn(e,t)||Sn()}function bn(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(-1!==t.indexOf(n))continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],-1===t.indexOf(r)&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function wn(e){var t="function"==typeof Map?new Map:void 0;return wn=function(e){if(null===e||!function(e){try{return-1!==Function.toString.call(e).indexOf("[native code]")}catch(t){return"function"==typeof e}}(e))return e;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,r)}function r(){return function(e,t,r){if(En())return Reflect.construct.apply(null,arguments);var n=[null];n.push.apply(n,t);var i=new(e.bind.apply(e,n));return r&&An(i,r.prototype),i}(e,arguments,_n(this).constructor)}return r.prototype=Object.create(e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),An(r,e)},wn(e)}function En(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(En=function(){return!!e})()}function An(e,t){return An=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},An(e,t)}function _n(e){return _n=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},_n(e)}function xn(e){return function(e){if(Array.isArray(e))return Un(e)}(e)||kn(e)||Bn(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Sn(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function kn(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function In(e){if(Array.isArray(e))return e}function On(){On=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,i=Object.defineProperty||function(e,t,r){e[t]=r.value},o="function"==typeof Symbol?Symbol:{},s=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function u(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,r){return e[t]=r}}function l(e,t,r,n){var o=t&&t.prototype instanceof y?t:y,s=Object.create(o.prototype),a=new P(n||[]);return i(s,"_invoke",{value:k(e,r,a)}),s}function h(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=l;var f="suspendedStart",d="suspendedYield",p="executing",g="completed",m={};function y(){}function v(){}function b(){}var w={};u(w,s,(function(){return this}));var E=Object.getPrototypeOf,A=E&&E(E(R([])));A&&A!==r&&n.call(A,s)&&(w=A);var _=b.prototype=y.prototype=Object.create(w);function x(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function S(e,t){function r(i,o,s,a){var c=h(e[i],e,o);if("throw"!==c.type){var u=c.arg,l=u.value;return l&&"object"==Dn(l)&&n.call(l,"__await")?t.resolve(l.__await).then((function(e){r("next",e,s,a)}),(function(e){r("throw",e,s,a)})):t.resolve(l).then((function(e){u.value=e,s(u)}),(function(e){return r("throw",e,s,a)}))}a(c.arg)}var o;i(this,"_invoke",{value:function(e,n){function i(){return new t((function(t,i){r(e,n,t,i)}))}return o=o?o.then(i,i):i()}})}function k(t,r,n){var i=f;return function(o,s){if(i===p)throw Error("Generator is already running");if(i===g){if("throw"===o)throw s;return{value:e,done:!0}}for(n.method=o,n.arg=s;;){var a=n.delegate;if(a){var c=I(a,n);if(c){if(c===m)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(i===f)throw i=g,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);i=p;var u=h(t,r,n);if("normal"===u.type){if(i=n.done?g:d,u.arg===m)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(i=g,n.method="throw",n.arg=u.arg)}}}function I(t,r){var n=r.method,i=t.iterator[n];if(i===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,I(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),m;var o=h(i,t.iterator,r.arg);if("throw"===o.type)return r.method="throw",r.arg=o.arg,r.delegate=null,m;var s=o.arg;return s?s.done?(r[t.resultName]=s.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,m):s:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,m)}function O(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function T(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function P(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(O,this),this.reset(!0)}function R(t){if(t||""===t){var r=t[s];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var i=-1,o=function r(){for(;++i<t.length;)if(n.call(t,i))return r.value=t[i],r.done=!1,r;return r.value=e,r.done=!0,r};return o.next=o}}throw new TypeError(Dn(t)+" is not iterable")}return v.prototype=b,i(_,"constructor",{value:b,configurable:!0}),i(b,"constructor",{value:v,configurable:!0}),v.displayName=u(b,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===v||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,b):(e.__proto__=b,u(e,c,"GeneratorFunction")),e.prototype=Object.create(_),e},t.awrap=function(e){return{__await:e}},x(S.prototype),u(S.prototype,a,(function(){return this})),t.AsyncIterator=S,t.async=function(e,r,n,i,o){void 0===o&&(o=Promise);var s=new S(l(e,r,n,i),o);return t.isGeneratorFunction(r)?s:s.next().then((function(e){return e.done?e.value:s.next()}))},x(_),u(_,c,"Generator"),u(_,s,(function(){return this})),u(_,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=R,P.prototype={constructor:P,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(T),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function i(n,i){return a.type="throw",a.arg=t,r.next=n,i&&(r.method="next",r.arg=e),!!i}for(var o=this.tryEntries.length-1;o>=0;--o){var s=this.tryEntries[o],a=s.completion;if("root"===s.tryLoc)return i("end");if(s.tryLoc<=this.prev){var c=n.call(s,"catchLoc"),u=n.call(s,"finallyLoc");if(c&&u){if(this.prev<s.catchLoc)return i(s.catchLoc,!0);if(this.prev<s.finallyLoc)return i(s.finallyLoc)}else if(c){if(this.prev<s.catchLoc)return i(s.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<s.finallyLoc)return i(s.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var s=o?o.completion:{};return s.type=e,s.arg=t,o?(this.method="next",this.next=o.finallyLoc,m):this.complete(s)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),m},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),T(r),m}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var i=n.arg;T(r)}return i}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:R(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),m}},t}function Tn(e,t,r,n,i,o,s){try{var a=e[o](s),c=a.value}catch(e){return void r(e)}a.done?t(c):Promise.resolve(c).then(n,i)}function Pn(e){return function(){var t=this,r=arguments;return new Promise((function(n,i){var o=e.apply(t,r);function s(e){Tn(o,n,i,s,a,"next",e)}function a(e){Tn(o,n,i,s,a,"throw",e)}s(void 0)}))}}function Rn(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Nn(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Rn(Object(r),!0).forEach((function(t){Cn(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Rn(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Cn(e,t,r){return(t=Mn(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Mn(e){var t=function(e){if("object"!=Dn(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=Dn(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Dn(t)?t:t+""}function Ln(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=Bn(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,s=!0,a=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return s=e.done,e},e:function(e){a=!0,o=e},f:function(){try{s||null==r.return||r.return()}finally{if(a)throw o}}}}function Bn(e,t){if(e){if("string"==typeof e)return Un(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Un(e,t):void 0}}function Un(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function Dn(e){return Dn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Dn(e)}var jn='{\n  "kind":"'.concat(D.ACCOUNT,'",\n  "tempId":null,\n  "addr":null,\n  "keyId":null,\n  "sequenceNum":null,\n  "signature":null,\n  "signingFunction":null,\n  "resolve":null,\n  "role": {\n    "proposer":false,\n    "authorizer":false,\n    "payer":false,\n    "param":false\n  }\n}'),Fn='{\n  "kind":"'.concat(D.ARGUMENT,'",\n  "tempId":null,\n  "value":null,\n  "asArgument":null,\n  "xform":null,\n  "resolve": null,\n  "resolveArgument": null\n}'),zn='{\n  "tag":"'.concat(L.UNKNOWN,'",\n  "assigns":{},\n  "status":"').concat(B.OK,'",\n  "reason":null,\n  "accounts":{},\n  "params":{},\n  "arguments":{},\n  "message": {\n    "cadence":null,\n    "refBlock":null,\n    "computeLimit":null,\n    "proposer":null,\n    "payer":null,\n    "authorizations":[],\n    "params":[],\n    "arguments":[]\n  },\n  "proposer":null,\n  "authorizations":[],\n  "payer":[],\n  "events": {\n    "eventType":null,\n    "start":null,\n    "end":null,\n    "blockIds":[]\n  },\n  "subscribeEvents": {\n    "startBlockId":null,\n    "startHeight":null,\n    "eventTypes":null,\n    "addresses":null,\n    "contracts":null,\n    "heartbeatInterval":null\n  },\n  "transaction": {\n    "id":null\n  },\n  "block": {\n    "id":null,\n    "height":null,\n    "isSealed":null\n  },\n  "account": {\n    "addr":null\n  },\n  "collection": {\n    "id":null\n  }\n}'),qn=new Set(Object.keys(JSON.parse(zn))),Gn=function(){return JSON.parse(zn)},Hn=function(){return I.deprecate({pkg:"FCL/SDK",message:"The interaction been deprecated from the Flow JS-SDK/FCL. use initInteraction instead",transition:"https://github.com/onflow/flow-js-sdk/blob/master/packages/sdk/TRANSITIONS.md#0010-deprecate-interaction",level:S.warn}),Gn()},Kn=function(e){return"number"==typeof e},Vn=function(e){return Array.isArray(e)},Wn=function(e){return null!==e&&"object"===Dn(e)},$n=function(e){return null==e},Jn=function(e){return"function"==typeof e},Yn=function(e){if(!Wn(e)||$n(e)||Kn(e))return!1;var t,r=Ln(qn);try{for(r.s();!(t=r.n()).done;){var n=t.value;if(!e.hasOwnProperty(n))return!1}}catch(e){r.e(e)}finally{r.f()}return!0},Qn=function(e){return e.status=B.OK,e},Xn=function(e,t){return e.status=B.BAD,e.reason=t,e},Zn=function(e){return function(t){return t.tag=e,Qn(t)}},ei=function(e){return null==e.keyId?e:(O(!isNaN(parseInt(e.keyId.toString())),"account.keyId must be an integer"),Nn(Nn({},e),{},{keyId:parseInt(e.keyId.toString())}))},ti=function(){return JSON.parse(jn)},ri=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(r){O("function"==typeof e||"object"===Dn(e),"prepAccount must be passed an authorization function or an account object"),O(null!=t.role,"Account must have a role");var n=ti(),i=t.role,o=M(),s=Nn({},e);e.authorization&&Jn(e.authorization)&&(s={resolve:e.authorization}),!e.authorization&&Jn(e)&&(s={resolve:e});var a=s.resolve;return a&&(s.resolve=function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return[a,ei].reduce(function(){var e=Pn(On().mark((function e(t,n){return On().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=n,e.t1=void 0,e.next=4,t;case 4:return e.t2=e.sent,e.t3=[e.t2].concat(r),e.abrupt("return",e.t0.apply.call(e.t0,e.t1,e.t3));case 7:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),e)}),s=ei(s),r.accounts[o]=Nn(Nn(Nn({},n),{},{tempId:o},s),{},{role:Nn(Nn(Nn({},n.role),"object"===Dn(e.role)?e.role:{}),i?Cn({},i,!0):{})}),i===U.AUTHORIZER?r.authorizations.push(o):i===U.PAYER?r.payer.push(o):i&&(r[i]=o),r}},ni=function(e){return function(t){var r=M();return t.message.arguments.push(r),t.arguments[r]=JSON.parse(Fn),t.arguments[r].tempId=r,t.arguments[r].value=e.value,t.arguments[r].asArgument=e.asArgument,t.arguments[r].xform=e.xform,t.arguments[r].resolve=e.resolve,t.arguments[r].resolveArgument=Jn(e.resolveArgument)?e.resolveArgument.bind(e):e.resolveArgument,Qn(t)}},ii=Zn(L.UNKNOWN),oi=Zn(L.SCRIPT),si=Zn(L.TRANSACTION),ai=Zn(L.GET_TRANSACTION_STATUS),ci=Zn(L.GET_TRANSACTION),ui=Zn(L.GET_ACCOUNT),li=Zn(L.GET_EVENTS),hi=Zn(L.PING),fi=Zn(L.GET_BLOCK),di=Zn(L.GET_BLOCK_HEADER),pi=Zn(L.GET_COLLECTION),gi=Zn(L.GET_NETWORK_PARAMETERS),mi=Zn(L.SUBSCRIBE_EVENTS),yi=Zn(L.GET_NODE_VERSION_INFO),vi=function(e){return function(t){return t.tag===e}},bi=vi(L.UNKNOWN),wi=vi(L.SCRIPT),Ei=vi(L.TRANSACTION),Ai=vi(L.GET_TRANSACTION_STATUS),_i=vi(L.GET_TRANSACTION),xi=vi(L.GET_ACCOUNT),Si=vi(L.GET_EVENTS),ki=vi(L.PING),Ii=vi(L.GET_BLOCK),Oi=vi(L.GET_BLOCK_HEADER),Ti=vi(L.GET_COLLECTION),Pi=vi(L.GET_NETWORK_PARAMETERS),Ri=vi(L.GET_NODE_VERSION_INFO),Ni=vi(L.SUBSCRIBE_EVENTS),Ci=function(e){return e.status===B.OK},Mi=function(e){return e.status===B.BAD},Li=function(e){return e.reason},Bi=function(e){for(var t=0,r=Object.keys(e);t<r.length;t++){var n=r[t];if(!qn.has(n))throw new Error('"'.concat(n,'" is an invalid root level Interaction property.'))}return e},Ui=function(){var e=Pn(On().mark((function e(t){var r,n,i,o,s,a=arguments;return On().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.length>1&&void 0!==a[1]?a[1]:[],e.prev=1,e.t0=Bi,e.next=5,t;case 5:if(e.t1=e.sent,t=(0,e.t0)(e.t1),!Mi(t)){e.next=9;break}throw new Error("Interaction Error: ".concat(t.reason));case 9:if(r.length){e.next=11;break}return e.abrupt("return",t);case 11:return n=In(c=r)||kn(c)||Bn(c)||Sn(),i=n[0],o=n.slice(1),e.next=14,i;case 14:if(s=e.sent,!Jn(s)){e.next=17;break}return e.abrupt("return",Ui(s(t),o));case 17:if(!$n(s)&&s){e.next=19;break}return e.abrupt("return",Ui(t,o));case 19:if(!Yn(s)){e.next=21;break}return e.abrupt("return",Ui(s,o));case 21:throw new Error("Invalid Interaction Composition");case 24:throw e.prev=24,e.t2=e.catch(1),e.t2;case 27:case"end":return e.stop()}var c}),e,null,[[1,24]])})));return function(t){return e.apply(this,arguments)}}();function Di(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var n=t[0],i=t[1];return Vn(n)?function(e){return Di(e,n)}:Ui(n,i)}var ji=function(e){return e},Fi=function(e,t,r){return null==e.assigns[t]?r:e.assigns[t]},zi=function(e,t){return function(r){return r.assigns[e]=t,Qn(r)}},qi=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ji;return function(r){return r.assigns[e]=t(r.assigns[e],r),Qn(r)}},Gi=Object.freeze({__proto__:null,Bad:Xn,Ok:Qn,destroy:function(e){return function(t){return delete t.assigns[e],Qn(t)}},get:Fi,initAccount:ti,initInteraction:Gn,interaction:Hn,isAccount:function(e){return e.kind===D.ACCOUNT},isArgument:function(e){return e.kind===D.ARGUMENT},isArray:Vn,isBad:Mi,isFn:Jn,isGetAccount:xi,isGetBlock:Ii,isGetBlockHeader:Oi,isGetCollection:Ti,isGetEvents:Si,isGetNetworkParameters:Pi,isGetNodeVersionInfo:Ri,isGetTransaction:_i,isGetTransactionStatus:Ai,isInteraction:Yn,isNull:$n,isNumber:Kn,isObj:Wn,isOk:Ci,isPing:ki,isScript:wi,isSubscribeEvents:Ni,isTransaction:Ei,isUnknown:bi,makeArgument:ni,makeGetAccount:ui,makeGetBlock:fi,makeGetBlockHeader:di,makeGetCollection:pi,makeGetEvents:li,makeGetNetworkParameters:gi,makeGetNodeVerionInfo:yi,makeGetTransaction:ci,makeGetTransactionStatus:ai,makePing:hi,makeScript:oi,makeSubscribeEvents:mi,makeTransaction:si,makeUnknown:ii,pipe:Di,prepAccount:ri,put:zi,update:qi,why:Li});function Hi(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return Di(Gn(),e)}var Ki={tag:null,transaction:null,transactionStatus:null,transactionId:null,encodedData:null,events:null,account:null,block:null,blockHeader:null,latestBlock:null,collection:null,networkParameters:null,streamConnection:null,heartbeat:null,nodeVersionInfo:null},Vi=function(){return Nn({},Ki)};function Wi(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return Di([fi,function(t){return t.block.isSealed=e,Qn(t)}])}function $i(e){return Di([ui,function(t){return t.account.addr=vt(e),Qn(t)}])}var Ji=function(e,t,r){var n=new(At()),i=function(){var e=[],t=!1;function r(){return(r=Pn(On().mark((function r(){var n;return On().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!t){r.next=2;break}return r.abrupt("return");case 2:t=!0;case 3:if(!(e.length>0)){r.next=9;break}return n=e.shift(),r.next=7,null==n?void 0:n();case 7:r.next=3;break;case 9:t=!1;case 10:case"end":return r.stop()}}),r)})))).apply(this,arguments)}return{push:function(t){e.push(t),function(){r.apply(this,arguments)}()}}}();function o(t){e.on(t,(function(e){i.push(Pn(On().mark((function r(){return On().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:n.emit(t,e);case 1:case"end":return r.stop()}}),r)}))))}))}return e.on("data",function(){var e=Pn(On().mark((function e(o){var s,a;return On().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:s=Object.keys(o).filter((function(e){return null!=o[e]&&"tag"!==e})),a=Promise.all(s.map(function(){var e=Pn(On().mark((function e(n){var i,s;return On().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Cn({},n,o[n]),e.next=3,t(i,r);case 3:return s=e.sent,e.abrupt("return",{channel:n,message:s});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())),i.push(Pn(On().mark((function e(){return On().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a;case 2:e.sent.forEach((function(e){var t=e.channel,r=e.message;n.emit(t,r)}));case 4:case"end":return e.stop()}}),e)}))));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),o("close"),o("error"),{on:function(e,t){return n.on(e,t),this},off:function(e,t){return n.off(e,t),this},close:function(){e.close()}}},Yi=function(){var e=Pn(On().mark((function e(t){return On().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Qi=function(){var e=Pn(On().mark((function e(){return On().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",null);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Xi=function(){var e=Pn(On().mark((function e(t){return On().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t.staticType);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Zi=function(){var e=Pn(On().mark((function e(t,r,n){return On().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=6;break}return e.next=3,oo(t,r,n);case 3:e.t0=e.sent,e.next=7;break;case 6:e.t0=null;case 7:return e.abrupt("return",e.t0);case 8:case"end":return e.stop()}}),e)})));return function(t,r,n){return e.apply(this,arguments)}}(),eo=function(){var e=Pn(On().mark((function e(t,r,n){return On().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all(t.map((function(e){return new Promise(function(){var t=Pn(On().mark((function t(i){return On().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=i,t.next=3,oo(e,r,[].concat(xn(n),[e.type]));case 3:return t.t1=t.sent,t.abrupt("return",(0,t.t0)(t.t1));case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())})));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,r,n){return e.apply(this,arguments)}}(),to=function(){var e=Pn(On().mark((function e(t,r,n){return On().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.reduce(function(){var e=Pn(On().mark((function e(t,i){return On().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t;case 2:return t=e.sent,e.next=5,oo(i.key,r,[].concat(xn(n),[i.key]));case 5:return e.t0=e.sent,e.next=8,oo(i.value,r,[].concat(xn(n),[i.key]));case 8:return t[e.t0]=e.sent,e.abrupt("return",t);case 10:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),Promise.resolve({}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,r,n){return e.apply(this,arguments)}}(),ro=function(){var e=Pn(On().mark((function e(t,r,n){var i,o;return On().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.fields.reduce(function(){var e=Pn(On().mark((function e(t,i){return On().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t;case 2:return t=e.sent,e.next=5,oo(i.value,r,[].concat(xn(n),[i.name]));case 5:return t[i.name]=e.sent,e.abrupt("return",t);case 7:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),Promise.resolve({}));case 2:if(i=e.sent,!(o=t.id&&io(r,t.id))){e.next=10;break}return e.next=7,o(i);case 7:e.t0=e.sent,e.next=11;break;case 10:e.t0=i;case 11:return e.abrupt("return",e.t0);case 12:case"end":return e.stop()}}),e)})));return function(t,r,n){return e.apply(this,arguments)}}(),no={UInt:Yi,Int:Yi,UInt8:Yi,Int8:Yi,UInt16:Yi,Int16:Yi,UInt32:Yi,Int32:Yi,UInt64:Yi,Int64:Yi,UInt128:Yi,Int128:Yi,UInt256:Yi,Int256:Yi,Word8:Yi,Word16:Yi,Word32:Yi,Word64:Yi,Word128:Yi,Word256:Yi,UFix64:Yi,Fix64:Yi,String:Yi,Character:Yi,Bool:Yi,Address:Yi,Void:Qi,Optional:Zi,Reference:Yi,Array:eo,Dictionary:to,Event:ro,Resource:ro,Struct:ro,Enum:ro,Type:Xi,Path:Yi,Capability:Yi,InclusiveRange:function(){var e=Pn(On().mark((function e(t,r,n){var i,o;return On().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=["start","end","step"],e.next=3,Object.keys(t).reduce(function(){var e=Pn(On().mark((function e(o,s){return On().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o;case 2:if(o=e.sent,!i.includes(s)){e.next=7;break}return e.next=6,oo(t[s],r,[].concat(xn(n),[s]));case 6:o[s]=e.sent;case 7:return e.abrupt("return",o);case 8:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),Promise.resolve({}));case 3:return o=e.sent,e.abrupt("return",o);case 5:case"end":return e.stop()}}),e)})));return function(t,r,n){return e.apply(this,arguments)}}()},io=function(e,t){var r=Object.keys(e).find((function(e){return/^\/.*\/$/.test(e)?new RegExp(e.substring(1,e.length-1)).test(t):e===t}));return t&&r&&e[r]},oo=function(){var e=Pn(On().mark((function e(t,r,n){var i;return On().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=io(r,t.type)){e.next=3;break}throw new Error("Undefined Decoder Error: ".concat(t.type,"@").concat(n.join(".")));case 3:return e.next=5,i(t.value,r,n);case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})));return function(t,r,n){return e.apply(this,arguments)}}(),so=function(){var e=Pn(On().mark((function e(t){var r,n,i,o,s=arguments;return On().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=s.length>1&&void 0!==s[1]?s[1]:{},n=s.length>2&&void 0!==s[2]?s[2]:[],i=Object.keys(no).filter((function(e){return!Object.keys(r).find((function(t){return new RegExp(t).test(e)}))})).reduce((function(e,t){return e[t]=no[t],e}),r),o=Nn(Nn({},i),r),e.abrupt("return",oo(t,o,n));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ao=function(){var e=Pn(On().mark((function e(t){var r,n,i,o,s=arguments;return On().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=s.length>1&&void 0!==s[1]?s[1]:{},!t.encodedData){e.next=5;break}return e.abrupt("return",so(t.encodedData,r));case 5:if(!t.transactionStatus){e.next=16;break}return e.t0=Nn,e.t1=Nn({},t.transactionStatus),e.t2={},e.next=11,Promise.all(t.transactionStatus.events.map(function(){var e=Pn(On().mark((function e(t){return On().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=t.type,e.t1=t.transactionId,e.t2=t.transactionIndex,e.t3=t.eventIndex,e.next=6,so(t.payload,r);case 6:return e.t4=e.sent,e.abrupt("return",{type:e.t0,transactionId:e.t1,transactionIndex:e.t2,eventIndex:e.t3,data:e.t4});case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 11:return e.t3=e.sent,e.t4={events:e.t3},e.abrupt("return",(0,e.t0)(e.t1,e.t2,e.t4));case 16:if(!t.transaction){e.next=20;break}return e.abrupt("return",t.transaction);case 20:if(!t.events){e.next=26;break}return e.next=23,Promise.all(t.events.map(function(){var e=Pn(On().mark((function e(t){return On().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=t.blockId,e.t1=t.blockHeight,e.t2=t.blockTimestamp,e.t3=t.type,e.t4=t.transactionId,e.t5=t.transactionIndex,e.t6=t.eventIndex,e.next=9,so(t.payload,r);case 9:return e.t7=e.sent,e.abrupt("return",{blockId:e.t0,blockHeight:e.t1,blockTimestamp:e.t2,type:e.t3,transactionId:e.t4,transactionIndex:e.t5,eventIndex:e.t6,data:e.t7});case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 23:return e.abrupt("return",e.sent);case 26:if(!t.account){e.next=30;break}return e.abrupt("return",t.account);case 30:if(!t.block){e.next=34;break}return e.abrupt("return",t.block);case 34:if(!t.blockHeader){e.next=38;break}return e.abrupt("return",t.blockHeader);case 38:if(!t.latestBlock){e.next=43;break}return I.deprecate({pkg:"@onflow/decode",subject:"Operating upon data of the latestBlock field of the response object",transition:"https://github.com/onflow/flow-js-sdk/blob/master/packages/decode/WARNINGS.md#0001-Deprecating-latestBlock-field"}),e.abrupt("return",t.latestBlock);case 43:if(!t.transactionId){e.next=47;break}return e.abrupt("return",t.transactionId);case 47:if(!t.collection){e.next=51;break}return e.abrupt("return",t.collection);case 51:if(!t.networkParameters){e.next=58;break}return n=/^flow-/,i=t.networkParameters.chainId,o="flow-emulator"===i?"local":n.test(i)?i.replace(n,""):i,e.abrupt("return",{chainId:o});case 58:if(!t.streamConnection){e.next=62;break}return e.abrupt("return",Ji(t.streamConnection,ao,r));case 62:if(!t.heartbeat){e.next=66;break}return e.abrupt("return",t.heartbeat);case 66:if(!t.nodeVersionInfo){e.next=68;break}return e.abrupt("return",t.nodeVersionInfo);case 68:return e.abrupt("return",null);case 69:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),co=function(e){return"function"==typeof e},uo=function(e){return"string"==typeof e};function lo(e){return/\b(0x\w+)\b/g.test(e)}function ho(e){return/import\s+"(\w+)"/g.test(e)}function fo(e){return e.matchAll(/import\s+"(\w+)"/g)}function po(){return po=Pn(On().mark((function e(t){var r,n,i,o,s,a,c;return On().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Ei(t)||wi(t)){e.next=2;break}return e.abrupt("return",t);case 2:if(r=Fi(t,"ix.cadence"),O(co(r)||uo(r),"Cadence needs to be a function or a string."),!co(r)){e.next=8;break}return e.next=7,r({});case 7:r=e.sent;case 8:if(O(uo(r),"Cadence needs to be a string at this point."),O(!lo(r)||!ho(r),"Both account identifier and contract identifier syntax not simultaneously supported."),!lo(r)){e.next=14;break}return e.next=13,ct().where(/^0x/).then((function(e){return Object.entries(e).reduce((function(e,t){var r=vn(t,2),n=r[0],i=r[1],o=new RegExp("(\\b"+n+"\\b)","g");return e.replace(o,i)}),r)}));case 13:r=e.sent;case 14:if(!ho(r)){e.next=34;break}n=Ln(fo(r)),e.prev=16,n.s();case 18:if((i=n.n()).done){e.next=26;break}return o=vn(i.value,2),s=o[0],a=o[1],e.next=22,ct().get("system.contracts.".concat(a));case 22:(c=e.sent)?r=r.replace(s,"import ".concat(a," from ").concat(bt(c))):I({title:"Contract Placeholder not found",message:"Cannot find a value for contract placeholder ".concat(a,". Please add to your flow.json or explicitly add it to the config 'contracts.*' namespace."),level:S.warn});case 24:e.next=18;break;case 26:e.next=31;break;case 28:e.prev=28,e.t0=e.catch(16),n.e(e.t0);case 31:return e.prev=31,n.f(),e.finish(31);case 34:return t.message.cadence=r,e.abrupt("return",t);case 36:case"end":return e.stop()}}),e,null,[[16,28,31,34]])}))),po.apply(this,arguments)}var go=function(e){return"function"==typeof e};function mo(e){return O(null!=Dn(e.xform),"No type specified for argument: ".concat(e.value)),go(e.xform)?e.xform(e.value):go(e.xform.asArgument)?e.xform.asArgument(e.value):void O(!1,"Invalid Argument",e)}function yo(e){return vo.apply(this,arguments)}function vo(){return vo=Pn(On().mark((function e(t){var r,n,i=arguments;return On().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(O((r=i.length>1&&void 0!==i[1]?i[1]:3)>0,"Argument Resolve Recursion Limit Exceeded for Arg: ".concat(t.tempId)),!go(t.resolveArgument)){e.next=9;break}return e.next=5,t.resolveArgument();case 5:return n=e.sent,e.abrupt("return",yo(n,r-1));case 9:return e.abrupt("return",t);case 10:case"end":return e.stop()}}),e)}))),vo.apply(this,arguments)}function bo(){return bo=Pn(On().mark((function e(t){var r,n,i,o,s,a;return On().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!Ei(t)&&!wi(t)){e.next=11;break}r=0,n=Object.entries(t.arguments);case 2:if(!(r<n.length)){e.next=11;break}return i=vn(n[r],2),o=i[0],s=i[1],e.next=6,yo(s);case 6:a=e.sent,t.arguments[o].asArgument=mo(a);case 8:r++,e.next=2;break;case 11:return e.abrupt("return",t);case 12:case"end":return e.stop()}}),e)}))),bo.apply(this,arguments)}var wo,Eo=function(e){return So(Ro(No(e)))},Ao=function(e){return So(Ro(Co(e)))},_o=function(e,t){return ht.Buffer.from(e.padStart(2*t,"0"),"hex")},xo=(wo=ht.Buffer.from("FLOW-V0.0-transaction").toString("hex"),ht.Buffer.from(wo.padEnd(64,"0"),"hex")).toString("hex"),So=function(e){return xo+e},ko=function(e){return _o(e,8)},Io=function(e){return _o(e,32)},Oo=function(e){return ht.Buffer.from(JSON.stringify(e),"utf8")},To=function(e){return ht.Buffer.from(e,"utf8")},Po=function(e){return ht.Buffer.from(e,"hex")},Ro=function(e){return ft(e).toString("hex")},No=function(e){return Bo(e),[To(e.cadence||""),e.arguments.map(Oo),Io(e.refBlock||""),e.computeLimit,ko(vt(e.proposalKey.address||"")),e.proposalKey.keyId,e.proposalKey.sequenceNum,ko(vt(e.payer)),e.authorizers.map((function(e){return ko(vt(e))}))]},Co=function(e){return Uo(e),[No(e),Mo(e)]},Mo=function(e){var t,r=Lo(e);return null===(t=e.payloadSigs)||void 0===t?void 0:t.map((function(e){return{signerIndex:r.get(vt(e.address))||"",keyId:e.keyId,sig:e.sig}})).sort((function(e,t){return e.signerIndex>t.signerIndex?1:e.signerIndex<t.signerIndex?-1:e.keyId>t.keyId?1:e.keyId<t.keyId?-1:0})).map((function(e){return[e.signerIndex,e.keyId,Po(e.sig)]}))},Lo=function(e){var t=new Map,r=0,n=function(e){t.has(e)||(t.set(e,r),r++)};return e.proposalKey.address&&n(e.proposalKey.address),n(e.payer),e.authorizers.forEach(n),t},Bo=function(e){Go.forEach((function(t){return Jo(e,t)})),Ho.forEach((function(t){return Jo(e.proposalKey,t,"proposalKey")}))},Uo=function(e){var t;Ko.forEach((function(t){return Jo(e,t)})),null===(t=e.payloadSigs)||void 0===t||t.forEach((function(e,t){Vo.forEach((function(r){return Jo(e,r,"payloadSigs",t)}))}))},Do=function(e){Go.forEach((function(t){return Jo(e,t)})),Ho.forEach((function(t){return Jo(e.proposalKey,t,"proposalKey")})),Ko.forEach((function(t){return Jo(e,t)})),e.payloadSigs.forEach((function(e,t){Vo.forEach((function(r){return Jo(e,r,"payloadSigs",t)}))})),Wo.forEach((function(t){return Jo(e,t)})),e.envelopeSigs.forEach((function(e,t){$o.forEach((function(r){return Jo(e,r,"envelopeSigs",t)}))}))},jo=function(e){return"number"==typeof e},Fo=function(e){return"string"==typeof e},zo=function(e){return null!==e&&"object"===Dn(e)},qo=function(e){return zo(e)&&e instanceof Array},Go=[{name:"cadence",check:Fo},{name:"arguments",check:qo},{name:"refBlock",check:Fo,defaultVal:"0"},{name:"computeLimit",check:jo},{name:"proposalKey",check:zo},{name:"payer",check:Fo},{name:"authorizers",check:qo}],Ho=[{name:"address",check:Fo},{name:"keyId",check:jo},{name:"sequenceNum",check:jo}],Ko=[{name:"payloadSigs",check:qo}],Vo=[{name:"address",check:Fo},{name:"keyId",check:jo},{name:"sig",check:Fo}],Wo=[{name:"envelopeSigs",check:qo}],$o=[{name:"address",check:Fo},{name:"keyId",check:jo},{name:"sig",check:Fo}],Jo=function(e,t,r,n){var i=t.name,o=t.check,s=t.defaultVal;if(null==e[i]&&null!=s&&(e[i]=s),null==e[i])throw Qo(i,r,n);if(!o(e[i]))throw Xo(i,r,n)},Yo=function(e,t,r){return t?null==r?"".concat(t,".").concat(e):"".concat(t,".").concat(r,".").concat(e):e},Qo=function(e,t,r){return new Error("Missing field ".concat(Yo(e,t,r)))},Xo=function(e,t,r){return new Error("Invalid field ".concat(Yo(e,t,r)))};function Zo(e){var t=new Set(e.authorizations);return e.proposer&&t.add(e.proposer),Array.isArray(e.payer)?e.payer.forEach((function(e){return t.delete(e)})):t.delete(e.payer),Array.from(t)}function es(e){var t=new Set(Array.isArray(e.payer)?e.payer:[e.payer]);return Array.from(t)}var ts=function(e){var t=e.proposer?{address:bt(e.accounts[e.proposer].addr),keyId:e.accounts[e.proposer].keyId,sequenceNum:e.accounts[e.proposer].sequenceNum}:{};return{cadence:e.message.cadence,refBlock:e.message.refBlock||null,computeLimit:e.message.computeLimit,arguments:e.message.arguments.map((function(t){return e.arguments[t].asArgument})),proposalKey:t,payer:bt(e.accounts[Array.isArray(e.payer)?e.payer[0]:e.payer].addr),authorizers:e.authorizations.map((function(t){return bt(e.accounts[t].addr)})).reduce((function(e,t){return e.find((function(e){return e===t}))?e:[].concat(xn(e),[t])}),[]),payloadSigs:Zo(e).map((function(t){return{address:bt(e.accounts[t].addr),keyId:e.accounts[t].keyId,sig:e.accounts[t].signature}})),envelopeSigs:es(e).map((function(t){return{address:bt(e.accounts[t].addr),keyId:e.accounts[t].keyId,sig:e.accounts[t].signature}}))}},rs=function(e){return function(e){return function(e){var t=new an.KN(256);return t.update(ht.Buffer.from(e,"hex")),t.digest().toString("hex")}(Ro(function(e){Do(e);var t=Lo(e),r=function(e){return e.map((function(e){var r=e.address,n=e.keyId,i=e.sig;return{signerIndex:t.get(vt(r))||"",keyId:n,sig:i}})).sort((function(e,t){return e.signerIndex>t.signerIndex?1:e.signerIndex<t.signerIndex?-1:e.keyId>t.keyId?1:e.keyId<t.keyId?-1:0})).map((function(e){return[e.signerIndex,e.keyId,Po(e.sig)]}))};return[[To(e.cadence),e.arguments.map(Oo),Io(e.refBlock),e.computeLimit,ko(vt(e.proposalKey.address)),e.proposalKey.keyId,e.proposalKey.sequenceNum,ko(vt(e.payer)),e.authorizers.map((function(e){return ko(vt(e))}))],r(e.payloadSigs),r(e.envelopeSigs)]}(e)))}(e)},ns=function(e){return e.PAYER="payer",e.PROPOSER="proposer",e.AUTHORIZATIONS="authorizations",e}(ns||{});function is(){var e=[];return[function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;e.push(Array(4*r).fill(" ").join("-")+t)},function(){return e.reduce((function(e,t){return e+"\n"+t}))}]}function os(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3;return t<=0?e:Array.isArray(e)?os(e.flatMap((function(e){return e})),t-1):e}function ss(e,t){try{return{f_type:"PreSignable",f_vsn:"1.0.1",roles:e.role,cadence:t.message.cadence,args:t.message.arguments.map((function(e){return t.arguments[e].asArgument})),data:{},interaction:t,voucher:ts(t)}}catch(e){throw console.error("buildPreSignable",e),e}}function as(e,t){return cs.apply(this,arguments)}function cs(){return cs=Pn(On().mark((function e(t,r){var n,i,o,s,a,c,u,l;return On().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=Array.isArray(t.payer)?t.payer:[t.payer],i=Array.isArray(t.authorizations)?t.authorizations:[t.authorizations],o=null===t.proposer?[]:Array.isArray(t.proposer)?t.proposer:[t.proposer],s=Object.keys(t.accounts),a=xn(new Set(n.concat(i,o))),c=On().mark((function e(){var r;return On().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=l[u],a.find((function(e){return e===r}))||delete t.accounts[r];case 2:case"end":return e.stop()}}),e)})),u=0,l=s;case 7:if(!(u<l.length)){e.next=12;break}return e.delegateYield(c(),"t0",9);case 9:u++,e.next=7;break;case 12:case"end":return e.stop()}}),e)}))),cs.apply(this,arguments)}function us(e,t){var r;"string"!=typeof t.addr||"number"!=typeof t.keyId&&"string"!=typeof t.keyId?t.tempId=t.tempId||M():t.tempId="".concat(bt((r=t).addr),"-").concat(r.keyId);var n=e.accounts[t.tempId]||t;return e.accounts[t.tempId]||(e.accounts[t.tempId]=t),e.accounts[t.tempId].role.proposer=n.role.proposer||t.role.proposer,e.accounts[t.tempId].role.payer=n.role.payer||t.role.payer,e.accounts[t.tempId].role.authorizer=n.role.authorizer||t.role.authorizer,e.accounts[t.tempId]}function ls(e){var t=os(e),r=new Set,n=t.map((function(e){var t=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.join("-")}(e.tempId,e.role.payer,e.role.proposer,e.role.authorizer,e.role.param);return r.has(t)?null:(r.add(t),e)})).filter((function(e){return null!==e}));return n}function hs(e,t){return fs.apply(this,arguments)}function fs(){return fs=Pn(On().mark((function e(t,r){var n,i,o,s,a,c,u,l,h,f,d=arguments;return On().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=d.length>2&&void 0!==d[2]?d[2]:5,o=(d.length>3?d[3]:void 0).debugLogger,!(i<=0)){e.next=4;break}throw new Error("recurseResolveAccount Error: Depth limit (".concat(5,") reached. Ensure your authorization functions resolve to an account after ").concat(5," resolves."));case 4:if(s=t.accounts[r]){e.next=7;break}return e.abrupt("return",[[],!1]);case 7:if(o("account: ".concat(s.tempId),Math.max(5-i,0)),null===(n=s)||void 0===n||!n.resolve){e.next=25;break}if(!(p=null===(a=s)||void 0===a?void 0:a.resolve)||!("[object Function]"===Object.prototype.toString.call(p)||"function"==typeof p||p instanceof Function)){e.next=23;break}return o("account: ".concat(s.tempId," -- cache MISS"),Math.max(5-i,0)),u=(c=s).resolve,l=bn(c,yn),e.next=14,u(l,ss(l,t));case 14:return h=e.sent,h=Array.isArray(h)?h:[h],f=(f=os(h)).map((function(e){return us(t,e)})),s.resolve=f.map((function(e){return e.tempId})),s=us(t,s),e.abrupt("return",[f.map((function(e){return e.tempId})),!0]);case 23:return o("account: ".concat(s.tempId," -- cache HIT"),Math.max(5-i,0)),e.abrupt("return",[s.resolve,!1]);case 25:return e.abrupt("return",[s.tempId?[s.tempId]:[],!1]);case 26:case"end":return e.stop()}var p}),e)}))),fs.apply(this,arguments)}var ds=function(e){return null===e?[]:Array.isArray(e)?e:[e]};function ps(e,t,r){return gs.apply(this,arguments)}function gs(){return(gs=Pn(On().mark((function e(t,r,n){var i,o,s;return On().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=On().mark((function e(){var i,a,c,u;return On().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((i=s[o])!==ns.AUTHORIZATIONS&&i!==ns.PAYER){e.next=5;break}t[i]=ds(t[i]).reduce((function(e,t){return t===r?e.concat.apply(e,xn(n.filter((function(e){return i===ns.PAYER&&e.role.payer||i===ns.AUTHORIZATIONS&&e.role.authorizer})).map((function(e){return e.tempId})))):e.concat(t)}),[]),e.next=10;break;case 5:if(i!==ns.PROPOSER){e.next=10;break}if(!((u=n.filter((function(e){return e.role.proposer}))).length>1)){e.next=9;break}throw new Error("replaceRoles Error: Multiple proposer keys were resolved, but only one is allowed");case 9:t[i]=null!==(a=null===(c=u[0])||void 0===c?void 0:c.tempId)&&void 0!==a?a:t[i];case 10:case"end":return e.stop()}}),e)})),o=0,s=Object.values(ns);case 2:if(!(o<s.length)){e.next=7;break}return e.delegateYield(i(),"t0",4);case 4:o++,e.next=2;break;case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ms(e,t){return ys.apply(this,arguments)}function ys(){return ys=Pn(On().mark((function e(t,r){var n,i,o,s,a,c,u,l,h,f,d,p,g,m,y,v,b,w=arguments;return On().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=w.length>2&&void 0!==w[2]?w[2]:5,i=(w.length>3?w[3]:void 0).debugLogger,O(t&&"object"===Dn(t),"resolveAccountType Error: ix not defined"),o=new Set,s=Ln(r),e.prev=5,s.s();case 7:if((a=s.n()).done){e.next=20;break}return c=a.value,u=t.accounts[c],O(Boolean(u),"resolveAccountType Error: account not found"),e.next=13,hs(t,c,n,{debugLogger:i});case 13:l=e.sent,h=vn(l,2),f=h[0],h[1]&&(d=f.map((function(e){return t.accounts[e]})),(p=ls(d)).forEach((function(e){return o.add(e.tempId)})),ps(t,c,p));case 18:e.next=7;break;case 20:e.next=25;break;case 22:e.prev=22,e.t0=e.catch(5),s.e(e.t0);case 25:return e.prev=25,s.f(),e.finish(25);case 28:m=Ln(t[ns.PAYER]),e.prev=29,m.s();case 31:if((y=m.n()).done){e.next=42;break}if(v=y.value,b=t.accounts[v],g){e.next=38;break}g=b.addr,e.next=40;break;case 38:if(g===b.addr){e.next=40;break}throw new Error("resolveAccountType Error: payers from different accounts detected");case 40:e.next=31;break;case 42:e.next=47;break;case 44:e.prev=44,e.t1=e.catch(29),m.e(e.t1);case 47:return e.prev=47,m.f(),e.finish(47);case 50:return e.abrupt("return",o);case 51:case"end":return e.stop()}}),e,null,[[5,22,25,28],[29,44,47,50]])}))),ys.apply(this,arguments)}function vs(){return vs=Pn(On().mark((function e(t){var r,n,i,o,s,a,c,u,l,h,f=arguments;return On().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=f.length>1&&void 0!==f[1]?f[1]:{},!Ei(t)){e.next=26;break}Array.isArray(t.payer)||I.deprecate({pkg:"FCL",subject:'"ix.payer" must be an array. Support for ix.payer as a singular',message:"See changelog for more info."}),n=is(),i=vn(n,2),o=i[0],s=i[1],e.prev=4,a=5,c=new Set([].concat(xn(ds(t[ns.PAYER])),xn(ds(t[ns.PROPOSER])),xn(ds(t[ns.AUTHORIZATIONS]))));case 7:if(!(c.size>0)){e.next=16;break}if(!(a<=0)){e.next=10;break}throw new Error("resolveAccounts Error: Depth limit (".concat(5,") reached. Ensure your authorization functions resolve to an account after ").concat(5," resolves."));case 10:return e.next=12,ms(t,c,a,{debugLogger:o});case 12:c=e.sent,a--,e.next=7;break;case 16:return e.next=18,as(t,{debugLogger:o});case 18:for(u=0,l=Object.values(ns);u<l.length;u++)h=l[u],O(ds(t[h]).length>0||h===ns.AUTHORIZATIONS,'resolveAccountType Error: no accounts for role "'.concat(h,'" found'));r.enableDebug&&console.debug(s()),e.next=26;break;case 22:throw e.prev=22,e.t0=e.catch(4),console.error("=== SAD PANDA ===\n\n",e.t0,"\n\n=== SAD PANDA ==="),e.t0;case 26:return e.abrupt("return",t);case 27:case"end":return e.stop()}}),e,null,[[4,22]])}))),vs.apply(this,arguments)}function bs(){return bs=Pn(On().mark((function e(t){var r,n,i,o;return On().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!Ei(t)){e.next=16;break}return e.prev=1,r=Zo(t),n=Eo(As(t)),e.next=6,Promise.all(r.map(ws(t,n)));case 6:return i=es(t),o=Ao(Nn(Nn({},As(t)),{},{payloadSigs:r.map((function(e){return{address:t.accounts[e].addr||"",keyId:t.accounts[e].keyId||0,sig:t.accounts[e].signature||""}}))})),e.next=10,Promise.all(i.map(ws(t,o)));case 10:e.next=16;break;case 12:throw e.prev=12,e.t0=e.catch(1),console.error("Signatures",e.t0,{ix:t}),e.t0;case 16:return e.abrupt("return",t);case 17:case"end":return e.stop()}}),e,null,[[1,12]])}))),bs.apply(this,arguments)}function ws(e,t){return function(){var r=Pn(On().mark((function r(n){var i,o,s;return On().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(null==(i=e.accounts[n]).signature||void 0===i.signature){r.next=3;break}return r.abrupt("return");case 3:return r.next=5,i.signingFunction(Es(i,t,e));case 5:o=r.sent,s=o.signature,e.accounts[n].signature=s;case 8:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}()}function Es(e,t,r){try{return{f_type:"Signable",f_vsn:"1.0.1",message:t,addr:vt(e.addr),keyId:e.keyId,roles:e.role,cadence:r.message.cadence,args:r.message.arguments.map((function(e){return r.arguments[e].asArgument})),data:{},interaction:r,voucher:ts(r)}}catch(e){throw console.error("buildSignable",e),e}}function As(e){var t=vt((Array.isArray(e.payer)?e.accounts[e.payer[0]]:e.accounts[e.payer]).addr||""),r=e.proposer?{address:vt(e.accounts[e.proposer].addr)||"",keyId:e.accounts[e.proposer].keyId||0,sequenceNum:e.accounts[e.proposer].sequenceNum||0}:{};return{cadence:e.message.cadence,refBlock:e.message.refBlock,computeLimit:e.message.computeLimit,arguments:e.message.arguments.map((function(t){return e.arguments[t].asArgument})),proposalKey:r,payer:t,authorizers:e.authorizations.map((function(t){return vt(e.accounts[t].addr)||""})).reduce((function(e,t){return e.find((function(e){return e===t}))?e:[].concat(xn(e),[t])}),[])}}function _s(){return(_s=Pn(On().mark((function e(t){var r;return On().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Fi(t,"ix.validators",[]),e.abrupt("return",Di(t,r.map((function(e){return function(t){return e(t,{Ok:Qn,Bad:Xn})}}))));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function xs(){return(xs=Pn(On().mark((function e(t){var r,n,i;return On().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(r=0,n=Object.keys(t.accounts);r<n.length;r++)i=n[r],t.accounts[i].addr=vt(t.accounts[i].addr);return e.abrupt("return",t);case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ss(){return Ss=Pn(On().mark((function e(t){var r;return On().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=Fi(t,"ix.voucher-intercept"),!Jn(r)){e.next=4;break}return e.next=4,r(ts(t));case 4:return e.abrupt("return",t);case 5:case"end":return e.stop()}}),e)}))),Ss.apply(this,arguments)}function ks(){return(ks=Pn(On().mark((function e(t){return On().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!Ei(t)){e.next=8;break}if(e.t0=t.message.computeLimit,e.t0){e.next=6;break}return e.next=5,ct.get("fcl.limit");case 5:e.t0=e.sent;case 6:t.message.computeLimit=e.t0,t.message.computeLimit||(I.deprecate({pkg:"FCL/SDK",subject:"The built-in default compute limit (DEFAULT_COMPUTE_LIMIT=10)",transition:"https://github.com/onflow/flow-js-sdk/blob/master/packages/sdk/TRANSITIONS.md#0009-deprecate-default-compute-limit"}),t.message.computeLimit=100);case 8:return e.abrupt("return",t);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Is(){return(Is=Pn(On().mark((function e(t){return On().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!xi(t)&&!wi(t)){e.next=5;break}if(null!=t.block.isSealed||t.block.id||t.block.height){e.next=5;break}return e.next=4,ct().get("fcl.experimental.softFinality");case 4:t.block.isSealed=!e.sent;case 5:return e.abrupt("return",t);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Os=function(e){return e},Ts=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Os;return function(){var r=Pn(On().mark((function r(n){var i,o;return On().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return i=function(e){return["\nAccounts:",{proposer:e.proposer,authorizations:e.authorizations,payer:e.payer},"\n\nDetails:",e.accounts].filter(Boolean)},o=function(){for(var t,r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];(t=console).log.apply(t,["debug[".concat(e,"] ---\n")].concat(n,["\n\n\n---"]))},r.next=4,ct.get("debug.".concat(e));case 4:if(!r.sent){r.next=7;break}return r.next=7,t(n,o,i);case 7:return r.abrupt("return",n);case 8:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}()},Ps=Di([function(e){return Is.apply(this,arguments)},function(e){return po.apply(this,arguments)},Ts("cadence",(function(e,t){return t(e.message.cadence)})),function(e){return ks.apply(this,arguments)},Ts("compute limit",(function(e,t){return t(e.message.computeLimit)})),function(e){return bo.apply(this,arguments)},Ts("arguments",(function(e,t){return t(e.message.arguments,e.message)})),function(e){return vs.apply(this,arguments)},Ts("accounts",(function(e,t,r){return t.apply(void 0,xn(r(e)))})),function(e){return Rs.apply(this,arguments)},function(e){return Ns.apply(this,arguments)},function(e){return bs.apply(this,arguments)},Ts("signatures",(function(e,t,r){return t.apply(void 0,xn(r(e)))})),function(e){return xs.apply(this,arguments)},function(e){return _s.apply(this,arguments)},function(e){return Ss.apply(this,arguments)},Ts("resolved",(function(e,t){return t(e)}))]);function Rs(){return(Rs=Pn(On().mark((function e(t){var r,n;return On().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!Ei(t)||null!=t.message.refBlock){e.next=11;break}return e.next=3,ct().get("accessNode.api");case 3:return r=e.sent,e.next=6,ct.first(["sdk.transport","sdk.send"],sn);case 6:return O(n=e.sent,"Required value for sdk.transport is not defined in config. See: ".concat("https://github.com/onflow/fcl-js/blob/master/packages/sdk/CHANGELOG.md#0057-alpha1----2022-01-21")),e.next=10,n(Hi([Wi()]),{config:ct,response:Vi,Buffer:ht.Buffer,ix:Gi},{node:r}).then(ao);case 10:t.message.refBlock=e.sent.id;case 11:return e.abrupt("return",t);case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ns(){return Ns=Pn(On().mark((function e(t){var r,n,i;return On().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!Ei(t)){e.next=20;break}if(r=Object.values(t.accounts).find((function(e){return e.role.proposer})),O(r,"Transactions require a proposer"),null!=r.sequenceNum){e.next=20;break}return e.next=6,ct().get("accessNode.api");case 6:return n=e.sent,e.next=9,ct.first(["sdk.transport","sdk.send"],sn);case 9:return O(i=e.sent,"Required value for sdk.transport is not defined in config. See: ".concat("https://github.com/onflow/fcl-js/blob/master/packages/sdk/CHANGELOG.md#0057-alpha1----2022-01-21")),e.t0=i,e.next=14,Hi([$i(r.addr)]);case 14:return e.t1=e.sent,e.t2={config:ct,response:Vi,Buffer:ht.Buffer,ix:Gi},e.t3={node:n},e.next=19,(0,e.t0)(e.t1,e.t2,e.t3).then(ao).then((function(e){return e.keys})).then((function(e){return e.find((function(e){return e.index===r.keyId}))})).then((function(e){return e.sequenceNumber}));case 19:t.accounts[r.tempId].sequenceNum=e.sent;case 20:return e.abrupt("return",t);case 21:case"end":return e.stop()}}),e)}))),Ns.apply(this,arguments)}function Cs(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];if(t.length>1){var n=t[0],i=t[1];return Cs((function(e,t){var r=t.Ok,o=t.Bad;return n?r(e):o(e,i)}))}var o=t[0];return function(e){return o(e,{Ok:Qn,Bad:Xn})}}var Ms=function(){var e=Pn(On().mark((function e(){var t,r,n,i,o=arguments;return On().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=o.length>0&&void 0!==o[0]?o[0]:[],r=o.length>1&&void 0!==o[1]?o[1]:{},e.next=4,ct.first(["sdk.transport","sdk.send"],r.send||sn);case 4:return Cs(n=e.sent,"Required value for sdk.transport is not defined in config. See: ".concat("https://github.com/onflow/fcl-js/blob/master/packages/sdk/CHANGELOG.md#0057-alpha1----2022-01-21")),e.next=8,ct.first(["sdk.resolve"],r.resolve||Ps);case 8:if(i=e.sent,e.t0=r.node,e.t0){e.next=14;break}return e.next=13,ct().get("accessNode.api");case 13:e.t0=e.sent;case 14:return r.node=e.t0,Array.isArray(t)&&(t=Di(Gn(),t)),e.t1=n,e.next=19,i(t);case 19:return e.t2=e.sent,e.t3={config:ct,response:Vi,ix:Gi,Buffer:ht.Buffer},e.t4=r,e.abrupt("return",(0,e.t1)(e.t2,e.t3,e.t4));case 23:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();function Ls(e){return Bs.apply(this,arguments)}function Bs(){return Bs=Pn(On().mark((function e(t){var r,n;return On().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ct().where(/^decoder\./);case 2:return r=e.sent,n=Object.entries(r).map((function(e){var t=vn(e,2),r=t[0],n=t[1];return[r="/".concat(r.replace(/^decoder\./,""),"$/"),n]})),e.abrupt("return",ao(t,Object.fromEntries(n)));case 5:case"end":return e.stop()}}),e)}))),Bs.apply(this,arguments)}var Us=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&An(e,t)}(n,e);var t,r=function(e){var t=En();return function(){var r,n=_n(e);if(t){var i=_n(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"==Dn(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}(n);function n(e){var t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);var i="\n        Encode Message From Signable Error: Unable to determine message encoding for signer addresss: ".concat(e,". \n        Please ensure the address: ").concat(e," is intended to sign the given transaction as specified by the transaction signable.\n      ").trim();return(t=r.call(this,i)).name="Unable To Determine Message Encoding For Signer Addresss",t}return t=n,Object.defineProperty(t,"prototype",{writable:!1}),t}(wn(Error));function Ds(e){return qi("ix.validators",(function(t){return Array.isArray(t)?t.push(e):[e]}))}function js(e){return Di([function(t){return t.block.height=e,t},Ds((function(e){if("boolean"==typeof e.block.isSealed)throw new Error("Unable to specify both block height and isSealed.");if(e.block.id)throw new Error("Unable to specify both block height and block id.");return e}))])}function Fs(e){return Di([function(t){return t.block.id=e,Qn(t)},Ds((function(e,t){var r=t.Ok,n=t.Bad;return xi(e)?n(e,"Unable to specify a block id with a Get Account interaction."):"boolean"==typeof e.block.isSealed?n(e,"Unable to specify both block id and isSealed."):e.block.height?n(e,"Unable to specify both block id and block height."):r(e)}))])}function zs(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return Di([function(t){return t.block.isSealed=e,t},Ds((function(e){if(e.block.id)throw new Error("Unable to specify both block finality and block id.");if(e.block.height)throw new Error("Unable to specify both block finality and block height.");return e}))])}function qs(e){return Gs.apply(this,arguments)}function Gs(){return Gs=Pn(On().mark((function e(t){var r,n,i,o,s,a=arguments;return On().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=(r=a.length>1&&void 0!==a[1]?a[1]:{}).height,i=r.id,o=r.isSealed,s=a.length>2?a[2]:void 0,O(!(i&&n||i&&o||n&&o),"Method: account -- Only one of the following parameters can be provided: id, height, isSealed"),!i){e.next=7;break}return e.next=6,Ms([$i(t),Fs(i)],s).then(ao);case 6:case 10:case 13:return e.abrupt("return",e.sent);case 7:if(!n){e.next=11;break}return e.next=10,Ms([$i(t),js(n)],s).then(ao);case 11:return e.next=13,Ms([$i(t),null!=s.isSealed&&zs(o)],s).then(ao);case 14:case"end":return e.stop()}}),e)}))),Gs.apply(this,arguments)}function Hs(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.sealed,r=void 0!==t&&t,n=e.id,i=e.height,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return O(!(r&&n||r&&i),'Method: block -- Cannot pass "sealed" with "id" or "height"'),O(!(n&&i),'Method: block -- Cannot pass "id" and "height" simultaneously'),n?Ms([Wi(),Fs(n)],o).then(ao):i?Ms([Wi(),js(i)],o).then(ao):Ms([Wi(r)],o).then(ao)}function Ks(){return Di([yi,function(e){return Qn(e)}])}function Vs(){return Ws.apply(this,arguments)}function Ws(){return Ws=Pn(On().mark((function e(){var t,r=arguments;return On().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.length>0&&void 0!==r[0]?r[0]:{},e.abrupt("return",Ms([Ks()],t).then(ao));case 2:case"end":return e.stop()}}),e)}))),Ws.apply(this,arguments)}function $s(){return Di((arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).map((function(e){return ri(e,{role:U.AUTHORIZER})})))}function Js(e,t,r,n){return{addr:e,signingFunction:t,keyId:r,sequenceNum:n}}function Ys(e,t,r){return void 0===t&&void 0===r||I.deprecate({pkg:"FCL/SDK",subject:"Passing a start and end into getEvents",transition:"https://github.com/onflow/flow-js-sdk/blob/master/packages/sdk/TRANSITIONS.md#0005-deprecate-start-end-get-events-builder"}),Di([li,function(n){return n.events.eventType=e,n.events.start=t,n.events.end=r,Qn(n)}])}function Qs(e,t,r){return Di([li,function(n){return n.events.eventType=e,n.events.start=t,n.events.end=r,Qn(n)}])}function Xs(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return Di([li,function(r){return r.events.eventType=e,r.events.blockIds=t,Qn(r)}])}function Zs(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return Di([di,function(t){return t.block.isSealed=e,Qn(t)}])}function ea(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return Di([pi,function(t){return t.collection.id=e,t}])}function ta(e){return Di([ai,function(t){return t.transaction.id=e,Qn(t)}])}function ra(e){return Di([ci,function(t){return t.transaction.id=e,Qn(t)}])}function na(){return Di([gi,function(e){return Qn(e)}])}function ia(e){return function(t){return t.message.computeLimit=e,t}}function oa(e){return Di(e.map(ni))}function sa(e,t){return{value:e,xform:t}}function aa(e){return ri(e,{role:U.PROPOSER})}function ca(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return Array.isArray(e)||(e=[e]),Di(e.map((function(e){return ri(e,{role:U.PAYER})})))}function ua(){return hi}function la(e){return Di([function(t){return t.message.refBlock=e,Qn(t)}])}function ha(){return Di([oi,zi("ix.cadence",gn.apply(void 0,arguments))])}var fa=[],da=null;function pa(){return Di([si,zi("ix.cadence",gn.apply(void 0,arguments)),function(e){return e.message.refBlock=e.message.refBlock||da,e.authorizations=e.authorizations||fa,Qn(e)}])}function ga(e){return zi("ix.voucher-intercept",e)}function ma(e){var t=e.startBlockId,r=e.startHeight,n=e.eventTypes,i=e.addresses,o=e.contracts,s=e.heartbeatInterval;return O(!(t&&r),"SDK Subscribe Events Error: Cannot set both startBlockId and startHeight."),Di([mi,function(e){return e.subscribeEvents.startBlockId=null!=t?t:null,e.subscribeEvents.startHeight=null!=r?r:null,e.subscribeEvents.eventTypes=null!=n?n:null,e.subscribeEvents.addresses=null!=i?i:null,e.subscribeEvents.contracts=null!=o?o:null,e.subscribeEvents.heartbeatInterval=null!=s?s:null,Qn(e)}])}function ya(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5;return O(e.account,"mockAccountResponse(ix) -- ix.account is missing",e),O(e.account.addr,"mockAccountResponse(ix) -- ix.account.addr is missing",e),{account:{addr:e.account.addr,keys:Array.from({length:t},(function(e,t){return{index:t,sequenceNumber:42}}))}}}var va=function(e){return e};function ba(e){return["SIGNATURE",e.addr,e.keyId].join(".")}function wa(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(t){var r=Nn(Nn(Nn({},t),e),{},{resolve:null,signingFunction:e.signingFunction||t.signingFunction||function(e){return{addr:r.addr,keyId:r.keyId,signature:ba(r)}}});return r}}var Ea={proposer:!1,authorizer:!1,payer:!1};function Aa(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{authorizations:[]};return function(t){var r=e.tempId||"AUTHZ_RESOLVE_MANY";return Nn(Nn({},t),{},{tempId:r,resolve:function(){return[e.proposer&&wa(e.proposer)({role:Nn(Nn({},Ea),{},{proposer:!0})})].concat(xn(e.authorizations.map(wa).map((function(e){return e({role:Nn(Nn({},Ea),{},{authorizer:!0})})}))),[e.payer&&wa(e.payer)({role:Nn(Nn({},Ea),{},{payer:!0})})]).filter(Boolean)}})}}var _a=Object.freeze({__proto__:null,authzDeepResolveMany:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{authorizations:[]},r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return function(n){var i=t.tempId||"AUTHZ_DEEP_RESOLVE_MANY";return Nn(Nn({},n),{},{tempId:i,resolve:r>0?e(t,r-1)(n).resolve:Aa(t)(n).resolve})}},authzFn:wa,authzResolve:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(t){var r=e.tempId,n=bn(e,mn);return Nn(Nn({},t),{},{tempId:r||"WITH_RESOLVE",resolve:wa(n)})}},authzResolveMany:Aa,idof:function(e){return"".concat(bt(e.addr),"-").concat(e.keyId)},mockSend:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:va;return function(){var t=Pn(On().mark((function t(r){return On().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,r;case 2:r=t.sent,t.t0=!0,t.next=t.t0===xi(r)?6:t.t0===Ii(r)?7:8;break;case 6:return t.abrupt("return",ya(r));case 7:return t.abrupt("return",{tag:"GET_BLOCK",block:{id:"32"}});case 8:return t.abrupt("return",e(r));case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},run:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return Hi([la("123")].concat(xn(e))).then(Ps)},sig:ba}),xa=function(e){return I.deprecate({pkg:"FCL/SDK",message:"The params builder has been removed from the Flow JS-SDK/FCL.",transition:"https://github.com/onflow/flow-js-sdk/blob/master/packages/sdk/TRANSITIONS.md#0001-deprecate-params",level:S.error})},Sa=function(e){return I.deprecate({pkg:"FCL/SDK",message:"The param builder has been removed from the Flow JS-SDK/FCL.",transition:"https://github.com/onflow/flow-js-sdk/blob/master/packages/sdk/TRANSITIONS.md#0001-deprecate-params",level:S.error})};function ka(e){return ka="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ka(e)}var Ia=function(e,t,r){return{label:e,asArgument:t,asInjection:function(t){return I.deprecate({pkg:"@onflow/types",subject:"Passing in ".concat(e," as value for ").concat(e),message:"Going forward, use ".concat(e," as value for ").concat(e,".")}),r(t)}}},Oa=function(e){return Array.isArray(e)},Ta=function(e){return"object"===ka(e)},Pa=function(e){return null==e},Ra=function(e){return"number"==typeof e},Na=function(e){return Number.isInteger(e)},Ca=function(e){return"string"==typeof e},Ma=function(e){throw new Error("Type Error: "+e)},La=function(e){I.deprecate({pkg:"@onflow/types",subject:"Passing in Number as value for ".concat(e),message:"Going forward, use String as value for ".concat(e,"."),transition:"https://github.com/onflow/flow-js-sdk/blob/master/packages/types/WARNINGS.md#0002-[U]Int*-and-Word*-as-Number"})},Ba=!1,Ua={label:"Identity",asArgument:function(e){return Ba||(I.deprecate({pkg:"@onflow/types",subject:"Identity",message:"Identity type is deprecated and will be removed in v2.0.0.  Please remove it from your code."}),Ba=!0),e},asInjection:function(e){return e}},Da=Ia("UInt",(function(e){return Ra(e)&&Na(e)?(La("UInt"),{type:"UInt",value:e.toString()}):Ca(e)?{type:"UInt",value:e}:Ma("Expected Positive Integer for type Unsigned Int")}),(function(e){return e})),ja=Ia("Int",(function(e){return Ra(e)&&Na(e)?(La("Int"),{type:"Int",value:e.toString()}):Ca(e)?{type:"Int",value:e}:Ma("Expected Integer for type Int")}),(function(e){return e})),Fa=Ia("UInt8",(function(e){return Ra(e)&&Na(e)?(La("UInt8"),{type:"UInt8",value:e.toString()}):Ca(e)?{type:"UInt8",value:e}:Ma("Expected integer for UInt8")}),(function(e){return e})),za=Ia("Int8",(function(e){return Ra(e)&&Na(e)?(La("Int8"),{type:"Int8",value:e.toString()}):Ca(e)?{type:"Int8",value:e}:Ma("Expected positive integer for Int8")}),(function(e){return e})),qa=Ia("UInt16",(function(e){return Ra(e)&&Na(e)?(La("UInt16"),{type:"UInt16",value:e.toString()}):Ca(e)?{type:"UInt16",value:e}:Ma("Expected integer for UInt16")}),(function(e){return e})),Ga=Ia("Int16",(function(e){return Ra(e)&&Na(e)?(La("Int16"),{type:"Int16",value:e.toString()}):Ca(e)?{type:"Int16",value:e}:Ma("Expected positive integer for Int16")}),(function(e){return e})),Ha=Ia("UInt32",(function(e){return Ra(e)&&Na(e)?(La("UInt32"),{type:"UInt32",value:e.toString()}):Ca(e)?{type:"UInt32",value:e}:Ma("Expected integer for UInt32")}),(function(e){return e})),Ka=Ia("Int32",(function(e){return Ra(e)&&Na(e)?(La("Int32"),{type:"Int32",value:e.toString()}):Ca(e)?{type:"Int32",value:e}:Ma("Expected positive integer for Int32")}),(function(e){return e})),Va=Ia("UInt64",(function(e){return Ra(e)&&Na(e)?(La("UInt64"),{type:"UInt64",value:e.toString()}):Ca(e)?{type:"UInt64",value:e}:Ma("Expected integer for UInt64")}),(function(e){return e})),Wa=Ia("Int64",(function(e){return Ra(e)&&Na(e)?(La("Int64"),{type:"Int64",value:e.toString()}):Ca(e)?{type:"Int64",value:e}:Ma("Expected positive integer for Int64")}),(function(e){return e})),$a=Ia("UInt128",(function(e){return Ra(e)&&Na(e)?(La("UInt128"),{type:"UInt128",value:e.toString()}):Ca(e)?{type:"UInt128",value:e}:Ma("Expected integer for UInt128")}),(function(e){return e})),Ja=Ia("Int128",(function(e){return Ra(e)&&Na(e)?(La("Int128"),{type:"Int128",value:e.toString()}):Ca(e)?{type:"Int128",value:e}:Ma("Expected positive integer for Int128")}),(function(e){return e})),Ya=Ia("UInt256",(function(e){return Ra(e)&&Na(e)?(La("UInt256"),{type:"UInt256",value:e.toString()}):Ca(e)?{type:"UInt256",value:e}:Ma("Expected integer for UInt256")}),(function(e){return e})),Qa=Ia("Int256",(function(e){return Ra(e)&&Na(e)?(La("Int256"),{type:"Int256",value:e.toString()}):Ca(e)?{type:"Int256",value:e}:Ma("Expected integer for Int256")}),(function(e){return e})),Xa=Ia("Word8",(function(e){return Ra(e)&&Na(e)?(La("Word8"),{type:"Word8",value:e.toString()}):Ca(e)?{type:"Word8",value:e}:Ma("Expected positive number for Word8")}),(function(e){return e})),Za=Ia("Word16",(function(e){return Ra(e)&&Na(e)?(La("Word16"),{type:"Word16",value:e.toString()}):Ca(e)?{type:"Word16",value:e}:Ma("Expected positive number for Word16")}),(function(e){return e})),ec=Ia("Word32",(function(e){return Ra(e)&&Na(e)?(La("Word32"),{type:"Word32",value:e.toString()}):Ca(e)?{type:"Word32",value:e}:Ma("Expected positive number for Word32")}),(function(e){return e})),tc=Ia("Word64",(function(e){return Ra(e)&&Na(e)?(La("Word64"),{type:"Word64",value:e.toString()}):Ca(e)?{type:"Word64",value:e}:Ma("Expected positive number for Word64")}),(function(e){return e})),rc=Ia("Word128",(function(e){return Ra(e)&&Na(e)?(La("Word128"),{type:"Word128",value:e.toString()}):Ca(e)?{type:"Word128",value:e}:Ma("Expected positive number for Word128")}),(function(e){return e})),nc=Ia("Word256",(function(e){return Ra(e)&&Na(e)?(La("Word256"),{type:"Word256",value:e.toString()}):Ca(e)?{type:"Word256",value:e}:Ma("Expected positive number for Word256")}),(function(e){return e})),ic=function(){I.deprecate({subject:"Passing in Numbers as values for Fix64 and UFix64 types",pkg:"@onflow/types",transition:"https://github.com/onflow/flow-js-sdk/blob/master/packages/types/WARNINGS.md#0001-[U]Fix64-as-Number"})},oc=Ia("UFix64",(function(e){if(Ca(e)){var t=e.split(".");return 2!==t.length?Ma("Expected one decimal but found ".concat(t.length," in the [U]Fix64 value. Find out more about [U]Fix64 types here: https://docs.onflow.org/cadence/json-cadence-spec/#fixed-point-numbers")):0==t[1].length||t[1].length>8?Ma("Expected at least one digit, and at most 8 digits following the decimal of the [U]Fix64 value but found ".concat(t[1].length," digits. Find out more about [U]Fix64 types here: https://docs.onflow.org/cadence/json-cadence-spec/#fixed-point-numbers")):(t[1]=t[1].padEnd(8,"0"),{type:"UFix64",value:e=t.join(".")})}return Ra(e)?(ic(),{type:"UFix64",value:e.toString()}):Ma("Expected String for UFix64")}),(function(e){return e})),sc=Ia("Fix64",(function(e){if(Ca(e)){var t=e.split(".");return 2!==t.length?Ma("Expected one decimal but found ".concat(t.length," in the [U]Fix64 value. Find out more about [U]Fix64 types here: https://docs.onflow.org/cadence/json-cadence-spec/#fixed-point-numbers")):0==t[1].length||t[1].length>8?Ma("Expected at least one digit, and at most 8 digits following the decimal of the [U]Fix64 value but found ".concat(t[1].length," digits. Find out more about [U]Fix64 types here: https://docs.onflow.org/cadence/json-cadence-spec/#fixed-point-numbers")):(t[1]=t[1].padEnd(8,"0"),{type:"Fix64",value:e=t.join(".")})}return Ra(e)?(ic(),{type:"Fix64",value:e.toString()}):Ma("Expected String for Fix64")}),(function(e){return e})),ac=Ia("String",(function(e){return Ca(e)?{type:"String",value:e}:Ma("Expected String for type String")}),(function(e){return e})),cc=Ia("Character",(function(e){return Ca(e)?{type:"Character",value:e}:Ma("Expected Character for type Character")}),(function(e){return e})),uc=Ia("Bool",(function(e){return function(e){return"boolean"==typeof e}(e)?{type:"Bool",value:e}:Ma("Expected Boolean for type Bool")}),(function(e){return e})),lc=Ia("Address",(function(e){return Ca(e)?{type:"Address",value:e}:Ma("Expected Address for type Address")}),(function(e){return e})),hc=Ia("Void",(function(e){return!e||Pa(e)?{type:"Void",value:null}:Ma("Expected Void for type Void")}),(function(e){return e})),fc=function(e){return Ia("Optional",(function(t){return{type:"Optional",value:Pa(t)?null:e.asArgument(t)}}),(function(e){return e}))},dc=Ia("Reference",(function(e){return Ta(e)?{type:"Reference",value:e}:Ma("Expected Object for type Reference")}),(function(e){return e})),pc=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return Ia("Array",(function(t){return{type:"Array",value:Oa(e)?e.map((function(e,r){return e.asArgument(t[r])})):t.map((function(t){return e.asArgument(t)}))}}),(function(e){return e}))},gc=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return Ia("Dictionary",(function(t){var r=Oa(t),n=Oa(e);return Ta(t)?{type:"Dictionary",value:n&&r?e.map((function(e,r){return{key:e.key.asArgument(t[r].key),value:e.value.asArgument(t[r].value)}})):r&&!n?t.map((function(t){return{key:e.key.asArgument(t.key),value:e.value.asArgument(t.value)}})):r||n?Ma("Invalid arguments for Dictionary."):[{key:e.key.asArgument(t.key),value:e.value.asArgument(t.value)}]}:Ma("Expected Object for type Dictionary")}),(function(e){return e}))},mc=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return Ia("Event",(function(r){return Ta(r)?{type:"Event",value:{id:e,fields:Oa(t)?t.map((function(e,t){return{name:r.fields[t].name,value:e.value.asArgument(r.fields[t].value)}})):r.fields.map((function(e){return{name:e.name,value:t.value.asArgument(e.value)}}))}}:Ma("Expected Object for type Event")}),(function(e){return e}))},yc=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return Ia("Resource",(function(r){return Ta(r)?{type:"Resource",value:{id:e,fields:Oa(t)?t.map((function(e,t){return{name:r.fields[t].name,value:e.value.asArgument(r.fields[t].value)}})):r.fields.map((function(e){return{name:e.name,value:t.value.asArgument(e.value)}}))}}:Ma("Expected Object for type Resource")}),(function(e){return e}))},vc=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return Ia("Struct",(function(r){return Ta(r)?{type:"Struct",value:{id:e,fields:Oa(t)?t.map((function(e,t){return{name:r.fields[t].name,value:e.value.asArgument(r.fields[t].value)}})):r.fields.map((function(e){return{name:e.name,value:t.value.asArgument(e.value)}}))}}:Ma("Expected Object for type Struct")}),(function(e){return e}))},bc=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return Ia("Enum",(function(r){return Ta(r)?{type:"Enum",value:{id:e,fields:Oa(t)?t.map((function(e,t){return{name:r.fields[t].name,value:e.value.asArgument(r.fields[t].value)}})):r.fields.map((function(e){return{name:e.name,value:t.value.asArgument(e.value)}}))}}:Ma("Expected Object for type Enum")}),(function(e){return e}))},wc=Ia("Path",(function(e){return Ta(e)?Ca(e.domain)?"storage"!==e.domain&&"private"!==e.domain&&"public"!==e.domain?Ma('Expected either "storage", "private" or "public" as the Path domain but found '.concat(e.domain,". Find out more about the Path type here: https://docs.onflow.org/cadence/json-cadence-spec/#path")):Ca(e.identifier)?{type:"Path",value:{domain:e.domain,identifier:e.identifier}}:Ma("Expected a string for the Path identifier but found ".concat(e.identifier,". Find out more about the Path type here: https://docs.onflow.org/cadence/json-cadence-spec/#path")):Ma("Expected a string for the Path domain but found ".concat(e.domain,". Find out more about the Path type here: https://docs.onflow.org/cadence/json-cadence-spec/#path")):Ma("Expected Object for type Path")}),(function(e){return e})),Ec=function(e){return Ia("InclusiveRange",(function(t){if(Ta(t)){var r=t.start,n=t.end,i=t.step;return{type:"InclusiveRange",value:{start:e.asArgument(r),end:e.asArgument(n),step:e.asArgument(i)}}}return Ma("Expected Object for type InclusiveRange")}),(function(e){return e}))},Ac=r(2553),_c=/^[0-9]+$/,xc=function(e,t){var r=_c.test(e),n=_c.test(t);return r&&n&&(e=+e,t=+t),e===t?0:r&&!n?-1:n&&!r?1:e<t?-1:1},Sc=/^(0|[1-9]\d*)\.(0|[1-9]\d*)\.(0|[1-9]\d*)(?:-((?:0|[1-9]\d*|\d*[a-zA-Z-][0-9a-zA-Z-]*)(?:\.(?:0|[1-9]\d*|\d*[a-zA-Z-][0-9a-zA-Z-]*))*))?(?:\+([0-9a-zA-Z-]+(?:\.[0-9a-zA-Z-]+)*))?$/;function kc(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,i,o,s,a=[],c=!0,u=!1;try{if(o=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=o.call(r)).done)&&(a.push(n.value),a.length!==t);c=!0);}catch(e){u=!0,i=e}finally{try{if(!c&&null!=r.return&&(s=r.return(),Object(s)!==s))return}finally{if(u)throw i}}return a}}(e,t)||Tc(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ic(e){return function(e){if(Array.isArray(e))return Pc(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Tc(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Oc(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=Tc(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,s=!0,a=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return s=e.done,e},e:function(e){a=!0,o=e},f:function(){try{s||null==r.return||r.return()}finally{if(a)throw o}}}}function Tc(e,t){if(e){if("string"==typeof e)return Pc(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Pc(e,t):void 0}}function Pc(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function Rc(e){var t="function"==typeof Map?new Map:void 0;return Rc=function(e){if(null===e||!function(e){try{return-1!==Function.toString.call(e).indexOf("[native code]")}catch(t){return"function"==typeof e}}(e))return e;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,r)}function r(){return function(e,t,r){if(Hc())return Reflect.construct.apply(null,arguments);var n=[null];n.push.apply(n,t);var i=new(e.bind.apply(e,n));return r&&zc(i,r.prototype),i}(e,arguments,Kc(this).constructor)}return r.prototype=Object.create(e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),zc(r,e)},Rc(e)}function Nc(){Nc=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,i=Object.defineProperty||function(e,t,r){e[t]=r.value},o="function"==typeof Symbol?Symbol:{},s=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function u(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,r){return e[t]=r}}function l(e,t,r,n){var o=t&&t.prototype instanceof y?t:y,s=Object.create(o.prototype),a=new P(n||[]);return i(s,"_invoke",{value:k(e,r,a)}),s}function h(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=l;var f="suspendedStart",d="suspendedYield",p="executing",g="completed",m={};function y(){}function v(){}function b(){}var w={};u(w,s,(function(){return this}));var E=Object.getPrototypeOf,A=E&&E(E(R([])));A&&A!==r&&n.call(A,s)&&(w=A);var _=b.prototype=y.prototype=Object.create(w);function x(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function S(e,t){function r(i,o,s,a){var c=h(e[i],e,o);if("throw"!==c.type){var u=c.arg,l=u.value;return l&&"object"==$c(l)&&n.call(l,"__await")?t.resolve(l.__await).then((function(e){r("next",e,s,a)}),(function(e){r("throw",e,s,a)})):t.resolve(l).then((function(e){u.value=e,s(u)}),(function(e){return r("throw",e,s,a)}))}a(c.arg)}var o;i(this,"_invoke",{value:function(e,n){function i(){return new t((function(t,i){r(e,n,t,i)}))}return o=o?o.then(i,i):i()}})}function k(t,r,n){var i=f;return function(o,s){if(i===p)throw Error("Generator is already running");if(i===g){if("throw"===o)throw s;return{value:e,done:!0}}for(n.method=o,n.arg=s;;){var a=n.delegate;if(a){var c=I(a,n);if(c){if(c===m)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(i===f)throw i=g,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);i=p;var u=h(t,r,n);if("normal"===u.type){if(i=n.done?g:d,u.arg===m)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(i=g,n.method="throw",n.arg=u.arg)}}}function I(t,r){var n=r.method,i=t.iterator[n];if(i===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,I(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),m;var o=h(i,t.iterator,r.arg);if("throw"===o.type)return r.method="throw",r.arg=o.arg,r.delegate=null,m;var s=o.arg;return s?s.done?(r[t.resultName]=s.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,m):s:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,m)}function O(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function T(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function P(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(O,this),this.reset(!0)}function R(t){if(t||""===t){var r=t[s];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var i=-1,o=function r(){for(;++i<t.length;)if(n.call(t,i))return r.value=t[i],r.done=!1,r;return r.value=e,r.done=!0,r};return o.next=o}}throw new TypeError($c(t)+" is not iterable")}return v.prototype=b,i(_,"constructor",{value:b,configurable:!0}),i(b,"constructor",{value:v,configurable:!0}),v.displayName=u(b,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===v||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,b):(e.__proto__=b,u(e,c,"GeneratorFunction")),e.prototype=Object.create(_),e},t.awrap=function(e){return{__await:e}},x(S.prototype),u(S.prototype,a,(function(){return this})),t.AsyncIterator=S,t.async=function(e,r,n,i,o){void 0===o&&(o=Promise);var s=new S(l(e,r,n,i),o);return t.isGeneratorFunction(r)?s:s.next().then((function(e){return e.done?e.value:s.next()}))},x(_),u(_,c,"Generator"),u(_,s,(function(){return this})),u(_,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=R,P.prototype={constructor:P,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(T),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function i(n,i){return a.type="throw",a.arg=t,r.next=n,i&&(r.method="next",r.arg=e),!!i}for(var o=this.tryEntries.length-1;o>=0;--o){var s=this.tryEntries[o],a=s.completion;if("root"===s.tryLoc)return i("end");if(s.tryLoc<=this.prev){var c=n.call(s,"catchLoc"),u=n.call(s,"finallyLoc");if(c&&u){if(this.prev<s.catchLoc)return i(s.catchLoc,!0);if(this.prev<s.finallyLoc)return i(s.finallyLoc)}else if(c){if(this.prev<s.catchLoc)return i(s.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<s.finallyLoc)return i(s.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var s=o?o.completion:{};return s.type=e,s.arg=t,o?(this.method="next",this.next=o.finallyLoc,m):this.complete(s)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),m},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),T(r),m}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var i=n.arg;T(r)}return i}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:R(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),m}},t}function Cc(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Mc(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Cc(Object(r),!0).forEach((function(t){Lc(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Cc(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Lc(e,t,r){return(t=Dc(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Bc(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Dc(n.key),n)}}function Uc(e,t,r){return t&&Bc(e.prototype,t),r&&Bc(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function Dc(e){var t=function(e){if("object"!=$c(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=$c(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==$c(t)?t:t+""}function jc(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Fc(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&zc(e,t)}function zc(e,t){return zc=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},zc(e,t)}function qc(e){var t=Hc();return function(){var r,n=Kc(e);if(t){var i=Kc(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return Gc(this,r)}}function Gc(e,t){if(t&&("object"==$c(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function Hc(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Hc=function(){return!!e})()}function Kc(e){return Kc=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Kc(e)}function Vc(e,t,r,n,i,o,s){try{var a=e[o](s),c=a.value}catch(e){return void r(e)}a.done?t(c):Promise.resolve(c).then(n,i)}function Wc(e){return function(){var t=this,r=arguments;return new Promise((function(n,i){var o=e.apply(t,r);function s(e){Vc(o,n,i,s,a,"next",e)}function a(e){Vc(o,n,i,s,a,"throw",e)}s(void 0)}))}}function $c(e){return $c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},$c(e)}var Jc="1.15.0",Yc=function(e){return function(t){return $c(t)===e}},Qc=function(e){return null!=e},Xc=Yc("object"),Zc=Yc("string"),eu=Yc("function"),tu=Yc("number");function ru(e){return eu(e)?e(sa,n):[]}function nu(e){return iu.apply(this,arguments)}function iu(){return(iu=Wc(Nc().mark((function e(t){var r,n,i;return Nc().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return O(void 0!==(r=t.url),"retrieve({ url }) -- url must be defined"),e.prev=2,e.next=5,yt()(r);case 5:n=e.sent,e.next=11;break;case 8:throw e.prev=8,e.t0=e.catch(2),new Error("httpDocumentResolver Error: Failed to retrieve document.");case 11:if(!n.ok){e.next=17;break}return e.next=14,n.json();case 14:e.t1=e.sent,e.next=18;break;case 17:e.t1=null;case 18:return i=e.t1,e.abrupt("return",i);case 20:case"end":return e.stop()}}),e,null,[[2,8]])})))).apply(this,arguments)}var ou=new Map([["http",nu],["https",nu]]);function su(e){return au.apply(this,arguments)}function au(){return(au=Wc(Nc().mark((function e(t){var r,n,i,o,s,a;return Nc().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return O(void 0!==(r=t.url),"retrieve({ url }) -- url must be defined"),O("string"==typeof r,"retrieve({ url }) -- url must be a string"),e.next=5,ct().where(/^document\.resolver\./);case 5:return n=e.sent,Object.keys(n).map((function(e){var t=n[e],r=e.replace(/^document\.resolver\./,"");ou.set(r,t)})),O(i=/^(.*):\/\/([A-Za-z0-9\-\.]+)(:[0-9]+)?(.*)$/.exec(r),"Failed to parse URL"),o=i[1],O(i,"Failed to parse URL protocol"),O(s=ou.get(o),"No resolver found for protcol=".concat(o)),e.next=15,s({url:r});case 15:return a=e.sent,e.abrupt("return",a);case 17:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function cu(e){return uu.apply(this,arguments)}function uu(){return uu=Wc(Nc().mark((function e(t){var r,n,i,o;return Nc().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.network,O("1.0.0"===(i=t.template).f_version,"deriveCadenceByNetwork100({ template }) -- template must be version 1.0.0"),o=Object.keys(null==i||null===(r=i.data)||void 0===r?void 0:r.dependencies).map((function(e){var t,r=Object.values(null==i||null===(t=i.data)||void 0===t||null===(t=t.dependencies)||void 0===t?void 0:t[e]);O(void 0!==r,"deriveCadenceByNetwork100 -- Could not find contracts for dependency placeholder: ".concat(e)),O(r.length>0,"deriveCadenceByNetwork100 -- Could not find contracts for dependency placeholder: ".concat(e));var o=r[0],s=null==o?void 0:o[n];return O(s,"deriveCadenceByNetwork100 -- Could not find ".concat(n," network information for dependency: ").concat(e)),[e,null==s?void 0:s.address]})),e.abrupt("return",o.reduce((function(e,t){var r=kc(t,2),n=r[0],i=r[1],o=new RegExp("(\\b"+n+"\\b)","g");return e.replace(o,i)}),i.data.cadence));case 4:case"end":return e.stop()}}),e)}))),uu.apply(this,arguments)}function lu(e){var t=e.cadence,r=e.networkDependencies;return Object.keys(r).reduce((function(e,t){var n=r[t],i=new RegExp('import "\\b'.concat(t,'\\b"'),"g");return e.replace(i,"import ".concat(t," from ").concat(n))}),t)}function hu(e){return fu.apply(this,arguments)}function fu(){return fu=Wc(Nc().mark((function e(t){var r,n,i,o,s,a,c;return Nc().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=t.network,O("1.1.0"===(a=t.template).f_version,"deriveCadenceByNetwork110({ template }) -- template must be version 1.0.0"),c={},null==a||null===(r=a.data)||void 0===r||r.dependencies.forEach((function(e){e.contracts.forEach((function(e){var t=e.contract;e.networks.forEach((function(e){e.network===s&&(c[t]=e.address)})),O(void 0!==c[t],"deriveCadenceByNetwork110 -- Could not find contracts Network Address: ".concat(s," ").concat(t))}))})),O(Object.keys(c).length===(null==a||null===(n=a.data)||void 0===n?void 0:n.dependencies.length),"deriveCadenceByNetwork110 -- Could not find contracts for import dependencies: ".concat(c)),O(Object.keys(c).length===Object.values(c).length,"deriveCadenceByNetwork110 -- Could not find all addresses for network ".concat(s," dependencies:  ").concat(c)),O(null==a||null===(i=a.data)||void 0===i||null===(i=i.cadence)||void 0===i?void 0:i.body,"no cadence found -- Could not replace import dependencies: ".concat(c)),e.abrupt("return",lu({cadence:null==a||null===(o=a.data)||void 0===o||null===(o=o.cadence)||void 0===o?void 0:o.body,networkDependencies:c}));case 8:case"end":return e.stop()}}),e)}))),fu.apply(this,arguments)}function du(e){return pu.apply(this,arguments)}function pu(){return pu=Wc(Nc().mark((function e(t){var r,n;return Nc().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=t.network,n=t.template,O(null!=r,"deriveCadenceByNetwork({ network }) -- network must be defined"),O("string"==typeof r,"deriveCadenceByNetwork({ network }) -- network must be a string"),O(null!=n,"deriveCadenceByNetwork({ template }) -- template must be defined"),O("object"===$c(n),"deriveCadenceByNetwork({ template }) -- template must be an object"),O("InteractionTemplate"===n.f_type,"deriveCadenceByNetwork({ template }) -- template must be an InteractionTemplate"),e.t0=n.f_version,e.next="1.1.0"===e.t0?9:"1.0.0"===e.t0?12:15;break;case 9:return e.next=11,hu({network:r,template:n});case 11:case 14:return e.abrupt("return",e.sent);case 12:return e.next=14,cu({network:r,template:n});case 15:throw new Error("deriveCadenceByNetwork Error: Unsupported template version");case 16:case"end":return e.stop()}}),e)}))),pu.apply(this,arguments)}function gu(){return mu.apply(this,arguments)}function mu(){return mu=Wc(Nc().mark((function e(){var t,r,n=arguments;return Nc().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.length>0&&void 0!==n[0]?n[0]:{},e.next=3,Ms([na()],t).then(Ls);case 3:return r=e.sent,e.abrupt("return",r.chainId);case 5:case"end":return e.stop()}}),e)}))),mu.apply(this,arguments)}var yu={},vu=!1;function bu(){return wu.apply(this,arguments)}function wu(){return wu=Wc(Nc().mark((function e(){var t,r,n,i,o=arguments;return Nc().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=o.length>0&&void 0!==o[0]?o[0]:{},e.next=3,ct.get("flow.network");case 3:return r=e.sent,e.next=6,ct.get("env");case 6:if((n=e.sent)&&!vu&&(I.deprecate({pkg:"FCL",subject:'Using the "env" configuration key for specifying the flow network',message:"Configuring to specify flow network is no longer required",transition:"https://github.com/onflow/flow-js-sdk/blob/master/packages/fcl/TRANSITIONS.md#0001-deprecate-env-config-key"}),vu=!0),e.t0=t.node,e.t0){e.next=13;break}return e.next=12,ct.get("accessNode.api");case 12:e.t0=e.sent;case 13:if(i=e.t0){e.next=22;break}if(!r){e.next=19;break}return e.abrupt("return",r);case 19:if(!n){e.next=21;break}return e.abrupt("return",n);case 21:throw new Error('Either the "accessNode.api" config key or opts.node must be set');case 22:if(!yu[i]){e.next=31;break}return e.prev=23,e.next=26,yu[i];case 26:return e.abrupt("return",e.sent);case 29:e.prev=29,e.t1=e.catch(23);case 31:return yu[i]||(yu[i]=gu(t).catch((function(e){throw yu[i]=null,e}))),e.prev=32,e.next=35,yu[i];case 35:return e.abrupt("return",e.sent);case 38:if(e.prev=38,e.t2=e.catch(32),!r){e.next=44;break}return e.abrupt("return",r);case 44:if(!n){e.next=46;break}return e.abrupt("return",n);case 46:throw new Error("Error getting chainId from access node - are you using the correct access node endpoint.  If running locally, is your emulator up-to-date? ".concat(e.t2.message));case 47:case"end":return e.stop()}}),e,null,[[23,29],[32,38]])}))),wu.apply(this,arguments)}function Eu(e){return Au.apply(this,arguments)}function Au(){return(Au=Wc(Nc().mark((function e(t){var r;return Nc().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!Zc(null==t?void 0:t.template)){e.next=4;break}return e.next=3,su({url:null==t?void 0:t.template});case 3:t.template=e.sent;case 4:if(e.t0=t.cadence,e.t0){e.next=15;break}return e.t1=du,e.t2=t.template,e.next=10,bu(t);case 10:return e.t3=e.sent,e.t4={template:e.t2,network:e.t3},e.next=14,(0,e.t1)(e.t4);case 14:e.t0=e.sent;case 15:return r=e.t0,t.cadence=r,e.abrupt("return",t);case 18:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function _u(e,t){return xu.apply(this,arguments)}function xu(){return(xu=Wc(Nc().mark((function e(t,r){return Nc().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return O(Qc(r),"".concat(t,"(opts) -- opts is required")),O(Xc(r),"".concat(t,"(opts) -- opts must be an object")),O(!(r.cadence&&r.template),"".concat(t,"({ template, cadence }) -- cannot pass both cadence and template")),O(Qc(r.cadence||(null==r?void 0:r.template)),"".concat(t,"({ cadence }) -- cadence is required")),O(Zc(r.cadence)||(null==r?void 0:r.template),"".concat(t,"({ cadence }) -- cadence must be a string")),e.t0=O,e.next=8,ct().get("accessNode.api");case 8:e.t1=e.sent,e.t2="".concat(t,'(opts) -- Required value for "accessNode.api" not defined in config. See: ',"https://github.com/onflow/flow-js-sdk/blob/master/packages/fcl/src/exec/query.md#configuration"),(0,e.t0)(e.t1,e.t2);case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Su(e){return ku.apply(this,arguments)}function ku(){return(ku=Wc(Nc().mark((function e(t){return Nc().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",_u("mutate",t));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Iu(e){return Ou.apply(this,arguments)}function Ou(){return(Ou=Wc(Nc().mark((function e(t){return Nc().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",_u("query",t));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Tu(){return Pu.apply(this,arguments)}function Pu(){return Pu=Wc(Nc().mark((function e(){var t,r=arguments;return Nc().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.length>0&&void 0!==r[0]?r[0]:{},e.next=3,Iu(t);case 3:return e.next=5,Eu(t);case 5:return t=e.sent,e.abrupt("return",Ms([ha(t.cadence),oa(ru(t.args||[])),null!=t.isSealed&&zs(t.isSealed),t.limit&&"number"==typeof t.limit&&ia(t.limit)]).then(Ls));case 7:case"end":return e.stop()}}),e)}))),Pu.apply(this,arguments)}var Ru={"HTTP/RPC":"HTTP/RPC","HTTP/POST":"HTTP/POST","IFRAME/RPC":"IFRAME/RPC","POP/RPC":"POP/RPC","TAB/RPC":"TAB/RPC","EXT/RPC":"EXT/RPC","DEEPLINK/RPC":"DEEPLINK/RPC"},Nu=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){},r=function(r){var n=r.data;"object"===$c(n)&&null!=$c(n)&&n.type===e&&t(function(e){var t;return e.deprecated&&console.warn("DEPRECATION NOTICE",e.deprecated.message),null==e||null===(t=e.body)||void 0===t||delete t.interaction,e}(n))};return window.addEventListener("message",r),function(){return window.removeEventListener("message",r)}},Cu=function(){Fc(t,globalThis.URL);var e=qc(t);function t(r,n){jc(this,t);for(var i=arguments.length,o=new Array(i>2?i-2:0),s=2;s<i;s++)o[s-2]=arguments[s];return Gc(e.call.apply(e,[this,r,n].concat(o)))}return Uc(t)}(),Mu=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=Mc(Mc({},t),{},{type:e}),n=new URLSearchParams(window.location.search).get("fcl_redirect_url");if(n){var i=new Cu(n);i.searchParams.append("fclResponseJson",JSON.stringify(r)),window.location.href=i.href}else if(window.location!==window.parent.location)window.parent.postMessage(Mc(Mc({},t),{},{type:e}),"*");else{if(!window.opener)throw new Error("Unable to communicate with parent FCL instance");window.opener.postMessage(Mc(Mc({},t),{},{type:e}),"*")}},Lu={f_type:"Service",f_vsn:"1.0.0"},Bu={f_type:"Identity",f_vsn:"1.0.0"},Uu={f_type:"USER",f_vsn:"1.0.0"},Du={f_type:"PollingResponse",f_vsn:"1.0.0"},ju={f_type:"CompositeSignature",f_vsn:"1.0.0"},Fu=function(e){return function(e){return ht.Buffer.from(e.padStart(16,"0"),"hex")}(e)},zu=function(e){return ht.Buffer.from(e,"hex")},qu=function(e){var t=e.address,r=e.nonce,n=e.appIdentifier,i=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];O(t,"Encode Message For Provable Authn Error: address must be defined"),O(r,"Encode Message For Provable Authn Error: nonce must be defined"),O(n,"Encode Message For Provable Authn Error: appIdentifier must be defined"),O(r.length>=64,"Encode Message For Provable Authn Error: nonce must be minimum of 32 bytes");var o=function(e){return ht.Buffer.from(e.padEnd(64,"0"),"hex")}(ht.Buffer.from("FCL-ACCOUNT-PROOF-V0.0").toString("hex"));return i?ht.Buffer.concat([o,ft([n,Fu(vt(t)),zu(r)])]).toString("hex"):ft([n,Fu(vt(t)),zu(r)]).toString("hex")},Gu=Object.freeze({__proto__:null,CompositeSignature:function(e,t,r){this.f_type=ju.f_type,this.f_vsn=ju.f_vsn,this.addr=bt(e),this.keyId=Number(t),this.signature=r},approve:function(e){Mu("FCL:VIEW:RESPONSE",{f_type:"PollingResponse",f_vsn:"1.0.0",status:"APPROVED",reason:null,data:e})},close:function(){Mu("FCL:VIEW:CLOSE")},decline:function(e){Mu("FCL:VIEW:RESPONSE",{f_type:"PollingResponse",f_vsn:"1.0.0",status:"DECLINED",reason:e,data:null})},encodeAccountProof:qu,encodeMessageFromSignable:function(e,t){var r,n,i=(r=e.voucher,(n=new Set(r.authorizers)).add(r.proposalKey.address),n.delete(r.payer),Array.from(n).map(bt)),o=function(e){var t=new Set([e.payer]);return Array.from(t).map(bt)}(e.voucher),s=i.includes(bt(t)),a=o.includes(bt(t));if(!s&&!a)throw new Us(t);var c={cadence:e.voucher.cadence,refBlock:e.voucher.refBlock,computeLimit:e.voucher.computeLimit,arguments:e.voucher.arguments,proposalKey:Nn(Nn({},e.voucher.proposalKey),{},{address:vt(e.voucher.proposalKey.address)}),payer:vt(e.voucher.payer),authorizers:e.voucher.authorizers.map(vt),payloadSigs:e.voucher.payloadSigs.map((function(e){return Nn(Nn({},e),{},{address:vt(e.address)})}))};return s?Eo(c):Ao(c)},injectExtService:function(e){"authn"===e.type&&null!=e.endpoint?(Array.isArray(window.fcl_extensions)||(window.fcl_extensions=[]),window.fcl_extensions.push(e)):console.warn("Authn service is required")},onMessageFromFCL:Nu,ready:function(e){Nu("FCL:VIEW:READY:RESPONSE",e),Mu("FCL:VIEW:READY")},redirect:function(e){Mu("FCL:VIEW:RESPONSE",{f_type:"PollingResponse",f_vsn:"1.0.0",status:"REDIRECT",reason:null,data:e})},sendMsgToFCL:Mu}),Hu=function(e){if(e.appIdentifier){var t=e.appIdentifier,r=e.address,n=e.nonce,i=e.signatures;return O(Zc(t),"verifyAccountProof({ appIdentifier }) -- appIdentifier must be a string"),O(Zc(r)&&16===vt(r).length,"verifyAccountProof({ address }) -- address must be a valid address"),O(/^[0-9a-f]+$/i.test(n),"nonce must be a hex string"),O(Array.isArray(i)&&i.every((function(e,t,r){return"CompositeSignature"===e.f_type})),"Must include an Array of CompositeSignatures to verify"),O(i.map((function(e){return e.addr})).every((function(e,t,r){return e===r[0]})),"User signatures to be verified must be from a single account address"),!0}var o=e.message,s=e.address,a=e.compSigs;return O(/^[0-9a-f]+$/i.test(o),"Signed message must be a hex string"),O(Zc(s)&&16===vt(s).length,"verifyUserSignatures({ address }) -- address must be a valid address"),O(Array.isArray(a)&&a.every((function(e,t,r){return"CompositeSignature"===e.f_type})),"Must include an Array of CompositeSignatures to verify"),O(a.map((function(e){return e.addr})).every((function(e,t,r){return e===r[0]})),"User signatures to be verified must be from a single account address"),!0},Ku=function(){var e=Wc(Nc().mark((function e(t,r){var n,i,o,s;return Nc().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="ACCOUNT_PROOF"===t?"verifyAccountProofSignatures":"verifyUserSignatures",e.next=3,bu(r);case 3:return i=e.sent,o={testnet:"0x74daa6f9c7ef24b1",mainnet:"0xb4b82a1c9d21d284",previewnet:"0x40b5b8b2ce81ea4a"},O(s=r.fclCryptoContract||o[i],"".concat(n,"({ fclCryptoContract }) -- FCLCrypto contract address is unknown for network: ").concat(i,". Please manually specify the FCLCrypto contract address.")),e.abrupt("return","\n      import FCLCrypto from ".concat(s,"\n\n      access(all) fun main(\n          address: Address, \n          message: String, \n          keyIndices: [Int], \n          signatures: [String]\n      ): Bool {\n        return FCLCrypto.").concat(n,"(address: address, message: message, keyIndices: keyIndices, signatures: signatures)\n      }\n    "));case 8:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}();function Vu(){return Vu=Wc(Nc().mark((function e(t,r){var n,i,o,s,a,c,u,l,h,f,d=arguments;return Nc().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=r.address,i=r.nonce,o=r.signatures,s=d.length>2&&void 0!==d[2]?d[2]:{},Hu({appIdentifier:t,address:n,nonce:i,signatures:o}),a=qu({address:n,nonce:i,appIdentifier:t},!1),c=[],u=[],l=Oc(o);try{for(l.s();!(h=l.n()).done;)f=h.value,c.push(f.signature),u.push(f.keyId.toString())}catch(e){l.e(e)}finally{l.f()}return e.t0=Tu,e.next=11,Ku("ACCOUNT_PROOF",s);case 11:return e.t1=e.sent,e.t2=function(e,t){return[e(bt(n),t.Address),e(a,t.String),e(u,t.Array(t.Int)),e(c,t.Array(t.String))]},e.t3={cadence:e.t1,args:e.t2},e.abrupt("return",(0,e.t0)(e.t3));case 15:case"end":return e.stop()}}),e)}))),Vu.apply(this,arguments)}function Wu(e,t){return $u.apply(this,arguments)}function $u(){return $u=Wc(Nc().mark((function e(t,r){var n,i,o,s,a,c,u,l=arguments;return Nc().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=l.length>2&&void 0!==l[2]?l[2]:{},i=bt(r[0].addr),Hu({message:t,address:i,compSigs:r}),o=[],s=[],a=Oc(r);try{for(a.s();!(c=a.n()).done;)u=c.value,o.push(u.signature),s.push(u.keyId.toString())}catch(e){a.e(e)}finally{a.f()}return e.t0=Tu,e.next=10,Ku("USER_SIGNATURE",n);case 10:return e.t1=e.sent,e.t2=function(e,r){return[e(i,r.Address),e(t,r.String),e(s,r.Array(r.Int)),e(o,r.Array(r.String))]},e.t3={cadence:e.t1,args:e.t2},e.abrupt("return",(0,e.t0)(e.t3));case 14:case"end":return e.stop()}}),e)}))),$u.apply(this,arguments)}var Ju=Object.freeze({__proto__:null,verifyAccountProof:function(e,t){return Vu.apply(this,arguments)},verifyUserSignatures:Wu}),Yu=I.deprecate({pkg:"FCL",subject:"fcl.verifyUserSignatures()",message:"Please use fcl.AppUtils.verifyUserSignatures()",callback:function(e,t){return Wu(e,t)}}),Qu=function(){var e=Wc(Nc().mark((function e(){var t,r,n,i=arguments;return Nc().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=i.length>0&&void 0!==i[0]?i[0]:[],r=i.length>1&&void 0!==i[1]?i[1]:{},e.next=4,ct.first(["sdk.resolve"],r.resolve||Ps);case 4:if(n=e.sent,!Array.isArray(t)){e.next=9;break}return e.next=8,Di(Hn(),t);case 8:t=e.sent;case 9:return e.t0=JSON,e.t1=ts,e.next=13,n(t);case 13:return e.t2=e.sent,e.t3=(0,e.t1)(e.t2),e.abrupt("return",e.t0.stringify.call(e.t0,e.t3,null,2));case 16:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();function Xu(e){return Zu.apply(this,arguments)}function Zu(){return(Zu=Wc(Nc().mark((function e(t){return Nc().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=Object,e.t1=Object,e.next=4,ct().where(t);case 4:return e.t2=e.sent,e.t3=e.t1.entries.call(e.t1,e.t2).map((function(e){var r=kc(e,2),n=r[0],i=r[1];return[n.replace(t,""),i]})),e.abrupt("return",e.t0.fromEntries.call(e.t0,e.t3));case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var el=/\[Error Code: (\d+)\]/,tl=function(e){Fc(r,e);var t=qc(r);function r(e,n){var i;return jc(this,r),(i=t.call(this,e)).code=n,i.type=j[n],i}return Uc(r,null,[{key:"fromErrorMessage",value:function(e){var t=e.match(el);return new r(e,(t?parseInt(t[1],10):void 0)||j.UNKNOWN_ERROR)}}]),r}(Rc(Error)),rl=/^[0-9a-fA-F]{64}$/,nl="POLL",il="TIMEOUT",ol=function(){var e=Wc(Nc().mark((function e(t){return Nc().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ms([ta(t)]).then(Ls));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),sl=function(e){return e.status>=4},al=function(e){return e.status>=3},cl=function(e){return e.status>=2},ul=function(e){if("object"===$c(e)&&(e=e.transactionId),null==e)throw new Error("transactionId required");return e},ll=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(t){return ue(function(){var e,t,r,n,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Lc(Lc(Lc(Lc(Lc(Lc({},Y,(n=Wc(Nc().mark((function e(t){return Nc().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:setTimeout((function(){return t.sendSelf(il)}),i.txNotFoundTimeout),t.sendSelf(nl);case 2:case"end":return e.stop()}}),e)}))),function(e){return n.apply(this,arguments)})),Q,(function(e,t){e.subscribe(t.from),e.send(t.from,Z,e.all())})),X,(function(e,t){e.unsubscribe(t.from)})),ee,(r=Wc(Nc().mark((function e(t,r){return Nc().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r.reply(t.all());case 1:case"end":return e.stop()}}),e)}))),function(e,t){return r.apply(this,arguments)})),il,(t=Wc(Nc().mark((function e(t){return Nc().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:0===Object.keys(t.all()).length&&t.fatalError(new Error("TX status polling failed: no transaction was found within timeout interval (".concat(i.txNotFoundTimeout,"ms)")));case 1:case"end":return e.stop()}}),e)}))),function(e){return t.apply(this,arguments)})),nl,(e=Wc(Nc().mark((function e(t){var r,n,o,s,a;return Nc().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=function(){return setTimeout((function(){return t.sendSelf(nl)}),i.pollRate)},o=t.all(),e.prev=2,e.next=5,ol(t.self());case 5:n=e.sent,e.next=15;break;case 8:if(e.prev=8,e.t0=e.catch(2),s=e.t0 instanceof Ht&&404===e.t0.statusCode,a=e.t0.code===Ac.grpc.Code.NotFound,!s&&!a){e.next=14;break}return e.abrupt("return",r());case 14:return e.abrupt("return",t.fatalError(e.t0));case 15:sl(n)||r(),c=o,u=n,JSON.stringify(c)!==JSON.stringify(u)&&t.broadcast(Z,n),t.merge(n);case 18:case"end":return e.stop()}var c,u}),e,null,[[2,8]])}))),function(t){return e.apply(this,arguments)}))}(e),ul(t))}};function hl(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{txNotFoundTimeout:12500,pollRate:1e3};if(!rl.test(ul(e)))throw new Error("Invalid transactionId");function r(r){return he(ul(e),ll(t),r)}function n(e){return function(){var t=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).suppress||!1;return new Promise((function(n,i){var o=r((function(r,s){if(!s&&!r.statusCode||t)e(r)&&(n(r),o());else if(null!=s)i(s),o();else if(1===r.statusCode){var a=tl.fromErrorMessage(r.errorMessage);i(a),o()}}))}))}}return{snapshot:function(){return fe(e,ll(t))},subscribe:r,onceFinalized:n(cl),onceExecuted:n(al),onceSealed:n(sl)}}hl.isUnknown=function(e){return e.status>=0},hl.isPending=function(e){return e.status>=1},hl.isFinalized=cl,hl.isExecuted=al,hl.isSealed=sl,hl.isExpired=function(e){return 5===e.status};var fl,dl,pl="TICK",gl="hwm",ml=function(){var e=Wc(Nc().mark((function e(t){return Nc().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=setTimeout,e.t1=function(){return t.sendSelf(pl)},e.next=4,ct().get("fcl.eventPollRate",1e4);case 4:return e.t2=e.sent,e.abrupt("return",(0,e.t0)(e.t1,e.t2));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),yl=Lc(Lc(Lc({},pl,(dl=Wc(Nc().mark((function e(t){var r,n,i,o,s,a;return Nc().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.hasSubs()){e.next=2;break}return e.abrupt("return");case 2:if(null!=(r=t.get(gl))){e.next=18;break}return e.t0=t,e.t1=gl,e.next=8,Hs();case 8:return e.t2=e.sent,e.t0.put.call(e.t0,e.t1,e.t2),e.t3=t,e.t4=pl,e.next=14,ml(t);case 14:e.t5=e.sent,e.t3.put.call(e.t3,e.t4,e.t5),e.next=34;break;case 18:return e.next=20,Hs();case 20:if(n=e.sent,t.put(gl,n),!(r.height<n.height)){e.next=28;break}return e.next=25,Ms([Qs(t.self(),r.height+1,n.height)]).then(Ls);case 25:i=e.sent,o=Oc(i);try{for(o.s();!(s=o.n()).done;)a=s.value,t.broadcast("UPDATED",a.data)}catch(e){o.e(e)}finally{o.f()}case 28:return e.t6=t,e.t7=pl,e.next=32,ml(t);case 32:e.t8=e.sent,e.t6.put.call(e.t6,e.t7,e.t8);case 34:case"end":return e.stop()}}),e)}))),function(e){return dl.apply(this,arguments)})),Q,(fl=Wc(Nc().mark((function e(t,r){return Nc().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.hasSubs()){e.next=7;break}return e.t0=t,e.t1=pl,e.next=5,ml(t);case 5:e.t2=e.sent,e.t0.put.call(e.t0,e.t1,e.t2);case 7:t.subscribe(r.from);case 8:case"end":return e.stop()}}),e)}))),function(e,t){return fl.apply(this,arguments)})),X,(function(e,t){e.unsubscribe(t.from),e.hasSubs()||(clearTimeout(e.get(pl)),e.delete(pl),e.delete(gl))})),vl=function(e){return ue(yl,e)};function bl(e){var t;return t="string"==typeof e?{eventTypes:[e]}:e||{},{subscribe:function(r){var n=Ms([ma(t)]).then(Ls),i=n.then((function(){return null})).catch((function(t){if("SDK Send Error: subscribeEvents is not supported by this transport."!==t.message)throw t;if("string"!=typeof e)throw new Error("GRPC fcl.events fallback only supports string (type) filters");return(n=e,{subscribe:function(e){return he(n,vl,e)}}).subscribe(r);var n}));function o(e){e.forEach((function(e){return r(e,null)}))}function s(e){r(null,e)}return i.then((function(e){e||n.then((function(e){return e.on("events",o).on("error",s)})).catch((function(e){n.then((function(e){return e.close()})),s(e)}))})),function(){i.then((function(e){e?e():n.then((function(e){return e.close()}))}))}}}}var wl,El,Al=function(){throw new Error("Platform specific Core Strategies are not initialized")},_l=Lc(Lc(Lc(Lc(Lc(Lc({},Ru["EXT/RPC"],Al),Ru["HTTP/POST"],Al),Ru["IFRAME/RPC"],Al),Ru["POP/RPC"],Al),Ru["TAB/RPC"],Al),Ru["EXT/RPC"],Al),xl=["ServicePlugin"],Sl=["discovery-service"],kl=function(e){var t=e.coreStrategies,r=new Set,n=new Map(Object.entries(t));return Object.freeze({add:function(e){if(O(Sl.includes(e.type),"Service Plugin type ".concat(e.type," is not supported")),"discovery-service"===e.type){var t=function(e){var t=e.services,r=void 0===t?[]:t,n=e.serviceStrategy;O(Array.isArray(r),"Services must be an array");var i,o=Oc(r);try{for(o.s();!(i=o.n()).done;){var s=i.value;O(Qc(s.f_type)&&"Service"===s.f_type,"Service is required"),O(Qc(s.type)&&"authn"===s.type,"Service must be type authn. Received ".concat(s.type)),O(s.method in Ru||n.method===s.method,"Service method ".concat(s.method," is not supported"))}}catch(e){o.e(e)}finally{o.f()}return O(Qc(n),"Service strategy is required"),O(Qc(n.method)&&Zc(n.method),"Service strategy method is required"),O(Qc(n.exec)&&eu(n.exec),"Service strategy exec function is required"),{discoveryServices:r,serviceStrategy:n}}(e),i=t.discoveryServices,o=t.serviceStrategy;(function(e){r=new Set(Ic(e))})(i),n.has(o.method)?I({title:"Add Service Plugin",message:"Service strategy for ".concat(o.method," already exists"),level:S.warn}):n.set(o.method,o.exec)}},getServices:function(){return Ic(r)},getStrategy:function(e){return n.get(e)},getStrategies:function(){return Ic(n.keys())}})},Il=function(){return void 0!==wl},Ol=function(e){var t=e.coreStrategies;if(Il())return wl;var r=kl({coreStrategies:t});return wl=r,r},Tl=function(){return Il()?wl:(console.warn("Registry is not initalized, it will be initialized with stub core strategies"),Ol({coreStrategies:_l}))},Pl=(El=new Map,Object.freeze({add:function(e){var t,r=function(e){var t;O(!!e,"No plugins supplied");var r,n=Oc(t=Array.isArray(e)?Ic(e):[e]);try{for(n.s();!(r=n.n()).done;){var i=r.value;O(Qc(i.name),"Plugin name is required"),O(Qc(i.f_type),"Plugin f_type is required"),O(xl.includes(i.f_type),"Plugin type ".concat(i.f_type," is not supported"))}}catch(e){n.e(e)}finally{n.f()}return t}(e),n=Oc(r);try{for(n.s();!(t=n.n()).done;){var i=t.value;El.set(i.name,i),"ServicePlugin"===i.f_type&&wl.add(i)}}catch(e){n.e(e)}finally{n.f()}},getPlugins:function(){return El}})),Rl=function(){var e=Wc(Nc().mark((function e(){var t,r;return Nc().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=(null===(t=window)||void 0===t?void 0:t.fcl_extensions)||[],e.abrupt("return",[].concat(Ic(r),Ic(Tl().getServices())));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();function Nl(e){return Cl.apply(this,arguments)}function Cl(){return(Cl=Wc(Nc().mark((function e(t){var r,n,i,o,s,a,c;return Nc().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ct.get("discovery.authn.include",[]);case 2:return n=e.sent,e.next=5,ct.get("discovery.authn.exclude",[]);case 5:return i=e.sent,e.next=8,ct.get("discovery.features.suggested",[]);case 8:return o=e.sent,e.next=11,ct.first(["discovery.wallet.method","discovery.wallet.method.default"]);case 11:if(s=e.sent,a=null!=t&&t.method?t.method:s,null===(r=null==t?void 0:t.endpoint)||void 0===r){e.next=17;break}e.t0=r,e.next=20;break;case 17:return e.next=19,ct.first(["discovery.wallet","challenge.handshake"]);case 19:e.t0=e.sent;case 20:return O(c=e.t0,'\n    If no service is passed to "authenticate," then "discovery.wallet" must be defined in fcl config.\n    See: "https://docs.onflow.org/fcl/reference/api/#setting-configuration-values"\n    '),e.abrupt("return",Mc(Mc({},t),{},{type:"authn",endpoint:c,method:a,discoveryAuthnInclude:n,discoveryAuthnExclude:i,discoveryFeaturesSuggested:o}));case 23:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ml(e){return Ll.apply(this,arguments)}function Ll(){return Ll=Wc(Nc().mark((function e(t){var r,n,i,o,s,a;return Nc().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.types,e.next=3,ct.get("discovery.authn.endpoint");case 3:return i=e.sent,O(Boolean(i),'"discovery.authn.endpoint" in config must be defined.'),e.next=7,ct.get("discovery.authn.include",[]);case 7:return o=e.sent,e.next=10,ct.get("discovery.authn.exclude",[]);case 10:return s=e.sent,a=new Cu(i),e.t0=fetch,e.t1=a,e.t2={"Content-Type":"application/json"},e.t3=JSON,e.t4=n,e.t5=Jc,e.t6=o,e.t7=s,e.next=22,ct.get("discovery.features.suggested",[]);case 22:return e.t8=e.sent,e.t9={suggested:e.t8},e.next=26,Rl();case 26:return e.t10=e.sent,e.t11=Tl().getStrategies(),e.t12=null===(r=window)||void 0===r||null===(r=r.navigator)||void 0===r?void 0:r.userAgent,e.next=31,bu();case 31:return e.t13=e.sent,e.t14={type:e.t4,fclVersion:e.t5,include:e.t6,exclude:e.t7,features:e.t9,clientServices:e.t10,supportedStrategies:e.t11,userAgent:e.t12,network:e.t13},e.t15=e.t3.stringify.call(e.t3,e.t14),e.t16={method:"POST",headers:e.t2,body:e.t15},e.abrupt("return",(0,e.t0)(e.t1,e.t16).then((function(e){return e.json()})));case 36:case"end":return e.stop()}}),e)}))),Ll.apply(this,arguments)}var Bl,Ul,Dl="authn",jl="UPDATED",Fl="UPDATE_RESULTS",zl=function(){var e=Wc(Nc().mark((function e(){var t;return Nc().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Ml({types:[Dl]});case 3:t=e.sent,ae(Dl,Fl,{results:t}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),I({title:"".concat(e.t0.name," Error fetching Discovery API services."),message:e.t0.message,level:S.error});case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),ql=Lc(Lc(Lc(Lc(Lc({},Y,(Ul=Wc(Nc().mark((function e(t){return Nc().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:"undefined"==typeof window&&console.warn("\n      %cFCL Warning\n      ============================\n      ".concat('"fcl.discovery" is only available in the browser.',"\n      For more info, please see the docs: https://docs.onflow.org/fcl/\n      ============================\n      "),"font-weight:bold;font-family:monospace;"),"complete"===document.readyState?zl():window.addEventListener("load",(function(){zl()}));case 2:case"end":return e.stop()}}),e)}))),function(e){return Ul.apply(this,arguments)})),Fl,(function(e,t,r){e.merge(r),e.broadcast(jl,Mc({},e.all()))})),Q,(function(e,t){e.subscribe(t.from),e.send(t.from,jl,Mc({},e.all()))})),X,(function(e,t){return e.unsubscribe(t.from)})),"SNAPSHOT",(Bl=Wc(Nc().mark((function e(t,r){return Nc().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",r.reply(Mc({},t.all())));case 1:case"end":return e.stop()}}),e)}))),function(e,t){return Bl.apply(this,arguments)})),Gl=function(){return ue(ql,Dl)},Hl={authn:{subscribe:function(e){return he(Dl,Gl,e)},snapshot:function(){return fe(Dl,Gl)},update:function(){"complete"===document.readyState&&zl()}}};function Kl(e){var t=new an.KN(256);return t.update(ht.Buffer.from(e,"utf8")),t.digest("hex")}function Vl(e){return Wl.apply(this,arguments)}function Wl(){return Wl=Wc(Nc().mark((function e(t){var r,n,i,o,s,a;return Nc().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Cs(null!=(r=t.template),"generateTemplateId({ template }) -- template must be defined"),Cs("object"===$c(r),"generateTemplateId({ template }) -- template must be an object"),Cs("InteractionTemplate"===r.f_type,"generateTemplateId({ template }) -- template object must be an InteractionTemplate"),Cs("1.0.0"===r.f_version,"generateTemplateId({ template }) -- template object must be an version 1.0.0"),n=r.data,e.next=8,Promise.all(Object.keys(n.messages).map(function(){var e=Wc(Nc().mark((function e(t){var r;return Nc().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=Kl(t),e.next=3,Promise.all(Object.keys(null===(r=n.messages)||void 0===r||null===(r=r[t])||void 0===r?void 0:r.i18n).map(function(){var e=Wc(Nc().mark((function e(r){var i;return Nc().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",[Kl(r),Kl(null===(i=n.messages)||void 0===i||null===(i=i[t])||void 0===i||null===(i=i.i18n)||void 0===i?void 0:i[r])]);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 3:return e.t1=e.sent,e.abrupt("return",[e.t0,e.t1]);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 8:return i=e.sent,e.next=11,Promise.all(Object.keys(null==n?void 0:n.dependencies).map(function(){var e=Wc(Nc().mark((function e(t){var r;return Nc().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=Kl(t),e.next=3,Promise.all(Object.keys(null==n||null===(r=n.dependencies)||void 0===r?void 0:r[t]).map(function(){var e=Wc(Nc().mark((function e(r){var i;return Nc().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=Kl(r),e.next=3,Promise.all(Object.keys(null==n||null===(i=n.dependencies)||void 0===i||null===(i=i[t])||void 0===i?void 0:i[r]).map(function(){var e=Wc(Nc().mark((function e(i){var o,s,a,c,u;return Nc().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",[Kl(i),[Kl(null==n||null===(o=n.dependencies)||void 0===o||null===(o=o[t])||void 0===o||null===(o=o[r])||void 0===o?void 0:o[i].address),Kl(null==n||null===(s=n.dependencies)||void 0===s||null===(s=s[t])||void 0===s||null===(s=s[r])||void 0===s?void 0:s[i].contract),Kl(null==n||null===(a=n.dependencies)||void 0===a||null===(a=a[t])||void 0===a||null===(a=a[r])||void 0===a?void 0:a[i].fq_address),Kl(null==n||null===(c=n.dependencies)||void 0===c||null===(c=c[t])||void 0===c||null===(c=c[r])||void 0===c?void 0:c[i].pin),Kl(String(null==n||null===(u=n.dependencies)||void 0===u||null===(u=u[t])||void 0===u||null===(u=u[r])||void 0===u?void 0:u[i].pin_block_height))]]);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 3:return e.t1=e.sent,e.abrupt("return",[e.t0,e.t1]);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 3:return e.t1=e.sent,e.abrupt("return",[e.t0,e.t1]);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 11:return o=e.sent,e.next=14,Promise.all(Object.keys(null==n?void 0:n.arguments).map(function(){var e=Wc(Nc().mark((function e(t){var r,i,o,s;return Nc().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=Kl(t),e.t1=Kl(String(null==n||null===(r=n.arguments)||void 0===r?void 0:r[t].index)),e.t2=Kl(null==n||null===(i=n.arguments)||void 0===i?void 0:i[t].type),e.t3=Kl((null==n||null===(o=n.arguments)||void 0===o?void 0:o[t].balance)||""),e.next=6,Promise.all(Object.keys(null==n||null===(s=n.arguments)||void 0===s?void 0:s[t].messages).map(function(){var e=Wc(Nc().mark((function e(r){var i;return Nc().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=Kl(r),e.next=3,Promise.all(Object.keys(null==n||null===(i=n.arguments)||void 0===i||null===(i=i[t].messages)||void 0===i?void 0:i[r].i18n).map(function(){var e=Wc(Nc().mark((function e(i){var o;return Nc().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",[Kl(i),Kl(null==n||null===(o=n.arguments)||void 0===o||null===(o=o[t].messages)||void 0===o||null===(o=o[r].i18n)||void 0===o?void 0:o[i])]);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 3:return e.t1=e.sent,e.abrupt("return",[e.t0,e.t1]);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 6:return e.t4=e.sent,e.t5=[e.t1,e.t2,e.t3,e.t4],e.abrupt("return",[e.t0,e.t5]);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 14:return s=e.sent,a=ft([Kl("InteractionTemplate"),Kl("1.0.0"),Kl(null==n?void 0:n.type),Kl(null==n?void 0:n.interface),i,Kl(null==n?void 0:n.cadence),o,s]).toString("hex"),e.abrupt("return",Kl(a));case 17:case"end":return e.stop()}}),e)}))),Wl.apply(this,arguments)}function $l(e){return{contractName:e.contractName,address:e.address,contract:""}}function Jl(e){var t,r=[],n=Oc(e.match(/import ((\w|,| )+)* from 0x\w+/g)||[]);try{for(n.s();!(t=n.n()).done;){var i,o=t.value,s=/import ((\w+|, |)*) from (0x\w+)/g.exec(o),a=Oc(s[1].match(/((?:\w+)+),?/g)||[]);try{for(a.s();!(i=a.n()).done;){var c=i.value;r.push($l({address:s[3],contractName:c.replace(/,/g,"")}))}}catch(e){a.e(e)}finally{a.f()}}}catch(e){n.e(e)}finally{n.f()}return r}function Yl(e){return Ql.apply(this,arguments)}function Ql(){return Ql=Wc(Nc().mark((function e(t){var r,n,i,o,s,a,c,u,l,h,f,d,p,g=arguments;return Nc().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=t.address,n=t.contractName,i=g.length>1&&void 0!==g[1]?g[1]:{},Cs(null!=r,"generateDependencyPin({ address }) -- address must be defined"),Cs(null!=n,"generateDependencyPin({ contractName }) -- contractName must be defined"),Cs("string"==typeof r,"generateDependencyPin({ address }) -- address must be a string"),Cs("string"==typeof n,"generateDependencyPin({ contractName }) -- contractName must be a string"),o=[$l({contractName:n,address:r})],s=0,a=o;case 8:if(!(s<a.length)){e.next=30;break}return u=a[s],e.t0=Ms,e.t1=$i,e.next=14,ct().get(u.address,u.address);case 14:return e.t2=e.sent,e.t3=(0,e.t1)(e.t2),e.t4=[e.t3],e.t5=i,e.next=20,(0,e.t0)(e.t4,e.t5).then(Ls);case 20:if(l=e.sent,u.contract=null===(c=l.contracts)||void 0===c?void 0:c[u.contractName],u.contract){e.next=25;break}throw console.error("Did not find expected contract",u,l),new Error("Did not find expected contract");case 25:h=Jl(u.contract),o.push.apply(o,Ic(h));case 27:s++,e.next=8;break;case 30:return f=o.map((function(e){return Kl(e.contract)})),e.next=33,Promise.all(f);case 33:return d=e.sent,p=d.join(""),e.abrupt("return",Kl(p));case 36:case"end":return e.stop()}}),e)}))),Ql.apply(this,arguments)}function Xl(e,t){return Zl.apply(this,arguments)}function Zl(){return(Zl=Wc(Nc().mark((function e(t,r){var n,i,o,s,a,c,u,l;return Nc().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=[],i=Oc(r),e.prev=2,i.s();case 4:if((o=i.n()).done){e.next=16;break}if(s=o.value,a=[Kl(s.network)],c=s.address,u=s.dependency_pin_block_height,!s.dependency_pin){e.next=13;break}return e.next=11,Yl({address:c,contractName:t,blockHeight:u});case 11:l=e.sent,a.push(Kl(l));case 13:n.push(a);case 14:e.next=4;break;case 16:e.next=21;break;case 18:e.prev=18,e.t0=e.catch(2),i.e(e.t0);case 21:return e.prev=21,i.f(),e.finish(21);case 24:return e.abrupt("return",n);case 25:case"end":return e.stop()}}),e,null,[[2,18,21,24]])})))).apply(this,arguments)}function eh(e){return th.apply(this,arguments)}function th(){return th=Wc(Nc().mark((function e(t){var r,n,i,o,s,a,c,u;return Nc().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=[],n=0;case 2:if(!(n<t.length)){e.next=21;break}i=t[n],o=[],s=0;case 6:if(!(s<(null==i?void 0:i.contracts.length))){e.next=17;break}return a=null==i?void 0:i.contracts[s],c=null==a?void 0:a.contract,o.push(Kl(c)),e.next=12,Xl(c,null==a?void 0:a.networks);case 12:u=e.sent,o.push(u);case 14:s++,e.next=6;break;case 17:r.push(o);case 18:n++,e.next=2;break;case 21:return e.abrupt("return",r);case 22:case"end":return e.stop()}}),e)}))),th.apply(this,arguments)}function rh(e){return nh.apply(this,arguments)}function nh(){return nh=Wc(Nc().mark((function e(t){var r,n,i,o,s,a,c;return Nc().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return O(n=t.template,"generateTemplateId({ template }) -- template must be defined"),O("object"===$c(n),"generateTemplateId({ template }) -- template must be an object"),O("InteractionTemplate"===n.f_type,"generateTemplateId({ template }) -- template object must be an InteractionTemplate"),O("1.1.0"===n.f_version,"generateTemplateId({ template }) -- template object must be an version 1.1.0"),i=n.data,e.next=8,Promise.all(i.messages.map(function(){var e=Wc(Nc().mark((function e(t){return Nc().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=Kl(t.key),e.next=3,Promise.all(t.i18n.map(function(){var e=Wc(Nc().mark((function e(t){return Nc().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",[Kl(t.tag),Kl(t.translation)]);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 3:return e.t1=e.sent,e.abrupt("return",[e.t0,e.t1]);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 8:return o=e.sent,e.next=11,Promise.all(null==i?void 0:i.parameters.sort((function(e,t){return e.index-t.index})).map(function(){var e=Wc(Nc().mark((function e(t){return Nc().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=Kl(t.label),e.t1=Kl(String(t.index)),e.t2=Kl(t.type),e.next=5,Promise.all(t.messages.map(function(){var e=Wc(Nc().mark((function e(t){return Nc().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=Kl(t.key),e.next=3,Promise.all(t.i18n.map(function(){var e=Wc(Nc().mark((function e(t){return Nc().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",[Kl(t.tag),Kl(t.translation)]);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 3:return e.t1=e.sent,e.abrupt("return",[e.t0,e.t1]);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 5:return e.t3=e.sent,e.t4=[e.t1,e.t2,e.t3],e.abrupt("return",[e.t0,e.t4]);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 11:return s=e.sent,e.next=14,eh(null==i?void 0:i.dependencies);case 14:return e.t0=e.sent,a=[e.t0],c=ft([Kl(null==n?void 0:n.f_type),Kl(null==n?void 0:n.f_version),Kl(null==i?void 0:i.type),Kl(null==i?void 0:i.interface),o,Kl(null==i||null===(r=i.cadence)||void 0===r?void 0:r.body),[a],s]).toString("hex"),e.abrupt("return",Kl(c));case 18:case"end":return e.stop()}}),e)}))),nh.apply(this,arguments)}function ih(e){return oh.apply(this,arguments)}function oh(){return oh=Wc(Nc().mark((function e(t){var r;return Nc().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:O(r=t.template,"generateTemplateId({ template }) -- template must be defined"),O("object"===$c(r),"generateTemplateId({ template }) -- template must be an object"),O("InteractionTemplate"===r.f_type,"generateTemplateId({ template }) -- template object must be an InteractionTemplate"),e.t0=r.f_version,e.next="1.1.0"===e.t0?7:"1.0.0"===e.t0?10:13;break;case 7:return e.next=9,rh({template:r});case 9:case 12:return e.abrupt("return",e.sent);case 10:return e.next=12,Vl({template:r});case 13:throw new Error("generateTemplateId Error: Unsupported template version");case 14:case"end":return e.stop()}}),e)}))),oh.apply(this,arguments)}function sh(){return sh=Wc(Nc().mark((function e(t){var r;return Nc().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.template,e.t0=r.id,e.next=4,ih({template:r});case 4:return e.t1=e.sent,e.abrupt("return",e.t0===e.t1);case 6:case"end":return e.stop()}}),e)}))),sh.apply(this,arguments)}function ah(){return ah=Wc(Nc().mark((function e(t){var r,n,i,o,s,a,c,u,l=arguments;return Nc().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.template,n=t.auditors,i=l.length>1&&void 0!==l[1]?l[1]:{},Cs(null!=r,"getInteractionTemplateAudits({ template }) -- template must be defined"),Cs("InteractionTemplate"===r.f_type,"getInteractionTemplateAudits({ template }) -- template must be an InteractionTemplate"),e.next=6,ih({template:r});case 6:if((o=e.sent)===r.id){e.next=10;break}throw I({title:"getInteractionTemplateAudits Debug Error",message:"Could not recompute and match template ID\n                computed: ".concat(o,"\n                template: ").concat(r.id,"\n            "),level:S.debug}),new Error("getInteractionTemplateAudits Error: Could not recompute and match template ID");case 10:e.t0=r.f_version,e.next="1.1.0"===e.t0||"1.0.0"===e.t0?13:32;break;case 13:if(e.t1=n,e.t1){e.next=18;break}return e.next=17,ct().get("flow.auditors");case 17:e.t1=e.sent;case 18:if(Cs(s=e.t1,"getInteractionTemplateAudits Error: Required configuration for 'fcl.auditors' is not set"),Cs(Array.isArray(s),"getInteractionTemplateAudits Error: Required configuration for 'fcl.auditors' is not an array"),a=i.flowInteractionAuditContract){e.next=28;break}return e.next=25,bu(i);case 25:Cs("mainnet"===(c=e.sent)||"testnet"===c,"getInteractionTemplateAudits Error: Unable to determine address for FlowInteractionTemplateAudit contract. Set configuration for 'fcl.network' to 'mainnet' or 'testnet'"),a="mainnet"===c?"0xfd100e39d50a13e6":"0xf78bfc12d0a786dc";case 28:return e.next=30,Tu({cadence:"\n        import FlowInteractionTemplateAudit from ".concat(a,"\n        access(all) fun main(templateId: String, auditors: [Address]): {Address:Bool} {\n          return FlowInteractionTemplateAudit.getHasTemplateBeenAuditedByAuditors(templateId: templateId, auditors: auditors)\n        }\n        "),args:function(e,t){return[e(o,t.String),e(s,t.Array(t.Address))]}});case 30:return u=e.sent,e.abrupt("return",u);case 32:throw new Error("getInteractionTemplateAudits Error: Unsupported template version");case 33:case"end":return e.stop()}}),e)}))),ah.apply(this,arguments)}function ch(e){return uh.apply(this,arguments)}function uh(){return uh=Wc(Nc().mark((function e(t){var r,n,i,o,s,a,c,u,l,h,f,d,p=arguments;return Nc().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=t.address,n=t.contractName,i=p.length>1&&void 0!==p[1]?p[1]:{},Cs(null!=r,"generateDependencyPin({ address }) -- address must be defined"),Cs(null!=n,"generateDependencyPin({ contractName }) -- contractName must be defined"),Cs("string"==typeof r,"generateDependencyPin({ address }) -- address must be a string"),Cs("string"==typeof n,"generateDependencyPin({ contractName }) -- contractName must be a string"),o=[$l({contractName:n,address:r})],s=0,a=o;case 8:if(!(s<a.length)){e.next=30;break}return u=a[s],e.t0=Ms,e.t1=$i,e.next=14,ct().get(u.address,u.address);case 14:return e.t2=e.sent,e.t3=(0,e.t1)(e.t2),e.t4=[e.t3],e.t5=i,e.next=20,(0,e.t0)(e.t4,e.t5).then(Ls);case 20:if(l=e.sent,u.contract=null===(c=l.contracts)||void 0===c?void 0:c[u.contractName],u.contract){e.next=25;break}throw console.error("Did not find expected contract",u,l),new Error("Did not find expected contract");case 25:h=Jl(u.contract),o.push.apply(o,Ic(h));case 27:s++,e.next=8;break;case 30:return f=o.map((function(e){return Kl(e.contract)})),d=f.join(""),e.abrupt("return",Kl(d));case 33:case"end":return e.stop()}}),e)}))),uh.apply(this,arguments)}function lh(e){return hh.apply(this,arguments)}function hh(){return hh=Wc(Nc().mark((function e(t){var r,n,i;return Nc().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=t.version,n=t.address,i=t.contractName,Cs(null!=n,"generateDependencyPin({ address }) -- address must be defined"),Cs(null!=i,"generateDependencyPin({ contractName }) -- contractName must be defined"),Cs("string"==typeof n,"generateDependencyPin({ address }) -- address must be a string"),Cs("string"==typeof i,"generateDependencyPin({ contractName }) -- contractName must be a string"),e.t0=r,e.next="1.1.0"===e.t0?8:"1.0.0"===e.t0?11:14;break;case 8:return e.next=10,Yl({address:n,contractName:i});case 10:case 13:return e.abrupt("return",e.sent);case 11:return e.next=13,ch({address:n,contractName:i});case 14:throw new Error("deriveCadenceByNetwork Error: Unsupported template version");case 15:case"end":return e.stop()}}),e)}))),hh.apply(this,arguments)}function fh(){return fh=Wc(Nc().mark((function e(t){var r,n,i,o,s,a,c=arguments;return Nc().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.version,n=t.address,i=t.contractName,o=c.length>1&&void 0!==c[1]?c[1]:{},e.next=4,Hs({sealed:!0},o);case 4:return s=e.sent,a=null==s?void 0:s.height,e.abrupt("return",lh({version:r,address:n,contractName:i,blockHeight:a}));case 7:case"end":return e.stop()}}),e)}))),fh.apply(this,arguments)}function dh(e){return ph.apply(this,arguments)}function ph(){return ph=Wc(Nc().mark((function e(t){var r,n,i,o,s,a,c,u,l,h,f,d,p,g,m,y,v,b,w,E,A,_,x,k,O;return Nc().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=t.template,n=t.blockHeight,i=t.network,Cs(null!=r,"generateDependencyPin({ template }) -- template must be defined"),Cs("object"===$c(r),"generateDependencyPin({ template }) -- template must be an object"),Cs("InteractionTemplate"===r.f_type,"generateDependencyPin({ template }) -- template must be an InteractionTemplate"),Cs(null!=i,"generateDependencyPin({ network }) network must be defined"),Cs(null!=n,"generateDependencyPin({ blockHeight }) blockHeight must be defined"),Cs("number"==typeof n,"generateDependencyPin({ blockHeight }) blockHeight must be a number"),e.t0=r.f_version,e.next="1.0.0"===e.t0?10:"1.1.0"===e.t0?36:66;break;case 10:o=Object.keys(r.data.dependencies),s=0,a=o;case 12:if(!(s<a.length)){e.next=35;break}c=a[s],u=r.data.dependencies[c],l=Object.keys(u),h=0,f=l;case 17:if(!(h<f.length)){e.next=32;break}if(d=f[h],p=r.data.dependencies[c][d],void 0!==(g=p[i])){e.next=23;break}return e.abrupt("continue",29);case 23:return e.next=25,lh({address:g.address,contractName:g.contract,blockHeight:n});case 25:if((m=e.sent)===g.pin){e.next=29;break}return I({title:"verifyDependencyPinsSame Debug Error",message:"Could not recompute and match dependency pin.\n                                address: ".concat(g.address," | contract: ").concat(g.contract,"\n                                computed: ").concat(m,"\n                                template: ").concat(g.pin,"\n                            "),level:S.debug}),e.abrupt("return",!1);case 29:h++,e.next=17;break;case 32:s++,e.next=12;break;case 35:return e.abrupt("return",!0);case 36:y=!1,v=0;case 38:if(!(v<(null===(b=r.data)||void 0===b?void 0:b.dependencies.length))){e.next=65;break}E=null===(w=r.data)||void 0===w?void 0:w.dependencies[v],A=0;case 41:if(!(A<(null==E?void 0:E.contracts.length))){e.next=62;break}_=null==E?void 0:E.contracts[A],x=0;case 44:if(!(x<(null==_?void 0:_.networks.length))){e.next=59;break}if((k=null==_?void 0:_.networks[x]).network!==i){e.next=56;break}return e.next=49,lh({version:r.f_version,address:k.address,contractName:_.contract,blockHeight:n});case 49:if((O=e.sent)===k.dependency_pin.pin){e.next=55;break}return I({title:"verifyDependencyPinsSame Debug Error",message:"Could not recompute and match dependency pin.\n                                    address: ".concat(k.address," | contract: ").concat(_.contract,"\n                                    computed: ").concat(O,"\n                                    template: ").concat(k.pin,"\n                                "),level:S.debug}),e.abrupt("return",!1);case 55:y=!0;case 56:x++,e.next=44;break;case 59:A++,e.next=41;break;case 62:v++,e.next=38;break;case 65:return e.abrupt("return",y);case 66:throw new Error("verifyDependencyPinsSame Error: Unsupported template version");case 67:case"end":return e.stop()}}),e)}))),ph.apply(this,arguments)}function gh(){return gh=Wc(Nc().mark((function e(t){var r,n,i,o;return Nc().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.template,n=t.network,e.next=3,Hs({sealed:!0});case 3:return i=e.sent,o=null==i?void 0:i.height,e.abrupt("return",dh({template:r,network:n,blockHeight:o}));case 6:case"end":return e.stop()}}),e)}))),gh.apply(this,arguments)}var mh=Object.freeze({__proto__:null,deriveCadenceByNetwork:du,generateDependencyPin:lh,generateDependencyPinAtLatestSealedBlock:function(e){return fh.apply(this,arguments)},generateTemplateId:ih,getInteractionTemplateAudits:function(e){return ah.apply(this,arguments)},getTemplateArgumentMessage:function(e){var t,r,n,i,o=e.localization,s=void 0===o?"en-US":o,a=e.argumentLabel,c=e.messageKey,u=e.template;switch(Cs(c,"getTemplateArgumentMessage({ messageKey }) -- messageKey must be defined"),Cs("string"==typeof c,"getTemplateArgumentMessage({ messageKey }) -- messageKey must be a string"),Cs(a,"getTemplateArgumentMessage({ argumentLabel }) -- argumentLabel must be defined"),Cs("string"==typeof c,"getTemplateArgumentMessage({ argumentLabel }) -- argumentLabel must be a string"),Cs(s,"getTemplateArgumentMessage({ localization }) -- localization must be defined"),Cs("string"==typeof s,"getTemplateArgumentMessage({ localization }) -- localization must be a string"),Cs(null!=u,"getTemplateArgumentMessage({ template }) -- template must be defined"),Cs("object"===$c(u),"getTemplateArgumentMessage({ template }) -- template must be an object"),Cs("InteractionTemplate"==typeof u.f_type,"getTemplateArgumentMessage({ template }) -- template object must be an InteractionTemplate"),u.f_version){case"1.1.0":var l=null==u||null===(t=u.data)||void 0===t||null===(t=t.parameters)||void 0===t?void 0:t.find((function(e){return e.label===a}));if(!l)return;var h=null==l||null===(r=l.messages)||void 0===r?void 0:r.find((function(e){return e.key===c}));if(!h)return;var f=null==h||null===(n=h.i18n)||void 0===n?void 0:n.find((function(e){return e.tag===s}));if(!f)return;return f.translation;case"1.0.0":return null==u||null===(i=u.data)||void 0===i||null===(i=i.arguments)||void 0===i||null===(i=i[a])||void 0===i||null===(i=i.messages)||void 0===i||null===(i=i[c])||void 0===i||null===(i=i.i18n)||void 0===i?void 0:i[s];default:throw new Error("getTemplateArgumentMessage Error: Unsupported template version")}},getTemplateMessage:function(e){var t,r,n,i=e.localization,o=void 0===i?"en-US":i,s=e.messageKey,a=e.template;switch(Cs(s,"getTemplateMessage({ messageKey }) -- messageKey must be defined"),Cs("string"==typeof s,"getTemplateMessage({ messageKey }) -- messageKey must be a string"),Cs(o,"getTemplateMessage({ localization }) -- localization must be defined"),Cs("string"==typeof o,"getTemplateMessage({ localization }) -- localization must be a string"),Cs(null!=a,"getTemplateMessage({ template }) -- template must be defined"),Cs("object"===$c(a),"getTemplateMessage({ template }) -- template must be an object"),Cs("InteractionTemplate"==typeof a.f_type,"getTemplateMessage({ template }) -- template object must be an InteractionTemplate"),a.f_version){case"1.1.0":var c=null==a||null===(t=a.data)||void 0===t||null===(t=t.messages)||void 0===t?void 0:t.find((function(e){return e.key===s}));if(!c)return;var u=null==c||null===(r=c.i18n)||void 0===r?void 0:r.find((function(e){return e.tag===o}));if(!u)return;return u.translation;case"1.0.0":return null==a||null===(n=a.data)||void 0===n||null===(n=n.messages)||void 0===n||null===(n=n[s])||void 0===n||null===(n=n.i18n)||void 0===n?void 0:n[o];default:throw new Error("getTemplateArgumentMessage Error: Unsupported template version")}},verifyDependencyPinsSame:dh,verifyDependencyPinsSameAtLatestSealedBlock:function(e){return gh.apply(this,arguments)},verifyGeneratedTemplateId:function(e){return sh.apply(this,arguments)}});function yh(e,t){return vh.apply(this,arguments)}function vh(){return vh=Wc(Nc().mark((function e(t,r){var n,i,o,s,a,c;return Nc().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=t&&null!=r){e.next=2;break}return e.abrupt("return",[]);case 2:return(n=new Cu(t)).searchParams.append("code",r),e.next=6,fetch(n,{method:"GET",headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()}));case 6:if(i=e.sent,!Array.isArray(i)){e.next=9;break}return e.abrupt("return",i);case 9:if(o=[],Array.isArray(i.authorizations)){s=Oc(i.authorizations);try{for(s.s();!(a=s.n()).done;)c=a.value,o.push(Mc({type:"authz",keyId:i.keyId},c))}catch(e){s.e(e)}finally{s.f()}}return null!=i.provider&&o.push(Mc({type:"authn",id:"wallet-provider#authn"},i.provider)),e.abrupt("return",o);case 13:case"end":return e.stop()}}),e)}))),vh.apply(this,arguments)}function bh(){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return[].concat(Ic(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]),Ic(e))}function wh(e){return null==e?null:e.f_vsn?"1.0.0"===e.f_vsn?e:null:Mc(Mc({old:e},Lu),{},{type:"frame",endpoint:e.endpoint,params:e.params||{},data:e.data||{}})}function Eh(e){return null==e?null:e.f_vsn?"1.0.0"===e.f_vsn?e:null:Mc(Mc({},Lu),{},{type:"back-channel-rpc",endpoint:e.endpoint,method:e.method,params:e.params||{},data:e.data||{}})}function Ah(e){return null==e?null:(null==e.method&&(e=Mc(Mc({},e),{},{type:"local-view",method:"VIEW/IFRAME"})),e.f_vsn?"1.0.0"===e.f_vsn?e:null:Mc(Mc({},Lu),{},{type:e.type||"local-view",method:e.method,endpoint:e.endpoint,data:e.data||{},params:e.params||{}}))}function _h(e,t){return e.map((function(e){return function(e,t){try{return xh[e.type](e,t)}catch(t){return console.error("Unrecognized FCL Service Type [".concat(e.type,"]"),e,t),e}}(e,t)})).filter(Boolean)}var xh={"back-channel-rpc":Eh,"pre-authz":function(e){return null==e?null:e.f_vsn?"1.0.0"===e.f_vsn?e:null:Mc(Mc({},Lu),{},{type:e.type,uid:e.id,endpoint:e.endpoint,method:e.method,identity:Mc(Mc({},Bu),{},{address:bt(e.addr),keyId:e.keyId}),params:e.params,data:e.data})},authz:function(e){return null==e?null:e.f_vsn?"1.0.0"===e.f_vsn?e:null:Mc(Mc({},Lu),{},{type:e.type,uid:e.id,endpoint:e.endpoint,method:e.method,identity:Mc(Mc({},Bu),{},{address:bt(e.addr),keyId:e.keyId}),params:e.params,data:e.data})},authn:function(e){return null==e?null:e.f_vsn?"1.0.0"===e.f_vsn?e:null:Mc(Mc({},Lu),{},{type:e.type,uid:e.id,endpoint:e.authn,id:e.pid,provider:{address:bt(e.addr),name:e.name,icon:e.icon}})},frame:wh,"open-id":function(e){return null==e?null:"1.0.0"===e.f_vsn?e:null},"user-signature":function(e){if(null==e)return null;if(!e.f_vsn)throw new Error("Invalid user-signature service");return"1.0.0"===e.f_vsn?e:null},"local-view":Ah,"account-proof":function(e){if(null==e)return null;if(!e.f_vsn)throw new Error("FCL Normalizer Error: Invalid account-proof service");return"1.0.0"===e.f_vsn?e:null},"authn-refresh":function(e){if(null==e)return null;if(!e.f_vsn)throw new Error("Invalid authn-refresh service");return"1.0.0"===e.f_vsn?e:null}};function Sh(){var e=arguments.length>1?arguments[1]:void 0;return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).reduce((function(t,r){return r.type===e&&(!t||function(e,t){if("string"!=typeof e||"string"!=typeof t)throw new Error("Invalid input");var r=e.match(Sc),n=t.match(Sc);if(!r||!n)throw new Error("Invalid input");for(var i=1;i<=3;i++){if(parseInt(r[i])>parseInt(n[i]))return 1;if(parseInt(r[i])<parseInt(n[i]))return-1}if(r[4]&&n[4])for(var o=(r[4]||"").split("."),s=(n[4]||"").split("."),a=0;a<Math.max(o.length,s.length);a++){if(void 0===o[a])return-1;if(void 0===s[a])return 1;var c=xc(o[a],s[a]);if(0!==c)return c}return 0}(r.f_vsn,t.f_vsn)>0)?r:t}),null)}function kh(e){var t,r;return ft([(null===(t=e.provider)||void 0===t?void 0:t.address)||(null===(r=e.provider)||void 0===r?void 0:r.name)||"UNSPECIFIED",e.id]).toString("hex")}function Ih(e){return e.addr=e.addr?bt(e.addr):null,e.paddr=e.paddr?bt(e.paddr):null,e}function Oh(e){return Th.apply(this,arguments)}function Th(){return(Th=Wc(Nc().mark((function e(t){var r,n;return Nc().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Ih(t),e.t0=_h,e.t1=bh,e.t2=t.services||[],e.next=6,yh(t.hks,t.code);case 6:return e.t3=e.sent,e.t4=(0,e.t1)(e.t2,e.t3),r=(0,e.t0)(e.t4),n=Sh(r,"authn"),e.abrupt("return",Mc(Mc({},Uu),{},{addr:bt(t.addr),cid:kh(n),loggedIn:!0,services:r,expiresAt:t.expires}));case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Ph="undefined"==typeof window,Rh=globalThis.AbortController||r(5568),Nh=function(){var e=Wc(Nc().mark((function e(t){var r,n,i,o,s,a,c,u;return Nc().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.service,n=t.body,i=t.config,o=t.abortSignal,s=t.customRpc,a=t.user,c=t.opts,u=Tl().getStrategy(r.method),e.abrupt("return",u({service:r,body:n,config:i,abortSignal:o,customRpc:s,opts:c,user:a}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();function Ch(e){return Mh.apply(this,arguments)}function Mh(){return Mh=Wc(Nc().mark((function e(t){var r,n,i,o,s,a,c,u,l,h,f,d,p,g,m,y;return Nc().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.service,o=t.msg,s=void 0===o?{}:o,a=t.config,c=void 0===a?{}:a,u=t.opts,l=void 0===u?{}:u,h=t.platform,f=t.abortSignal,d=void 0===f?(new Rh).signal:f,p=t.execStrategy,g=t.user,Ph||Tl().getStrategies().includes("WC/RPC")||I({title:"FCL WalletConnect Service Plugin",level:S.error,message:"All dApps are expected to register for a WalletConnect projectId & add this to their FCL configuration.  If you do not do so, users will be unable to use certain wallets to interact with your dApp.  See https://developers.flow.com/tools/clients/fcl-js/configure-fcl for more information."}),s.data=i.data,e.next=5,Xu(/^service\./);case 5:return e.t0=e.sent,e.next=8,Xu(/^app\.detail\./);case 8:return e.t1=e.sent,e.t2=Mc,e.t3=Mc({},c.client),e.t4={},e.t5=h,e.t6=Jc,e.t7=null!==(r=null===(n=window)||void 0===n||null===(n=n.location)||void 0===n?void 0:n.hostname)&&void 0!==r?r:null,e.next=17,bu(l);case 17:return e.t8=e.sent,e.t9={platform:e.t5,fclVersion:e.t6,fclLibrary:"https://github.com/onflow/fcl-js",hostname:e.t7,network:e.t8},e.t10=(0,e.t2)(e.t3,e.t4,e.t9),m={services:e.t0,app:e.t1,client:e.t10},e.prev=21,e.next=24,(p||Nh)({service:i,body:s,config:m,opts:l,user:g,abortSignal:d});case 24:if("REDIRECT"!==(y=e.sent).status){e.next=32;break}return O(i.type===y.data.type,"Cannot shift recursive service type in execService"),e.next=29,Ch({service:y.data,msg:s,config:m,opts:l,abortSignal:d,platform:h,user:g});case 29:return e.abrupt("return",e.sent);case 32:return e.abrupt("return",y);case 33:e.next=39;break;case 35:throw e.prev=35,e.t11=e.catch(21),I({title:"Error on execService ".concat(null==i?void 0:i.type),message:e.t11,level:S.error}),e.t11;case 39:case"end":return e.stop()}}),e,null,[[21,35]])}))),Mh.apply(this,arguments)}function Lh(e){return null==e?null:e.f_vsn?"1.0.0"===e.f_vsn?e:null:Mc(Mc({},ju),{},{addr:vt(e.addr||e.address),signature:e.signature||e.sig,keyId:e.keyId})}var Bh=function(e){return"function"==typeof e},Uh="CURRENT_USER",Dh="CURRENT_USER/UPDATED",jh="SNAPSHOT",Fh="SET_CURRENT_USER",zh="DEL_CURRENT_USER",qh='{\n  "f_type": "User",\n  "f_vsn": "1.0.0",\n  "addr":null,\n  "cid":null,\n  "loggedIn":null,\n  "expiresAt":null,\n  "services":[]\n}',Gh=function(){var e=Wc(Nc().mark((function e(t){var r,n;return Nc().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=JSON.parse(qh),e.next=3,t.get(Uh);case 3:if(null==(n=e.sent)||r.f_vsn===n.f_vsn){e.next=7;break}return t.removeItem(Uh),e.abrupt("return",r);case 7:return e.abrupt("return",n||r);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Hh=function(e){return ue(function(e){var t,r,n,i,o=function(){var t=Wc(Nc().mark((function t(){return Nc().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.getStorageProvider){t.next=4;break}return t.next=3,e.getStorageProvider();case 3:case 6:return t.abrupt("return",t.sent);case 4:return t.next=6,ct.first(["fcl.storage","fcl.storage.default"]);case 7:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return Lc(Lc(Lc(Lc(Lc(Lc({},Y,(i=Wc(Nc().mark((function e(t){var r,n;return Nc().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"undefined"==typeof window&&console.warn('\n        %cFCL Warning\n        ============================\n        "currentUser" is only available in the browser.\n        For more info, please see the docs: https://docs.onflow.org/fcl/\n        ============================\n        ',"font-weight:bold;font-family:monospace;"),t.merge(JSON.parse(qh)),e.next=4,o();case 4:if(!(r=e.sent).can){e.next=10;break}return e.next=8,Gh(r);case 8:Kh(n=e.sent)&&t.merge(n);case 10:case"end":return e.stop()}}),e)}))),function(e){return i.apply(this,arguments)})),Q,(function(e,t){e.subscribe(t.from),e.send(t.from,Dh,Mc({},e.all()))})),X,(function(e,t){e.unsubscribe(t.from)})),jh,(n=Wc(Nc().mark((function e(t,r){return Nc().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r.reply(Mc({},t.all()));case 1:case"end":return e.stop()}}),e)}))),function(e,t){return n.apply(this,arguments)})),Fh,(r=Wc(Nc().mark((function e(t,r,n){var i;return Nc().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.merge(n),e.next=3,o();case 3:(i=e.sent).can&&i.put(Uh,t.all()),t.broadcast(Dh,Mc({},t.all()));case 6:case"end":return e.stop()}}),e)}))),function(e,t,n){return r.apply(this,arguments)})),zh,(t=Wc(Nc().mark((function e(t,r){var n;return Nc().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.merge(JSON.parse(qh)),e.next=3,o();case 3:(n=e.sent).can&&n.put(Uh,t.all()),t.broadcast(Dh,Mc({},t.all()));case 6:case"end":return e.stop()}}),e)}))),function(e,r){return t.apply(this,arguments)}))}(e),Uh)};function Kh(e){return null==e.expiresAt||0===e.expiresAt||e.expiresAt>Date.now()}function Vh(){return Wh.apply(this,arguments)}function Wh(){return(Wh=Wc(Nc().mark((function e(){var t,r;return Nc().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ct.get("fcl.accountProof.resolver");case 2:if(null!=(t=e.sent)){e.next=5;break}return e.abrupt("return");case 5:if(Bh(t)){e.next=8;break}return I({title:"Account Proof Data Resolver must be a function",message:"Check fcl.accountProof.resolver configuration.\n                Expected: fcl.accountProof.resolver: async () => { ... }\n                Received: fcl.accountProof.resolver: ".concat($c(t),"\n                "),level:S.warn}),e.abrupt("return");case 8:return e.next=10,t();case 10:if(null!=(r=e.sent)){e.next=13;break}return e.abrupt("return");case 13:return O("string"==typeof r.appIdentifier,"appIdentifier must be a string"),O(/^[0-9a-f]+$/i.test(r.nonce),"Nonce must be a hex string"),e.abrupt("return",r);case 16:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var $h=function(){var e=Wc(Nc().mark((function e(t){var r,n,i;return Nc().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.discoveryAuthnInclude,n=t.discoveryAuthnExclude,i=t.discoveryFeaturesSuggested,e.t0=r,e.t1=n,e.t2=i,e.next=6,Rl();case 6:return e.t3=e.sent,e.t4=Tl().getStrategies(),e.t5={discoveryAuthnInclude:e.t0,discoveryAuthnExclude:e.t1,discoveryFeaturesSuggested:e.t2,clientServices:e.t3,supportedStrategies:e.t4},e.abrupt("return",{client:e.t5});case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Jh=function(e){return Wc(Nc().mark((function t(){var r,n,i,o,s,a,c,u=arguments;return Nc().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(o=(i=u.length>0&&void 0!==u[0]?u[0]:{}).service,s=i.redir,a=void 0!==s&&s,!o||null!=o&&null!==(r=o.provider)&&void 0!==r&&r.is_installed||null==o||null===(n=o.provider)||void 0===n||!n.requires_install){t.next=4;break}return window.location.href=null==o||null===(c=o.provider)||void 0===c?void 0:c.install_link,t.abrupt("return");case 4:return t.abrupt("return",new Promise(function(){var t=Wc(Nc().mark((function t(r,n){var i,s,c,u,l,h,f,d;return Nc().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return Hh(e),i={redir:a},t.next=4,ef(e)();case 4:return s=t.sent,t.next=7,Nl(o);case 7:if(c=t.sent,u=Sh(s.services,"authn-refresh"),!s.loggedIn){t.next=37;break}if(!u){t.next=36;break}return t.prev=11,t.next=14,Ch({service:u,msg:l,opts:i,platform:e.platform,user:s});case 14:return h=t.sent,t.t0=ae,t.t1=Uh,t.t2=Fh,t.next=20,Oh(h);case 20:t.t3=t.sent,(0,t.t0)(t.t1,t.t2,t.t3),t.next=27;break;case 24:t.prev=24,t.t4=t.catch(11),I({title:"".concat(t.t4.name," Could not refresh wallet authentication."),message:t.t4.message,level:S.error});case 27:return t.prev=27,t.t5=r,t.next=31,ef(e)();case 31:return t.t6=t.sent,t.abrupt("return",(0,t.t5)(t.t6));case 34:t.next=37;break;case 36:return t.abrupt("return",r(s));case 37:return t.prev=37,t.next=40,Vh();case 40:l=t.sent,t.next=47;break;case 43:return t.prev=43,t.t7=t.catch(37),I({title:"".concat(t.t7.name," On Authentication: Could not resolve account proof data."),message:t.t7.message,level:S.error}),t.abrupt("return",n(t.t7));case 47:return t.prev=47,t.t8=Ch,t.t9=c,t.t10=l,t.next=53,$h(c);case 53:return t.t11=t.sent,t.t12=i,t.t13=e.platform,t.t14=null===(f=e.discovery)||void 0===f?void 0:f.execStrategy,t.t15=s,t.t16={service:t.t9,msg:t.t10,config:t.t11,opts:t.t12,platform:t.t13,execStrategy:t.t14,user:t.t15},t.next=61,(0,t.t8)(t.t16);case 61:return d=t.sent,t.t17=ae,t.t18=Uh,t.t19=Fh,t.next=67,Oh(d);case 67:t.t20=t.sent,(0,t.t17)(t.t18,t.t19,t.t20),t.next=74;break;case 71:t.prev=71,t.t21=t.catch(47),I({title:"".concat(t.t21," On Authentication"),message:t.t21,level:S.error});case 74:return t.prev=74,t.t22=r,t.next=78,ef(e)();case 78:return t.t23=t.sent,(0,t.t22)(t.t23),t.finish(74);case 81:case"end":return t.stop()}}),t,null,[[11,24,27,34],[37,43],[47,71,74,81]])})));return function(e,r){return t.apply(this,arguments)}}()));case 5:case"end":return t.stop()}}),t)})))};function Yh(e){return function(){Hh(e),ae(Uh,zh)}}var Qh=function(e){return function(t,r){var n=r.user,i=function(e){return{f_type:"PreAuthzResponse",f_vsn:"1.0.0",proposer:(e||{}).proposer,payer:(e||{}).payer||[],authorization:(e||{}).authorization||[]}}(t),o=[];null!=i.proposer&&o.push(["PROPOSER",i.proposer]);var s,a=Oc(i.payer||[]);try{for(a.s();!(s=a.n()).done;){var c=s.value;o.push(["PAYER",c])}}catch(e){a.e(e)}finally{a.f()}var u,l=Oc(i.authorization||[]);try{for(l.s();!(u=l.n()).done;){var h=u.value;o.push(["AUTHORIZER",h])}}catch(e){l.e(e)}finally{l.f()}var f=o.map((function(t){var r=kc(t,2),i=r[0],o=r[1];return{tempId:[o.identity.address,o.identity.keyId].join("|"),addr:o.identity.address,keyId:o.identity.keyId,signingFunction:function(t){return Ch({service:o,msg:t,platform:e.platform,user:n})},role:{proposer:"PROPOSER"===i,payer:"PAYER"===i,authorizer:"AUTHORIZER"===i}}}));return f}},Xh=function(e){return function(){var t=Wc(Nc().mark((function t(r){return Nc().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return Hh(e),t.abrupt("return",Mc(Mc({},r),{},{tempId:"CURRENT_USER",resolve:function(t,r){return Wc(Nc().mark((function n(){var i,o,s;return Nc().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Jh(e)({redir:!0});case 2:if(i=n.sent,o=Sh(i.services,"authz"),!(s=Sh(i.services,"pre-authz"))){n.next=12;break}return n.t0=Qh(e),n.next=9,Ch({service:s,msg:r,platform:e.platform,user:i});case 9:return n.t1=n.sent,n.t2={user:i},n.abrupt("return",(0,n.t0)(n.t1,n.t2));case 12:if(!o){n.next=14;break}return n.abrupt("return",Mc(Mc({},t),{},{tempId:"CURRENT_USER",resolve:null,addr:vt(o.identity.address),keyId:o.identity.keyId,sequenceNum:null,signature:null,signingFunction:function(t){return Wc(Nc().mark((function r(){return Nc().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=Lh,r.next=3,Ch({service:o,msg:t,opts:{includeOlderJsonRpcCall:!0},platform:e.platform,user:i});case 3:return r.t1=r.sent,r.abrupt("return",(0,r.t0)(r.t1));case 5:case"end":return r.stop()}}),r)})))()}}));case 14:throw new Error("No Authz or PreAuthz Service configured for CURRENT_USER");case 15:case"end":return n.stop()}}),n)})))()}}));case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()};function Zh(e){return function(t){Hh(e);var r="@EXIT",n=ue(function(){var e=Wc(Nc().mark((function e(n){var i;return Nc().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n.send(Uh,Q);case 1:return e.next=4,n.receive();case 4:if((i=e.sent).tag!==r){e.next=8;break}return n.send(Uh,X),e.abrupt("return");case 8:t(i.data),e.next=1;break;case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());return function(){return ae(n,r)}}}function ef(e){return function(){return Hh(e),ae(Uh,jh,null,{expectReply:!0,timeout:0})}}var tf=function(e){return Wc(Nc().mark((function t(){var r,n;return Nc().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Jh(e)();case 2:return r=t.sent,n=r.addr,t.abrupt("return",sa(bt(n),lc));case 5:case"end":return t.stop()}}),t)})))},rf=function(e){return O(/^[0-9a-f]+$/i.test(e),"Message must be a hex string"),{message:e}},nf=function(e){return function(){var t=Wc(Nc().mark((function t(r){var n,i,o;return Nc().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return Hh(e),t.next=3,Jh(e)({redir:!0});case 3:return n=t.sent,O(i=Sh(n.services,"user-signature"),"Current user must have authorized a signing service."),t.prev=6,t.next=9,Ch({service:i,msg:rf(r),platform:e.platform,user:n});case 9:if(o=t.sent,!Array.isArray(o)){t.next=14;break}return t.abrupt("return",o.map((function(e){return Lh(e)})));case 14:return t.abrupt("return",[Lh(o)]);case 15:t.next=20;break;case 17:return t.prev=17,t.t0=t.catch(6),t.abrupt("return",t.t0);case 20:case"end":return t.stop()}}),t,null,[[6,17]])})));return function(e){return t.apply(this,arguments)}}()},of=function(e){var t={authenticate:Jh(e),unauthenticate:Yh(e),authorization:Xh(e),signUserMessage:nf(e),subscribe:Zh(e),snapshot:ef(e),resolveArgument:tf(e)};return Object.assign((function(){return Mc({},t)}),Mc({},t))};function sf(e){var t,r=new Cu(e.endpoint);if(null!==(t=window)&&void 0!==t&&null!==(t=t.location)&&void 0!==t&&t.origin&&r.searchParams.append("l6n",window.location.origin),null!=e.params)for(var n=0,i=Object.entries(e.params||{});n<i.length;n++){var o=kc(i[n],2),s=o[0],a=o[1];r.searchParams.append(s,a)}return r}function af(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.method||"POST",n="GET"===r?void 0:JSON.stringify(t.data||e.data||{});return fetch(sf(e),{method:r,headers:Mc(Mc(Mc({},e.headers||{}),t.headers||{}),{},{"Content-Type":"application/json"}),body:n}).then((function(e){return e.json()}))}function cf(e){return null==e?null:e.f_vsn?"1.0.0"===e.f_vsn?e:null:Mc(Mc({},Du),{},{status:null!==(t=e.status)&&void 0!==t?t:"APPROVED",reason:null!==(r=e.reason)&&void 0!==r?r:null,data:e.compositeSignature||e.data||Mc({},e)||{},updates:Eh(e.authorizationUpdates),local:wh((e.local||[])[0])});var t,r}var uf={"HTTP/GET":"GET","HTTP/POST":"POST"},lf=function(e){return O(uf[e.method],"Invalid Service Method for type back-channel-rpc",{service:e}),uf[e.method]};function hf(e){return ff.apply(this,arguments)}function ff(){return ff=Wc(Nc().mark((function e(t){var r,n,i=arguments;return Nc().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=i.length>1&&void 0!==i[1]?i[1]:function(){return!0},O(t,"Missing Polling Service",{service:t}),r()){e.next=5;break}throw new Error("Externally Halted");case 5:if(e.prev=5,"undefined"==typeof document||"hidden"!==document.visibilityState){e.next=10;break}return e.next=9,new Promise((function(e){return setTimeout(e,500)}));case 9:return e.abrupt("return",hf(t,r));case 10:return e.next=12,af(t,{method:lf(t)}).then(cf);case 12:n=e.sent,e.next=18;break;case 15:throw e.prev=15,e.t0=e.catch(5),e.t0;case 18:e.t1=n.status,e.next="APPROVED"===e.t1?21:"DECLINED"===e.t1?22:23;break;case 21:return e.abrupt("return",n.data);case 22:throw new Error("Declined: ".concat(n.reason||"No reason supplied."));case 23:return e.next=25,new Promise((function(e){return setTimeout(e,500)}));case 25:return e.abrupt("return",hf(n.updates,r));case 26:case"end":return e.stop()}}),e,null,[[5,15]])}))),ff.apply(this,arguments)}var df=function(e){return function(){var t=Wc(Nc().mark((function t(r){var n,i,o,s,a,c,u,l,h,f,d;return Nc().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=r.service,i=r.body,o=r.config,r.opts,t.next=3,af(n,{data:Mc({fclVersion:Jc,service:{params:n.params,data:n.data,type:n.type},config:o},i)}).then(cf);case 3:if("APPROVED"!==(s=t.sent).status){t.next=8;break}return t.abrupt("return",s.data);case 8:if("DECLINED"!==s.status){t.next=12;break}throw new Error("Declined: ".concat(s.reason||"No reason supplied."));case 12:if("REDIRECT"!==s.status){t.next=16;break}return t.abrupt("return",s);case 16:if("PENDING"!==s.status){t.next=30;break}return a=!0,c=!0,t.next=21,e(Ah(s.local),{serviceEndpoint:sf,onClose:function(){return c=!1}});case 21:return u=t.sent,(l=kc(u,2))[0],h=l[1],f=function(){try{h(),c=!1}catch(e){console.error("Frame Close Error",e)}},d=function(){var e=a;return a=c,e},t.abrupt("return",hf(s.updates,d).then((function(e){return f(),e})).catch((function(e){throw console.error(e),f(),e})));case 30:throw console.error("Auto Decline: Invalid Response",{service:n,resp:s}),new Error("Auto Decline: Invalid Response");case 32:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},pf="FCL:VIEW:CLOSE",gf="FCL:VIEW:READY",mf="FCL:VIEW:RESPONSE",yf=function(e){return"string"==typeof e&&e.toLowerCase()},vf=new Set(["monetizationstart","monetizationpending","monetizationprogress","monetizationstop"]),bf=function(e,t){return console.warn("DEPRECATION NOTICE","Received ".concat(e,", please use ").concat(t," for this and future versions of FCL"))},wf=function(e){var t,r=e.close,n=e.send,i=e.onReady,o=e.onResponse,s=e.onMessage,a=e.onCustomRpc,c=e.getSource;return function(e){try{t=(null==c?void 0:c())||t}catch(e){t=null}try{if("object"!==$c(e.data))return;if(vf.has(e.data.type))return;if(null!=t&&e.source!==t)return;yf(e.data.type)===yf(pf)&&r(),yf(e.data.type)===yf(gf)&&(i(e,{send:n,close:r}),t||(t=e.source)),yf(e.data.type)===yf(mf)&&o(e,{send:n,close:r}),yf(e.data.type)===yf("FCL:VIEW:CUSTOM_RPC")&&a(e.data.payload,{send:n,close:r}),s(e,{send:n,close:r}),yf(e.data.type)===yf("FCL:FRAME:READY")&&(bf(e.data.type,gf),i(e,{send:n,close:r}),t||(t=e.source)),yf(e.data.type)===yf("FCL:FRAME:RESPONSE")&&(bf(e.data.type,mf),o(e,{send:n,close:r})),yf(e.data.type)===yf("FCL:FRAME:CLOSE")&&(bf(e.data.type,pf),r()),yf(e.data.type)===yf("FCL::CHALLENGE::RESPONSE")&&(bf(e.data.type,mf),o(e,{send:n,close:r})),yf(e.data.type)===yf("FCL::AUTHZ_READY")&&(bf(e.data.type,gf),i(e,{send:n,close:r}),t||(t=e.source)),yf(e.data.type)===yf("FCL::CHALLENGE::CANCEL")&&(bf(e.data.type,pf),r()),yf(e.data.type)===yf("FCL::CANCEL")&&(bf(e.data.type,pf),r())}catch(e){console.error("Frame Callback Error",e),r()}}};function Ef(e){return Ef="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ef(e)}function Af(){Af=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,i=Object.defineProperty||function(e,t,r){e[t]=r.value},o="function"==typeof Symbol?Symbol:{},s=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function u(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,r){return e[t]=r}}function l(e,t,r,n){var o=t&&t.prototype instanceof y?t:y,s=Object.create(o.prototype),a=new P(n||[]);return i(s,"_invoke",{value:k(e,r,a)}),s}function h(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=l;var f="suspendedStart",d="suspendedYield",p="executing",g="completed",m={};function y(){}function v(){}function b(){}var w={};u(w,s,(function(){return this}));var E=Object.getPrototypeOf,A=E&&E(E(R([])));A&&A!==r&&n.call(A,s)&&(w=A);var _=b.prototype=y.prototype=Object.create(w);function x(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function S(e,t){function r(i,o,s,a){var c=h(e[i],e,o);if("throw"!==c.type){var u=c.arg,l=u.value;return l&&"object"==Ef(l)&&n.call(l,"__await")?t.resolve(l.__await).then((function(e){r("next",e,s,a)}),(function(e){r("throw",e,s,a)})):t.resolve(l).then((function(e){u.value=e,s(u)}),(function(e){return r("throw",e,s,a)}))}a(c.arg)}var o;i(this,"_invoke",{value:function(e,n){function i(){return new t((function(t,i){r(e,n,t,i)}))}return o=o?o.then(i,i):i()}})}function k(t,r,n){var i=f;return function(o,s){if(i===p)throw Error("Generator is already running");if(i===g){if("throw"===o)throw s;return{value:e,done:!0}}for(n.method=o,n.arg=s;;){var a=n.delegate;if(a){var c=I(a,n);if(c){if(c===m)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(i===f)throw i=g,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);i=p;var u=h(t,r,n);if("normal"===u.type){if(i=n.done?g:d,u.arg===m)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(i=g,n.method="throw",n.arg=u.arg)}}}function I(t,r){var n=r.method,i=t.iterator[n];if(i===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,I(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),m;var o=h(i,t.iterator,r.arg);if("throw"===o.type)return r.method="throw",r.arg=o.arg,r.delegate=null,m;var s=o.arg;return s?s.done?(r[t.resultName]=s.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,m):s:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,m)}function O(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function T(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function P(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(O,this),this.reset(!0)}function R(t){if(t||""===t){var r=t[s];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var i=-1,o=function r(){for(;++i<t.length;)if(n.call(t,i))return r.value=t[i],r.done=!1,r;return r.value=e,r.done=!0,r};return o.next=o}}throw new TypeError(Ef(t)+" is not iterable")}return v.prototype=b,i(_,"constructor",{value:b,configurable:!0}),i(b,"constructor",{value:v,configurable:!0}),v.displayName=u(b,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===v||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,b):(e.__proto__=b,u(e,c,"GeneratorFunction")),e.prototype=Object.create(_),e},t.awrap=function(e){return{__await:e}},x(S.prototype),u(S.prototype,a,(function(){return this})),t.AsyncIterator=S,t.async=function(e,r,n,i,o){void 0===o&&(o=Promise);var s=new S(l(e,r,n,i),o);return t.isGeneratorFunction(r)?s:s.next().then((function(e){return e.done?e.value:s.next()}))},x(_),u(_,c,"Generator"),u(_,s,(function(){return this})),u(_,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=R,P.prototype={constructor:P,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(T),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function i(n,i){return a.type="throw",a.arg=t,r.next=n,i&&(r.method="next",r.arg=e),!!i}for(var o=this.tryEntries.length-1;o>=0;--o){var s=this.tryEntries[o],a=s.completion;if("root"===s.tryLoc)return i("end");if(s.tryLoc<=this.prev){var c=n.call(s,"catchLoc"),u=n.call(s,"finallyLoc");if(c&&u){if(this.prev<s.catchLoc)return i(s.catchLoc,!0);if(this.prev<s.finallyLoc)return i(s.finallyLoc)}else if(c){if(this.prev<s.catchLoc)return i(s.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<s.finallyLoc)return i(s.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var s=o?o.completion:{};return s.type=e,s.arg=t,o?(this.method="next",this.next=o.finallyLoc,m):this.complete(s)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),m},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),T(r),m}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var i=n.arg;T(r)}return i}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:R(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),m}},t}function _f(e,t,r,n,i,o,s){try{var a=e[o](s),c=a.value}catch(e){return void r(e)}a.done?t(c):Promise.resolve(c).then(n,i)}function xf(e){return function(){var t=this,r=arguments;return new Promise((function(n,i){var o=e.apply(t,r);function s(e){_f(o,n,i,s,a,"next",e)}function a(e){_f(o,n,i,s,a,"throw",e)}s(void 0)}))}}function Sf(e,t,r){return(t=Of(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function kf(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Of(n.key),n)}}function If(e,t,r){return t&&kf(e.prototype,t),r&&kf(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function Of(e){var t=function(e){if("object"!=Ef(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=Ef(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Ef(t)?t:t+""}function Tf(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Pf(e){var t="function"==typeof Map?new Map:void 0;return Pf=function(e){if(null===e||!function(e){try{return-1!==Function.toString.call(e).indexOf("[native code]")}catch(t){return"function"==typeof e}}(e))return e;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,r)}function r(){return function(e,t,r){if(Rf())return Reflect.construct.apply(null,arguments);var n=[null];n.push.apply(n,t);var i=new(e.bind.apply(e,n));return r&&Nf(i,r.prototype),i}(e,arguments,Cf(this).constructor)}return r.prototype=Object.create(e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),Nf(r,e)},Pf(e)}function Rf(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Rf=function(){return!!e})()}function Nf(e,t){return Nf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Nf(e,t)}function Cf(e){return Cf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Cf(e)}ct.subscribe((function(){bu({enableRequestLogging:!1}).catch((function(){}))}));var Mf=function(e){return e[e.INVALID_REQUEST=-32600]="INVALID_REQUEST",e[e.METHOD_NOT_FOUND=-32601]="METHOD_NOT_FOUND",e[e.INVALID_PARAMS=-32602]="INVALID_PARAMS",e[e.INTERNAL_ERROR=-32603]="INTERNAL_ERROR",e[e.PARSE_ERROR=-32700]="PARSE_ERROR",e}({}),Lf=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Nf(e,t)}(r,e);var t=function(e){var t=Rf();return function(){var r,n=Cf(e);if(t){var i=Cf(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"==Ef(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}(r);function r(e,n,i){var o;return Tf(this,r),(o=t.call(this,n)).code=e,o.message=n,o.data=i,o}return If(r)}(Pf(Error)),Bf=function(e){return e.HELLO="rpc_hello",e}(Bf||{}),Uf=function(){function e(t){var r=this;Tf(this,e),Sf(this,"id",0),Sf(this,"setSend",(function(){})),Sf(this,"_send",new Promise((function(e){r.setSend=e}))),Sf(this,"peerInfo",new Promise((function(e,t){r.resolvePeerInfo=e,r.rejectPeerInfo=t}))),Sf(this,"enabledNotifications",[]),Sf(this,"requestHandlers",{}),Sf(this,"subscriptions",{}),Sf(this,"messageListeners",[]);var n=t.notifications;this.enabledNotifications=n||[],this.on(Bf.HELLO,(function(e){return r.resolvePeerInfo(e),r.ownInfo()}))}var t,r,n,i,o,s,a;return If(e,[{key:"connect",value:function(e){var t=this,r=e.send;this.setSend(r),this.requestWithoutConnection(Bf.HELLO,this.ownInfo()).then((function(e){t.resolvePeerInfo(e)})).catch(this.rejectPeerInfo)}},{key:"ownInfo",value:function(){return{requests:Object.keys(this.requestHandlers),notifications:this.enabledNotifications}}},{key:"send",value:function(){var e=xf(Af().mark((function e(t){return Af().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._send;case 2:return e.t0=e.sent,e.abrupt("return",(0,e.t0)(t));case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"receive",value:function(e){"2.0"===(null==e?void 0:e.jsonrpc)&&("method"in e&&("id"in e?this.handleRequest(e):this.handleNotification(e)),this.messageListeners.forEach((function(t){return t(e)})))}},{key:"handleRequest",value:(a=xf(Af().mark((function e(t){var r,n;return Af().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(r=this.requestHandlers[t.method])){e.next=14;break}return e.prev=2,e.next=5,r(t.params);case 5:n=e.sent,this.send({jsonrpc:"2.0",id:t.id,result:n}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),e.t0 instanceof Lf?this.send({jsonrpc:"2.0",id:t.id,error:{code:e.t0.code,message:e.t0.message,data:e.t0.data}}):this.send({jsonrpc:"2.0",id:t.id,error:{code:Mf.INTERNAL_ERROR,message:null===e.t0||void 0===e.t0?void 0:e.t0.message}});case 12:e.next=15;break;case 14:this.send({jsonrpc:"2.0",id:t.id,error:{code:Mf.METHOD_NOT_FOUND,message:"Method not found: ".concat(t.method)}});case 15:case"end":return e.stop()}}),e,this,[[2,9]])}))),function(e){return a.apply(this,arguments)})},{key:"handleNotification",value:function(e){this.subscriptions[e.method]&&this.subscriptions[e.method].forEach((function(t){return t(e.params)}))}},{key:"onMessage",value:function(e){var t=this;return this.messageListeners.push(e),function(){t.messageListeners=t.messageListeners.filter((function(t){return t!==e}))}}},{key:"notify",value:(s=xf(Af().mark((function e(t,r){return Af().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.onceConnected();case 2:this.send({jsonrpc:"2.0",method:t,params:r});case 3:case"end":return e.stop()}}),e,this)}))),function(e,t){return s.apply(this,arguments)})},{key:"request",value:(o=xf(Af().mark((function e(t,r){return Af().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.onceConnected();case 2:return e.abrupt("return",this.requestWithoutConnection(t,r));case 3:case"end":return e.stop()}}),e,this)}))),function(e,t){return o.apply(this,arguments)})},{key:"requestWithoutConnection",value:(i=xf(Af().mark((function e(t,r){var n,i,o,s=this;return Af().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.id++,i=function(){},o=new Promise((function(e,t){i=s.onMessage((function(r){if(r.id===n&&("result"in r||"error"in r)){if(r.error){var i=new Lf(r.error.code,r.error.message,r.error.data);t(i)}e(r.result)}}))})).finally(i),this.send({jsonrpc:"2.0",method:t,params:r,id:n}),e.abrupt("return",o);case 5:case"end":return e.stop()}}),e,this)}))),function(e,t){return i.apply(this,arguments)})},{key:"on",value:function(e,t){this.requestHandlers[e]=t}},{key:"subscribe",value:function(e,t){this.subscriptions[e]=this.subscriptions[e]||new Set,this.subscriptions[e].add(t)}},{key:"unsubscribe",value:function(e,t){var r;null===(r=this.subscriptions[e])||void 0===r||r.delete(t)}},{key:"onceConnected",value:(n=xf(Af().mark((function e(){return Af().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.peerInfo.then((function(){})));case 1:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{key:"getAvailableRequests",value:(r=xf(Af().mark((function e(){return Af().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.peerInfo.then((function(e){return e.requests})));case 1:case"end":return e.stop()}}),e,this)}))),function(){return r.apply(this,arguments)})},{key:"getAvailableNotifications",value:(t=xf(Af().mark((function e(){return Af().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.peerInfo.then((function(e){return e.notifications})));case 1:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})}]),e}(),Df=r(8900);class jf{}class Ff extends jf{constructor(e){super()}}const zf=Df.FIVE_SECONDS,qf="heartbeat_pulse";class Gf extends Ff{constructor(e){super(e),this.events=new Et.EventEmitter,this.interval=zf,this.interval=e?.interval||zf}static async init(e){const t=new Gf(e);return await t.init(),t}async init(){await this.initialize()}stop(){clearInterval(this.intervalRef)}on(e,t){this.events.on(e,t)}once(e,t){this.events.once(e,t)}off(e,t){this.events.off(e,t)}removeListener(e,t){this.events.removeListener(e,t)}async initialize(){this.intervalRef=setInterval((()=>this.pulse()),(0,Df.toMiliseconds)(this.interval))}pulse(){this.events.emit(qf)}}const Hf=/"(?:_|\\u0{2}5[Ff]){2}(?:p|\\u0{2}70)(?:r|\\u0{2}72)(?:o|\\u0{2}6[Ff])(?:t|\\u0{2}74)(?:o|\\u0{2}6[Ff])(?:_|\\u0{2}5[Ff]){2}"\s*:/,Kf=/"(?:c|\\u0063)(?:o|\\u006[Ff])(?:n|\\u006[Ee])(?:s|\\u0073)(?:t|\\u0074)(?:r|\\u0072)(?:u|\\u0075)(?:c|\\u0063)(?:t|\\u0074)(?:o|\\u006[Ff])(?:r|\\u0072)"\s*:/,Vf=/^\s*["[{]|^\s*-?\d{1,16}(\.\d{1,17})?([Ee][+-]?\d+)?\s*$/;function Wf(e,t){if(!("__proto__"===e||"constructor"===e&&t&&"object"==typeof t&&"prototype"in t))return t;!function(e){console.warn(`[destr] Dropping "${e}" key to prevent prototype pollution.`)}(e)}function $f(e,t={}){if("string"!=typeof e)return e;const r=e.trim();if('"'===e[0]&&e.endsWith('"')&&!e.includes("\\"))return r.slice(1,-1);if(r.length<=9){const e=r.toLowerCase();if("true"===e)return!0;if("false"===e)return!1;if("undefined"===e)return;if("null"===e)return null;if("nan"===e)return Number.NaN;if("infinity"===e)return Number.POSITIVE_INFINITY;if("-infinity"===e)return Number.NEGATIVE_INFINITY}if(!Vf.test(e)){if(t.strict)throw new SyntaxError("[destr] Invalid JSON");return e}try{if(Hf.test(e)||Kf.test(e)){if(t.strict)throw new Error("[destr] Possible prototype pollution");return JSON.parse(e,Wf)}return JSON.parse(e)}catch(r){if(t.strict)throw r;return e}}function Jf(e,...t){try{return(r=e(...t))&&"function"==typeof r.then?r:Promise.resolve(r)}catch(e){return Promise.reject(e)}var r}function Yf(e){if(function(e){const t=typeof e;return null===e||"object"!==t&&"function"!==t}(e))return String(e);if(function(e){const t=Object.getPrototypeOf(e);return!t||t.isPrototypeOf(Object)}(e)||Array.isArray(e))return JSON.stringify(e);if("function"==typeof e.toJSON)return Yf(e.toJSON());throw new Error("[unstorage] Cannot stringify value!")}const Qf="base64:";function Xf(e){return e&&e.split("?")[0]?.replace(/[/\\]/g,":").replace(/:+/g,":").replace(/^:|:$/g,"")||""}function Zf(...e){return Xf(e.join(":"))}function ed(e){return(e=Xf(e))?e+":":""}const td=()=>{const e=new Map;return{name:"memory",getInstance:()=>e,hasItem:t=>e.has(t),getItem:t=>e.get(t)??null,getItemRaw:t=>e.get(t)??null,setItem(t,r){e.set(t,r)},setItemRaw(t,r){e.set(t,r)},removeItem(t){e.delete(t)},getKeys:()=>[...e.keys()],clear(){e.clear()},dispose(){e.clear()}}};function rd(e={}){const t={mounts:{"":e.driver||td()},mountpoints:[""],watching:!1,watchListeners:[],unwatch:{}},r=e=>{for(const r of t.mountpoints)if(e.startsWith(r))return{base:r,relativeKey:e.slice(r.length),driver:t.mounts[r]};return{base:"",relativeKey:e,driver:t.mounts[""]}},n=(e,r)=>t.mountpoints.filter((t=>t.startsWith(e)||r&&e.startsWith(t))).map((r=>({relativeBase:e.length>r.length?e.slice(r.length):void 0,mountpoint:r,driver:t.mounts[r]}))),i=(e,r)=>{if(t.watching){r=Xf(r);for(const n of t.watchListeners)n(e,r)}},o=async()=>{if(t.watching){for(const e in t.unwatch)await t.unwatch[e]();t.unwatch={},t.watching=!1}},s=(e,t,n)=>{const i=new Map,o=e=>{let t=i.get(e.base);return t||(t={driver:e.driver,base:e.base,items:[]},i.set(e.base,t)),t};for(const n of e){const e="string"==typeof n,i=Xf(e?n:n.key),s=e?void 0:n.value,a=e||!n.options?t:{...t,...n.options},c=r(i);o(c).items.push({key:i,value:s,relativeKey:c.relativeKey,options:a})}return Promise.all([...i.values()].map((e=>n(e)))).then((e=>e.flat()))},a={hasItem(e,t={}){e=Xf(e);const{relativeKey:n,driver:i}=r(e);return Jf(i.hasItem,n,t)},getItem(e,t={}){e=Xf(e);const{relativeKey:n,driver:i}=r(e);return Jf(i.getItem,n,t).then((e=>$f(e)))},getItems:(e,t={})=>s(e,t,(e=>e.driver.getItems?Jf(e.driver.getItems,e.items.map((e=>({key:e.relativeKey,options:e.options}))),t).then((t=>t.map((t=>({key:Zf(e.base,t.key),value:$f(t.value)}))))):Promise.all(e.items.map((t=>Jf(e.driver.getItem,t.relativeKey,t.options).then((e=>({key:t.key,value:$f(e)})))))))),getItemRaw(e,t={}){e=Xf(e);const{relativeKey:n,driver:i}=r(e);return i.getItemRaw?Jf(i.getItemRaw,n,t):Jf(i.getItem,n,t).then((e=>function(e){return"string"!=typeof e?e:e.startsWith(Qf)?(t=e.slice(7),globalThis.Buffer?Buffer.from(t,"base64"):Uint8Array.from(globalThis.atob(t),(e=>e.codePointAt(0)))):e;var t}(e)))},async setItem(e,t,n={}){if(void 0===t)return a.removeItem(e);e=Xf(e);const{relativeKey:o,driver:s}=r(e);s.setItem&&(await Jf(s.setItem,o,Yf(t),n),s.watch||i("update",e))},async setItems(e,t){await s(e,t,(async e=>{if(e.driver.setItems)return Jf(e.driver.setItems,e.items.map((e=>({key:e.relativeKey,value:Yf(e.value),options:e.options}))),t);e.driver.setItem&&await Promise.all(e.items.map((t=>Jf(e.driver.setItem,t.relativeKey,Yf(t.value),t.options))))}))},async setItemRaw(e,t,n={}){if(void 0===t)return a.removeItem(e,n);e=Xf(e);const{relativeKey:o,driver:s}=r(e);if(s.setItemRaw)await Jf(s.setItemRaw,o,t,n);else{if(!s.setItem)return;await Jf(s.setItem,o,function(e){return"string"==typeof e?e:Qf+(t=e,globalThis.Buffer?Buffer.from(t).toString("base64"):globalThis.btoa(String.fromCodePoint(...t)));var t}(t),n)}s.watch||i("update",e)},async removeItem(e,t={}){"boolean"==typeof t&&(t={removeMeta:t}),e=Xf(e);const{relativeKey:n,driver:o}=r(e);o.removeItem&&(await Jf(o.removeItem,n,t),(t.removeMeta||t.removeMata)&&await Jf(o.removeItem,n+"$",t),o.watch||i("remove",e))},async getMeta(e,t={}){"boolean"==typeof t&&(t={nativeOnly:t}),e=Xf(e);const{relativeKey:n,driver:i}=r(e),o=Object.create(null);if(i.getMeta&&Object.assign(o,await Jf(i.getMeta,n,t)),!t.nativeOnly){const e=await Jf(i.getItem,n+"$",t).then((e=>$f(e)));e&&"object"==typeof e&&("string"==typeof e.atime&&(e.atime=new Date(e.atime)),"string"==typeof e.mtime&&(e.mtime=new Date(e.mtime)),Object.assign(o,e))}return o},setMeta(e,t,r={}){return this.setItem(e+"$",t,r)},removeMeta(e,t={}){return this.removeItem(e+"$",t)},async getKeys(e,t={}){e=ed(e);const r=n(e,!0);let i=[];const o=[];let s=!0;for(const e of r){e.driver.flags?.maxDepth||(s=!1);const r=await Jf(e.driver.getKeys,e.relativeBase,t);for(const t of r){const r=e.mountpoint+Xf(t);i.some((e=>r.startsWith(e)))||o.push(r)}i=[e.mountpoint,...i.filter((t=>!t.startsWith(e.mountpoint)))]}const a=void 0!==t.maxDepth&&!s;return o.filter((r=>(!a||function(e,t){if(void 0===t)return!0;let r=0,n=e.indexOf(":");for(;n>-1;)r++,n=e.indexOf(":",n+1);return r<=t}(r,t.maxDepth))&&function(e,t){return t?e.startsWith(t)&&"$"!==e[e.length-1]:"$"!==e[e.length-1]}(r,e)))},async clear(e,t={}){e=ed(e),await Promise.all(n(e,!1).map((async e=>{if(e.driver.clear)return Jf(e.driver.clear,e.relativeBase,t);if(e.driver.removeItem){const r=await e.driver.getKeys(e.relativeBase||"",t);return Promise.all(r.map((r=>e.driver.removeItem(r,t))))}})))},async dispose(){await Promise.all(Object.values(t.mounts).map((e=>id(e))))},watch:async e=>(await(async()=>{if(!t.watching){t.watching=!0;for(const e in t.mounts)t.unwatch[e]=await nd(t.mounts[e],i,e)}})(),t.watchListeners.push(e),async()=>{t.watchListeners=t.watchListeners.filter((t=>t!==e)),0===t.watchListeners.length&&await o()}),async unwatch(){t.watchListeners=[],await o()},mount(e,r){if((e=ed(e))&&t.mounts[e])throw new Error(`already mounted at ${e}`);return e&&(t.mountpoints.push(e),t.mountpoints.sort(((e,t)=>t.length-e.length))),t.mounts[e]=r,t.watching&&Promise.resolve(nd(r,i,e)).then((r=>{t.unwatch[e]=r})).catch(console.error),a},async unmount(e,r=!0){(e=ed(e))&&t.mounts[e]&&(t.watching&&e in t.unwatch&&(t.unwatch[e]?.(),delete t.unwatch[e]),r&&await id(t.mounts[e]),t.mountpoints=t.mountpoints.filter((t=>t!==e)),delete t.mounts[e])},getMount(e=""){e=Xf(e)+":";const t=r(e);return{driver:t.driver,base:t.base}},getMounts:(e="",t={})=>(e=Xf(e),n(e,t.parents).map((e=>({driver:e.driver,base:e.mountpoint})))),keys:(e,t={})=>a.getKeys(e,t),get:(e,t={})=>a.getItem(e,t),set:(e,t,r={})=>a.setItem(e,t,r),has:(e,t={})=>a.hasItem(e,t),del:(e,t={})=>a.removeItem(e,t),remove:(e,t={})=>a.removeItem(e,t)};return a}function nd(e,t,r){return e.watch?e.watch(((e,n)=>t(e,r+n))):()=>{}}async function id(e){"function"==typeof e.dispose&&await Jf(e.dispose)}function od(e){return new Promise(((t,r)=>{e.oncomplete=e.onsuccess=()=>t(e.result),e.onabort=e.onerror=()=>r(e.error)}))}function sd(e,t){const r=indexedDB.open(e);r.onupgradeneeded=()=>r.result.createObjectStore(t);const n=od(r);return(e,r)=>n.then((n=>r(n.transaction(t,e).objectStore(t))))}let ad;function cd(){return ad||(ad=sd("keyval-store","keyval")),ad}function ud(e,t=cd()){return t("readonly",(t=>od(t.get(e))))}function ld(e){if("string"!=typeof e)throw new Error("Cannot safe json parse value of type "+typeof e);try{return(e=>{const t=e.replace(/([\[:])?(\d{17,}|(?:[9](?:[1-9]07199254740991|0[1-9]7199254740991|00[8-9]199254740991|007[2-9]99254740991|007199[3-9]54740991|0071992[6-9]4740991|00719925[5-9]740991|007199254[8-9]40991|0071992547[5-9]0991|00719925474[1-9]991|00719925474099[2-9])))([,\}\]])/g,'$1"$2n"$3');return JSON.parse(t,((e,t)=>"string"==typeof t&&t.match(/^\d+n$/)?BigInt(t.substring(0,t.length-1)):t))})(e)}catch(t){return e}}function hd(e){return"string"==typeof e?e:(t=e,JSON.stringify(t,((e,t)=>"bigint"==typeof t?t.toString()+"n":t))||"");var t}var fd=(e={})=>{const t=e.base&&e.base.length>0?`${e.base}:`:"",r=e=>t+e;let n;return e.dbName&&e.storeName&&(n=sd(e.dbName,e.storeName)),{name:"idb-keyval",options:e,hasItem:async e=>!(typeof await ud(r(e),n)>"u"),getItem:async e=>await ud(r(e),n)??null,setItem:(e,t)=>function(e,t,r=cd()){return r("readwrite",(r=>(r.put(t,e),od(r.transaction))))}(r(e),t,n),removeItem:e=>function(e,t=cd()){return t("readwrite",(t=>(t.delete(e),od(t.transaction))))}(r(e),n),getKeys:()=>function(e=cd()){return e("readonly",(e=>{if(e.getAllKeys)return od(e.getAllKeys());const t=[];return function(e,t){return e.openCursor().onsuccess=function(){this.result&&(t(this.result),this.result.continue())},od(e.transaction)}(e,(e=>t.push(e.key))).then((()=>t))}))}(n),clear:()=>function(e=cd()){return e("readwrite",(e=>(e.clear(),od(e.transaction))))}(n)}};class dd{constructor(){this.indexedDb=rd({driver:fd({dbName:"WALLET_CONNECT_V2_INDEXED_DB",storeName:"keyvaluestorage"})})}async getKeys(){return this.indexedDb.getKeys()}async getEntries(){return(await this.indexedDb.getItems(await this.indexedDb.getKeys())).map((e=>[e.key,e.value]))}async getItem(e){const t=await this.indexedDb.getItem(e);if(null!==t)return t}async setItem(e,t){await this.indexedDb.setItem(e,hd(t))}async removeItem(e){await this.indexedDb.removeItem(e)}}var pd=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof r.g<"u"?r.g:typeof self<"u"?self:{},gd={exports:{}};function md(e){var t;return[e[0],ld(null!=(t=e[1])?t:"")]}!function(){let e;function t(){}e=t,e.prototype.getItem=function(e){return this.hasOwnProperty(e)?String(this[e]):null},e.prototype.setItem=function(e,t){this[e]=String(t)},e.prototype.removeItem=function(e){delete this[e]},e.prototype.clear=function(){const e=this;Object.keys(e).forEach((function(t){e[t]=void 0,delete e[t]}))},e.prototype.key=function(e){return e=e||0,Object.keys(this)[e]},e.prototype.__defineGetter__("length",(function(){return Object.keys(this).length})),typeof pd<"u"&&pd.localStorage?gd.exports=pd.localStorage:typeof window<"u"&&window.localStorage?gd.exports=window.localStorage:gd.exports=new t}();class yd{constructor(){this.localStorage=gd.exports}async getKeys(){return Object.keys(this.localStorage)}async getEntries(){return Object.entries(this.localStorage).map(md)}async getItem(e){const t=this.localStorage.getItem(e);if(null!==t)return ld(t)}async setItem(e,t){this.localStorage.setItem(e,hd(t))}async removeItem(e){this.localStorage.removeItem(e)}}class vd{constructor(){this.initialized=!1,this.setInitialized=e=>{this.storage=e,this.initialized=!0};const e=new yd;this.storage=e;try{(async(e,t,r)=>{const n="wc_storage_version",i=await t.getItem(n);if(i&&i>=1)return void r(t);const o=await e.getKeys();if(!o.length)return void r(t);const s=[];for(;o.length;){const r=o.shift();if(!r)continue;const n=r.toLowerCase();if(n.includes("wc@")||n.includes("walletconnect")||n.includes("wc_")||n.includes("wallet_connect")){const n=await e.getItem(r);await t.setItem(r,n),s.push(r)}}await t.setItem(n,1),r(t),(async(e,t)=>{t.length&&t.forEach((async t=>{await e.removeItem(t)}))})(e,s)})(e,new dd,this.setInitialized)}catch{this.initialized=!0}}async getKeys(){return await this.initialize(),this.storage.getKeys()}async getEntries(){return await this.initialize(),this.storage.getEntries()}async getItem(e){return await this.initialize(),this.storage.getItem(e)}async setItem(e,t){return await this.initialize(),this.storage.setItem(e,t)}async removeItem(e){return await this.initialize(),this.storage.removeItem(e)}async initialize(){this.initialized||await new Promise((e=>{const t=setInterval((()=>{this.initialized&&(clearInterval(t),e())}),20)}))}}var bd=r(4874),wd=r.n(bd);const Ed="custom_context";class Ad{constructor(e){this.nodeValue=e,this.sizeInBytes=(new TextEncoder).encode(this.nodeValue).length,this.next=null}get value(){return this.nodeValue}get size(){return this.sizeInBytes}}class _d{constructor(e){this.head=null,this.tail=null,this.lengthInNodes=0,this.maxSizeInBytes=e,this.sizeInBytes=0}append(e){const t=new Ad(e);if(t.size>this.maxSizeInBytes)throw new Error(`[LinkedList] Value too big to insert into list: ${e} with size ${t.size}`);for(;this.size+t.size>this.maxSizeInBytes;)this.shift();this.head?(this.tail&&(this.tail.next=t),this.tail=t):(this.head=t,this.tail=t),this.lengthInNodes++,this.sizeInBytes+=t.size}shift(){if(!this.head)return;const e=this.head;this.head=this.head.next,this.head||(this.tail=null),this.lengthInNodes--,this.sizeInBytes-=e.size}toArray(){const e=[];let t=this.head;for(;null!==t;)e.push(t.value),t=t.next;return e}get length(){return this.lengthInNodes}get size(){return this.sizeInBytes}toOrderedArray(){return Array.from(this)}[Symbol.iterator](){let e=this.head;return{next:()=>{if(!e)return{done:!0,value:null};const t=e.value;return e=e.next,{done:!1,value:t}}}}}class xd{constructor(e,t=1024e3){this.level=e??"error",this.levelValue=bd.levels.values[this.level],this.MAX_LOG_SIZE_IN_BYTES=t,this.logs=new _d(this.MAX_LOG_SIZE_IN_BYTES)}forwardToConsole(e,t){t===bd.levels.values.error?console.error(e):t===bd.levels.values.warn?console.warn(e):t===bd.levels.values.debug?console.debug(e):t===bd.levels.values.trace?console.trace(e):console.log(e)}appendToLogs(e){this.logs.append(hd({timestamp:(new Date).toISOString(),log:e}));const t="string"==typeof e?JSON.parse(e).level:e.level;t>=this.levelValue&&this.forwardToConsole(e,t)}getLogs(){return this.logs}clearLogs(){this.logs=new _d(this.MAX_LOG_SIZE_IN_BYTES)}getLogArray(){return Array.from(this.logs)}logsToBlob(e){const t=this.getLogArray();return t.push(hd({extraMetadata:e})),new Blob(t,{type:"application/json"})}}class Sd{constructor(e,t=1024e3){this.baseChunkLogger=new xd(e,t)}write(e){this.baseChunkLogger.appendToLogs(e)}getLogs(){return this.baseChunkLogger.getLogs()}clearLogs(){this.baseChunkLogger.clearLogs()}getLogArray(){return this.baseChunkLogger.getLogArray()}logsToBlob(e){return this.baseChunkLogger.logsToBlob(e)}downloadLogsBlobInBrowser(e){const t=URL.createObjectURL(this.logsToBlob(e)),r=document.createElement("a");r.href=t,r.download=`walletconnect-logs-${(new Date).toISOString()}.txt`,document.body.appendChild(r),r.click(),document.body.removeChild(r),URL.revokeObjectURL(t)}}class kd{constructor(e,t=1024e3){this.baseChunkLogger=new xd(e,t)}write(e){this.baseChunkLogger.appendToLogs(e)}getLogs(){return this.baseChunkLogger.getLogs()}clearLogs(){this.baseChunkLogger.clearLogs()}getLogArray(){return this.baseChunkLogger.getLogArray()}logsToBlob(e){return this.baseChunkLogger.logsToBlob(e)}}var Id=Object.defineProperty,Od=Object.defineProperties,Td=Object.getOwnPropertyDescriptors,Pd=Object.getOwnPropertySymbols,Rd=Object.prototype.hasOwnProperty,Nd=Object.prototype.propertyIsEnumerable,Cd=(e,t,r)=>t in e?Id(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,Md=(e,t)=>{for(var r in t||(t={}))Rd.call(t,r)&&Cd(e,r,t[r]);if(Pd)for(var r of Pd(t))Nd.call(t,r)&&Cd(e,r,t[r]);return e},Ld=(e,t)=>Od(e,Td(t));function Bd(e){return Ld(Md({},e),{level:e?.level||"info"})}function Ud(e,t=Ed){let r="";return r=typeof e.bindings>"u"?function(e,t=Ed){return e[t]||""}(e,t):e.bindings().context||"",r}function Dd(e,t,r=Ed){const n=function(e,t,r=Ed){const n=Ud(e,r);return n.trim()?`${n}/${t}`:t}(e,t,r);return function(e,t,r=Ed){return e[r]=t,e}(e.child({context:n}),n,r)}function jd(e){return typeof e.loggerOverride<"u"&&"string"!=typeof e.loggerOverride?{logger:e.loggerOverride,chunkLoggerController:null}:typeof window<"u"?function(e){var t,r;const n=new Sd(null==(t=e.opts)?void 0:t.level,e.maxSizeInBytes);return{logger:wd()(Ld(Md({},e.opts),{level:"trace",browser:Ld(Md({},null==(r=e.opts)?void 0:r.browser),{write:e=>n.write(e)})})),chunkLoggerController:n}}(e):function(e){var t;const r=new kd(null==(t=e.opts)?void 0:t.level,e.maxSizeInBytes);return{logger:wd()(Ld(Md({},e.opts),{level:"trace"}),r),chunkLoggerController:r}}(e)}var Fd=Object.defineProperty,zd=(e,t,r)=>((e,t,r)=>t in e?Fd(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r)(e,"symbol"!=typeof t?t+"":t,r);class qd extends jf{constructor(e){super(),this.opts=e,zd(this,"protocol","wc"),zd(this,"version",2)}}var Gd=Object.defineProperty;class Hd extends jf{constructor(e,t){super(),this.core=e,this.logger=t,((e,t,r)=>{((e,t,r)=>{t in e?Gd(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r})(e,"symbol"!=typeof t?t+"":t,r)})(this,"records",new Map)}}class Kd{constructor(e,t){this.logger=e,this.core=t}}class Vd extends jf{constructor(e,t){super(),this.relayer=e,this.logger=t}}class Wd extends jf{constructor(e){super()}}class $d{constructor(e,t,r,n){this.core=e,this.logger=t,this.name=r}}Object.defineProperty;class Jd extends jf{constructor(e,t){super(),this.relayer=e,this.logger=t}}class Yd extends jf{constructor(e,t){super(),this.core=e,this.logger=t}}class Qd{constructor(e,t,r){this.core=e,this.logger=t,this.store=r}}class Xd{constructor(e,t){this.projectId=e,this.logger=t}}class Zd{constructor(e,t,r){this.core=e,this.logger=t,this.telemetryEnabled=r}}var ep=Object.defineProperty,tp=(e,t,r)=>((e,t,r)=>t in e?ep(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r)(e,"symbol"!=typeof t?t+"":t,r);At();class rp{constructor(e){this.opts=e,tp(this,"protocol","wc"),tp(this,"version",2)}}Et.EventEmitter;class np{constructor(e){this.client=e}}function ip(e,...t){if(!function(e){return e instanceof Uint8Array||ArrayBuffer.isView(e)&&"Uint8Array"===e.constructor.name}(e))throw new Error("Uint8Array expected");if(t.length>0&&!t.includes(e.length))throw new Error("Uint8Array expected of length "+t+", got length="+e.length)}function op(e,t=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")}const sp="object"==typeof globalThis&&"crypto"in globalThis?globalThis.crypto:void 0,ap=e=>new DataView(e.buffer,e.byteOffset,e.byteLength);function cp(e){return"string"==typeof e&&(e=function(e){if("string"!=typeof e)throw new Error("utf8ToBytes expected string, got "+typeof e);return new Uint8Array((new TextEncoder).encode(e))}(e)),ip(e),e}class up{clone(){return this._cloneInto()}}function lp(e=32){if(sp&&"function"==typeof sp.getRandomValues)return sp.getRandomValues(new Uint8Array(e));if(sp&&"function"==typeof sp.randomBytes)return sp.randomBytes(e);throw new Error("crypto.getRandomValues must be defined")}class hp extends up{constructor(e,t,r,n){super(),this.blockLen=e,this.outputLen=t,this.padOffset=r,this.isLE=n,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=ap(this.buffer)}update(e){op(this);const{view:t,buffer:r,blockLen:n}=this,i=(e=cp(e)).length;for(let o=0;o<i;){const s=Math.min(n-this.pos,i-o);if(s!==n)r.set(e.subarray(o,o+s),this.pos),this.pos+=s,o+=s,this.pos===n&&(this.process(t,0),this.pos=0);else{const t=ap(e);for(;n<=i-o;o+=n)this.process(t,o)}}return this.length+=e.length,this.roundClean(),this}digestInto(e){op(this),function(e,t){ip(e);const r=t.outputLen;if(e.length<r)throw new Error("digestInto() expects output buffer of length at least "+r)}(e,this),this.finished=!0;const{buffer:t,view:r,blockLen:n,isLE:i}=this;let{pos:o}=this;t[o++]=128,this.buffer.subarray(o).fill(0),this.padOffset>n-o&&(this.process(r,0),o=0);for(let e=o;e<n;e++)t[e]=0;(function(e,t,r,n){if("function"==typeof e.setBigUint64)return e.setBigUint64(t,r,n);const i=BigInt(32),o=BigInt(4294967295),s=Number(r>>i&o),a=Number(r&o),c=n?4:0,u=n?0:4;e.setUint32(t+c,s,n),e.setUint32(t+u,a,n)})(r,n-8,BigInt(8*this.length),i),this.process(r,0);const s=ap(e),a=this.outputLen;if(a%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const c=a/4,u=this.get();if(c>u.length)throw new Error("_sha2: outputLen bigger than state");for(let e=0;e<c;e++)s.setUint32(4*e,u[e],i)}digest(){const{buffer:e,outputLen:t}=this;this.digestInto(e);const r=e.slice(0,t);return this.destroy(),r}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:t,buffer:r,length:n,finished:i,destroyed:o,pos:s}=this;return e.length=n,e.pos=s,e.finished=i,e.destroyed=o,n%t&&e.buffer.set(r),e}}const fp=BigInt(2**32-1),dp=BigInt(32);function pp(e,t=!1){return t?{h:Number(e&fp),l:Number(e>>dp&fp)}:{h:0|Number(e>>dp&fp),l:0|Number(e&fp)}}const gp=function(e,t=!1){let r=new Uint32Array(e.length),n=new Uint32Array(e.length);for(let i=0;i<e.length;i++){const{h:o,l:s}=pp(e[i],t);[r[i],n[i]]=[o,s]}return[r,n]},mp=(e,t,r)=>e>>>r,yp=(e,t,r)=>e<<32-r|t>>>r,vp=(e,t,r)=>e>>>r|t<<32-r,bp=(e,t,r)=>e<<32-r|t>>>r,wp=(e,t,r)=>e<<64-r|t>>>r-32,Ep=(e,t,r)=>e>>>r-32|t<<64-r,Ap=function(e,t,r,n){const i=(t>>>0)+(n>>>0);return{h:e+r+(i/2**32|0)|0,l:0|i}},_p=(e,t,r)=>(e>>>0)+(t>>>0)+(r>>>0),xp=(e,t,r,n)=>t+r+n+(e/2**32|0)|0,Sp=(e,t,r,n)=>(e>>>0)+(t>>>0)+(r>>>0)+(n>>>0),kp=(e,t,r,n,i)=>t+r+n+i+(e/2**32|0)|0,Ip=(e,t,r,n,i,o)=>t+r+n+i+o+(e/2**32|0)|0,Op=(e,t,r,n,i)=>(e>>>0)+(t>>>0)+(r>>>0)+(n>>>0)+(i>>>0),[Tp,Pp]=gp(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map((e=>BigInt(e)))),Rp=new Uint32Array(80),Np=new Uint32Array(80);class Cp extends hp{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){const{Ah:e,Al:t,Bh:r,Bl:n,Ch:i,Cl:o,Dh:s,Dl:a,Eh:c,El:u,Fh:l,Fl:h,Gh:f,Gl:d,Hh:p,Hl:g}=this;return[e,t,r,n,i,o,s,a,c,u,l,h,f,d,p,g]}set(e,t,r,n,i,o,s,a,c,u,l,h,f,d,p,g){this.Ah=0|e,this.Al=0|t,this.Bh=0|r,this.Bl=0|n,this.Ch=0|i,this.Cl=0|o,this.Dh=0|s,this.Dl=0|a,this.Eh=0|c,this.El=0|u,this.Fh=0|l,this.Fl=0|h,this.Gh=0|f,this.Gl=0|d,this.Hh=0|p,this.Hl=0|g}process(e,t){for(let r=0;r<16;r++,t+=4)Rp[r]=e.getUint32(t),Np[r]=e.getUint32(t+=4);for(let e=16;e<80;e++){const t=0|Rp[e-15],r=0|Np[e-15],n=vp(t,r,1)^vp(t,r,8)^mp(t,r,7),i=bp(t,r,1)^bp(t,r,8)^yp(t,r,7),o=0|Rp[e-2],s=0|Np[e-2],a=vp(o,s,19)^wp(o,s,61)^mp(o,s,6),c=bp(o,s,19)^Ep(o,s,61)^yp(o,s,6),u=Sp(i,c,Np[e-7],Np[e-16]),l=kp(u,n,a,Rp[e-7],Rp[e-16]);Rp[e]=0|l,Np[e]=0|u}let{Ah:r,Al:n,Bh:i,Bl:o,Ch:s,Cl:a,Dh:c,Dl:u,Eh:l,El:h,Fh:f,Fl:d,Gh:p,Gl:g,Hh:m,Hl:y}=this;for(let e=0;e<80;e++){const t=vp(l,h,14)^vp(l,h,18)^wp(l,h,41),v=bp(l,h,14)^bp(l,h,18)^Ep(l,h,41),b=l&f^~l&p,w=Op(y,v,h&d^~h&g,Pp[e],Np[e]),E=Ip(w,m,t,b,Tp[e],Rp[e]),A=0|w,_=vp(r,n,28)^wp(r,n,34)^wp(r,n,39),x=bp(r,n,28)^Ep(r,n,34)^Ep(r,n,39),S=r&i^r&s^i&s,k=n&o^n&a^o&a;m=0|p,y=0|g,p=0|f,g=0|d,f=0|l,d=0|h,({h:l,l:h}=Ap(0|c,0|u,0|E,0|A)),c=0|s,u=0|a,s=0|i,a=0|o,i=0|r,o=0|n;const I=_p(A,x,k);r=xp(I,E,_,S),n=0|I}({h:r,l:n}=Ap(0|this.Ah,0|this.Al,0|r,0|n)),({h:i,l:o}=Ap(0|this.Bh,0|this.Bl,0|i,0|o)),({h:s,l:a}=Ap(0|this.Ch,0|this.Cl,0|s,0|a)),({h:c,l:u}=Ap(0|this.Dh,0|this.Dl,0|c,0|u)),({h:l,l:h}=Ap(0|this.Eh,0|this.El,0|l,0|h)),({h:f,l:d}=Ap(0|this.Fh,0|this.Fl,0|f,0|d)),({h:p,l:g}=Ap(0|this.Gh,0|this.Gl,0|p,0|g)),({h:m,l:y}=Ap(0|this.Hh,0|this.Hl,0|m,0|y)),this.set(r,n,i,o,s,a,c,u,l,h,f,d,p,g,m,y)}roundClean(){Rp.fill(0),Np.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}const Mp=function(e){const t=t=>e().update(cp(t)).digest(),r=e();return t.outputLen=r.outputLen,t.blockLen=r.blockLen,t.create=()=>e(),t}((()=>new Cp)),Lp=BigInt(0),Bp=BigInt(1),Up=BigInt(2);function Dp(e){return e instanceof Uint8Array||ArrayBuffer.isView(e)&&"Uint8Array"===e.constructor.name}function jp(e){if(!Dp(e))throw new Error("Uint8Array expected")}function Fp(e,t){if("boolean"!=typeof t)throw new Error(e+" boolean expected, got "+t)}const zp=Array.from({length:256},((e,t)=>t.toString(16).padStart(2,"0")));function qp(e){jp(e);let t="";for(let r=0;r<e.length;r++)t+=zp[e[r]];return t}function Gp(e){if("string"!=typeof e)throw new Error("hex string expected, got "+typeof e);return""===e?Lp:BigInt("0x"+e)}function Hp(e){return e>=48&&e<=57?e-48:e>=65&&e<=70?e-55:e>=97&&e<=102?e-87:void 0}function Kp(e){if("string"!=typeof e)throw new Error("hex string expected, got "+typeof e);const t=e.length,r=t/2;if(t%2)throw new Error("hex string expected, got unpadded hex of length "+t);const n=new Uint8Array(r);for(let t=0,i=0;t<r;t++,i+=2){const r=Hp(e.charCodeAt(i)),o=Hp(e.charCodeAt(i+1));if(void 0===r||void 0===o){const t=e[i]+e[i+1];throw new Error('hex string expected, got non-hex character "'+t+'" at index '+i)}n[t]=16*r+o}return n}function Vp(e){return jp(e),Gp(qp(Uint8Array.from(e).reverse()))}function Wp(e,t){return Kp(e.toString(16).padStart(2*t,"0"))}function $p(e,t){return Wp(e,t).reverse()}function Jp(e,t,r){let n;if("string"==typeof t)try{n=Kp(t)}catch(t){throw new Error(e+" must be hex string or Uint8Array, cause: "+t)}else{if(!Dp(t))throw new Error(e+" must be hex string or Uint8Array");n=Uint8Array.from(t)}const i=n.length;if("number"==typeof r&&i!==r)throw new Error(e+" of length "+r+" expected, got "+i);return n}function Yp(...e){let t=0;for(let r=0;r<e.length;r++){const n=e[r];jp(n),t+=n.length}const r=new Uint8Array(t);for(let t=0,n=0;t<e.length;t++){const i=e[t];r.set(i,n),n+=i.length}return r}const Qp=e=>"bigint"==typeof e&&Lp<=e;function Xp(e,t,r,n){if(!function(e,t,r){return Qp(e)&&Qp(t)&&Qp(r)&&t<=e&&e<r}(t,r,n))throw new Error("expected valid "+e+": "+r+" <= n < "+n+", got "+t)}const Zp=e=>(Up<<BigInt(e-1))-Bp,eg={bigint:e=>"bigint"==typeof e,function:e=>"function"==typeof e,boolean:e=>"boolean"==typeof e,string:e=>"string"==typeof e,stringOrUint8Array:e=>"string"==typeof e||Dp(e),isSafeInteger:e=>Number.isSafeInteger(e),array:e=>Array.isArray(e),field:(e,t)=>t.Fp.isValid(e),hash:e=>"function"==typeof e&&Number.isSafeInteger(e.outputLen)};function tg(e,t,r={}){const n=(t,r,n)=>{const i=eg[r];if("function"!=typeof i)throw new Error("invalid validator function");const o=e[t];if(!(n&&void 0===o||i(o,e)))throw new Error("param "+String(t)+" is invalid. Expected "+r+", got "+o)};for(const[e,r]of Object.entries(t))n(e,r,!1);for(const[e,t]of Object.entries(r))n(e,t,!0);return e}function rg(e){const t=new WeakMap;return(r,...n)=>{const i=t.get(r);if(void 0!==i)return i;const o=e(r,...n);return t.set(r,o),o}}const ng=BigInt(0),ig=BigInt(1),og=BigInt(2),sg=BigInt(3),ag=BigInt(4),cg=BigInt(5),ug=BigInt(8);function lg(e,t){const r=e%t;return r>=ng?r:t+r}function hg(e,t,r){if(t<ng)throw new Error("invalid exponent, negatives unsupported");if(r<=ng)throw new Error("invalid modulus");if(r===ig)return ng;let n=ig;for(;t>ng;)t&ig&&(n=n*e%r),e=e*e%r,t>>=ig;return n}function fg(e,t,r){let n=e;for(;t-- >ng;)n*=n,n%=r;return n}function dg(e,t){if(e===ng)throw new Error("invert: expected non-zero number");if(t<=ng)throw new Error("invert: expected positive modulus, got "+t);let r=lg(e,t),n=t,i=ng,o=ig;for(;r!==ng;){const e=n%r,t=i-o*(n/r);n=r,r=e,i=o,o=t}if(n!==ig)throw new Error("invert: does not exist");return lg(i,t)}const pg=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function gg(e,t){const r=void 0!==t?t:e.toString(2).length;return{nBitLength:r,nByteLength:Math.ceil(r/8)}}function mg(e,t,r=!1,n={}){if(e<=ng)throw new Error("invalid field: expected ORDER > 0, got "+e);const{nBitLength:i,nByteLength:o}=gg(e,t);if(o>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let s;const a=Object.freeze({ORDER:e,isLE:r,BITS:i,BYTES:o,MASK:Zp(i),ZERO:ng,ONE:ig,create:t=>lg(t,e),isValid:t=>{if("bigint"!=typeof t)throw new Error("invalid field element: expected bigint, got "+typeof t);return ng<=t&&t<e},is0:e=>e===ng,isOdd:e=>(e&ig)===ig,neg:t=>lg(-t,e),eql:(e,t)=>e===t,sqr:t=>lg(t*t,e),add:(t,r)=>lg(t+r,e),sub:(t,r)=>lg(t-r,e),mul:(t,r)=>lg(t*r,e),pow:(e,t)=>function(e,t,r){if(r<ng)throw new Error("invalid exponent, negatives unsupported");if(r===ng)return e.ONE;if(r===ig)return t;let n=e.ONE,i=t;for(;r>ng;)r&ig&&(n=e.mul(n,i)),i=e.sqr(i),r>>=ig;return n}(a,e,t),div:(t,r)=>lg(t*dg(r,e),e),sqrN:e=>e*e,addN:(e,t)=>e+t,subN:(e,t)=>e-t,mulN:(e,t)=>e*t,inv:t=>dg(t,e),sqrt:n.sqrt||(t=>(s||(s=function(e){if(e%ag===sg){const t=(e+ig)/ag;return function(e,r){const n=e.pow(r,t);if(!e.eql(e.sqr(n),r))throw new Error("Cannot find square root");return n}}if(e%ug===cg){const t=(e-cg)/ug;return function(e,r){const n=e.mul(r,og),i=e.pow(n,t),o=e.mul(r,i),s=e.mul(e.mul(o,og),i),a=e.mul(o,e.sub(s,e.ONE));if(!e.eql(e.sqr(a),r))throw new Error("Cannot find square root");return a}}return function(e){const t=(e-ig)/og;let r,n,i;for(r=e-ig,n=0;r%og===ng;r/=og,n++);for(i=og;i<e&&hg(i,t,e)!==e-ig;i++)if(i>1e3)throw new Error("Cannot find square root: likely non-prime P");if(1===n){const t=(e+ig)/ag;return function(e,r){const n=e.pow(r,t);if(!e.eql(e.sqr(n),r))throw new Error("Cannot find square root");return n}}const o=(r+ig)/og;return function(e,s){if(e.pow(s,t)===e.neg(e.ONE))throw new Error("Cannot find square root");let a=n,c=e.pow(e.mul(e.ONE,i),r),u=e.pow(s,o),l=e.pow(s,r);for(;!e.eql(l,e.ONE);){if(e.eql(l,e.ZERO))return e.ZERO;let t=1;for(let r=e.sqr(l);t<a&&!e.eql(r,e.ONE);t++)r=e.sqr(r);const r=e.pow(c,ig<<BigInt(a-t-1));c=e.sqr(r),u=e.mul(u,r),l=e.mul(l,c),a=t}return u}}(e)}(e)),s(a,t))),invertBatch:e=>function(e,t){const r=new Array(t.length),n=t.reduce(((t,n,i)=>e.is0(n)?t:(r[i]=t,e.mul(t,n))),e.ONE),i=e.inv(n);return t.reduceRight(((t,n,i)=>e.is0(n)?t:(r[i]=e.mul(t,r[i]),e.mul(t,n))),i),r}(a,e),cmov:(e,t,r)=>r?t:e,toBytes:e=>r?$p(e,o):Wp(e,o),fromBytes:e=>{if(e.length!==o)throw new Error("Field.fromBytes: expected "+o+" bytes, got "+e.length);return r?Vp(e):function(e){return Gp(qp(e))}(e)}});return Object.freeze(a)}const yg=BigInt(0),vg=BigInt(1);function bg(e,t){const r=t.negate();return e?r:t}function wg(e,t){if(!Number.isSafeInteger(e)||e<=0||e>t)throw new Error("invalid window size, expected [1.."+t+"], got W="+e)}function Eg(e,t){return wg(e,t),{windows:Math.ceil(t/e)+1,windowSize:2**(e-1)}}const Ag=new WeakMap,_g=new WeakMap;function xg(e){return _g.get(e)||1}const Sg=BigInt(0),kg=BigInt(1),Ig=BigInt(2),Og=BigInt(8),Tg={zip215:!0};BigInt(0),BigInt(1);const Pg=BigInt("57896044618658097711785492504343953926634992332820282019728792003956564819949"),Rg=BigInt("19681161376707505956807079304988542015446066515923890162744021073123829784752");BigInt(0);const Ng=BigInt(1),Cg=BigInt(2);BigInt(3);const Mg=BigInt(5),Lg=BigInt(8);const Bg=mg(Pg,void 0,!0),Ug=function(e){const t=function(e){const t=function(e){return function(e){tg(e,pg.reduce(((e,t)=>(e[t]="function",e)),{ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"}))}(e.Fp),tg(e,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...gg(e.n,e.nBitLength),...e,p:e.Fp.ORDER})}(e);return tg(e,{hash:"function",a:"bigint",d:"bigint",randomBytes:"function"},{adjustScalarBytes:"function",domain:"function",uvRatio:"function",mapToCurve:"function"}),Object.freeze({...t})}(e),{Fp:r,n,prehash:i,hash:o,randomBytes:s,nByteLength:a,h:c}=t,u=Ig<<BigInt(8*a)-kg,l=r.create,h=mg(t.n,t.nBitLength),f=t.uvRatio||((e,t)=>{try{return{isValid:!0,value:r.sqrt(e*r.inv(t))}}catch{return{isValid:!1,value:Sg}}}),d=t.adjustScalarBytes||(e=>e),p=t.domain||((e,t,r)=>{if(Fp("phflag",r),t.length||r)throw new Error("Contexts/pre-hash are not supported");return e});function g(e,t){Xp("coordinate "+e,t,Sg,u)}function m(e){if(!(e instanceof b))throw new Error("ExtendedPoint expected")}const y=rg(((e,t)=>{const{ex:n,ey:i,ez:o}=e,s=e.is0();null==t&&(t=s?Og:r.inv(o));const a=l(n*t),c=l(i*t),u=l(o*t);if(s)return{x:Sg,y:kg};if(u!==kg)throw new Error("invZ was invalid");return{x:a,y:c}})),v=rg((e=>{const{a:r,d:n}=t;if(e.is0())throw new Error("bad point: ZERO");const{ex:i,ey:o,ez:s,et:a}=e,c=l(i*i),u=l(o*o),h=l(s*s),f=l(h*h),d=l(c*r);if(l(h*l(d+u))!==l(f+l(n*l(c*u))))throw new Error("bad point: equation left != right (1)");if(l(i*o)!==l(s*a))throw new Error("bad point: equation left != right (2)");return!0}));class b{constructor(e,t,r,n){this.ex=e,this.ey=t,this.ez=r,this.et=n,g("x",e),g("y",t),g("z",r),g("t",n),Object.freeze(this)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static fromAffine(e){if(e instanceof b)throw new Error("extended point not allowed");const{x:t,y:r}=e||{};return g("x",t),g("y",r),new b(t,r,kg,l(t*r))}static normalizeZ(e){const t=r.invertBatch(e.map((e=>e.ez)));return e.map(((e,r)=>e.toAffine(t[r]))).map(b.fromAffine)}static msm(e,t){return function(e,t,r,n){if(function(e,t){if(!Array.isArray(e))throw new Error("array expected");e.forEach(((e,r)=>{if(!(e instanceof t))throw new Error("invalid point at index "+r)}))}(r,e),function(e,t){if(!Array.isArray(e))throw new Error("array of scalars expected");e.forEach(((e,r)=>{if(!t.isValid(e))throw new Error("invalid scalar at index "+r)}))}(n,t),r.length!==n.length)throw new Error("arrays of points and scalars must have equal length");const i=e.ZERO,o=function(e){let t;for(t=0;e>Lp;e>>=Bp,t+=1);return t}(BigInt(r.length)),s=o>12?o-3:o>4?o-2:o?2:1,a=(1<<s)-1,c=new Array(a+1).fill(i);let u=i;for(let e=Math.floor((t.BITS-1)/s)*s;e>=0;e-=s){c.fill(i);for(let t=0;t<n.length;t++){const i=n[t],o=Number(i>>BigInt(e)&BigInt(a));c[o]=c[o].add(r[t])}let t=i;for(let e=c.length-1,r=i;e>0;e--)r=r.add(c[e]),t=t.add(r);if(u=u.add(t),0!==e)for(let e=0;e<s;e++)u=u.double()}return u}(b,h,e,t)}_setWindowSize(e){A.setWindowSize(this,e)}assertValidity(){v(this)}equals(e){m(e);const{ex:t,ey:r,ez:n}=this,{ex:i,ey:o,ez:s}=e,a=l(t*s),c=l(i*n),u=l(r*s),h=l(o*n);return a===c&&u===h}is0(){return this.equals(b.ZERO)}negate(){return new b(l(-this.ex),this.ey,this.ez,l(-this.et))}double(){const{a:e}=t,{ex:r,ey:n,ez:i}=this,o=l(r*r),s=l(n*n),a=l(Ig*l(i*i)),c=l(e*o),u=r+n,h=l(l(u*u)-o-s),f=c+s,d=f-a,p=c-s,g=l(h*d),m=l(f*p),y=l(h*p),v=l(d*f);return new b(g,m,v,y)}add(e){m(e);const{a:r,d:n}=t,{ex:i,ey:o,ez:s,et:a}=this,{ex:c,ey:u,ez:h,et:f}=e;if(r===BigInt(-1)){const e=l((o-i)*(u+c)),t=l((o+i)*(u-c)),r=l(t-e);if(r===Sg)return this.double();const n=l(s*Ig*f),d=l(a*Ig*h),p=d+n,g=t+e,m=d-n,y=l(p*r),v=l(g*m),w=l(p*m),E=l(r*g);return new b(y,v,E,w)}const d=l(i*c),p=l(o*u),g=l(a*n*f),y=l(s*h),v=l((i+o)*(c+u)-d-p),w=y-g,E=y+g,A=l(p-r*d),_=l(v*w),x=l(E*A),S=l(v*A),k=l(w*E);return new b(_,x,k,S)}subtract(e){return this.add(e.negate())}wNAF(e){return A.wNAFCached(this,e,b.normalizeZ)}multiply(e){const t=e;Xp("scalar",t,kg,n);const{p:r,f:i}=this.wNAF(t);return b.normalizeZ([r,i])[0]}multiplyUnsafe(e,t=b.ZERO){const r=e;return Xp("scalar",r,Sg,n),r===Sg?E:this.is0()||r===kg?this:A.wNAFCachedUnsafe(this,r,b.normalizeZ,t)}isSmallOrder(){return this.multiplyUnsafe(c).is0()}isTorsionFree(){return A.unsafeLadder(this,n).is0()}toAffine(e){return y(this,e)}clearCofactor(){const{h:e}=t;return e===kg?this:this.multiplyUnsafe(e)}static fromHex(e,n=!1){const{d:i,a:o}=t,s=r.BYTES;e=Jp("pointHex",e,s),Fp("zip215",n);const a=e.slice(),c=e[s-1];a[s-1]=-129&c;const h=Vp(a),d=n?u:r.ORDER;Xp("pointHex.y",h,Sg,d);const p=l(h*h),g=l(p-kg),m=l(i*p-o);let{isValid:y,value:v}=f(g,m);if(!y)throw new Error("Point.fromHex: invalid y coordinate");const w=(v&kg)===kg,E=!!(128&c);if(!n&&v===Sg&&E)throw new Error("Point.fromHex: x=0 and x_0=1");return E!==w&&(v=l(-v)),b.fromAffine({x:v,y:h})}static fromPrivateKey(e){return S(e).point}toRawBytes(){const{x:e,y:t}=this.toAffine(),n=$p(t,r.BYTES);return n[n.length-1]|=e&kg?128:0,n}toHex(){return qp(this.toRawBytes())}}b.BASE=new b(t.Gx,t.Gy,kg,l(t.Gx*t.Gy)),b.ZERO=new b(Sg,kg,kg,Sg);const{BASE:w,ZERO:E}=b,A=function(e,t){return{constTimeNegate:bg,hasPrecomputes:e=>1!==xg(e),unsafeLadder(t,r,n=e.ZERO){let i=t;for(;r>yg;)r&vg&&(n=n.add(i)),i=i.double(),r>>=vg;return n},precomputeWindow(e,r){const{windows:n,windowSize:i}=Eg(r,t),o=[];let s=e,a=s;for(let e=0;e<n;e++){a=s,o.push(a);for(let e=1;e<i;e++)a=a.add(s),o.push(a);s=a.double()}return o},wNAF(r,n,i){const{windows:o,windowSize:s}=Eg(r,t);let a=e.ZERO,c=e.BASE;const u=BigInt(2**r-1),l=2**r,h=BigInt(r);for(let e=0;e<o;e++){const t=e*s;let r=Number(i&u);i>>=h,r>s&&(r-=l,i+=vg);const o=t,f=t+Math.abs(r)-1,d=e%2!=0,p=r<0;0===r?c=c.add(bg(d,n[o])):a=a.add(bg(p,n[f]))}return{p:a,f:c}},wNAFUnsafe(r,n,i,o=e.ZERO){const{windows:s,windowSize:a}=Eg(r,t),c=BigInt(2**r-1),u=2**r,l=BigInt(r);for(let e=0;e<s;e++){const t=e*a;if(i===yg)break;let r=Number(i&c);if(i>>=l,r>a&&(r-=u,i+=vg),0===r)continue;let s=n[t+Math.abs(r)-1];r<0&&(s=s.negate()),o=o.add(s)}return o},getPrecomputes(e,t,r){let n=Ag.get(t);return n||(n=this.precomputeWindow(t,e),1!==e&&Ag.set(t,r(n))),n},wNAFCached(e,t,r){const n=xg(e);return this.wNAF(n,this.getPrecomputes(n,e,r),t)},wNAFCachedUnsafe(e,t,r,n){const i=xg(e);return 1===i?this.unsafeLadder(e,t,n):this.wNAFUnsafe(i,this.getPrecomputes(i,e,r),t,n)},setWindowSize(e,r){wg(r,t),_g.set(e,r),Ag.delete(e)}}}(b,8*a);function _(e){return lg(e,n)}function x(e){return _(Vp(e))}function S(e){const t=r.BYTES;e=Jp("private key",e,t);const n=Jp("hashed private key",o(e),2*t),i=d(n.slice(0,t)),s=n.slice(t,2*t),a=x(i),c=w.multiply(a),u=c.toRawBytes();return{head:i,prefix:s,scalar:a,point:c,pointBytes:u}}function k(e=new Uint8Array,...t){const r=Yp(...t);return x(o(p(r,Jp("context",e),!!i)))}const I=Tg;return w._setWindowSize(8),{CURVE:t,getPublicKey:function(e){return S(e).pointBytes},sign:function(e,t,o={}){e=Jp("message",e),i&&(e=i(e));const{prefix:s,scalar:a,pointBytes:c}=S(t),u=k(o.context,s,e),l=w.multiply(u).toRawBytes(),h=_(u+k(o.context,l,c,e)*a);return Xp("signature.s",h,Sg,n),Jp("result",Yp(l,$p(h,r.BYTES)),2*r.BYTES)},verify:function(e,t,n,o=I){const{context:s,zip215:a}=o,c=r.BYTES;e=Jp("signature",e,2*c),t=Jp("message",t),n=Jp("publicKey",n,c),void 0!==a&&Fp("zip215",a),i&&(t=i(t));const u=Vp(e.slice(c,2*c));let l,h,f;try{l=b.fromHex(n,a),h=b.fromHex(e.slice(0,c),a),f=w.multiplyUnsafe(u)}catch{return!1}if(!a&&l.isSmallOrder())return!1;const d=k(s,h.toRawBytes(),l.toRawBytes(),t);return h.add(l.multiplyUnsafe(d)).subtract(f).clearCofactor().equals(b.ZERO)},ExtendedPoint:b,utils:{getExtendedPublicKey:S,randomPrivateKey:()=>s(r.BYTES),precompute:(e=8,t=b.BASE)=>(t._setWindowSize(e),t.multiply(BigInt(3)),t)}}}({a:BigInt(-1),d:BigInt("37095705934669439343138083508754565189542113879843219016388785533085940283555"),Fp:Bg,n:BigInt("7237005577332262213973186563042994240857116359379907606001950938285454250989"),h:Lg,Gx:BigInt("15112221349535400772501151409588531511454012693041857206046113283949847762202"),Gy:BigInt("46316835694926478169428394003475163141307993866256225615783033603165251855960"),hash:Mp,randomBytes:lp,adjustScalarBytes:function(e){return e[0]&=248,e[31]&=127,e[31]|=64,e},uvRatio:function(e,t){const r=Pg,n=lg(t*t*t,r),i=function(e){const t=BigInt(10),r=BigInt(20),n=BigInt(40),i=BigInt(80),o=Pg,s=e*e%o*e%o,a=fg(s,Cg,o)*s%o,c=fg(a,Ng,o)*e%o,u=fg(c,Mg,o)*c%o,l=fg(u,t,o)*u%o,h=fg(l,r,o)*l%o,f=fg(h,n,o)*h%o,d=fg(f,i,o)*f%o,p=fg(d,i,o)*f%o,g=fg(p,t,o)*u%o;return{pow_p_5_8:fg(g,Cg,o)*e%o,b2:s}}(e*lg(n*n*t,r)).pow_p_5_8;let o=lg(e*n*i,r);const s=lg(t*o*o,r),a=o,c=lg(o*Rg,r),u=s===e,l=s===lg(-e,r),h=s===lg(-e*Rg,r);return u&&(o=a),(l||h)&&(o=c),((e,t)=>(lg(e,t)&ig)===ig)(o,r)&&(o=lg(-o,r)),{isValid:u||l,value:o}}}),Dg=".",jg="base64url",Fg="utf8",zg="utf8",qg="did",Gg="key",Hg="base58btc";function Kg(e){return null!=globalThis.Buffer?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):e}function Vg(e=0){return null!=globalThis.Buffer&&null!=globalThis.Buffer.allocUnsafe?Kg(globalThis.Buffer.allocUnsafe(e)):new Uint8Array(e)}function Wg(e,t){t||(t=e.reduce(((e,t)=>e+t.length),0));const r=Vg(t);let n=0;for(const t of e)r.set(t,n),n+=t.length;return Kg(r)}var $g=function(e,t){if(e.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),n=0;n<r.length;n++)r[n]=255;for(var i=0;i<e.length;i++){var o=e.charAt(i),s=o.charCodeAt(0);if(255!==r[s])throw new TypeError(o+" is ambiguous");r[s]=i}var a=e.length,c=e.charAt(0),u=Math.log(a)/Math.log(256),l=Math.log(256)/Math.log(a);function h(e){if("string"!=typeof e)throw new TypeError("Expected String");if(0===e.length)return new Uint8Array;var t=0;if(" "!==e[t]){for(var n=0,i=0;e[t]===c;)n++,t++;for(var o=(e.length-t)*u+1>>>0,s=new Uint8Array(o);e[t];){var l=r[e.charCodeAt(t)];if(255===l)return;for(var h=0,f=o-1;(0!==l||h<i)&&-1!==f;f--,h++)l+=a*s[f]>>>0,s[f]=l%256>>>0,l=l/256>>>0;if(0!==l)throw new Error("Non-zero carry");i=h,t++}if(" "!==e[t]){for(var d=o-i;d!==o&&0===s[d];)d++;for(var p=new Uint8Array(n+(o-d)),g=n;d!==o;)p[g++]=s[d++];return p}}}return{encode:function(t){if(t instanceof Uint8Array||(ArrayBuffer.isView(t)?t=new Uint8Array(t.buffer,t.byteOffset,t.byteLength):Array.isArray(t)&&(t=Uint8Array.from(t))),!(t instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(0===t.length)return"";for(var r=0,n=0,i=0,o=t.length;i!==o&&0===t[i];)i++,r++;for(var s=(o-i)*l+1>>>0,u=new Uint8Array(s);i!==o;){for(var h=t[i],f=0,d=s-1;(0!==h||f<n)&&-1!==d;d--,f++)h+=256*u[d]>>>0,u[d]=h%a>>>0,h=h/a>>>0;if(0!==h)throw new Error("Non-zero carry");n=f,i++}for(var p=s-n;p!==s&&0===u[p];)p++;for(var g=c.repeat(r);p<s;++p)g+=e.charAt(u[p]);return g},decodeUnsafe:h,decode:function(e){var r=h(e);if(r)return r;throw new Error(`Non-${t} character`)}}};const Jg=e=>{if(e instanceof Uint8Array&&"Uint8Array"===e.constructor.name)return e;if(e instanceof ArrayBuffer)return new Uint8Array(e);if(ArrayBuffer.isView(e))return new Uint8Array(e.buffer,e.byteOffset,e.byteLength);throw new Error("Unknown type, must be binary type")};class Yg{constructor(e,t,r){this.name=e,this.prefix=t,this.baseEncode=r}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}}class Qg{constructor(e,t,r){if(this.name=e,this.prefix=t,void 0===t.codePointAt(0))throw new Error("Invalid prefix character");this.prefixCodePoint=t.codePointAt(0),this.baseDecode=r}decode(e){if("string"==typeof e){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}throw Error("Can only multibase decode strings")}or(e){return Zg(this,e)}}class Xg{constructor(e){this.decoders=e}or(e){return Zg(this,e)}decode(e){const t=e[0],r=this.decoders[t];if(r)return r.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const Zg=(e,t)=>new Xg({...e.decoders||{[e.prefix]:e},...t.decoders||{[t.prefix]:t}});class em{constructor(e,t,r,n){this.name=e,this.prefix=t,this.baseEncode=r,this.baseDecode=n,this.encoder=new Yg(e,t,r),this.decoder=new Qg(e,t,n)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}const tm=({name:e,prefix:t,encode:r,decode:n})=>new em(e,t,r,n),rm=({prefix:e,name:t,alphabet:r})=>{const{encode:n,decode:i}=$g(r,t);return tm({prefix:e,name:t,encode:n,decode:e=>Jg(i(e))})},nm=({name:e,prefix:t,bitsPerChar:r,alphabet:n})=>tm({prefix:t,name:e,encode:e=>((e,t,r)=>{const n="="===t[t.length-1],i=(1<<r)-1;let o="",s=0,a=0;for(let n=0;n<e.length;++n)for(a=a<<8|e[n],s+=8;s>r;)s-=r,o+=t[i&a>>s];if(s&&(o+=t[i&a<<r-s]),n)for(;o.length*r&7;)o+="=";return o})(e,n,r),decode:t=>((e,t,r,n)=>{const i={};for(let e=0;e<t.length;++e)i[t[e]]=e;let o=e.length;for(;"="===e[o-1];)--o;const s=new Uint8Array(o*r/8|0);let a=0,c=0,u=0;for(let t=0;t<o;++t){const o=i[e[t]];if(void 0===o)throw new SyntaxError(`Non-${n} character`);c=c<<r|o,a+=r,a>=8&&(a-=8,s[u++]=255&c>>a)}if(a>=r||255&c<<8-a)throw new SyntaxError("Unexpected end of data");return s})(t,n,r,e)}),im=tm({prefix:"\0",name:"identity",encode:e=>(e=>(new TextDecoder).decode(e))(e),decode:e=>(e=>(new TextEncoder).encode(e))(e)});var om=Object.freeze({__proto__:null,identity:im});const sm=nm({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1});var am=Object.freeze({__proto__:null,base2:sm});const cm=nm({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3});var um=Object.freeze({__proto__:null,base8:cm});const lm=rm({prefix:"9",name:"base10",alphabet:"0123456789"});var hm=Object.freeze({__proto__:null,base10:lm});const fm=nm({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),dm=nm({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});var pm=Object.freeze({__proto__:null,base16:fm,base16upper:dm});const gm=nm({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),mm=nm({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),ym=nm({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),vm=nm({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),bm=nm({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),wm=nm({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),Em=nm({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),Am=nm({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),_m=nm({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});var xm=Object.freeze({__proto__:null,base32:gm,base32upper:mm,base32pad:ym,base32padupper:vm,base32hex:bm,base32hexupper:wm,base32hexpad:Em,base32hexpadupper:Am,base32z:_m});const Sm=rm({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),km=rm({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});var Im=Object.freeze({__proto__:null,base36:Sm,base36upper:km});const Om=rm({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),Tm=rm({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var Pm=Object.freeze({__proto__:null,base58btc:Om,base58flickr:Tm});const Rm=nm({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),Nm=nm({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),Cm=nm({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),Mm=nm({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});var Lm=Object.freeze({__proto__:null,base64:Rm,base64pad:Nm,base64url:Cm,base64urlpad:Mm});const Bm=Array.from(""),Um=Bm.reduce(((e,t,r)=>(e[r]=t,e)),[]),Dm=Bm.reduce(((e,t,r)=>(e[t.codePointAt(0)]=r,e)),[]),jm=tm({prefix:"",name:"base256emoji",encode:function(e){return e.reduce(((e,t)=>e+Um[t]),"")},decode:function(e){const t=[];for(const r of e){const e=Dm[r.codePointAt(0)];if(void 0===e)throw new Error(`Non-base256emoji character: ${r}`);t.push(e)}return new Uint8Array(t)}});var Fm=Object.freeze({__proto__:null,base256emoji:jm}),zm=128,qm=-128,Gm=Math.pow(2,31),Hm=128,Km=127,Vm=Math.pow(2,7),Wm=Math.pow(2,14),$m=Math.pow(2,21),Jm=Math.pow(2,28),Ym=Math.pow(2,35),Qm=Math.pow(2,42),Xm=Math.pow(2,49),Zm=Math.pow(2,56),ey=Math.pow(2,63),ty={encode:function e(t,r,n){r=r||[];for(var i=n=n||0;t>=Gm;)r[n++]=255&t|zm,t/=128;for(;t&qm;)r[n++]=255&t|zm,t>>>=7;return r[n]=0|t,e.bytes=n-i+1,r},decode:function e(t,r){var n,i=0,o=(r=r||0,0),s=r,a=t.length;do{if(s>=a)throw e.bytes=0,new RangeError("Could not decode varint");n=t[s++],i+=o<28?(n&Km)<<o:(n&Km)*Math.pow(2,o),o+=7}while(n>=Hm);return e.bytes=s-r,i},encodingLength:function(e){return e<Vm?1:e<Wm?2:e<$m?3:e<Jm?4:e<Ym?5:e<Qm?6:e<Xm?7:e<Zm?8:e<ey?9:10}},ry=ty;const ny=(e,t,r=0)=>(ry.encode(e,t,r),t),iy=e=>ry.encodingLength(e),oy=(e,t)=>{const r=t.byteLength,n=iy(e),i=n+iy(r),o=new Uint8Array(i+r);return ny(e,o,0),ny(r,o,n),o.set(t,i),new sy(e,r,t,o)};class sy{constructor(e,t,r,n){this.code=e,this.size=t,this.digest=r,this.bytes=n}}const ay=({name:e,code:t,encode:r})=>new cy(e,t,r);class cy{constructor(e,t,r){this.name=e,this.code=t,this.encode=r}digest(e){if(e instanceof Uint8Array){const t=this.encode(e);return t instanceof Uint8Array?oy(this.code,t):t.then((e=>oy(this.code,e)))}throw Error("Unknown type, must be binary type")}}const uy=e=>async t=>new Uint8Array(await crypto.subtle.digest(e,t)),ly=ay({name:"sha2-256",code:18,encode:uy("SHA-256")}),hy=ay({name:"sha2-512",code:19,encode:uy("SHA-512")});Object.freeze({__proto__:null,sha256:ly,sha512:hy});const fy=Jg,dy={code:0,name:"identity",encode:fy,digest:e=>oy(0,fy(e))};Object.freeze({__proto__:null,identity:dy}),new TextEncoder,new TextDecoder;const py={...om,...am,...um,...hm,...pm,...xm,...Im,...Pm,...Lm,...Fm};function gy(e,t,r,n){return{name:e,prefix:t,encoder:{name:e,prefix:t,encode:r},decoder:{decode:n}}}const my=gy("utf8","u",(e=>"u"+new TextDecoder("utf8").decode(e)),(e=>(new TextEncoder).encode(e.substring(1)))),yy=gy("ascii","a",(e=>{let t="a";for(let r=0;r<e.length;r++)t+=String.fromCharCode(e[r]);return t}),(e=>{const t=Vg((e=e.substring(1)).length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t})),vy={utf8:my,"utf-8":my,hex:py.base16,latin1:yy,ascii:yy,binary:yy,...py};function by(e,t="utf8"){const r=vy[t];if(!r)throw new Error(`Unsupported encoding "${t}"`);return"utf8"!==t&&"utf-8"!==t||null==globalThis.Buffer||null==globalThis.Buffer.from?r.encoder.encode(e).substring(1):globalThis.Buffer.from(e.buffer,e.byteOffset,e.byteLength).toString("utf8")}function wy(e,t="utf8"){const r=vy[t];if(!r)throw new Error(`Unsupported encoding "${t}"`);return"utf8"!==t&&"utf-8"!==t||null==globalThis.Buffer||null==globalThis.Buffer.from?r.decoder.decode(`${r.prefix}${e}`):Kg(globalThis.Buffer.from(e,"utf-8"))}function Ey(e){return ld(by(wy(e,jg),Fg))}function Ay(e){return by(wy(hd(e),Fg),jg)}function _y(e){const t="z"+by(Wg([wy("K36",Hg),e]),Hg);return[qg,Gg,t].join(":")}function xy(e){return by(e,jg)}function Sy(e){const t=e.split(Dg),r=Ey(t[0]),n=Ey(t[1]),i=function(e){return wy(e,jg)}(t[2]);return{header:r,payload:n,signature:i,data:wy(t.slice(0,2).join(Dg),zg)}}function ky(e=lp(32)){const t=Ug.getPublicKey(e);return{secretKey:Wg([e,t]),publicKey:t}}var Iy=function(e,t,r){if(r||2===arguments.length)for(var n,i=0,o=t.length;i<o;i++)!n&&i in t||(n||(n=Array.prototype.slice.call(t,0,i)),n[i]=t[i]);return e.concat(n||Array.prototype.slice.call(t))},Oy=function(e,t,r){this.name=e,this.version=t,this.os=r,this.type="browser"},Ty=function(e){this.version=e,this.type="node",this.name="node",this.os=process.platform},Py=function(e,t,r,n){this.name=e,this.version=t,this.os=r,this.bot=n,this.type="bot-device"},Ry=function(){this.type="bot",this.bot=!0,this.name="bot",this.version=null,this.os=null},Ny=function(){this.type="react-native",this.name="react-native",this.version=null,this.os=null},Cy=/(nuhk|curl|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask\ Jeeves\/Teoma|ia_archiver)/,My=[["aol",/AOLShield\/([0-9\._]+)/],["edge",/Edge\/([0-9\._]+)/],["edge-ios",/EdgiOS\/([0-9\._]+)/],["yandexbrowser",/YaBrowser\/([0-9\._]+)/],["kakaotalk",/KAKAOTALK\s([0-9\.]+)/],["samsung",/SamsungBrowser\/([0-9\.]+)/],["silk",/\bSilk\/([0-9._-]+)\b/],["miui",/MiuiBrowser\/([0-9\.]+)$/],["beaker",/BeakerBrowser\/([0-9\.]+)/],["edge-chromium",/EdgA?\/([0-9\.]+)/],["chromium-webview",/(?!Chrom.*OPR)wv\).*Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["chrome",/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["phantomjs",/PhantomJS\/([0-9\.]+)(:?\s|$)/],["crios",/CriOS\/([0-9\.]+)(:?\s|$)/],["firefox",/Firefox\/([0-9\.]+)(?:\s|$)/],["fxios",/FxiOS\/([0-9\.]+)/],["opera-mini",/Opera Mini.*Version\/([0-9\.]+)/],["opera",/Opera\/([0-9\.]+)(?:\s|$)/],["opera",/OPR\/([0-9\.]+)(:?\s|$)/],["pie",/^Microsoft Pocket Internet Explorer\/(\d+\.\d+)$/],["pie",/^Mozilla\/\d\.\d+\s\(compatible;\s(?:MSP?IE|MSInternet Explorer) (\d+\.\d+);.*Windows CE.*\)$/],["netfront",/^Mozilla\/\d\.\d+.*NetFront\/(\d.\d)/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/MSIE\s(7\.0)/],["bb10",/BB10;\sTouch.*Version\/([0-9\.]+)/],["android",/Android\s([0-9\.]+)/],["ios",/Version\/([0-9\._]+).*Mobile.*Safari.*/],["safari",/Version\/([0-9\._]+).*Safari/],["facebook",/FB[AS]V\/([0-9\.]+)/],["instagram",/Instagram\s([0-9\.]+)/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Mobile/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Gecko\)$/],["curl",/^curl\/([0-9\.]+)$/],["searchbot",/alexa|bot|crawl(er|ing)|facebookexternalhit|feedburner|google web preview|nagios|postrank|pingdom|slurp|spider|yahoo!|yandex/]],Ly=[["iOS",/iP(hone|od|ad)/],["Android OS",/Android/],["BlackBerry OS",/BlackBerry|BB10/],["Windows Mobile",/IEMobile/],["Amazon OS",/Kindle/],["Windows 3.11",/Win16/],["Windows 95",/(Windows 95)|(Win95)|(Windows_95)/],["Windows 98",/(Windows 98)|(Win98)/],["Windows 2000",/(Windows NT 5.0)|(Windows 2000)/],["Windows XP",/(Windows NT 5.1)|(Windows XP)/],["Windows Server 2003",/(Windows NT 5.2)/],["Windows Vista",/(Windows NT 6.0)/],["Windows 7",/(Windows NT 6.1)/],["Windows 8",/(Windows NT 6.2)/],["Windows 8.1",/(Windows NT 6.3)/],["Windows 10",/(Windows NT 10.0)/],["Windows ME",/Windows ME/],["Windows CE",/Windows CE|WinCE|Microsoft Pocket Internet Explorer/],["Open BSD",/OpenBSD/],["Sun OS",/SunOS/],["Chrome OS",/CrOS/],["Linux",/(Linux)|(X11)/],["Mac OS",/(Mac_PowerPC)|(Macintosh)/],["QNX",/QNX/],["BeOS",/BeOS/],["OS/2",/OS\/2/]];function By(e){var t=function(e){return""!==e&&My.reduce((function(t,r){var n=r[0],i=r[1];if(t)return t;var o=i.exec(e);return!!o&&[n,o]}),!1)}(e);if(!t)return null;var r=t[0],n=t[1];if("searchbot"===r)return new Ry;var i=n[1]&&n[1].split(".").join("_").split("_").slice(0,3);i?i.length<3&&(i=Iy(Iy([],i,!0),function(e){for(var t=[],r=0;r<e;r++)t.push("0");return t}(3-i.length),!0)):i=[];var o=i.join("."),s=function(e){for(var t=0,r=Ly.length;t<r;t++){var n=Ly[t],i=n[0];if(n[1].exec(e))return i}return null}(e),a=Cy.exec(e);return a&&a[1]?new Py(r,o,s,a[1]):new Oy(r,o,s)}var Uy=r(8196),Dy=r(2063);const jy="2.23.2";let Fy=({docsBaseUrl:e,docsPath:t="",docsSlug:r})=>t?`${e??"https://viem.sh"}${t}${r?`#${r}`:""}`:void 0,zy=`viem@${jy}`;class qy extends Error{constructor(e,t={}){const r=t.cause instanceof qy?t.cause.details:t.cause?.message?t.cause.message:t.details,n=t.cause instanceof qy&&t.cause.docsPath||t.docsPath,i=Fy?.({...t,docsPath:n});super([e||"An error occurred.","",...t.metaMessages?[...t.metaMessages,""]:[],...i?[`Docs: ${i}`]:[],...r?[`Details: ${r}`]:[],...zy?[`Version: ${zy}`]:[]].join("\n"),t.cause?{cause:t.cause}:void 0),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metaMessages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"version",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"BaseError"}),this.details=r,this.docsPath=n,this.metaMessages=t.metaMessages,this.name=t.name??this.name,this.shortMessage=e,this.version=jy}walk(e){return Gy(this,e)}}function Gy(e,t){return t?.(e)?e:e&&"object"==typeof e&&"cause"in e&&void 0!==e.cause?Gy(e.cause,t):t?null:e}function Hy(e,{strict:t=!0}={}){return!!e&&"string"==typeof e&&(t?/^0x[0-9a-fA-F]*$/.test(e):e.startsWith("0x"))}class Ky extends qy{constructor({size:e,targetSize:t,type:r}){super(`${r.charAt(0).toUpperCase()}${r.slice(1).toLowerCase()} size (${e}) exceeds padding size (${t}).`,{name:"SizeExceedsPaddingSizeError"})}}function Vy(e,{dir:t,size:r=32}={}){return"string"==typeof e?function(e,{dir:t,size:r=32}={}){if(null===r)return e;const n=e.replace("0x","");if(n.length>2*r)throw new Ky({size:Math.ceil(n.length/2),targetSize:r,type:"hex"});return`0x${n["right"===t?"padEnd":"padStart"](2*r,"0")}`}(e,{dir:t,size:r}):function(e,{dir:t,size:r=32}={}){if(null===r)return e;if(e.length>r)throw new Ky({size:e.length,targetSize:r,type:"bytes"});const n=new Uint8Array(r);for(let i=0;i<r;i++){const o="right"===t;n[o?i:r-i-1]=e[o?i:e.length-i-1]}return n}(e,{dir:t,size:r})}class Wy extends qy{constructor({max:e,min:t,signed:r,size:n,value:i}){super(`Number "${i}" is not in safe ${n?`${8*n}-bit ${r?"signed":"unsigned"} `:""}integer range ${e?`(${t} to ${e})`:`(above ${t})`}`,{name:"IntegerOutOfRangeError"})}}class $y extends qy{constructor({givenSize:e,maxSize:t}){super(`Size cannot exceed ${t} bytes. Given size: ${e} bytes.`,{name:"SizeOverflowError"})}}function Jy(e){return Hy(e,{strict:!1})?Math.ceil((e.length-2)/2):e.length}function Yy(e,{size:t}){if(Jy(e)>t)throw new $y({givenSize:Jy(e),maxSize:t})}function Qy(e,t={}){const{signed:r}=t;t.size&&Yy(e,{size:t.size});const n=BigInt(e);if(!r)return n;const i=(e.length-2)/2;return n<=(1n<<8n*BigInt(i)-1n)-1n?n:n-BigInt(`0x${"f".padStart(2*i,"f")}`)-1n}const Xy=Array.from({length:256},((e,t)=>t.toString(16).padStart(2,"0")));function Zy(e,t={}){return"number"==typeof e||"bigint"==typeof e?tv(e,t):"string"==typeof e?function(e,t={}){return ev(rv.encode(e),t)}(e,t):"boolean"==typeof e?function(e,t={}){const r=`0x${Number(e)}`;return"number"==typeof t.size?(Yy(r,{size:t.size}),Vy(r,{size:t.size})):r}(e,t):ev(e,t)}function ev(e,t={}){let r="";for(let t=0;t<e.length;t++)r+=Xy[e[t]];const n=`0x${r}`;return"number"==typeof t.size?(Yy(n,{size:t.size}),Vy(n,{dir:"right",size:t.size})):n}function tv(e,t={}){const{signed:r,size:n}=t,i=BigInt(e);let o;n?o=r?(1n<<8n*BigInt(n)-1n)-1n:2n**(8n*BigInt(n))-1n:"number"==typeof e&&(o=BigInt(Number.MAX_SAFE_INTEGER));const s="bigint"==typeof o&&r?-o-1n:0;if(o&&i>o||i<s){const t="bigint"==typeof e?"n":"";throw new Wy({max:o?`${o}${t}`:void 0,min:`${s}${t}`,signed:r,size:n,value:`${e}${t}`})}const a=`0x${(r&&i<0?(1n<<BigInt(8*n))+BigInt(i):i).toString(16)}`;return n?Vy(a,{size:n}):a}const rv=new TextEncoder,nv=new TextEncoder;const iv={zero:48,nine:57,A:65,F:70,a:97,f:102};function ov(e){return e>=iv.zero&&e<=iv.nine?e-iv.zero:e>=iv.A&&e<=iv.F?e-(iv.A-10):e>=iv.a&&e<=iv.f?e-(iv.a-10):void 0}function sv(e,t={}){let r=e;t.size&&(Yy(r,{size:t.size}),r=Vy(r,{dir:"right",size:t.size}));let n=r.slice(2);n.length%2&&(n=`0${n}`);const i=n.length/2,o=new Uint8Array(i);for(let e=0,t=0;e<i;e++){const r=ov(n.charCodeAt(t++)),i=ov(n.charCodeAt(t++));if(void 0===r||void 0===i)throw new qy(`Invalid byte sequence ("${n[t-2]}${n[t-1]}" in "${n}").`);o[e]=16*r+i}return o}function av(e,t={}){const r=nv.encode(e);return"number"==typeof t.size?(Yy(r,{size:t.size}),Vy(r,{dir:"right",size:t.size})):r}var cv=r(9999);const uv=BigInt(2**32-1),lv=BigInt(32);function hv(e,t=!1){return t?{h:Number(e&uv),l:Number(e>>lv&uv)}:{h:0|Number(e>>lv&uv),l:0|Number(e&uv)}}function fv(e,t=!1){let r=new Uint32Array(e.length),n=new Uint32Array(e.length);for(let i=0;i<e.length;i++){const{h:o,l:s}=hv(e[i],t);[r[i],n[i]]=[o,s]}return[r,n]}var dv=r(5924);const pv=[],gv=[],mv=[],yv=BigInt(0),vv=BigInt(1),bv=BigInt(2),wv=BigInt(7),Ev=BigInt(256),Av=BigInt(113);for(let e=0,t=vv,r=1,n=0;e<24;e++){[r,n]=[n,(2*r+3*n)%5],pv.push(2*(5*n+r)),gv.push((e+1)*(e+2)/2%64);let i=yv;for(let e=0;e<7;e++)t=(t<<vv^(t>>wv)*Av)%Ev,t&bv&&(i^=vv<<(vv<<BigInt(e))-vv);mv.push(i)}const[_v,xv]=fv(mv,!0),Sv=(e,t,r)=>r>32?((e,t,r)=>t<<r-32|e>>>64-r)(e,t,r):((e,t,r)=>e<<r|t>>>32-r)(e,t,r),kv=(e,t,r)=>r>32?((e,t,r)=>e<<r-32|t>>>64-r)(e,t,r):((e,t,r)=>t<<r|e>>>32-r)(e,t,r);class Iv extends dv.Vw{constructor(e,t,r,n=!1,i=24){if(super(),this.blockLen=e,this.suffix=t,this.outputLen=r,this.enableXOF=n,this.rounds=i,this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,(0,cv.Fe)(r),0>=this.blockLen||this.blockLen>=200)throw new Error("Sha3 supports only keccak-f1600 function");this.state=new Uint8Array(200),this.state32=(0,dv.DH)(this.state)}keccak(){dv.qv||(0,dv.Fc)(this.state32),function(e,t=24){const r=new Uint32Array(10);for(let n=24-t;n<24;n++){for(let t=0;t<10;t++)r[t]=e[t]^e[t+10]^e[t+20]^e[t+30]^e[t+40];for(let t=0;t<10;t+=2){const n=(t+8)%10,i=(t+2)%10,o=r[i],s=r[i+1],a=Sv(o,s,1)^r[n],c=kv(o,s,1)^r[n+1];for(let r=0;r<50;r+=10)e[t+r]^=a,e[t+r+1]^=c}let t=e[2],i=e[3];for(let r=0;r<24;r++){const n=gv[r],o=Sv(t,i,n),s=kv(t,i,n),a=pv[r];t=e[a],i=e[a+1],e[a]=o,e[a+1]=s}for(let t=0;t<50;t+=10){for(let n=0;n<10;n++)r[n]=e[t+n];for(let n=0;n<10;n++)e[t+n]^=~r[(n+2)%10]&r[(n+4)%10]}e[0]^=_v[n],e[1]^=xv[n]}r.fill(0)}(this.state32,this.rounds),dv.qv||(0,dv.Fc)(this.state32),this.posOut=0,this.pos=0}update(e){(0,cv.CC)(this);const{blockLen:t,state:r}=this,n=(e=(0,dv.ZJ)(e)).length;for(let i=0;i<n;){const o=Math.min(t-this.pos,n-i);for(let t=0;t<o;t++)r[this.pos++]^=e[i++];this.pos===t&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:e,suffix:t,pos:r,blockLen:n}=this;e[r]^=t,128&t&&r===n-1&&this.keccak(),e[n-1]^=128,this.keccak()}writeInto(e){(0,cv.CC)(this,!1),(0,cv.DO)(e),this.finish();const t=this.state,{blockLen:r}=this;for(let n=0,i=e.length;n<i;){this.posOut>=r&&this.keccak();const o=Math.min(r-this.posOut,i-n);e.set(t.subarray(this.posOut,this.posOut+o),n),this.posOut+=o,n+=o}return e}xofInto(e){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return(0,cv.Fe)(e),this.xofInto(new Uint8Array(e))}digestInto(e){if((0,cv.Ht)(e,this),this.finished)throw new Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,this.state.fill(0)}_cloneInto(e){const{blockLen:t,suffix:r,outputLen:n,rounds:i,enableXOF:o}=this;return e||(e=new Iv(t,r,n,o,i)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=i,e.suffix=r,e.outputLen=n,e.enableXOF=o,e.destroyed=this.destroyed,e}}const Ov=((e,t,r)=>(0,dv.ld)((()=>new Iv(t,e,r))))(1,136,32);function Tv(e,t){const r=t||"hex",n=Ov(Hy(e,{strict:!1})?function(e,t={}){return"number"==typeof e||"bigint"==typeof e?function(e,t){return sv(tv(e,t))}(e,t):"boolean"==typeof e?function(e,t={}){const r=new Uint8Array(1);return r[0]=Number(e),"number"==typeof t.size?(Yy(r,{size:t.size}),Vy(r,{size:t.size})):r}(e,t):Hy(e)?sv(e,t):av(e,t)}(e):e);return"bytes"===r?n:Zy(n)}class Pv extends Map{constructor(e){super(),Object.defineProperty(this,"maxSize",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.maxSize=e}get(e){const t=super.get(e);return super.has(e)&&void 0!==t&&(this.delete(e),super.set(e,t)),t}set(e,t){if(super.set(e,t),this.maxSize&&this.size>this.maxSize){const e=this.keys().next().value;e&&this.delete(e)}return this}}const Rv=new Pv(8192);function Nv(e){if(0===e||1===e)return e;if(27===e)return 0;if(28===e)return 1;throw new Error("Invalid yParityOrV value")}async function Cv({hash:e,signature:t}){return n=await async function({hash:e,signature:t}){const n=Hy(e)?e:Zy(e),{secp256k1:i}=await r.e(641).then(r.bind(r,4641)),o=(()=>{if("object"==typeof t&&"r"in t&&"s"in t){const{r:e,s:r,v:n,yParity:o}=t,s=Nv(Number(o??n));return new i.Signature(Qy(e),Qy(r)).addRecoveryBit(s)}const e=Hy(t)?t:Zy(t),r=Nv(function(e,t={}){return Number(Qy(e,t))}(`0x${e.slice(130)}`));return i.Signature.fromCompact(e.substring(2,130)).addRecoveryBit(r)})();return`0x${o.recoverPublicKey(n.substring(2)).toHex(!1)}`}({hash:e,signature:t}),function(e,t){if(Rv.has(`${e}.${t}`))return Rv.get(`${e}.${t}`);const r=t?`${t}${e.toLowerCase()}`:e.substring(2).toLowerCase(),n=Tv(av(r),"bytes"),i=(t?r.substring(`${t}0x`.length):r).split("");for(let e=0;e<40;e+=2)n[e>>1]>>4>=8&&i[e]&&(i[e]=i[e].toUpperCase()),(15&n[e>>1])>=8&&i[e+1]&&(i[e+1]=i[e+1].toUpperCase());const o=`0x${i.join("")}`;return Rv.set(`${e}.${t}`,o),o}(`0x${Tv(`0x${n.substring(4)}`).substring(26)}`);var n}const Mv=function(e){if(e.length>=255)throw new TypeError("Alphabet too long");const t=new Uint8Array(256);for(let e=0;e<t.length;e++)t[e]=255;for(let r=0;r<e.length;r++){const n=e.charAt(r),i=n.charCodeAt(0);if(255!==t[i])throw new TypeError(n+" is ambiguous");t[i]=r}const r=e.length,n=e.charAt(0),i=Math.log(r)/Math.log(256),o=Math.log(256)/Math.log(r);function s(e){if("string"!=typeof e)throw new TypeError("Expected String");if(0===e.length)return new Uint8Array;let o=0,s=0,a=0;for(;e[o]===n;)s++,o++;const c=(e.length-o)*i+1>>>0,u=new Uint8Array(c);for(;o<e.length;){const n=e.charCodeAt(o);if(n>255)return;let i=t[n];if(255===i)return;let s=0;for(let e=c-1;(0!==i||s<a)&&-1!==e;e--,s++)i+=r*u[e]>>>0,u[e]=i%256>>>0,i=i/256>>>0;if(0!==i)throw new Error("Non-zero carry");a=s,o++}let l=c-a;for(;l!==c&&0===u[l];)l++;const h=new Uint8Array(s+(c-l));let f=s;for(;l!==c;)h[f++]=u[l++];return h}return{encode:function(t){if(t instanceof Uint8Array||(ArrayBuffer.isView(t)?t=new Uint8Array(t.buffer,t.byteOffset,t.byteLength):Array.isArray(t)&&(t=Uint8Array.from(t))),!(t instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(0===t.length)return"";let i=0,s=0,a=0;const c=t.length;for(;a!==c&&0===t[a];)a++,i++;const u=(c-a)*o+1>>>0,l=new Uint8Array(u);for(;a!==c;){let e=t[a],n=0;for(let t=u-1;(0!==e||n<s)&&-1!==t;t--,n++)e+=256*l[t]>>>0,l[t]=e%r>>>0,e=e/r>>>0;if(0!==e)throw new Error("Non-zero carry");s=n,a++}let h=u-s;for(;h!==u&&0===l[h];)h++;let f=n.repeat(i);for(;h<u;++h)f+=e.charAt(l[h]);return f},decodeUnsafe:s,decode:function(e){const t=s(e);if(t)return t;throw new Error("Non-base"+r+" character")}}}("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz");function Lv(e=0){return null!=globalThis.Buffer&&null!=globalThis.Buffer.allocUnsafe?globalThis.Buffer.allocUnsafe(e):new Uint8Array(e)}function Bv(e,t){t||(t=e.reduce(((e,t)=>e+t.length),0));const r=Lv(t);let n=0;for(const t of e)r.set(t,n),n+=t.length;return r}const Uv=function(e,t){if(e.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),n=0;n<r.length;n++)r[n]=255;for(var i=0;i<e.length;i++){var o=e.charAt(i),s=o.charCodeAt(0);if(255!==r[s])throw new TypeError(o+" is ambiguous");r[s]=i}var a=e.length,c=e.charAt(0),u=Math.log(a)/Math.log(256),l=Math.log(256)/Math.log(a);function h(e){if("string"!=typeof e)throw new TypeError("Expected String");if(0===e.length)return new Uint8Array;var t=0;if(" "!==e[t]){for(var n=0,i=0;e[t]===c;)n++,t++;for(var o=(e.length-t)*u+1>>>0,s=new Uint8Array(o);e[t];){var l=r[e.charCodeAt(t)];if(255===l)return;for(var h=0,f=o-1;(0!==l||h<i)&&-1!==f;f--,h++)l+=a*s[f]>>>0,s[f]=l%256>>>0,l=l/256>>>0;if(0!==l)throw new Error("Non-zero carry");i=h,t++}if(" "!==e[t]){for(var d=o-i;d!==o&&0===s[d];)d++;for(var p=new Uint8Array(n+(o-d)),g=n;d!==o;)p[g++]=s[d++];return p}}}return{encode:function(t){if(t instanceof Uint8Array||(ArrayBuffer.isView(t)?t=new Uint8Array(t.buffer,t.byteOffset,t.byteLength):Array.isArray(t)&&(t=Uint8Array.from(t))),!(t instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(0===t.length)return"";for(var r=0,n=0,i=0,o=t.length;i!==o&&0===t[i];)i++,r++;for(var s=(o-i)*l+1>>>0,u=new Uint8Array(s);i!==o;){for(var h=t[i],f=0,d=s-1;(0!==h||f<n)&&-1!==d;d--,f++)h+=256*u[d]>>>0,u[d]=h%a>>>0,h=h/a>>>0;if(0!==h)throw new Error("Non-zero carry");n=f,i++}for(var p=s-n;p!==s&&0===u[p];)p++;for(var g=c.repeat(r);p<s;++p)g+=e.charAt(u[p]);return g},decodeUnsafe:h,decode:function(e){var r=h(e);if(r)return r;throw new Error(`Non-${t} character`)}}},Dv=(new Uint8Array(0),e=>{if(e instanceof Uint8Array&&"Uint8Array"===e.constructor.name)return e;if(e instanceof ArrayBuffer)return new Uint8Array(e);if(ArrayBuffer.isView(e))return new Uint8Array(e.buffer,e.byteOffset,e.byteLength);throw new Error("Unknown type, must be binary type")});class jv{constructor(e,t,r){this.name=e,this.prefix=t,this.baseEncode=r}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}}class Fv{constructor(e,t,r){if(this.name=e,this.prefix=t,void 0===t.codePointAt(0))throw new Error("Invalid prefix character");this.prefixCodePoint=t.codePointAt(0),this.baseDecode=r}decode(e){if("string"==typeof e){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}throw Error("Can only multibase decode strings")}or(e){return qv(this,e)}}class zv{constructor(e){this.decoders=e}or(e){return qv(this,e)}decode(e){const t=e[0],r=this.decoders[t];if(r)return r.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const qv=(e,t)=>new zv({...e.decoders||{[e.prefix]:e},...t.decoders||{[t.prefix]:t}});class Gv{constructor(e,t,r,n){this.name=e,this.prefix=t,this.baseEncode=r,this.baseDecode=n,this.encoder=new jv(e,t,r),this.decoder=new Fv(e,t,n)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}const Hv=({name:e,prefix:t,encode:r,decode:n})=>new Gv(e,t,r,n),Kv=({prefix:e,name:t,alphabet:r})=>{const{encode:n,decode:i}=Uv(r,t);return Hv({prefix:e,name:t,encode:n,decode:e=>Dv(i(e))})},Vv=({name:e,prefix:t,bitsPerChar:r,alphabet:n})=>Hv({prefix:t,name:e,encode:e=>((e,t,r)=>{const n="="===t[t.length-1],i=(1<<r)-1;let o="",s=0,a=0;for(let n=0;n<e.length;++n)for(a=a<<8|e[n],s+=8;s>r;)s-=r,o+=t[i&a>>s];if(s&&(o+=t[i&a<<r-s]),n)for(;o.length*r&7;)o+="=";return o})(e,n,r),decode:t=>((e,t,r,n)=>{const i={};for(let e=0;e<t.length;++e)i[t[e]]=e;let o=e.length;for(;"="===e[o-1];)--o;const s=new Uint8Array(o*r/8|0);let a=0,c=0,u=0;for(let t=0;t<o;++t){const o=i[e[t]];if(void 0===o)throw new SyntaxError(`Non-${n} character`);c=c<<r|o,a+=r,a>=8&&(a-=8,s[u++]=255&c>>a)}if(a>=r||255&c<<8-a)throw new SyntaxError("Unexpected end of data");return s})(t,n,r,e)}),Wv=Hv({prefix:"\0",name:"identity",encode:e=>{return t=e,(new TextDecoder).decode(t);var t},decode:e=>(e=>(new TextEncoder).encode(e))(e)}),$v=Vv({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1}),Jv=Vv({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3}),Yv=Kv({prefix:"9",name:"base10",alphabet:"0123456789"}),Qv=Vv({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),Xv=Vv({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4}),Zv=Vv({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),eb=Vv({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),tb=Vv({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),rb=Vv({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),nb=Vv({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),ib=Vv({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),ob=Vv({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),sb=Vv({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),ab=Vv({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5}),cb=Kv({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),ub=Kv({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"}),lb=Kv({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),hb=Kv({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"}),fb=Vv({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),db=Vv({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),pb=Vv({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),gb=Vv({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6}),mb=Array.from(""),yb=mb.reduce(((e,t,r)=>(e[r]=t,e)),[]),vb=mb.reduce(((e,t,r)=>(e[t.codePointAt(0)]=r,e)),[]),bb=Hv({prefix:"",name:"base256emoji",encode:function(e){return e.reduce(((e,t)=>e+yb[t]),"")},decode:function(e){const t=[];for(const r of e){const e=vb[r.codePointAt(0)];if(void 0===e)throw new Error(`Non-base256emoji character: ${r}`);t.push(e)}return new Uint8Array(t)}});var wb=128,Eb=-128,Ab=Math.pow(2,31),_b=Math.pow(2,7),xb=Math.pow(2,14),Sb=Math.pow(2,21),kb=Math.pow(2,28),Ib=Math.pow(2,35),Ob=Math.pow(2,42),Tb=Math.pow(2,49),Pb=Math.pow(2,56),Rb=Math.pow(2,63);const Nb=function e(t,r,n){r=r||[];for(var i=n=n||0;t>=Ab;)r[n++]=255&t|wb,t/=128;for(;t&Eb;)r[n++]=255&t|wb,t>>>=7;return r[n]=0|t,e.bytes=n-i+1,r},Cb=function(e){return e<_b?1:e<xb?2:e<Sb?3:e<kb?4:e<Ib?5:e<Ob?6:e<Tb?7:e<Pb?8:e<Rb?9:10},Mb=(e,t,r=0)=>(Nb(e,t,r),t),Lb=e=>Cb(e),Bb=(e,t)=>{const r=t.byteLength,n=Lb(e),i=n+Lb(r),o=new Uint8Array(i+r);return Mb(e,o,0),Mb(r,o,n),o.set(t,i),new Ub(e,r,t,o)};class Ub{constructor(e,t,r,n){this.code=e,this.size=t,this.digest=r,this.bytes=n}}const Db=({name:e,code:t,encode:r})=>new jb(e,t,r);class jb{constructor(e,t,r){this.name=e,this.code=t,this.encode=r}digest(e){if(e instanceof Uint8Array){const t=this.encode(e);return t instanceof Uint8Array?Bb(this.code,t):t.then((e=>Bb(this.code,e)))}throw Error("Unknown type, must be binary type")}}const Fb=e=>async t=>new Uint8Array(await crypto.subtle.digest(e,t)),zb=Db({name:"sha2-256",code:18,encode:Fb("SHA-256")}),qb=Db({name:"sha2-512",code:19,encode:Fb("SHA-512")}),Gb=Dv,Hb={code:0,name:"identity",encode:Gb,digest:e=>Bb(0,Gb(e))},Kb="raw",Vb=85,Wb=e=>Dv(e),$b=e=>Dv(e),Jb=new TextEncoder,Yb=new TextDecoder,Qb="json",Xb=512,Zb=e=>Jb.encode(JSON.stringify(e)),ew=e=>JSON.parse(Yb.decode(e));Symbol.toStringTag,Symbol.for("nodejs.util.inspect.custom"),Symbol.for("@ipld/js-cid/CID");const tw={...i,...o,...s,...a,...c,...u,...l,...h,...f,...d};function rw(e,t,r,n){return{name:e,prefix:t,encoder:{name:e,prefix:t,encode:r},decoder:{decode:n}}}const nw=rw("utf8","u",(e=>"u"+new TextDecoder("utf8").decode(e)),(e=>(new TextEncoder).encode(e.substring(1)))),iw=rw("ascii","a",(e=>{let t="a";for(let r=0;r<e.length;r++)t+=String.fromCharCode(e[r]);return t}),(e=>{const t=Lv((e=e.substring(1)).length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t})),ow={utf8:nw,"utf-8":nw,hex:tw.base16,latin1:iw,ascii:iw,binary:iw,...tw};function sw(e,t="utf8"){const r=ow[t];if(!r)throw new Error(`Unsupported encoding "${t}"`);return"utf8"!==t&&"utf-8"!==t||null==globalThis.Buffer||null==globalThis.Buffer.from?r.decoder.decode(`${r.prefix}${e}`):globalThis.Buffer.from(e,"utf8")}function aw(e,t="utf8"){const r=ow[t];if(!r)throw new Error(`Unsupported encoding "${t}"`);return"utf8"!==t&&"utf-8"!==t||null==globalThis.Buffer||null==globalThis.Buffer.from?r.encoder.encode(e).substring(1):globalThis.Buffer.from(e.buffer,e.byteOffset,e.byteLength).toString("utf8")}const cw={waku:{publish:"waku_publish",batchPublish:"waku_batchPublish",subscribe:"waku_subscribe",batchSubscribe:"waku_batchSubscribe",subscription:"waku_subscription",unsubscribe:"waku_unsubscribe",batchUnsubscribe:"waku_batchUnsubscribe",batchFetchMessages:"waku_batchFetchMessages"},irn:{publish:"irn_publish",batchPublish:"irn_batchPublish",subscribe:"irn_subscribe",batchSubscribe:"irn_batchSubscribe",subscription:"irn_subscription",unsubscribe:"irn_unsubscribe",batchUnsubscribe:"irn_batchUnsubscribe",batchFetchMessages:"irn_batchFetchMessages"},iridium:{publish:"iridium_publish",batchPublish:"iridium_batchPublish",subscribe:"iridium_subscribe",batchSubscribe:"iridium_batchSubscribe",subscription:"iridium_subscription",unsubscribe:"iridium_unsubscribe",batchUnsubscribe:"iridium_batchUnsubscribe",batchFetchMessages:"iridium_batchFetchMessages"}};function uw(e){const[t,r]=e.split(":");return{namespace:t,reference:r}}function lw(e,t){return e.includes(":")?[e]:t.chains||[]}var hw=Object.defineProperty,fw=Object.defineProperties,dw=Object.getOwnPropertyDescriptors,pw=Object.getOwnPropertySymbols,gw=Object.prototype.hasOwnProperty,mw=Object.prototype.propertyIsEnumerable,yw=(e,t,r)=>t in e?hw(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,vw=(e,t)=>{for(var r in t||(t={}))gw.call(t,r)&&yw(e,r,t[r]);if(pw)for(var r of pw(t))mw.call(t,r)&&yw(e,r,t[r]);return e};const bw="react-native",ww="browser",Ew="js";function Aw(){return typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"}function _w(){return!(0,Uy.getDocument)()&&!!(0,Uy.getNavigator)()&&"ReactNative"===navigator.product}function xw(){return!Aw()&&!!(0,Uy.getNavigator)()&&!!(0,Uy.getDocument)()}function Sw(){return _w()?bw:Aw()?"node":xw()?ww:"unknown"}function kw(){var e;try{return _w()&&typeof r.g<"u"&&typeof(null==r.g?void 0:r.g.Application)<"u"?null==(e=r.g.Application)?void 0:e.applicationId:void 0}catch{return}}function Iw(){return(0,Dy.g)()||{name:"",description:"",url:"",icons:[""]}}function Ow(e,t,n){const i=function(){if(Sw()===bw&&typeof r.g<"u"&&typeof(null==r.g?void 0:r.g.Platform)<"u"){const{OS:e,Version:t}=r.g.Platform;return[e,t].join("-")}const e=t?By(t):"undefined"==typeof document&&"undefined"!=typeof navigator&&"ReactNative"===navigator.product?new Ny:"undefined"!=typeof navigator?By(navigator.userAgent):"undefined"!=typeof process&&process.version?new Ty(process.version.slice(1)):null;var t;if(null===e)return"unknown";const n=e.os?e.os.replace(" ","").toLowerCase():"unknown";return"browser"===e.type?[n,e.name,e.version].join("-"):[n,e.version].join("-")}(),o=function(){var e;const t=Sw();return t===ww?[t,(null==(e=(0,Uy.getLocation)())?void 0:e.host)||"unknown"].join(":"):t}();return[[e,t].join("-"),[Ew,n].join("-"),i,o].join("/")}function Tw(e,t){return e.filter((e=>t.includes(e))).length===e.length}function Pw(e){return Object.fromEntries(e.entries())}function Rw(e){return new Map(Object.entries(e))}function Nw(e=Df.FIVE_MINUTES,t){const r=(0,Df.toMiliseconds)(e||Df.FIVE_MINUTES);let n,i,o,s;return{resolve:e=>{o&&n&&(clearTimeout(o),n(e),s=Promise.resolve(e))},reject:e=>{o&&i&&(clearTimeout(o),i(e))},done:()=>new Promise(((e,a)=>{if(s)return e(s);o=setTimeout((()=>{const e=new Error(t);s=Promise.reject(e),a(e)}),r),n=e,i=a}))}}function Cw(e,t,r){return new Promise((async(n,i)=>{const o=setTimeout((()=>i(new Error(r))),t);try{n(await e)}catch(e){i(e)}clearTimeout(o)}))}function Mw(e,t){if("string"==typeof t&&t.startsWith(`${e}:`))return t;if("topic"===e.toLowerCase()){if("string"!=typeof t)throw new Error('Value must be "string" for expirer target type: topic');return`topic:${t}`}if("id"===e.toLowerCase()){if("number"!=typeof t)throw new Error('Value must be "number" for expirer target type: id');return`id:${t}`}throw new Error(`Unknown expirer target type: ${e}`)}function Lw(e){const[t,r]=e.split(":"),n={id:void 0,topic:void 0};if("topic"===t&&"string"==typeof r)n.topic=r;else{if("id"!==t||!Number.isInteger(Number(r)))throw new Error(`Invalid target, expected id:number or topic:string, got ${t}:${r}`);n.id=Number(r)}return n}function Bw(e,t){return(0,Df.fromMiliseconds)((t||Date.now())+(0,Df.toMiliseconds)(e))}function Uw(e){return Date.now()>=(0,Df.toMiliseconds)(e)}function Dw(e,t){return`${e}${t?`:${t}`:""}`}function jw(e=[],t=[]){return[...new Set([...e,...t])]}function Fw(e,t){if(!e.includes(t))return null;const r=e.split(/([&,?,=])/),n=r.indexOf(t);return r[n+2]}function zw(){return typeof crypto<"u"&&null!=crypto&&crypto.randomUUID?crypto.randomUUID():"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/gu,(e=>{const t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)}))}function qw(){return typeof process<"u"&&"true"===process.env.IS_VITEST}function Gw(e){return Buffer.from(e,"base64").toString("utf-8")}function Hw(e){if(!Number.isSafeInteger(e)||e<0)throw new Error("positive integer expected, got "+e)}function Kw(e,...t){if(!function(e){return e instanceof Uint8Array||ArrayBuffer.isView(e)&&"Uint8Array"===e.constructor.name}(e))throw new Error("Uint8Array expected");if(t.length>0&&!t.includes(e.length))throw new Error("Uint8Array expected of length "+t+", got length="+e.length)}function Vw(e){if("function"!=typeof e||"function"!=typeof e.create)throw new Error("Hash should be wrapped by utils.wrapConstructor");Hw(e.outputLen),Hw(e.blockLen)}function Ww(e,t=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")}function $w(e,t){Kw(e);const r=t.outputLen;if(e.length<r)throw new Error("digestInto() expects output buffer of length at least "+r)}const Jw=BigInt(2**32-1),Yw=BigInt(32);function Qw(e,t=!1){return t?{h:Number(e&Jw),l:Number(e>>Yw&Jw)}:{h:0|Number(e>>Yw&Jw),l:0|Number(e&Jw)}}const Xw="object"==typeof globalThis&&"crypto"in globalThis?globalThis.crypto:void 0;function Zw(e){return new DataView(e.buffer,e.byteOffset,e.byteLength)}function eE(e,t){return e<<32-t|e>>>t}const tE=68===new Uint8Array(new Uint32Array([287454020]).buffer)[0];function rE(e){return e<<24&4278190080|e<<8&16711680|e>>>8&65280|e>>>24&255}function nE(e){for(let t=0;t<e.length;t++)e[t]=rE(e[t])}function iE(e){return"string"==typeof e&&(e=function(e){if("string"!=typeof e)throw new Error("utf8ToBytes expected string, got "+typeof e);return new Uint8Array((new TextEncoder).encode(e))}(e)),Kw(e),e}class oE{clone(){return this._cloneInto()}}function sE(e){const t=t=>e().update(iE(t)).digest(),r=e();return t.outputLen=r.outputLen,t.blockLen=r.blockLen,t.create=()=>e(),t}function aE(e=32){if(Xw&&"function"==typeof Xw.getRandomValues)return Xw.getRandomValues(new Uint8Array(e));if(Xw&&"function"==typeof Xw.randomBytes)return Xw.randomBytes(e);throw new Error("crypto.getRandomValues must be defined")}const cE=[],uE=[],lE=[],hE=BigInt(0),fE=BigInt(1),dE=BigInt(2),pE=BigInt(7),gE=BigInt(256),mE=BigInt(113);for(let e=0,t=fE,r=1,n=0;e<24;e++){[r,n]=[n,(2*r+3*n)%5],cE.push(2*(5*n+r)),uE.push((e+1)*(e+2)/2%64);let i=hE;for(let e=0;e<7;e++)t=(t<<fE^(t>>pE)*mE)%gE,t&dE&&(i^=fE<<(fE<<BigInt(e))-fE);lE.push(i)}const[yE,vE]=function(e,t=!1){let r=new Uint32Array(e.length),n=new Uint32Array(e.length);for(let i=0;i<e.length;i++){const{h:o,l:s}=Qw(e[i],t);[r[i],n[i]]=[o,s]}return[r,n]}(lE,!0),bE=(e,t,r)=>r>32?((e,t,r)=>t<<r-32|e>>>64-r)(e,t,r):((e,t,r)=>e<<r|t>>>32-r)(e,t,r),wE=(e,t,r)=>r>32?((e,t,r)=>e<<r-32|t>>>64-r)(e,t,r):((e,t,r)=>t<<r|e>>>32-r)(e,t,r);class EE extends oE{constructor(e,t,r,n=!1,i=24){if(super(),this.blockLen=e,this.suffix=t,this.outputLen=r,this.enableXOF=n,this.rounds=i,this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,Hw(r),0>=this.blockLen||this.blockLen>=200)throw new Error("Sha3 supports only keccak-f1600 function");this.state=new Uint8Array(200),this.state32=function(e){return new Uint32Array(e.buffer,e.byteOffset,Math.floor(e.byteLength/4))}(this.state)}keccak(){tE||nE(this.state32),function(e,t=24){const r=new Uint32Array(10);for(let n=24-t;n<24;n++){for(let t=0;t<10;t++)r[t]=e[t]^e[t+10]^e[t+20]^e[t+30]^e[t+40];for(let t=0;t<10;t+=2){const n=(t+8)%10,i=(t+2)%10,o=r[i],s=r[i+1],a=bE(o,s,1)^r[n],c=wE(o,s,1)^r[n+1];for(let r=0;r<50;r+=10)e[t+r]^=a,e[t+r+1]^=c}let t=e[2],i=e[3];for(let r=0;r<24;r++){const n=uE[r],o=bE(t,i,n),s=wE(t,i,n),a=cE[r];t=e[a],i=e[a+1],e[a]=o,e[a+1]=s}for(let t=0;t<50;t+=10){for(let n=0;n<10;n++)r[n]=e[t+n];for(let n=0;n<10;n++)e[t+n]^=~r[(n+2)%10]&r[(n+4)%10]}e[0]^=yE[n],e[1]^=vE[n]}r.fill(0)}(this.state32,this.rounds),tE||nE(this.state32),this.posOut=0,this.pos=0}update(e){Ww(this);const{blockLen:t,state:r}=this,n=(e=iE(e)).length;for(let i=0;i<n;){const o=Math.min(t-this.pos,n-i);for(let t=0;t<o;t++)r[this.pos++]^=e[i++];this.pos===t&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:e,suffix:t,pos:r,blockLen:n}=this;e[r]^=t,!!(128&t)&&r===n-1&&this.keccak(),e[n-1]^=128,this.keccak()}writeInto(e){Ww(this,!1),Kw(e),this.finish();const t=this.state,{blockLen:r}=this;for(let n=0,i=e.length;n<i;){this.posOut>=r&&this.keccak();const o=Math.min(r-this.posOut,i-n);e.set(t.subarray(this.posOut,this.posOut+o),n),this.posOut+=o,n+=o}return e}xofInto(e){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return Hw(e),this.xofInto(new Uint8Array(e))}digestInto(e){if($w(e,this),this.finished)throw new Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,this.state.fill(0)}_cloneInto(e){const{blockLen:t,suffix:r,outputLen:n,rounds:i,enableXOF:o}=this;return e||(e=new EE(t,r,n,o,i)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=i,e.suffix=r,e.outputLen=n,e.enableXOF=o,e.destroyed=this.destroyed,e}}const AE=sE((()=>new EE(136,1,32)));function _E(e){const t=`Ethereum Signed Message:\n${e.length}`,r=(new TextEncoder).encode(t+e);return"0x"+Buffer.from(AE(r)).toString("hex")}var xE=Object.defineProperty,SE=Object.defineProperties,kE=Object.getOwnPropertyDescriptors,IE=Object.getOwnPropertySymbols,OE=Object.prototype.hasOwnProperty,TE=Object.prototype.propertyIsEnumerable,PE=(e,t,r)=>t in e?xE(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;const RE=e=>e?.split(":"),NE=e=>{const t=e&&RE(e);if(t)return t[2]+":"+t[3]},CE=e=>{const t=e&&RE(e);if(t)return t.pop()};async function ME(e){const{cacao:t,projectId:r}=e,{s:n,p:i}=t,o=LE(i,i.iss),s=CE(i.iss);return await async function(e,t,r,n,i,o){switch(r.t){case"eip191":return await async function(e,t,r){return(await Cv({hash:_E(t),signature:r})).toLowerCase()===e.toLowerCase()}(e,t,r.s);case"eip1271":return await async function(e,t,r,n,i,o){const s=uw(n);if(!s.namespace||!s.reference)throw new Error(`isValidEip1271Signature failed: chainId must be in CAIP-2 format, received: ${n}`);try{const s="0x1626ba7e",a="0000000000000000000000000000000000000000000000000000000000000040",c="0000000000000000000000000000000000000000000000000000000000000041",u=r.substring(2),l=s+_E(t).substring(2)+a+c+u,h=await fetch(`${o||"https://rpc.walletconnect.org/v1"}/?chainId=${n}&projectId=${i}`,{method:"POST",body:JSON.stringify({id:Date.now()+Math.floor(1e3*Math.random()),jsonrpc:"2.0",method:"eth_call",params:[{to:e,data:l},"latest"]})}),{result:f}=await h.json();return!!f&&f.slice(0,s.length).toLowerCase()===s.toLowerCase()}catch(e){return console.error("isValidEip1271Signature: ",e),!1}}(e,t,r.s,n,i,o);default:throw new Error(`verifySignature failed: Attempted to verify CacaoSignature with unknown type: ${r.t}`)}}(s,o,n,NE(i.iss),r)}const LE=(e,t)=>{const r=`${e.domain} wants you to sign in with your Ethereum account:`,n=CE(t);if(!e.aud&&!e.uri)throw new Error("Either `aud` or `uri` is required to construct the message");let i=e.statement||void 0;const o=`URI: ${e.aud||e.uri}`,s=`Version: ${e.version}`,a=`Chain ID: ${(e=>{const t=e&&RE(e);if(t)return e.includes("did:pkh:")?t[3]:t[1]})(t)}`,c=`Nonce: ${e.nonce}`,u=`Issued At: ${e.iat}`,l=e.exp?`Expiration Time: ${e.exp}`:void 0,h=e.nbf?`Not Before: ${e.nbf}`:void 0,f=e.requestId?`Request ID: ${e.requestId}`:void 0,d=e.resources?`Resources:${e.resources.map((e=>`\n- ${e}`)).join("")}`:void 0,p=GE(e.resources);return p&&(i=function(e="",t){BE(t);const r="I further authorize the stated URI to perform the following actions on my behalf: ";if(e.includes(r))return e;const n=[];let i=0;return Object.keys(t.att).forEach((e=>{const r=Object.keys(t.att[e]).map((e=>({ability:e.split("/")[0],action:e.split("/")[1]})));r.sort(((e,t)=>e.action.localeCompare(t.action)));const o={};r.forEach((e=>{o[e.ability]||(o[e.ability]=[]),o[e.ability].push(e.action)}));const s=Object.keys(o).map((t=>(i++,`(${i}) '${t}': '${o[t].join("', '")}' for '${e}'.`)));n.push(s.join(", ").replace(".,","."))})),`${e?e+" ":""}${r}${n.join(" ")}`}(i,jE(p))),[r,n,"",i,"",o,s,a,c,u,l,h,f,d].filter((e=>null!=e)).join("\n")};function BE(e){if(!e)throw new Error("No recap provided, value is undefined");if(!e.att)throw new Error("No `att` property found");const t=Object.keys(e.att);if(null==t||!t.length)throw new Error("No resources found in `att` property");t.forEach((t=>{const r=e.att[t];if(Array.isArray(r))throw new Error(`Resource must be an object: ${t}`);if("object"!=typeof r)throw new Error(`Resource must be an object: ${t}`);if(!Object.keys(r).length)throw new Error(`Resource object is empty: ${t}`);Object.keys(r).forEach((e=>{const t=r[e];if(!Array.isArray(t))throw new Error(`Ability limits ${e} must be an array of objects, found: ${t}`);if(!t.length)throw new Error(`Value of ${e} is empty array, must be an array with objects`);t.forEach((t=>{if("object"!=typeof t)throw new Error(`Ability limits (${e}) must be an array of objects, found: ${t}`)}))}))}))}function UE(e,t,r={}){t=t?.sort(((e,t)=>e.localeCompare(t)));const n=t.map((t=>({[`${e}/${t}`]:[r]})));return Object.assign({},...n)}function DE(e){return BE(e),`urn:recap:${function(e){return Buffer.from(JSON.stringify(e)).toString("base64")}(e).replace(/=/g,"")}`}function jE(e){const t=function(e){return JSON.parse(Buffer.from(e,"base64").toString("utf-8"))}(e.replace("urn:recap:",""));return BE(t),t}function FE(e,t){const r=function(e,t){BE(e),BE(t);const r=Object.keys(e.att).concat(Object.keys(t.att)).sort(((e,t)=>e.localeCompare(t))),n={att:{}};return r.forEach((r=>{var i,o;Object.keys((null==(i=e.att)?void 0:i[r])||{}).concat(Object.keys((null==(o=t.att)?void 0:o[r])||{})).sort(((e,t)=>e.localeCompare(t))).forEach((i=>{var o,s;n.att[r]=((e,t)=>SE(e,kE(t)))(((e,t)=>{for(var r in t||(t={}))OE.call(t,r)&&PE(e,r,t[r]);if(IE)for(var r of IE(t))TE.call(t,r)&&PE(e,r,t[r]);return e})({},n.att[r]),{[i]:(null==(o=e.att[r])?void 0:o[i])||(null==(s=t.att[r])?void 0:s[i])})}))})),n}(jE(e),jE(t));return DE(r)}function zE(e){var t;const r=jE(e);BE(r);const n=null==(t=r.att)?void 0:t.eip155;return n?Object.keys(n).map((e=>e.split("/")[1])):[]}function qE(e){const t=jE(e);BE(t);const r=[];return Object.values(t.att).forEach((e=>{Object.values(e).forEach((e=>{var t;null!=(t=e?.[0])&&t.chains&&r.push(e[0].chains)}))})),[...new Set(r.flat())]}function GE(e){if(!e)return;const t=e?.[e.length-1];return function(e){return e&&e.includes("urn:recap:")}(t)?t:void 0}function HE(e){if(!Number.isSafeInteger(e)||e<0)throw new Error("positive integer expected, got "+e)}function KE(e){return e instanceof Uint8Array||ArrayBuffer.isView(e)&&"Uint8Array"===e.constructor.name}function VE(e,...t){if(!KE(e))throw new Error("Uint8Array expected");if(t.length>0&&!t.includes(e.length))throw new Error("Uint8Array expected of length "+t+", got length="+e.length)}function WE(e,t=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")}function $E(e){if("boolean"!=typeof e)throw new Error(`boolean expected, not ${e}`)}const JE=e=>new Uint32Array(e.buffer,e.byteOffset,Math.floor(e.byteLength/4));if(68!==new Uint8Array(new Uint32Array([287454020]).buffer)[0])throw new Error("Non little-endian hardware is not supported");function YE(e){if("string"==typeof e)e=function(e){if("string"!=typeof e)throw new Error("string expected");return new Uint8Array((new TextEncoder).encode(e))}(e);else{if(!KE(e))throw new Error("Uint8Array expected, got "+typeof e);e=ZE(e)}return e}function QE(e,t,r=!0){if(void 0===t)return new Uint8Array(e);if(t.length!==e)throw new Error("invalid output length, expected "+e+", got: "+t.length);if(r&&!function(e){return e.byteOffset%4==0}(t))throw new Error("invalid output, must be aligned");return t}function XE(e,t,r,n){if("function"==typeof e.setBigUint64)return e.setBigUint64(t,r,n);const i=BigInt(32),o=BigInt(4294967295),s=Number(r>>i&o),a=Number(r&o),c=n?4:0,u=n?0:4;e.setUint32(t+c,s,n),e.setUint32(t+u,a,n)}function ZE(e){return Uint8Array.from(e)}function eA(...e){for(let t=0;t<e.length;t++)e[t].fill(0)}const tA=e=>Uint8Array.from(e.split("").map((e=>e.charCodeAt(0)))),rA=tA("expand 16-byte k"),nA=tA("expand 32-byte k"),iA=JE(rA),oA=JE(nA);function sA(e,t){return e<<t|e>>>32-t}function aA(e){return e.byteOffset%4==0}const cA=2**32-1,uA=new Uint32Array,lA=(e,t)=>255&e[t++]|(255&e[t++])<<8;class hA{constructor(e){this.blockLen=16,this.outputLen=16,this.buffer=new Uint8Array(16),this.r=new Uint16Array(10),this.h=new Uint16Array(10),this.pad=new Uint16Array(8),this.pos=0,this.finished=!1,VE(e=YE(e),32);const t=lA(e,0),r=lA(e,2),n=lA(e,4),i=lA(e,6),o=lA(e,8),s=lA(e,10),a=lA(e,12),c=lA(e,14);this.r[0]=8191&t,this.r[1]=8191&(t>>>13|r<<3),this.r[2]=7939&(r>>>10|n<<6),this.r[3]=8191&(n>>>7|i<<9),this.r[4]=255&(i>>>4|o<<12),this.r[5]=o>>>1&8190,this.r[6]=8191&(o>>>14|s<<2),this.r[7]=8065&(s>>>11|a<<5),this.r[8]=8191&(a>>>8|c<<8),this.r[9]=c>>>5&127;for(let t=0;t<8;t++)this.pad[t]=lA(e,16+2*t)}process(e,t,r=!1){const n=r?0:2048,{h:i,r:o}=this,s=o[0],a=o[1],c=o[2],u=o[3],l=o[4],h=o[5],f=o[6],d=o[7],p=o[8],g=o[9],m=lA(e,t+0),y=lA(e,t+2),v=lA(e,t+4),b=lA(e,t+6),w=lA(e,t+8),E=lA(e,t+10),A=lA(e,t+12),_=lA(e,t+14);let x=i[0]+(8191&m),S=i[1]+(8191&(m>>>13|y<<3)),k=i[2]+(8191&(y>>>10|v<<6)),I=i[3]+(8191&(v>>>7|b<<9)),O=i[4]+(8191&(b>>>4|w<<12)),T=i[5]+(w>>>1&8191),P=i[6]+(8191&(w>>>14|E<<2)),R=i[7]+(8191&(E>>>11|A<<5)),N=i[8]+(8191&(A>>>8|_<<8)),C=i[9]+(_>>>5|n),M=0,L=M+x*s+S*(5*g)+k*(5*p)+I*(5*d)+O*(5*f);M=L>>>13,L&=8191,L+=T*(5*h)+P*(5*l)+R*(5*u)+N*(5*c)+C*(5*a),M+=L>>>13,L&=8191;let B=M+x*a+S*s+k*(5*g)+I*(5*p)+O*(5*d);M=B>>>13,B&=8191,B+=T*(5*f)+P*(5*h)+R*(5*l)+N*(5*u)+C*(5*c),M+=B>>>13,B&=8191;let U=M+x*c+S*a+k*s+I*(5*g)+O*(5*p);M=U>>>13,U&=8191,U+=T*(5*d)+P*(5*f)+R*(5*h)+N*(5*l)+C*(5*u),M+=U>>>13,U&=8191;let D=M+x*u+S*c+k*a+I*s+O*(5*g);M=D>>>13,D&=8191,D+=T*(5*p)+P*(5*d)+R*(5*f)+N*(5*h)+C*(5*l),M+=D>>>13,D&=8191;let j=M+x*l+S*u+k*c+I*a+O*s;M=j>>>13,j&=8191,j+=T*(5*g)+P*(5*p)+R*(5*d)+N*(5*f)+C*(5*h),M+=j>>>13,j&=8191;let F=M+x*h+S*l+k*u+I*c+O*a;M=F>>>13,F&=8191,F+=T*s+P*(5*g)+R*(5*p)+N*(5*d)+C*(5*f),M+=F>>>13,F&=8191;let z=M+x*f+S*h+k*l+I*u+O*c;M=z>>>13,z&=8191,z+=T*a+P*s+R*(5*g)+N*(5*p)+C*(5*d),M+=z>>>13,z&=8191;let q=M+x*d+S*f+k*h+I*l+O*u;M=q>>>13,q&=8191,q+=T*c+P*a+R*s+N*(5*g)+C*(5*p),M+=q>>>13,q&=8191;let G=M+x*p+S*d+k*f+I*h+O*l;M=G>>>13,G&=8191,G+=T*u+P*c+R*a+N*s+C*(5*g),M+=G>>>13,G&=8191;let H=M+x*g+S*p+k*d+I*f+O*h;M=H>>>13,H&=8191,H+=T*l+P*u+R*c+N*a+C*s,M+=H>>>13,H&=8191,M=(M<<2)+M|0,M=M+L|0,L=8191&M,M>>>=13,B+=M,i[0]=L,i[1]=B,i[2]=U,i[3]=D,i[4]=j,i[5]=F,i[6]=z,i[7]=q,i[8]=G,i[9]=H}finalize(){const{h:e,pad:t}=this,r=new Uint16Array(10);let n=e[1]>>>13;e[1]&=8191;for(let t=2;t<10;t++)e[t]+=n,n=e[t]>>>13,e[t]&=8191;e[0]+=5*n,n=e[0]>>>13,e[0]&=8191,e[1]+=n,n=e[1]>>>13,e[1]&=8191,e[2]+=n,r[0]=e[0]+5,n=r[0]>>>13,r[0]&=8191;for(let t=1;t<10;t++)r[t]=e[t]+n,n=r[t]>>>13,r[t]&=8191;r[9]-=8192;let i=(1^n)-1;for(let e=0;e<10;e++)r[e]&=i;i=~i;for(let t=0;t<10;t++)e[t]=e[t]&i|r[t];e[0]=65535&(e[0]|e[1]<<13),e[1]=65535&(e[1]>>>3|e[2]<<10),e[2]=65535&(e[2]>>>6|e[3]<<7),e[3]=65535&(e[3]>>>9|e[4]<<4),e[4]=65535&(e[4]>>>12|e[5]<<1|e[6]<<14),e[5]=65535&(e[6]>>>2|e[7]<<11),e[6]=65535&(e[7]>>>5|e[8]<<8),e[7]=65535&(e[8]>>>8|e[9]<<5);let o=e[0]+t[0];e[0]=65535&o;for(let r=1;r<8;r++)o=(e[r]+t[r]|0)+(o>>>16)|0,e[r]=65535&o;eA(r)}update(e){WE(this);const{buffer:t,blockLen:r}=this,n=(e=YE(e)).length;for(let i=0;i<n;){const o=Math.min(r-this.pos,n-i);if(o!==r)t.set(e.subarray(i,i+o),this.pos),this.pos+=o,i+=o,this.pos===r&&(this.process(t,0,!1),this.pos=0);else for(;r<=n-i;i+=r)this.process(e,i)}return this}destroy(){eA(this.h,this.r,this.buffer,this.pad)}digestInto(e){WE(this),function(e,t){VE(e);const r=t.outputLen;if(e.length<r)throw new Error("digestInto() expects output buffer of length at least "+r)}(e,this),this.finished=!0;const{buffer:t,h:r}=this;let{pos:n}=this;if(n){for(t[n++]=1;n<16;n++)t[n]=0;this.process(t,0,!0)}this.finalize();let i=0;for(let t=0;t<8;t++)e[i++]=r[t]>>>0,e[i++]=r[t]>>>8;return e}digest(){const{buffer:e,outputLen:t}=this;this.digestInto(e);const r=e.slice(0,t);return this.destroy(),r}}const fA=function(e){const t=(t,r)=>e(r).update(YE(t)).digest(),r=e(new Uint8Array(32));return t.outputLen=r.outputLen,t.blockLen=r.blockLen,t.create=t=>e(t),t}((e=>new hA(e))),dA=function(e){const{allowShortKeys:t,extendNonceFn:r,counterLength:n,counterRight:i,rounds:o}=function(e,t){if(null==t||"object"!=typeof t)throw new Error("options must be defined");return Object.assign({allowShortKeys:!1,counterLength:8,counterRight:!1,rounds:20},t)}(0,{counterRight:!1,counterLength:4,allowShortKeys:!1});return HE(n),HE(o),$E(i),$E(t),(s,a,c,u,l=0)=>{VE(s),VE(a),VE(c);const h=c.length;if(void 0===u&&(u=new Uint8Array(h)),VE(u),HE(l),l<0||l>=cA)throw new Error("arx: counter overflow");if(u.length<h)throw new Error(`arx: output (${u.length}) is shorter than data (${h})`);const f=[];let d,p,g=s.length;if(32===g)f.push(d=ZE(s)),p=oA;else{if(16!==g||!t)throw new Error(`arx: invalid 32-byte key, got length=${g}`);d=new Uint8Array(32),d.set(s),d.set(s,16),p=iA,f.push(d)}aA(a)||f.push(a=ZE(a));const m=JE(d);if(r){if(24!==a.length)throw new Error("arx: extended nonce must be 24 bytes");r(p,m,JE(a.subarray(0,16)),m),a=a.subarray(16)}const y=16-n;if(y!==a.length)throw new Error(`arx: nonce must be ${y} or 16 bytes`);if(12!==y){const e=new Uint8Array(12);e.set(a,i?0:12-a.length),a=e,f.push(a)}const v=JE(a);return function(e,t,r,n,i,o,s,a){const c=i.length,u=new Uint8Array(64),l=JE(u),h=aA(i)&&aA(o),f=h?JE(i):uA,d=h?JE(o):uA;for(let p=0;p<c;s++){if(e(t,r,n,l,s,a),s>=cA)throw new Error("arx: counter overflow");const g=Math.min(64,c-p);if(h&&64===g){const e=p/4;if(p%4!=0)throw new Error("arx: invalid block position");for(let t,r=0;r<16;r++)t=e+r,d[t]=f[t]^l[r];p+=64}else{for(let e,t=0;t<g;t++)e=p+t,o[e]=i[e]^u[t];p+=g}}}(e,p,m,v,c,u,l,o),eA(...f),u}}((function(e,t,r,n,i,o=20){let s=e[0],a=e[1],c=e[2],u=e[3],l=t[0],h=t[1],f=t[2],d=t[3],p=t[4],g=t[5],m=t[6],y=t[7],v=i,b=r[0],w=r[1],E=r[2],A=s,_=a,x=c,S=u,k=l,I=h,O=f,T=d,P=p,R=g,N=m,C=y,M=v,L=b,B=w,U=E;for(let e=0;e<o;e+=2)A=A+k|0,M=sA(M^A,16),P=P+M|0,k=sA(k^P,12),A=A+k|0,M=sA(M^A,8),P=P+M|0,k=sA(k^P,7),_=_+I|0,L=sA(L^_,16),R=R+L|0,I=sA(I^R,12),_=_+I|0,L=sA(L^_,8),R=R+L|0,I=sA(I^R,7),x=x+O|0,B=sA(B^x,16),N=N+B|0,O=sA(O^N,12),x=x+O|0,B=sA(B^x,8),N=N+B|0,O=sA(O^N,7),S=S+T|0,U=sA(U^S,16),C=C+U|0,T=sA(T^C,12),S=S+T|0,U=sA(U^S,8),C=C+U|0,T=sA(T^C,7),A=A+I|0,U=sA(U^A,16),N=N+U|0,I=sA(I^N,12),A=A+I|0,U=sA(U^A,8),N=N+U|0,I=sA(I^N,7),_=_+O|0,M=sA(M^_,16),C=C+M|0,O=sA(O^C,12),_=_+O|0,M=sA(M^_,8),C=C+M|0,O=sA(O^C,7),x=x+T|0,L=sA(L^x,16),P=P+L|0,T=sA(T^P,12),x=x+T|0,L=sA(L^x,8),P=P+L|0,T=sA(T^P,7),S=S+k|0,B=sA(B^S,16),R=R+B|0,k=sA(k^R,12),S=S+k|0,B=sA(B^S,8),R=R+B|0,k=sA(k^R,7);let D=0;n[D++]=s+A|0,n[D++]=a+_|0,n[D++]=c+x|0,n[D++]=u+S|0,n[D++]=l+k|0,n[D++]=h+I|0,n[D++]=f+O|0,n[D++]=d+T|0,n[D++]=p+P|0,n[D++]=g+R|0,n[D++]=m+N|0,n[D++]=y+C|0,n[D++]=v+M|0,n[D++]=b+L|0,n[D++]=w+B|0,n[D++]=E+U|0})),pA=new Uint8Array(16),gA=(e,t)=>{e.update(t);const r=t.length%16;r&&e.update(pA.subarray(r))},mA=new Uint8Array(32);function yA(e,t,r,n,i){const o=e(t,r,mA),s=fA.create(o);i&&gA(s,i),gA(s,n);const a=new Uint8Array(16),c=(e=>new DataView(e.buffer,e.byteOffset,e.byteLength))(a);XE(c,0,BigInt(i?i.length:0),!0),XE(c,8,BigInt(n.length),!0),s.update(a);const u=s.digest();return eA(o,a),u}const vA=((e,t)=>{function r(r,...n){if(VE(r),void 0!==e.nonceLength){const t=n[0];if(!t)throw new Error("nonce / iv required");e.varSizeNonce?VE(t):VE(t,e.nonceLength)}const i=e.tagLength;i&&void 0!==n[1]&&VE(n[1]);const o=t(r,...n),s=(e,t)=>{if(void 0!==t){if(2!==e)throw new Error("cipher output not supported");VE(t)}};let a=!1;return{encrypt(e,t){if(a)throw new Error("cannot encrypt() twice with same key + nonce");return a=!0,VE(e),s(o.encrypt.length,t),o.encrypt(e,t)},decrypt(e,t){if(VE(e),i&&e.length<i)throw new Error("invalid ciphertext length: smaller than tagLength="+i);return s(o.decrypt.length,t),o.decrypt(e,t)}}}return Object.assign(r,e),r})({blockSize:64,nonceLength:12,tagLength:16},(e=>(t,r,n)=>({encrypt(i,o){const s=i.length;(o=QE(s+16,o,!1)).set(i);const a=o.subarray(0,-16);e(t,r,a,a,1);const c=yA(e,t,r,a,n);return o.set(c,s),eA(c),o},decrypt(i,o){o=QE(i.length-16,o,!1);const s=i.subarray(0,-16),a=i.subarray(-16),c=yA(e,t,r,s,n);if(!function(e,t){if(e.length!==t.length)return!1;let r=0;for(let n=0;n<e.length;n++)r|=e[n]^t[n];return 0===r}(a,c))throw new Error("invalid tag");return o.set(i.subarray(0,-16)),e(t,r,o,o,1),eA(c),o}}))(dA));class bA extends oE{constructor(e,t){super(),this.finished=!1,this.destroyed=!1,Vw(e);const r=iE(t);if(this.iHash=e.create(),"function"!=typeof this.iHash.update)throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const n=this.blockLen,i=new Uint8Array(n);i.set(r.length>n?e.create().update(r).digest():r);for(let e=0;e<i.length;e++)i[e]^=54;this.iHash.update(i),this.oHash=e.create();for(let e=0;e<i.length;e++)i[e]^=106;this.oHash.update(i),i.fill(0)}update(e){return Ww(this),this.iHash.update(e),this}digestInto(e){Ww(this),Kw(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){const e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));const{oHash:t,iHash:r,finished:n,destroyed:i,blockLen:o,outputLen:s}=this;return e.finished=n,e.destroyed=i,e.blockLen=o,e.outputLen=s,e.oHash=t._cloneInto(e.oHash),e.iHash=r._cloneInto(e.iHash),e}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const wA=(e,t,r)=>new bA(e,t).update(r).digest();wA.create=(e,t)=>new bA(e,t);const EA=new Uint8Array([0]),AA=new Uint8Array;function _A(e,t,r){return e&t^~e&r}function xA(e,t,r){return e&t^e&r^t&r}class SA extends oE{constructor(e,t,r,n){super(),this.blockLen=e,this.outputLen=t,this.padOffset=r,this.isLE=n,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=Zw(this.buffer)}update(e){Ww(this);const{view:t,buffer:r,blockLen:n}=this,i=(e=iE(e)).length;for(let o=0;o<i;){const s=Math.min(n-this.pos,i-o);if(s!==n)r.set(e.subarray(o,o+s),this.pos),this.pos+=s,o+=s,this.pos===n&&(this.process(t,0),this.pos=0);else{const t=Zw(e);for(;n<=i-o;o+=n)this.process(t,o)}}return this.length+=e.length,this.roundClean(),this}digestInto(e){Ww(this),$w(e,this),this.finished=!0;const{buffer:t,view:r,blockLen:n,isLE:i}=this;let{pos:o}=this;t[o++]=128,this.buffer.subarray(o).fill(0),this.padOffset>n-o&&(this.process(r,0),o=0);for(let e=o;e<n;e++)t[e]=0;(function(e,t,r,n){if("function"==typeof e.setBigUint64)return e.setBigUint64(t,r,n);const i=BigInt(32),o=BigInt(4294967295),s=Number(r>>i&o),a=Number(r&o),c=n?4:0,u=n?0:4;e.setUint32(t+c,s,n),e.setUint32(t+u,a,n)})(r,n-8,BigInt(8*this.length),i),this.process(r,0);const s=Zw(e),a=this.outputLen;if(a%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const c=a/4,u=this.get();if(c>u.length)throw new Error("_sha2: outputLen bigger than state");for(let e=0;e<c;e++)s.setUint32(4*e,u[e],i)}digest(){const{buffer:e,outputLen:t}=this;this.digestInto(e);const r=e.slice(0,t);return this.destroy(),r}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:t,buffer:r,length:n,finished:i,destroyed:o,pos:s}=this;return e.length=n,e.pos=s,e.finished=i,e.destroyed=o,n%t&&e.buffer.set(r),e}}const kA=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),IA=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),OA=new Uint32Array(64);class TA extends SA{constructor(){super(64,32,8,!1),this.A=0|IA[0],this.B=0|IA[1],this.C=0|IA[2],this.D=0|IA[3],this.E=0|IA[4],this.F=0|IA[5],this.G=0|IA[6],this.H=0|IA[7]}get(){const{A:e,B:t,C:r,D:n,E:i,F:o,G:s,H:a}=this;return[e,t,r,n,i,o,s,a]}set(e,t,r,n,i,o,s,a){this.A=0|e,this.B=0|t,this.C=0|r,this.D=0|n,this.E=0|i,this.F=0|o,this.G=0|s,this.H=0|a}process(e,t){for(let r=0;r<16;r++,t+=4)OA[r]=e.getUint32(t,!1);for(let e=16;e<64;e++){const t=OA[e-15],r=OA[e-2],n=eE(t,7)^eE(t,18)^t>>>3,i=eE(r,17)^eE(r,19)^r>>>10;OA[e]=i+OA[e-7]+n+OA[e-16]|0}let{A:r,B:n,C:i,D:o,E:s,F:a,G:c,H:u}=this;for(let e=0;e<64;e++){const t=u+(eE(s,6)^eE(s,11)^eE(s,25))+_A(s,a,c)+kA[e]+OA[e]|0,l=(eE(r,2)^eE(r,13)^eE(r,22))+xA(r,n,i)|0;u=c,c=a,a=s,s=o+t|0,o=i,i=n,n=r,r=t+l|0}r=r+this.A|0,n=n+this.B|0,i=i+this.C|0,o=o+this.D|0,s=s+this.E|0,a=a+this.F|0,c=c+this.G|0,u=u+this.H|0,this.set(r,n,i,o,s,a,c,u)}roundClean(){OA.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}const PA=sE((()=>new TA)),RA=BigInt(0),NA=BigInt(1),CA=BigInt(2);function MA(e){return e instanceof Uint8Array||ArrayBuffer.isView(e)&&"Uint8Array"===e.constructor.name}function LA(e){if(!MA(e))throw new Error("Uint8Array expected")}function BA(e,t){if("boolean"!=typeof t)throw new Error(e+" boolean expected, got "+t)}const UA=Array.from({length:256},((e,t)=>t.toString(16).padStart(2,"0")));function DA(e){LA(e);let t="";for(let r=0;r<e.length;r++)t+=UA[e[r]];return t}function jA(e){const t=e.toString(16);return 1&t.length?"0"+t:t}function FA(e){if("string"!=typeof e)throw new Error("hex string expected, got "+typeof e);return""===e?RA:BigInt("0x"+e)}function zA(e){return e>=48&&e<=57?e-48:e>=65&&e<=70?e-55:e>=97&&e<=102?e-87:void 0}function qA(e){if("string"!=typeof e)throw new Error("hex string expected, got "+typeof e);const t=e.length,r=t/2;if(t%2)throw new Error("hex string expected, got unpadded hex of length "+t);const n=new Uint8Array(r);for(let t=0,i=0;t<r;t++,i+=2){const r=zA(e.charCodeAt(i)),o=zA(e.charCodeAt(i+1));if(void 0===r||void 0===o){const t=e[i]+e[i+1];throw new Error('hex string expected, got non-hex character "'+t+'" at index '+i)}n[t]=16*r+o}return n}function GA(e){return FA(DA(e))}function HA(e){return LA(e),FA(DA(Uint8Array.from(e).reverse()))}function KA(e,t){return qA(e.toString(16).padStart(2*t,"0"))}function VA(e,t){return KA(e,t).reverse()}function WA(e,t,r){let n;if("string"==typeof t)try{n=qA(t)}catch(t){throw new Error(e+" must be hex string or Uint8Array, cause: "+t)}else{if(!MA(t))throw new Error(e+" must be hex string or Uint8Array");n=Uint8Array.from(t)}const i=n.length;if("number"==typeof r&&i!==r)throw new Error(e+" of length "+r+" expected, got "+i);return n}function $A(...e){let t=0;for(let r=0;r<e.length;r++){const n=e[r];LA(n),t+=n.length}const r=new Uint8Array(t);for(let t=0,n=0;t<e.length;t++){const i=e[t];r.set(i,n),n+=i.length}return r}const JA=e=>"bigint"==typeof e&&RA<=e;function YA(e,t,r){return JA(e)&&JA(t)&&JA(r)&&t<=e&&e<r}function QA(e,t,r,n){if(!YA(t,r,n))throw new Error("expected valid "+e+": "+r+" <= n < "+n+", got "+t)}function XA(e){let t;for(t=0;e>RA;e>>=NA,t+=1);return t}const ZA=e=>(CA<<BigInt(e-1))-NA,e_=e=>new Uint8Array(e),t_=e=>Uint8Array.from(e);function r_(e,t,r){if("number"!=typeof e||e<2)throw new Error("hashLen must be a number");if("number"!=typeof t||t<2)throw new Error("qByteLen must be a number");if("function"!=typeof r)throw new Error("hmacFn must be a function");let n=e_(e),i=e_(e),o=0;const s=()=>{n.fill(1),i.fill(0),o=0},a=(...e)=>r(i,n,...e),c=(e=e_())=>{i=a(t_([0]),e),n=a(),0!==e.length&&(i=a(t_([1]),e),n=a())},u=()=>{if(o++>=1e3)throw new Error("drbg: tried 1000 values");let e=0;const r=[];for(;e<t;){n=a();const t=n.slice();r.push(t),e+=n.length}return $A(...r)};return(e,t)=>{let r;for(s(),c(e);!(r=t(u()));)c();return s(),r}}const n_={bigint:e=>"bigint"==typeof e,function:e=>"function"==typeof e,boolean:e=>"boolean"==typeof e,string:e=>"string"==typeof e,stringOrUint8Array:e=>"string"==typeof e||MA(e),isSafeInteger:e=>Number.isSafeInteger(e),array:e=>Array.isArray(e),field:(e,t)=>t.Fp.isValid(e),hash:e=>"function"==typeof e&&Number.isSafeInteger(e.outputLen)};function i_(e,t,r={}){const n=(t,r,n)=>{const i=n_[r];if("function"!=typeof i)throw new Error("invalid validator function");const o=e[t];if(!(n&&void 0===o||i(o,e)))throw new Error("param "+String(t)+" is invalid. Expected "+r+", got "+o)};for(const[e,r]of Object.entries(t))n(e,r,!1);for(const[e,t]of Object.entries(r))n(e,t,!0);return e}function o_(e){const t=new WeakMap;return(r,...n)=>{const i=t.get(r);if(void 0!==i)return i;const o=e(r,...n);return t.set(r,o),o}}var s_=Object.freeze({__proto__:null,isBytes:MA,abytes:LA,abool:BA,bytesToHex:DA,numberToHexUnpadded:jA,hexToNumber:FA,hexToBytes:qA,bytesToNumberBE:GA,bytesToNumberLE:HA,numberToBytesBE:KA,numberToBytesLE:VA,numberToVarBytesBE:function(e){return qA(jA(e))},ensureBytes:WA,concatBytes:$A,equalBytes:function(e,t){if(e.length!==t.length)return!1;let r=0;for(let n=0;n<e.length;n++)r|=e[n]^t[n];return 0===r},utf8ToBytes:function(e){if("string"!=typeof e)throw new Error("string expected");return new Uint8Array((new TextEncoder).encode(e))},inRange:YA,aInRange:QA,bitLen:XA,bitGet:function(e,t){return e>>BigInt(t)&NA},bitSet:function(e,t,r){return e|(r?NA:RA)<<BigInt(t)},bitMask:ZA,createHmacDrbg:r_,validateObject:i_,notImplemented:()=>{throw new Error("not implemented")},memoized:o_});const a_=BigInt(0),c_=BigInt(1),u_=BigInt(2),l_=BigInt(3),h_=BigInt(4),f_=BigInt(5),d_=BigInt(8);function p_(e,t){const r=e%t;return r>=a_?r:t+r}function g_(e,t,r){if(t<a_)throw new Error("invalid exponent, negatives unsupported");if(r<=a_)throw new Error("invalid modulus");if(r===c_)return a_;let n=c_;for(;t>a_;)t&c_&&(n=n*e%r),e=e*e%r,t>>=c_;return n}function m_(e,t,r){let n=e;for(;t-- >a_;)n*=n,n%=r;return n}function y_(e,t){if(e===a_)throw new Error("invert: expected non-zero number");if(t<=a_)throw new Error("invert: expected positive modulus, got "+t);let r=p_(e,t),n=t,i=a_,o=c_;for(;r!==a_;){const e=n%r,t=i-o*(n/r);n=r,r=e,i=o,o=t}if(n!==c_)throw new Error("invert: does not exist");return p_(i,t)}const v_=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function b_(e,t){const r=void 0!==t?t:e.toString(2).length;return{nBitLength:r,nByteLength:Math.ceil(r/8)}}function w_(e,t,r=!1,n={}){if(e<=a_)throw new Error("invalid field: expected ORDER > 0, got "+e);const{nBitLength:i,nByteLength:o}=b_(e,t);if(o>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let s;const a=Object.freeze({ORDER:e,isLE:r,BITS:i,BYTES:o,MASK:ZA(i),ZERO:a_,ONE:c_,create:t=>p_(t,e),isValid:t=>{if("bigint"!=typeof t)throw new Error("invalid field element: expected bigint, got "+typeof t);return a_<=t&&t<e},is0:e=>e===a_,isOdd:e=>(e&c_)===c_,neg:t=>p_(-t,e),eql:(e,t)=>e===t,sqr:t=>p_(t*t,e),add:(t,r)=>p_(t+r,e),sub:(t,r)=>p_(t-r,e),mul:(t,r)=>p_(t*r,e),pow:(e,t)=>function(e,t,r){if(r<a_)throw new Error("invalid exponent, negatives unsupported");if(r===a_)return e.ONE;if(r===c_)return t;let n=e.ONE,i=t;for(;r>a_;)r&c_&&(n=e.mul(n,i)),i=e.sqr(i),r>>=c_;return n}(a,e,t),div:(t,r)=>p_(t*y_(r,e),e),sqrN:e=>e*e,addN:(e,t)=>e+t,subN:(e,t)=>e-t,mulN:(e,t)=>e*t,inv:t=>y_(t,e),sqrt:n.sqrt||(t=>(s||(s=function(e){if(e%h_===l_){const t=(e+c_)/h_;return function(e,r){const n=e.pow(r,t);if(!e.eql(e.sqr(n),r))throw new Error("Cannot find square root");return n}}if(e%d_===f_){const t=(e-f_)/d_;return function(e,r){const n=e.mul(r,u_),i=e.pow(n,t),o=e.mul(r,i),s=e.mul(e.mul(o,u_),i),a=e.mul(o,e.sub(s,e.ONE));if(!e.eql(e.sqr(a),r))throw new Error("Cannot find square root");return a}}return function(e){const t=(e-c_)/u_;let r,n,i;for(r=e-c_,n=0;r%u_===a_;r/=u_,n++);for(i=u_;i<e&&g_(i,t,e)!==e-c_;i++)if(i>1e3)throw new Error("Cannot find square root: likely non-prime P");if(1===n){const t=(e+c_)/h_;return function(e,r){const n=e.pow(r,t);if(!e.eql(e.sqr(n),r))throw new Error("Cannot find square root");return n}}const o=(r+c_)/u_;return function(e,s){if(e.pow(s,t)===e.neg(e.ONE))throw new Error("Cannot find square root");let a=n,c=e.pow(e.mul(e.ONE,i),r),u=e.pow(s,o),l=e.pow(s,r);for(;!e.eql(l,e.ONE);){if(e.eql(l,e.ZERO))return e.ZERO;let t=1;for(let r=e.sqr(l);t<a&&!e.eql(r,e.ONE);t++)r=e.sqr(r);const r=e.pow(c,c_<<BigInt(a-t-1));c=e.sqr(r),u=e.mul(u,r),l=e.mul(l,c),a=t}return u}}(e)}(e)),s(a,t))),invertBatch:e=>function(e,t){const r=new Array(t.length),n=t.reduce(((t,n,i)=>e.is0(n)?t:(r[i]=t,e.mul(t,n))),e.ONE),i=e.inv(n);return t.reduceRight(((t,n,i)=>e.is0(n)?t:(r[i]=e.mul(t,r[i]),e.mul(t,n))),i),r}(a,e),cmov:(e,t,r)=>r?t:e,toBytes:e=>r?VA(e,o):KA(e,o),fromBytes:e=>{if(e.length!==o)throw new Error("Field.fromBytes: expected "+o+" bytes, got "+e.length);return r?HA(e):GA(e)}});return Object.freeze(a)}function E_(e){if("bigint"!=typeof e)throw new Error("field order must be bigint");const t=e.toString(2).length;return Math.ceil(t/8)}function A_(e){const t=E_(e);return t+Math.ceil(t/2)}const __=BigInt(0),x_=BigInt(1);function S_(e,t){const r=t.negate();return e?r:t}function k_(e,t){if(!Number.isSafeInteger(e)||e<=0||e>t)throw new Error("invalid window size, expected [1.."+t+"], got W="+e)}function I_(e,t){return k_(e,t),{windows:Math.ceil(t/e)+1,windowSize:2**(e-1)}}const O_=new WeakMap,T_=new WeakMap;function P_(e){return T_.get(e)||1}function R_(e){return function(e){i_(e,v_.reduce(((e,t)=>(e[t]="function",e)),{ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"}))}(e.Fp),i_(e,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...b_(e.n,e.nBitLength),...e,p:e.Fp.ORDER})}BigInt(0),BigInt(1),BigInt(2),BigInt(8);const N_=BigInt(0),C_=BigInt(1),M_=BigInt("57896044618658097711785492504343953926634992332820282019728792003956564819949");BigInt(0);const L_=BigInt(1),B_=BigInt(2),U_=BigInt(3),D_=BigInt(5);BigInt(8);const j_=function(e){const t=function(e){return i_(e,{a:"bigint"},{montgomeryBits:"isSafeInteger",nByteLength:"isSafeInteger",adjustScalarBytes:"function",domain:"function",powPminus2:"function",Gu:"bigint"}),Object.freeze({...e})}(e),{P:r}=t,n=e=>p_(e,r),i=t.montgomeryBits,o=Math.ceil(i/8),s=t.nByteLength,a=t.adjustScalarBytes||(e=>e),c=t.powPminus2||(e=>g_(e,r-BigInt(2),r));function u(e,t,r){const i=n(e*(t-r));return[t=n(t-i),r=n(r+i)]}const l=(t.a-BigInt(2))/BigInt(4);function h(e){return VA(n(e),o)}function f(e,t){const f=function(e){const t=WA("u coordinate",e,o);return 32===s&&(t[31]&=127),HA(t)}(t),d=function(e){const t=WA("scalar",e),r=t.length;if(r!==o&&r!==s)throw new Error("invalid scalar, expected "+o+" or "+s+" bytes, got "+r);return HA(a(t))}(e),p=function(e,t){QA("u",e,N_,r),QA("scalar",t,N_,r);const o=t,s=e;let a,h=C_,f=N_,d=e,p=C_,g=N_;for(let e=BigInt(i-1);e>=N_;e--){const t=o>>e&C_;g^=t,a=u(g,h,d),h=a[0],d=a[1],a=u(g,f,p),f=a[0],p=a[1],g=t;const r=h+f,i=n(r*r),c=h-f,m=n(c*c),y=i-m,v=d+p,b=n((d-p)*r),w=n(v*c),E=b+w,A=b-w;d=n(E*E),p=n(s*n(A*A)),h=n(i*m),f=n(y*(i+n(l*y)))}a=u(g,h,d),h=a[0],d=a[1],a=u(g,f,p),f=a[0],p=a[1];const m=c(f);return n(h*m)}(f,d);if(p===N_)throw new Error("invalid private or public key received");return h(p)}const d=h(t.Gu);function p(e){return f(e,d)}return{scalarMult:f,scalarMultBase:p,getSharedSecret:(e,t)=>f(e,t),getPublicKey:e=>p(e),utils:{randomPrivateKey:()=>t.randomBytes(t.nByteLength)},GuBytes:d}}({P:M_,a:BigInt(486662),montgomeryBits:255,nByteLength:32,Gu:BigInt(9),powPminus2:e=>{const t=M_,{pow_p_5_8:r,b2:n}=function(e){const t=BigInt(10),r=BigInt(20),n=BigInt(40),i=BigInt(80),o=M_,s=e*e%o*e%o,a=m_(s,B_,o)*s%o,c=m_(a,L_,o)*e%o,u=m_(c,D_,o)*c%o,l=m_(u,t,o)*u%o,h=m_(l,r,o)*l%o,f=m_(h,n,o)*h%o,d=m_(f,i,o)*f%o,p=m_(d,i,o)*f%o,g=m_(p,t,o)*u%o;return{pow_p_5_8:m_(g,B_,o)*e%o,b2:s}}(e);return p_(m_(r,U_,t)*n,t)},adjustScalarBytes:function(e){return e[0]&=248,e[31]&=127,e[31]|=64,e},randomBytes:aE});function F_(e){void 0!==e.lowS&&BA("lowS",e.lowS),void 0!==e.prehash&&BA("prehash",e.prehash)}const{bytesToNumberBE:z_,hexToBytes:q_}=s_;class G_ extends Error{constructor(e=""){super(e)}}const H_={Err:G_,_tlv:{encode:(e,t)=>{const{Err:r}=H_;if(e<0||e>256)throw new r("tlv.encode: wrong tag");if(1&t.length)throw new r("tlv.encode: unpadded data");const n=t.length/2,i=jA(n);if(i.length/2&128)throw new r("tlv.encode: long form length too big");const o=n>127?jA(i.length/2|128):"";return jA(e)+o+i+t},decode(e,t){const{Err:r}=H_;let n=0;if(e<0||e>256)throw new r("tlv.encode: wrong tag");if(t.length<2||t[n++]!==e)throw new r("tlv.decode: wrong tlv");const i=t[n++];let o=0;if(128&i){const e=127&i;if(!e)throw new r("tlv.decode(long): indefinite length not supported");if(e>4)throw new r("tlv.decode(long): byte length is too big");const s=t.subarray(n,n+e);if(s.length!==e)throw new r("tlv.decode: length bytes not complete");if(0===s[0])throw new r("tlv.decode(long): zero leftmost byte");for(const e of s)o=o<<8|e;if(n+=e,o<128)throw new r("tlv.decode(long): not minimal encoding")}else o=i;const s=t.subarray(n,n+o);if(s.length!==o)throw new r("tlv.decode: wrong value length");return{v:s,l:t.subarray(n+o)}}},_int:{encode(e){const{Err:t}=H_;if(e<K_)throw new t("integer: negative integers are not allowed");let r=jA(e);if(8&Number.parseInt(r[0],16)&&(r="00"+r),1&r.length)throw new t("unexpected DER parsing assertion: unpadded hex");return r},decode(e){const{Err:t}=H_;if(128&e[0])throw new t("invalid signature integer: negative");if(0===e[0]&&!(128&e[1]))throw new t("invalid signature integer: unnecessary leading zero");return z_(e)}},toSig(e){const{Err:t,_int:r,_tlv:n}=H_,i="string"==typeof e?q_(e):e;LA(i);const{v:o,l:s}=n.decode(48,i);if(s.length)throw new t("invalid signature: left bytes after parsing");const{v:a,l:c}=n.decode(2,o),{v:u,l}=n.decode(2,c);if(l.length)throw new t("invalid signature: left bytes after parsing");return{r:r.decode(a),s:r.decode(u)}},hexFromSig(e){const{_tlv:t,_int:r}=H_,n=t.encode(2,r.encode(e.r))+t.encode(2,r.encode(e.s));return t.encode(48,n)}},K_=BigInt(0),V_=BigInt(1);BigInt(2);const W_=BigInt(3);function $_(e){const t=function(e){const t=R_(e);i_(t,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});const{endo:r,Fp:n,a:i}=t;if(r){if(!n.eql(i,n.ZERO))throw new Error("invalid endomorphism, can only be defined for Koblitz curves that have a=0");if("object"!=typeof r||"bigint"!=typeof r.beta||"function"!=typeof r.splitScalar)throw new Error("invalid endomorphism, expected beta: bigint and splitScalar: function")}return Object.freeze({...t})}(e),{Fp:r}=t,n=w_(t.n,t.nBitLength),i=t.toBytes||((e,t,n)=>{const i=t.toAffine();return $A(Uint8Array.from([4]),r.toBytes(i.x),r.toBytes(i.y))}),o=t.fromBytes||(e=>{const t=e.subarray(1);return{x:r.fromBytes(t.subarray(0,r.BYTES)),y:r.fromBytes(t.subarray(r.BYTES,2*r.BYTES))}});function s(e){const{a:n,b:i}=t,o=r.sqr(e),s=r.mul(o,e);return r.add(r.add(s,r.mul(e,n)),i)}if(!r.eql(r.sqr(t.Gy),s(t.Gx)))throw new Error("bad generator point: equation left != right");function a(e){const{allowedPrivateKeyLengths:r,nByteLength:n,wrapPrivateKey:i,n:o}=t;if(r&&"bigint"!=typeof e){if(MA(e)&&(e=DA(e)),"string"!=typeof e||!r.includes(e.length))throw new Error("invalid private key");e=e.padStart(2*n,"0")}let s;try{s="bigint"==typeof e?e:GA(WA("private key",e,n))}catch{throw new Error("invalid private key, expected hex or "+n+" bytes, got "+typeof e)}return i&&(s=p_(s,o)),QA("private key",s,V_,o),s}function c(e){if(!(e instanceof h))throw new Error("ProjectivePoint expected")}const u=o_(((e,t)=>{const{px:n,py:i,pz:o}=e;if(r.eql(o,r.ONE))return{x:n,y:i};const s=e.is0();null==t&&(t=s?r.ONE:r.inv(o));const a=r.mul(n,t),c=r.mul(i,t),u=r.mul(o,t);if(s)return{x:r.ZERO,y:r.ZERO};if(!r.eql(u,r.ONE))throw new Error("invZ was invalid");return{x:a,y:c}})),l=o_((e=>{if(e.is0()){if(t.allowInfinityPoint&&!r.is0(e.py))return;throw new Error("bad point: ZERO")}const{x:n,y:i}=e.toAffine();if(!r.isValid(n)||!r.isValid(i))throw new Error("bad point: x or y not FE");const o=r.sqr(i),a=s(n);if(!r.eql(o,a))throw new Error("bad point: equation left != right");if(!e.isTorsionFree())throw new Error("bad point: not in prime-order subgroup");return!0}));class h{constructor(e,t,n){if(this.px=e,this.py=t,this.pz=n,null==e||!r.isValid(e))throw new Error("x required");if(null==t||!r.isValid(t))throw new Error("y required");if(null==n||!r.isValid(n))throw new Error("z required");Object.freeze(this)}static fromAffine(e){const{x:t,y:n}=e||{};if(!e||!r.isValid(t)||!r.isValid(n))throw new Error("invalid affine point");if(e instanceof h)throw new Error("projective point not allowed");const i=e=>r.eql(e,r.ZERO);return i(t)&&i(n)?h.ZERO:new h(t,n,r.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(e){const t=r.invertBatch(e.map((e=>e.pz)));return e.map(((e,r)=>e.toAffine(t[r]))).map(h.fromAffine)}static fromHex(e){const t=h.fromAffine(o(WA("pointHex",e)));return t.assertValidity(),t}static fromPrivateKey(e){return h.BASE.multiply(a(e))}static msm(e,t){return function(e,t,r,n){if(function(e,t){if(!Array.isArray(e))throw new Error("array expected");e.forEach(((e,r)=>{if(!(e instanceof t))throw new Error("invalid point at index "+r)}))}(r,e),function(e,t){if(!Array.isArray(e))throw new Error("array of scalars expected");e.forEach(((e,r)=>{if(!t.isValid(e))throw new Error("invalid scalar at index "+r)}))}(n,t),r.length!==n.length)throw new Error("arrays of points and scalars must have equal length");const i=e.ZERO,o=XA(BigInt(r.length)),s=o>12?o-3:o>4?o-2:o?2:1,a=(1<<s)-1,c=new Array(a+1).fill(i);let u=i;for(let e=Math.floor((t.BITS-1)/s)*s;e>=0;e-=s){c.fill(i);for(let t=0;t<n.length;t++){const i=n[t],o=Number(i>>BigInt(e)&BigInt(a));c[o]=c[o].add(r[t])}let t=i;for(let e=c.length-1,r=i;e>0;e--)r=r.add(c[e]),t=t.add(r);if(u=u.add(t),0!==e)for(let e=0;e<s;e++)u=u.double()}return u}(h,n,e,t)}_setWindowSize(e){d.setWindowSize(this,e)}assertValidity(){l(this)}hasEvenY(){const{y:e}=this.toAffine();if(r.isOdd)return!r.isOdd(e);throw new Error("Field doesn't support isOdd")}equals(e){c(e);const{px:t,py:n,pz:i}=this,{px:o,py:s,pz:a}=e,u=r.eql(r.mul(t,a),r.mul(o,i)),l=r.eql(r.mul(n,a),r.mul(s,i));return u&&l}negate(){return new h(this.px,r.neg(this.py),this.pz)}double(){const{a:e,b:n}=t,i=r.mul(n,W_),{px:o,py:s,pz:a}=this;let c=r.ZERO,u=r.ZERO,l=r.ZERO,f=r.mul(o,o),d=r.mul(s,s),p=r.mul(a,a),g=r.mul(o,s);return g=r.add(g,g),l=r.mul(o,a),l=r.add(l,l),c=r.mul(e,l),u=r.mul(i,p),u=r.add(c,u),c=r.sub(d,u),u=r.add(d,u),u=r.mul(c,u),c=r.mul(g,c),l=r.mul(i,l),p=r.mul(e,p),g=r.sub(f,p),g=r.mul(e,g),g=r.add(g,l),l=r.add(f,f),f=r.add(l,f),f=r.add(f,p),f=r.mul(f,g),u=r.add(u,f),p=r.mul(s,a),p=r.add(p,p),f=r.mul(p,g),c=r.sub(c,f),l=r.mul(p,d),l=r.add(l,l),l=r.add(l,l),new h(c,u,l)}add(e){c(e);const{px:n,py:i,pz:o}=this,{px:s,py:a,pz:u}=e;let l=r.ZERO,f=r.ZERO,d=r.ZERO;const p=t.a,g=r.mul(t.b,W_);let m=r.mul(n,s),y=r.mul(i,a),v=r.mul(o,u),b=r.add(n,i),w=r.add(s,a);b=r.mul(b,w),w=r.add(m,y),b=r.sub(b,w),w=r.add(n,o);let E=r.add(s,u);return w=r.mul(w,E),E=r.add(m,v),w=r.sub(w,E),E=r.add(i,o),l=r.add(a,u),E=r.mul(E,l),l=r.add(y,v),E=r.sub(E,l),d=r.mul(p,w),l=r.mul(g,v),d=r.add(l,d),l=r.sub(y,d),d=r.add(y,d),f=r.mul(l,d),y=r.add(m,m),y=r.add(y,m),v=r.mul(p,v),w=r.mul(g,w),y=r.add(y,v),v=r.sub(m,v),v=r.mul(p,v),w=r.add(w,v),m=r.mul(y,w),f=r.add(f,m),m=r.mul(E,w),l=r.mul(b,l),l=r.sub(l,m),m=r.mul(b,y),d=r.mul(E,d),d=r.add(d,m),new h(l,f,d)}subtract(e){return this.add(e.negate())}is0(){return this.equals(h.ZERO)}wNAF(e){return d.wNAFCached(this,e,h.normalizeZ)}multiplyUnsafe(e){const{endo:n,n:i}=t;QA("scalar",e,K_,i);const o=h.ZERO;if(e===K_)return o;if(this.is0()||e===V_)return this;if(!n||d.hasPrecomputes(this))return d.wNAFCachedUnsafe(this,e,h.normalizeZ);let{k1neg:s,k1:a,k2neg:c,k2:u}=n.splitScalar(e),l=o,f=o,p=this;for(;a>K_||u>K_;)a&V_&&(l=l.add(p)),u&V_&&(f=f.add(p)),p=p.double(),a>>=V_,u>>=V_;return s&&(l=l.negate()),c&&(f=f.negate()),f=new h(r.mul(f.px,n.beta),f.py,f.pz),l.add(f)}multiply(e){const{endo:n,n:i}=t;let o,s;if(QA("scalar",e,V_,i),n){const{k1neg:t,k1:i,k2neg:a,k2:c}=n.splitScalar(e);let{p:u,f:l}=this.wNAF(i),{p:f,f:p}=this.wNAF(c);u=d.constTimeNegate(t,u),f=d.constTimeNegate(a,f),f=new h(r.mul(f.px,n.beta),f.py,f.pz),o=u.add(f),s=l.add(p)}else{const{p:t,f:r}=this.wNAF(e);o=t,s=r}return h.normalizeZ([o,s])[0]}multiplyAndAddUnsafe(e,t,r){const n=h.BASE,i=(e,t)=>t!==K_&&t!==V_&&e.equals(n)?e.multiply(t):e.multiplyUnsafe(t),o=i(this,t).add(i(e,r));return o.is0()?void 0:o}toAffine(e){return u(this,e)}isTorsionFree(){const{h:e,isTorsionFree:r}=t;if(e===V_)return!0;if(r)return r(h,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){const{h:e,clearCofactor:r}=t;return e===V_?this:r?r(h,this):this.multiplyUnsafe(t.h)}toRawBytes(e=!0){return BA("isCompressed",e),this.assertValidity(),i(h,this,e)}toHex(e=!0){return BA("isCompressed",e),DA(this.toRawBytes(e))}}h.BASE=new h(t.Gx,t.Gy,r.ONE),h.ZERO=new h(r.ZERO,r.ONE,r.ZERO);const f=t.nBitLength,d=function(e,t){return{constTimeNegate:S_,hasPrecomputes:e=>1!==P_(e),unsafeLadder(t,r,n=e.ZERO){let i=t;for(;r>__;)r&x_&&(n=n.add(i)),i=i.double(),r>>=x_;return n},precomputeWindow(e,r){const{windows:n,windowSize:i}=I_(r,t),o=[];let s=e,a=s;for(let e=0;e<n;e++){a=s,o.push(a);for(let e=1;e<i;e++)a=a.add(s),o.push(a);s=a.double()}return o},wNAF(r,n,i){const{windows:o,windowSize:s}=I_(r,t);let a=e.ZERO,c=e.BASE;const u=BigInt(2**r-1),l=2**r,h=BigInt(r);for(let e=0;e<o;e++){const t=e*s;let r=Number(i&u);i>>=h,r>s&&(r-=l,i+=x_);const o=t,f=t+Math.abs(r)-1,d=e%2!=0,p=r<0;0===r?c=c.add(S_(d,n[o])):a=a.add(S_(p,n[f]))}return{p:a,f:c}},wNAFUnsafe(r,n,i,o=e.ZERO){const{windows:s,windowSize:a}=I_(r,t),c=BigInt(2**r-1),u=2**r,l=BigInt(r);for(let e=0;e<s;e++){const t=e*a;if(i===__)break;let r=Number(i&c);if(i>>=l,r>a&&(r-=u,i+=x_),0===r)continue;let s=n[t+Math.abs(r)-1];r<0&&(s=s.negate()),o=o.add(s)}return o},getPrecomputes(e,t,r){let n=O_.get(t);return n||(n=this.precomputeWindow(t,e),1!==e&&O_.set(t,r(n))),n},wNAFCached(e,t,r){const n=P_(e);return this.wNAF(n,this.getPrecomputes(n,e,r),t)},wNAFCachedUnsafe(e,t,r,n){const i=P_(e);return 1===i?this.unsafeLadder(e,t,n):this.wNAFUnsafe(i,this.getPrecomputes(i,e,r),t,n)},setWindowSize(e,r){k_(r,t),T_.set(e,r),O_.delete(e)}}}(h,t.endo?Math.ceil(f/2):f);return{CURVE:t,ProjectivePoint:h,normPrivateKeyToScalar:a,weierstrassEquation:s,isWithinCurveOrder:function(e){return YA(e,V_,t.n)}}}function J_(e){const t=function(e){const t=R_(e);return i_(t,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...t})}(e),{Fp:r,n}=t,i=r.BYTES+1,o=2*r.BYTES+1;function s(e){return p_(e,n)}function a(e){return y_(e,n)}const{ProjectivePoint:c,normPrivateKeyToScalar:u,weierstrassEquation:l,isWithinCurveOrder:h}=$_({...t,toBytes(e,t,n){const i=t.toAffine(),o=r.toBytes(i.x),s=$A;return BA("isCompressed",n),n?s(Uint8Array.from([t.hasEvenY()?2:3]),o):s(Uint8Array.from([4]),o,r.toBytes(i.y))},fromBytes(e){const t=e.length,n=e[0],s=e.subarray(1);if(t!==i||2!==n&&3!==n){if(t===o&&4===n)return{x:r.fromBytes(s.subarray(0,r.BYTES)),y:r.fromBytes(s.subarray(r.BYTES,2*r.BYTES))};throw new Error("invalid Point, expected length of "+i+", or uncompressed "+o+", got "+t)}{const e=GA(s);if(!YA(e,V_,r.ORDER))throw new Error("Point is not on curve");const t=l(e);let i;try{i=r.sqrt(t)}catch(e){const t=e instanceof Error?": "+e.message:"";throw new Error("Point is not on curve"+t)}return!(1&~n)!=((i&V_)===V_)&&(i=r.neg(i)),{x:e,y:i}}}}),f=e=>DA(KA(e,t.nByteLength));function d(e){return e>n>>V_}const p=(e,t,r)=>GA(e.slice(t,r));class g{constructor(e,t,r){this.r=e,this.s=t,this.recovery=r,this.assertValidity()}static fromCompact(e){const r=t.nByteLength;return e=WA("compactSignature",e,2*r),new g(p(e,0,r),p(e,r,2*r))}static fromDER(e){const{r:t,s:r}=H_.toSig(WA("DER",e));return new g(t,r)}assertValidity(){QA("r",this.r,V_,n),QA("s",this.s,V_,n)}addRecoveryBit(e){return new g(this.r,this.s,e)}recoverPublicKey(e){const{r:n,s:i,recovery:o}=this,u=b(WA("msgHash",e));if(null==o||![0,1,2,3].includes(o))throw new Error("recovery id invalid");const l=2===o||3===o?n+t.n:n;if(l>=r.ORDER)throw new Error("recovery id 2 or 3 invalid");const h=1&o?"03":"02",d=c.fromHex(h+f(l)),p=a(l),g=s(-u*p),m=s(i*p),y=c.BASE.multiplyAndAddUnsafe(d,g,m);if(!y)throw new Error("point at infinify");return y.assertValidity(),y}hasHighS(){return d(this.s)}normalizeS(){return this.hasHighS()?new g(this.r,s(-this.s),this.recovery):this}toDERRawBytes(){return qA(this.toDERHex())}toDERHex(){return H_.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return qA(this.toCompactHex())}toCompactHex(){return f(this.r)+f(this.s)}}const m={isValidPrivateKey(e){try{return u(e),!0}catch{return!1}},normPrivateKeyToScalar:u,randomPrivateKey:()=>{const e=A_(t.n);return function(e,t,r=!1){const n=e.length,i=E_(t),o=A_(t);if(n<16||n<o||n>1024)throw new Error("expected "+o+"-1024 bytes of input, got "+n);const s=p_(r?HA(e):GA(e),t-c_)+c_;return r?VA(s,i):KA(s,i)}(t.randomBytes(e),t.n)},precompute:(e=8,t=c.BASE)=>(t._setWindowSize(e),t.multiply(BigInt(3)),t)};function y(e){const t=MA(e),r="string"==typeof e,n=(t||r)&&e.length;return t?n===i||n===o:r?n===2*i||n===2*o:e instanceof c}const v=t.bits2int||function(e){if(e.length>8192)throw new Error("input is too large");const r=GA(e),n=8*e.length-t.nBitLength;return n>0?r>>BigInt(n):r},b=t.bits2int_modN||function(e){return s(v(e))},w=ZA(t.nBitLength);function E(e){return QA("num < 2^"+t.nBitLength,e,K_,w),KA(e,t.nByteLength)}const A={lowS:t.lowS,prehash:!1},_={lowS:t.lowS,prehash:!1};return c.BASE._setWindowSize(8),{CURVE:t,getPublicKey:function(e,t=!0){return c.fromPrivateKey(e).toRawBytes(t)},getSharedSecret:function(e,t,r=!0){if(y(e))throw new Error("first arg must be private key");if(!y(t))throw new Error("second arg must be public key");return c.fromHex(t).multiply(u(e)).toRawBytes(r)},sign:function(e,n,i=A){const{seed:o,k2sig:l}=function(e,n,i=A){if(["recovered","canonical"].some((e=>e in i)))throw new Error("sign() legacy options not supported");const{hash:o,randomBytes:l}=t;let{lowS:f,prehash:p,extraEntropy:m}=i;null==f&&(f=!0),e=WA("msgHash",e),F_(i),p&&(e=WA("prehashed msgHash",o(e)));const y=b(e),w=u(n),_=[E(w),E(y)];if(null!=m&&!1!==m){const e=!0===m?l(r.BYTES):m;_.push(WA("extraEntropy",e))}const x=$A(..._),S=y;return{seed:x,k2sig:function(e){const t=v(e);if(!h(t))return;const r=a(t),n=c.BASE.multiply(t).toAffine(),i=s(n.x);if(i===K_)return;const o=s(r*s(S+i*w));if(o===K_)return;let u=(n.x===i?0:2)|Number(n.y&V_),l=o;return f&&d(o)&&(l=function(e){return d(e)?s(-e):e}(o),u^=1),new g(i,l,u)}}}(e,n,i),f=t;return r_(f.hash.outputLen,f.nByteLength,f.hmac)(o,l)},verify:function(e,r,n,i=_){const o=e;r=WA("msgHash",r),n=WA("publicKey",n);const{lowS:u,prehash:l,format:h}=i;if(F_(i),"strict"in i)throw new Error("options.strict was renamed to lowS");if(void 0!==h&&"compact"!==h&&"der"!==h)throw new Error("format must be compact or der");const f="string"==typeof o||MA(o),d=!f&&!h&&"object"==typeof o&&null!==o&&"bigint"==typeof o.r&&"bigint"==typeof o.s;if(!f&&!d)throw new Error("invalid signature, expected Uint8Array, hex string or Signature instance");let p,m;try{if(d&&(p=new g(o.r,o.s)),f){try{"compact"!==h&&(p=g.fromDER(o))}catch(e){if(!(e instanceof H_.Err))throw e}!p&&"der"!==h&&(p=g.fromCompact(o))}m=c.fromHex(n)}catch{return!1}if(!p||u&&p.hasHighS())return!1;l&&(r=t.hash(r));const{r:y,s:v}=p,w=b(r),E=a(v),A=s(w*E),x=s(y*E),S=c.BASE.multiplyAndAddUnsafe(m,A,x)?.toAffine();return!!S&&s(S.x)===y},ProjectivePoint:c,Signature:g,utils:m}}function Y_(e){return{hash:e,hmac:(t,...r)=>wA(e,t,function(...e){let t=0;for(let r=0;r<e.length;r++){const n=e[r];Kw(n),t+=n.length}const r=new Uint8Array(t);for(let t=0,n=0;t<e.length;t++){const i=e[t];r.set(i,n),n+=i.length}return r}(...r)),randomBytes:aE}}BigInt(4);const Q_=w_(BigInt("0xffffffff00000001000000000000000000000000ffffffffffffffffffffffff")),X_=function(e,t){const r=t=>J_({...e,...Y_(t)});return{...r(t),create:r}}({a:Q_.create(BigInt("-3")),b:BigInt("0x5ac635d8aa3a93e7b3ebbd55769886bc651d06b0cc53b0f63bce3c3e27d2604b"),Fp:Q_,n:BigInt("0xffffffff00000000ffffffffffffffffbce6faada7179e84f3b9cac2fc632551"),Gx:BigInt("0x6b17d1f2e12c4247f8bce6e563a440f277037d812deb33a0f4a13945d898c296"),Gy:BigInt("0x4fe342e2fe1a7f9b8ee7eb4a7c0f9e162bce33576b315ececbb6406837bf51f5"),h:BigInt(1),lowS:!1},PA),Z_="base10",ex="base16",tx="base64pad",rx="base64url",nx="utf8";function ix(){return aw(aE(32),ex)}function ox(e){return aw(PA(sw(e,ex)),ex)}function sx(e){return aw(PA(sw(e,nx)),ex)}function ax(e){return sw(`${e}`,Z_)}function cx(e){return Number(aw(e,Z_))}function ux(e){return e.replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,"")}function lx(e){const t=e.replace(/-/g,"+").replace(/_/g,"/"),r=(4-t.length%4)%4;return t+"=".repeat(r)}function hx(e){if(2===cx(e.type))return aw(Bv([e.type,e.sealed]),tx);if(1===cx(e.type)){if(typeof e.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");return aw(Bv([e.type,e.senderPublicKey,e.iv,e.sealed]),tx)}return aw(Bv([e.type,e.iv,e.sealed]),tx)}function fx(e){const t=sw((e.encoding||tx)===rx?lx(e.encoded):e.encoded,tx),r=t.slice(0,1);if(1===cx(r)){const e=33,n=e+12,i=t.slice(1,e),o=t.slice(e,n);return{type:r,sealed:t.slice(n),iv:o,senderPublicKey:i}}if(2===cx(r))return{type:r,sealed:t.slice(1),iv:aE(12)};const n=t.slice(1,13);return{type:r,sealed:t.slice(13),iv:n}}function dx(e){const t=e?.type||0;if(1===t){if(typeof e?.senderPublicKey>"u")throw new Error("missing sender public key");if(typeof e?.receiverPublicKey>"u")throw new Error("missing receiver public key")}return{type:t,senderPublicKey:e?.senderPublicKey,receiverPublicKey:e?.receiverPublicKey}}function px(e){return 1===e.type&&"string"==typeof e.senderPublicKey&&"string"==typeof e.receiverPublicKey}function gx(e){return 2===e.type}function mx(e){return e?.relay||{protocol:"irn"}}function yx(e){const t=cw[e];if(typeof t>"u")throw new Error(`Relay Protocol not supported: ${e}`);return t}function vx(e,t="-"){const r={},n="relay"+t;return Object.keys(e).forEach((t=>{if(t.startsWith(n)){const i=t.replace(n,""),o=e[t];r[i]=o}})),r}function bx(e){if(!e.includes("wc:")){const t=Gw(e);null!=t&&t.includes("wc:")&&(e=t)}const t=(e=(e=e.includes("wc://")?e.replace("wc://",""):e).includes("wc:")?e.replace("wc:",""):e).indexOf(":"),r=-1!==e.indexOf("?")?e.indexOf("?"):void 0,n=e.substring(0,t),i=e.substring(t+1,r).split("@"),o=typeof r<"u"?e.substring(r):"",s=new URLSearchParams(o),a={};s.forEach(((e,t)=>{a[t]=e}));const c="string"==typeof a.methods?a.methods.split(","):void 0;return{protocol:n,topic:wx(i[0]),version:parseInt(i[1],10),symKey:a.symKey,relay:vx(a),methods:c,expiryTimestamp:a.expiryTimestamp?parseInt(a.expiryTimestamp,10):void 0}}function wx(e){return e.startsWith("//")?e.substring(2):e}function Ex(e){const t=new URLSearchParams,r=function(e,t="-"){const r={};return Object.keys(e).forEach((n=>{const i=n,o="relay"+t+i;e[i]&&(r[o]=e[i])})),r}(e.relay);Object.keys(r).sort().forEach((e=>{t.set(e,r[e])})),t.set("symKey",e.symKey),e.expiryTimestamp&&t.set("expiryTimestamp",e.expiryTimestamp.toString()),e.methods&&t.set("methods",e.methods.join(","));const n=t.toString();return`${e.protocol}:${e.topic}@${e.version}?${n}`}function Ax(e,t,r){return`${e}?wc_ev=${r}&topic=${t}`}function _x(e){const t=[];return e.forEach((e=>{const[r,n]=e.split(":");t.push(`${r}:${n}`)})),t}function xx(e,t){const r=function(e){const t={};return e?.forEach((e=>{var r;const[n,i]=e.split(":");t[n]||(t[n]={accounts:[],chains:[],events:[],methods:[]}),t[n].accounts.push(e),null==(r=t[n].chains)||r.push(`${n}:${i}`)})),t}(t=t.map((e=>e.replace("did:pkh:",""))));for(const[t,n]of Object.entries(r))n.methods?n.methods=jw(n.methods,e):n.methods=e,n.events=["chainChanged","accountsChanged"];return r}Object.defineProperty,Object.defineProperties,Object.getOwnPropertyDescriptors,Object.getOwnPropertySymbols,Object.prototype.hasOwnProperty,Object.prototype.propertyIsEnumerable;const Sx={INVALID_METHOD:{message:"Invalid method.",code:1001},INVALID_EVENT:{message:"Invalid event.",code:1002},INVALID_UPDATE_REQUEST:{message:"Invalid update request.",code:1003},INVALID_EXTEND_REQUEST:{message:"Invalid extend request.",code:1004},INVALID_SESSION_SETTLE_REQUEST:{message:"Invalid session settle request.",code:1005},UNAUTHORIZED_METHOD:{message:"Unauthorized method.",code:3001},UNAUTHORIZED_EVENT:{message:"Unauthorized event.",code:3002},UNAUTHORIZED_UPDATE_REQUEST:{message:"Unauthorized update request.",code:3003},UNAUTHORIZED_EXTEND_REQUEST:{message:"Unauthorized extend request.",code:3004},USER_REJECTED:{message:"User rejected.",code:5e3},USER_REJECTED_CHAINS:{message:"User rejected chains.",code:5001},USER_REJECTED_METHODS:{message:"User rejected methods.",code:5002},USER_REJECTED_EVENTS:{message:"User rejected events.",code:5003},UNSUPPORTED_CHAINS:{message:"Unsupported chains.",code:5100},UNSUPPORTED_METHODS:{message:"Unsupported methods.",code:5101},UNSUPPORTED_EVENTS:{message:"Unsupported events.",code:5102},UNSUPPORTED_ACCOUNTS:{message:"Unsupported accounts.",code:5103},UNSUPPORTED_NAMESPACE_KEY:{message:"Unsupported namespace key.",code:5104},USER_DISCONNECTED:{message:"User disconnected.",code:6e3},SESSION_SETTLEMENT_FAILED:{message:"Session settlement failed.",code:7e3},WC_METHOD_UNSUPPORTED:{message:"Unsupported wc_ method.",code:10001}},kx={NOT_INITIALIZED:{message:"Not initialized.",code:1},NO_MATCHING_KEY:{message:"No matching key.",code:2},RESTORE_WILL_OVERRIDE:{message:"Restore will override.",code:3},RESUBSCRIBED:{message:"Resubscribed.",code:4},MISSING_OR_INVALID:{message:"Missing or invalid.",code:5},EXPIRED:{message:"Expired.",code:6},UNKNOWN_TYPE:{message:"Unknown type.",code:7},MISMATCHED_TOPIC:{message:"Mismatched topic.",code:8},NON_CONFORMING_NAMESPACES:{message:"Non conforming namespaces.",code:9}};function Ix(e,t){const{message:r,code:n}=kx[e];return{message:t?`${r} ${t}`:r,code:n}}function Ox(e,t){const{message:r,code:n}=Sx[e];return{message:t?`${r} ${t}`:r,code:n}}function Tx(e,t){return!!Array.isArray(e)&&(!(typeof t<"u"&&e.length)||e.every(t))}function Px(e){return Object.getPrototypeOf(e)===Object.prototype&&Object.keys(e).length}function Rx(e){return typeof e>"u"}function Nx(e,t){return!(!t||!Rx(e))||"string"==typeof e&&!!e.trim().length}function Cx(e,t){return!(!t||!Rx(e))||"number"==typeof e&&!isNaN(e)}function Mx(e){return!(!Nx(e,!1)||!e.includes(":"))&&2===e.split(":").length}function Lx(e){let t=!0;return Tx(e)?e.length&&(t=e.every((e=>Nx(e,!1)))):t=!1,t}function Bx(e,t){let r=null;return Object.values(e).forEach((e=>{if(r)return;const n=function(e,t){let r=null;return Lx(e?.methods)?Lx(e?.events)||(r=Ox("UNSUPPORTED_EVENTS",`${t}, events should be an array of strings or empty array for no events`)):r=Ox("UNSUPPORTED_METHODS",`${t}, methods should be an array of strings or empty array for no methods`),r}(e,`${t}, namespace`);n&&(r=n)})),r}function Ux(e,t){let r=null;if(e&&Px(e)){const n=Bx(e,t);n&&(r=n);const i=function(e,t){let r=null;return Object.values(e).forEach((e=>{if(r)return;const n=function(e,t){let r=null;return Tx(e)?e.forEach((e=>{r||function(e){if(Nx(e,!1)&&e.includes(":")){const t=e.split(":");if(3===t.length){const e=t[0]+":"+t[1];return!!t[2]&&Mx(e)}}return!1}(e)||(r=Ox("UNSUPPORTED_ACCOUNTS",`${t}, account ${e} should be a string and conform to "namespace:chainId:address" format`))})):r=Ox("UNSUPPORTED_ACCOUNTS",`${t}, accounts should be an array of strings conforming to "namespace:chainId:address" format`),r}(e?.accounts,`${t} namespace`);n&&(r=n)})),r}(e,t);i&&(r=i)}else r=Ix("MISSING_OR_INVALID",`${t}, namespaces should be an object with data`);return r}function Dx(e){return Nx(e.protocol,!0)}function jx(e){return typeof e<"u"&&null!==typeof e}function Fx(e,t){return!(!Mx(t)||!function(e){const t=[];return Object.values(e).forEach((e=>{t.push(..._x(e.accounts))})),t}(e).includes(t))}function zx(e,t,r){let n=null;const i=function(e){const t={};return Object.keys(e).forEach((r=>{var n;r.includes(":")?t[r]=e[r]:null==(n=e[r].chains)||n.forEach((n=>{t[n]={methods:e[r].methods,events:e[r].events}}))})),t}(e),o=function(e){const t={};return Object.keys(e).forEach((r=>{if(r.includes(":"))t[r]=e[r];else{const n=_x(e[r].accounts);n?.forEach((n=>{t[n]={accounts:e[r].accounts.filter((e=>e.includes(`${n}:`))),methods:e[r].methods,events:e[r].events}}))}})),t}(t),s=Object.keys(i),a=Object.keys(o),c=qx(Object.keys(e)),u=qx(Object.keys(t)),l=c.filter((e=>!u.includes(e)));return l.length&&(n=Ix("NON_CONFORMING_NAMESPACES",`${r} namespaces keys don't satisfy requiredNamespaces.\n      Required: ${l.toString()}\n      Received: ${Object.keys(t).toString()}`)),Tw(s,a)||(n=Ix("NON_CONFORMING_NAMESPACES",`${r} namespaces chains don't satisfy required namespaces.\n      Required: ${s.toString()}\n      Approved: ${a.toString()}`)),Object.keys(t).forEach((e=>{if(!e.includes(":")||n)return;const i=_x(t[e].accounts);i.includes(e)||(n=Ix("NON_CONFORMING_NAMESPACES",`${r} namespaces accounts don't satisfy namespace accounts for ${e}\n        Required: ${e}\n        Approved: ${i.toString()}`))})),s.forEach((e=>{n||(Tw(i[e].methods,o[e].methods)?Tw(i[e].events,o[e].events)||(n=Ix("NON_CONFORMING_NAMESPACES",`${r} namespaces events don't satisfy namespace events for ${e}`)):n=Ix("NON_CONFORMING_NAMESPACES",`${r} namespaces methods don't satisfy namespace methods for ${e}`))})),n}function qx(e){return[...new Set(e.map((e=>e.includes(":")?e.split(":")[0]:e)))]}function Gx(){const e=Sw();return new Promise((t=>{switch(e){case ww:t(xw()&&navigator?.onLine);break;case bw:t(async function(){if(_w()&&typeof r.g<"u"&&null!=r.g&&r.g.NetInfo){const e=await(null==r.g?void 0:r.g.NetInfo.fetch());return e?.isConnected}return!0}());break;default:t(!0)}}))}const Hx={};class Kx{static get(e){return Hx[e]}static set(e,t){Hx[e]=t}static delete(e){delete Hx[e]}}const Vx="PARSE_ERROR",Wx="INVALID_REQUEST",$x="METHOD_NOT_FOUND",Jx="INVALID_PARAMS",Yx="INTERNAL_ERROR",Qx="SERVER_ERROR",Xx=[-32700,-32600,-32601,-32602,-32603],Zx={[Vx]:{code:-32700,message:"Parse error"},[Wx]:{code:-32600,message:"Invalid Request"},[$x]:{code:-32601,message:"Method not found"},[Jx]:{code:-32602,message:"Invalid params"},[Yx]:{code:-32603,message:"Internal error"},[Qx]:{code:-32e3,message:"Server error"}},eS=Qx;function tS(e){return Object.keys(Zx).includes(e)?Zx[e]:Zx[eS]}var rS=r(5682);function nS(e=3){return Date.now()*Math.pow(10,e)+Math.floor(Math.random()*Math.pow(10,e))}function iS(e=6){return BigInt(nS(e))}function oS(e,t,r){return{id:r||nS(),jsonrpc:"2.0",method:e,params:t}}function sS(e,t){return{id:e,jsonrpc:"2.0",result:t}}function aS(e,t,r){return{id:e,jsonrpc:"2.0",error:cS(t,r)}}function cS(e,t){return void 0===e?tS(Yx):("string"==typeof e&&(e=Object.assign(Object.assign({},tS(Qx)),{message:e})),void 0!==t&&(e.data=t),r=e.code,Xx.includes(r)&&(e=function(e){return Object.values(Zx).find((t=>t.code===e))||Zx[eS]}(e.code)),e);var r}class uS{}class lS extends uS{constructor(){super()}}class hS extends lS{constructor(e){super()}}function fS(e){return function(e,t){const r=function(e){const t=e.match(new RegExp(/^\w+:/,"gi"));if(t&&t.length)return t[0]}(e);return void 0!==r&&new RegExp(t).test(r)}(e,"^wss?:")}function dS(e){return"object"==typeof e&&"id"in e&&"jsonrpc"in e&&"2.0"===e.jsonrpc}function pS(e){return dS(e)&&"method"in e}function gS(e){return dS(e)&&(mS(e)||yS(e))}function mS(e){return"result"in e}function yS(e){return"error"in e}class vS extends hS{constructor(e){super(e),this.events=new Et.EventEmitter,this.hasRegisteredEventListeners=!1,this.connection=this.setConnection(e),this.connection.connected&&this.registerEventListeners()}async connect(e=this.connection){await this.open(e)}async disconnect(){await this.close()}on(e,t){this.events.on(e,t)}once(e,t){this.events.once(e,t)}off(e,t){this.events.off(e,t)}removeListener(e,t){this.events.removeListener(e,t)}async request(e,t){return this.requestStrict(oS(e.method,e.params||[],e.id||iS().toString()),t)}async requestStrict(e,t){return new Promise((async(r,n)=>{if(!this.connection.connected)try{await this.open()}catch(e){n(e)}this.events.on(`${e.id}`,(e=>{yS(e)?n(e.error):r(e.result)}));try{await this.connection.send(e,t)}catch(e){n(e)}}))}setConnection(e=this.connection){return e}onPayload(e){this.events.emit("payload",e),gS(e)?this.events.emit(`${e.id}`,e):this.events.emit("message",{type:e.method,data:e.params})}onClose(e){e&&3e3===e.code&&this.events.emit("error",new Error(`WebSocket connection closed abnormally with code: ${e.code} ${e.reason?`(${e.reason})`:""}`)),this.events.emit("disconnect")}async open(e=this.connection){this.connection===e&&this.connection.connected||(this.connection.connected&&this.close(),"string"==typeof e&&(await this.connection.open(e),e=this.connection),this.connection=this.setConnection(e),await this.connection.open(),this.registerEventListeners(),this.events.emit("connect"))}async close(){await this.connection.close()}registerEventListeners(){this.hasRegisteredEventListeners||(this.connection.on("payload",(e=>this.onPayload(e))),this.connection.on("close",(e=>this.onClose(e))),this.connection.on("error",(e=>this.events.emit("error",e))),this.connection.on("register_error",(e=>this.onClose())),this.hasRegisteredEventListeners=!0)}}const bS=e=>e.split("?")[0],wS=typeof WebSocket<"u"?WebSocket:typeof r.g<"u"&&typeof r.g.WebSocket<"u"?r.g.WebSocket:typeof window<"u"&&typeof window.WebSocket<"u"?window.WebSocket:typeof self<"u"&&typeof self.WebSocket<"u"?self.WebSocket:r(796);class ES{constructor(e){if(this.url=e,this.events=new Et.EventEmitter,this.registering=!1,!fS(e))throw new Error(`Provided URL is not compatible with WebSocket connection: ${e}`);this.url=e}get connected(){return typeof this.socket<"u"}get connecting(){return this.registering}on(e,t){this.events.on(e,t)}once(e,t){this.events.once(e,t)}off(e,t){this.events.off(e,t)}removeListener(e,t){this.events.removeListener(e,t)}async open(e=this.url){await this.register(e)}async close(){return new Promise(((e,t)=>{typeof this.socket>"u"?t(new Error("Connection already closed")):(this.socket.onclose=t=>{this.onClose(t),e()},this.socket.close())}))}async send(e){typeof this.socket>"u"&&(this.socket=await this.register());try{this.socket.send(hd(e))}catch(t){this.onError(e.id,t)}}register(e=this.url){if(!fS(e))throw new Error(`Provided URL is not compatible with WebSocket connection: ${e}`);if(this.registering){const e=this.events.getMaxListeners();return(this.events.listenerCount("register_error")>=e||this.events.listenerCount("open")>=e)&&this.events.setMaxListeners(e+1),new Promise(((e,t)=>{this.events.once("register_error",(e=>{this.resetMaxListeners(),t(e)})),this.events.once("open",(()=>{if(this.resetMaxListeners(),typeof this.socket>"u")return t(new Error("WebSocket connection is missing or invalid"));e(this.socket)}))}))}return this.url=e,this.registering=!0,new Promise(((t,n)=>{const i=(0,rS.isReactNative)()?void 0:{rejectUnauthorized:(s=e,!new RegExp("wss?://localhost(:d{2,5})?").test(s))},o=new wS(e,[],i);var s;typeof WebSocket<"u"||typeof r.g<"u"&&typeof r.g.WebSocket<"u"||typeof window<"u"&&typeof window.WebSocket<"u"||typeof self<"u"&&typeof self.WebSocket<"u"?o.onerror=e=>{const t=e;n(this.emitError(t.error))}:o.on("error",(e=>{n(this.emitError(e))})),o.onopen=()=>{this.onOpen(o),t(o)}}))}onOpen(e){e.onmessage=e=>this.onPayload(e),e.onclose=e=>this.onClose(e),this.socket=e,this.registering=!1,this.events.emit("open")}onClose(e){this.socket=void 0,this.registering=!1,this.events.emit("close",e)}onPayload(e){if(typeof e.data>"u")return;const t="string"==typeof e.data?ld(e.data):e.data;this.events.emit("payload",t)}onError(e,t){const r=this.parseError(t),n=aS(e,r.message||r.toString());this.events.emit("payload",n)}parseError(e,t=this.url){return function(e,t){return e.message.includes("getaddrinfo ENOTFOUND")||e.message.includes("connect ECONNREFUSED")?new Error(`Unavailable WS RPC url at ${t}`):e}(e,bS(t))}resetMaxListeners(){this.events.getMaxListeners()>10&&this.events.setMaxListeners(10)}emitError(e){const t=this.parseError(new Error(e?.message||`WebSocket connection failed for host: ${bS(this.url)}`));return this.events.emit("register_error",t),t}}const AS="core",_S=`wc@2:${AS}:`,xS={database:":memory:"},SS="client_ed25519_seed",kS=Df.ONE_DAY,IS=Df.SIX_HOURS,OS="wss://relay.walletconnect.org",TS="relayer_message",PS="relayer_message_ack",RS="relayer_connection_stalled",NS="relayer_publish",CS="payload",MS="connect",LS="disconnect",BS="error",US="2.19.2",DS={link_mode:"link_mode",relay:"relay"},jS="inbound",FS="WALLETCONNECT_LINK_MODE_APPS",zS="subscription_created",qS="subscription_deleted",GS=(Df.FIVE_SECONDS,{wc_pairingDelete:{req:{ttl:Df.ONE_DAY,prompt:!1,tag:1e3},res:{ttl:Df.ONE_DAY,prompt:!1,tag:1001}},wc_pairingPing:{req:{ttl:Df.THIRTY_SECONDS,prompt:!1,tag:1002},res:{ttl:Df.THIRTY_SECONDS,prompt:!1,tag:1003}},unregistered_method:{req:{ttl:Df.ONE_DAY,prompt:!1,tag:0},res:{ttl:Df.ONE_DAY,prompt:!1,tag:0}}}),HS="pairing_create",KS="pairing_delete",VS="history_created",WS="history_updated",$S="history_deleted",JS="expirer_created",YS="expirer_deleted",QS="expirer_expired",XS="https://verify.walletconnect.org",ZS=XS,ek=`${ZS}/v3`,tk=["https://verify.walletconnect.com",XS],rk="malformed_pairing_uri",nk="session_approve_started";var ik=function(e,t){if(e.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),n=0;n<r.length;n++)r[n]=255;for(var i=0;i<e.length;i++){var o=e.charAt(i),s=o.charCodeAt(0);if(255!==r[s])throw new TypeError(o+" is ambiguous");r[s]=i}var a=e.length,c=e.charAt(0),u=Math.log(a)/Math.log(256),l=Math.log(256)/Math.log(a);function h(e){if("string"!=typeof e)throw new TypeError("Expected String");if(0===e.length)return new Uint8Array;var t=0;if(" "!==e[t]){for(var n=0,i=0;e[t]===c;)n++,t++;for(var o=(e.length-t)*u+1>>>0,s=new Uint8Array(o);e[t];){var l=r[e.charCodeAt(t)];if(255===l)return;for(var h=0,f=o-1;(0!==l||h<i)&&-1!==f;f--,h++)l+=a*s[f]>>>0,s[f]=l%256>>>0,l=l/256>>>0;if(0!==l)throw new Error("Non-zero carry");i=h,t++}if(" "!==e[t]){for(var d=o-i;d!==o&&0===s[d];)d++;for(var p=new Uint8Array(n+(o-d)),g=n;d!==o;)p[g++]=s[d++];return p}}}return{encode:function(t){if(t instanceof Uint8Array||(ArrayBuffer.isView(t)?t=new Uint8Array(t.buffer,t.byteOffset,t.byteLength):Array.isArray(t)&&(t=Uint8Array.from(t))),!(t instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(0===t.length)return"";for(var r=0,n=0,i=0,o=t.length;i!==o&&0===t[i];)i++,r++;for(var s=(o-i)*l+1>>>0,u=new Uint8Array(s);i!==o;){for(var h=t[i],f=0,d=s-1;(0!==h||f<n)&&-1!==d;d--,f++)h+=256*u[d]>>>0,u[d]=h%a>>>0,h=h/a>>>0;if(0!==h)throw new Error("Non-zero carry");n=f,i++}for(var p=s-n;p!==s&&0===u[p];)p++;for(var g=c.repeat(r);p<s;++p)g+=e.charAt(u[p]);return g},decodeUnsafe:h,decode:function(e){var r=h(e);if(r)return r;throw new Error(`Non-${t} character`)}}};const ok=e=>{if(e instanceof Uint8Array&&"Uint8Array"===e.constructor.name)return e;if(e instanceof ArrayBuffer)return new Uint8Array(e);if(ArrayBuffer.isView(e))return new Uint8Array(e.buffer,e.byteOffset,e.byteLength);throw new Error("Unknown type, must be binary type")};class sk{constructor(e,t,r){this.name=e,this.prefix=t,this.baseEncode=r}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}}class ak{constructor(e,t,r){if(this.name=e,this.prefix=t,void 0===t.codePointAt(0))throw new Error("Invalid prefix character");this.prefixCodePoint=t.codePointAt(0),this.baseDecode=r}decode(e){if("string"==typeof e){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}throw Error("Can only multibase decode strings")}or(e){return uk(this,e)}}class ck{constructor(e){this.decoders=e}or(e){return uk(this,e)}decode(e){const t=e[0],r=this.decoders[t];if(r)return r.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const uk=(e,t)=>new ck({...e.decoders||{[e.prefix]:e},...t.decoders||{[t.prefix]:t}});class lk{constructor(e,t,r,n){this.name=e,this.prefix=t,this.baseEncode=r,this.baseDecode=n,this.encoder=new sk(e,t,r),this.decoder=new ak(e,t,n)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}const hk=({name:e,prefix:t,encode:r,decode:n})=>new lk(e,t,r,n),fk=({prefix:e,name:t,alphabet:r})=>{const{encode:n,decode:i}=ik(r,t);return hk({prefix:e,name:t,encode:n,decode:e=>ok(i(e))})},dk=({name:e,prefix:t,bitsPerChar:r,alphabet:n})=>hk({prefix:t,name:e,encode:e=>((e,t,r)=>{const n="="===t[t.length-1],i=(1<<r)-1;let o="",s=0,a=0;for(let n=0;n<e.length;++n)for(a=a<<8|e[n],s+=8;s>r;)s-=r,o+=t[i&a>>s];if(s&&(o+=t[i&a<<r-s]),n)for(;o.length*r&7;)o+="=";return o})(e,n,r),decode:t=>((e,t,r,n)=>{const i={};for(let e=0;e<t.length;++e)i[t[e]]=e;let o=e.length;for(;"="===e[o-1];)--o;const s=new Uint8Array(o*r/8|0);let a=0,c=0,u=0;for(let t=0;t<o;++t){const o=i[e[t]];if(void 0===o)throw new SyntaxError(`Non-${n} character`);c=c<<r|o,a+=r,a>=8&&(a-=8,s[u++]=255&c>>a)}if(a>=r||255&c<<8-a)throw new SyntaxError("Unexpected end of data");return s})(t,n,r,e)}),pk=hk({prefix:"\0",name:"identity",encode:e=>(e=>(new TextDecoder).decode(e))(e),decode:e=>(e=>(new TextEncoder).encode(e))(e)});var gk=Object.freeze({__proto__:null,identity:pk});const mk=dk({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1});var yk=Object.freeze({__proto__:null,base2:mk});const vk=dk({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3});var bk=Object.freeze({__proto__:null,base8:vk});const wk=fk({prefix:"9",name:"base10",alphabet:"0123456789"});var Ek=Object.freeze({__proto__:null,base10:wk});const Ak=dk({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),_k=dk({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});var xk=Object.freeze({__proto__:null,base16:Ak,base16upper:_k});const Sk=dk({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),kk=dk({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),Ik=dk({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),Ok=dk({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),Tk=dk({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),Pk=dk({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),Rk=dk({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),Nk=dk({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),Ck=dk({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});var Mk=Object.freeze({__proto__:null,base32:Sk,base32upper:kk,base32pad:Ik,base32padupper:Ok,base32hex:Tk,base32hexupper:Pk,base32hexpad:Rk,base32hexpadupper:Nk,base32z:Ck});const Lk=fk({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),Bk=fk({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});var Uk=Object.freeze({__proto__:null,base36:Lk,base36upper:Bk});const Dk=fk({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),jk=fk({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var Fk=Object.freeze({__proto__:null,base58btc:Dk,base58flickr:jk});const zk=dk({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),qk=dk({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),Gk=dk({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),Hk=dk({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});var Kk=Object.freeze({__proto__:null,base64:zk,base64pad:qk,base64url:Gk,base64urlpad:Hk});const Vk=Array.from(""),Wk=Vk.reduce(((e,t,r)=>(e[r]=t,e)),[]),$k=Vk.reduce(((e,t,r)=>(e[t.codePointAt(0)]=r,e)),[]),Jk=hk({prefix:"",name:"base256emoji",encode:function(e){return e.reduce(((e,t)=>e+Wk[t]),"")},decode:function(e){const t=[];for(const r of e){const e=$k[r.codePointAt(0)];if(void 0===e)throw new Error(`Non-base256emoji character: ${r}`);t.push(e)}return new Uint8Array(t)}});var Yk=Object.freeze({__proto__:null,base256emoji:Jk}),Qk=128,Xk=-128,Zk=Math.pow(2,31),eI=128,tI=127,rI=Math.pow(2,7),nI=Math.pow(2,14),iI=Math.pow(2,21),oI=Math.pow(2,28),sI=Math.pow(2,35),aI=Math.pow(2,42),cI=Math.pow(2,49),uI=Math.pow(2,56),lI=Math.pow(2,63),hI={encode:function e(t,r,n){r=r||[];for(var i=n=n||0;t>=Zk;)r[n++]=255&t|Qk,t/=128;for(;t&Xk;)r[n++]=255&t|Qk,t>>>=7;return r[n]=0|t,e.bytes=n-i+1,r},decode:function e(t,r){var n,i=0,o=(r=r||0,0),s=r,a=t.length;do{if(s>=a)throw e.bytes=0,new RangeError("Could not decode varint");n=t[s++],i+=o<28?(n&tI)<<o:(n&tI)*Math.pow(2,o),o+=7}while(n>=eI);return e.bytes=s-r,i},encodingLength:function(e){return e<rI?1:e<nI?2:e<iI?3:e<oI?4:e<sI?5:e<aI?6:e<cI?7:e<uI?8:e<lI?9:10}},fI=hI;const dI=(e,t,r=0)=>(fI.encode(e,t,r),t),pI=e=>fI.encodingLength(e),gI=(e,t)=>{const r=t.byteLength,n=pI(e),i=n+pI(r),o=new Uint8Array(i+r);return dI(e,o,0),dI(r,o,n),o.set(t,i),new mI(e,r,t,o)};class mI{constructor(e,t,r,n){this.code=e,this.size=t,this.digest=r,this.bytes=n}}const yI=({name:e,code:t,encode:r})=>new vI(e,t,r);class vI{constructor(e,t,r){this.name=e,this.code=t,this.encode=r}digest(e){if(e instanceof Uint8Array){const t=this.encode(e);return t instanceof Uint8Array?gI(this.code,t):t.then((e=>gI(this.code,e)))}throw Error("Unknown type, must be binary type")}}const bI=e=>async t=>new Uint8Array(await crypto.subtle.digest(e,t)),wI=yI({name:"sha2-256",code:18,encode:bI("SHA-256")}),EI=yI({name:"sha2-512",code:19,encode:bI("SHA-512")});Object.freeze({__proto__:null,sha256:wI,sha512:EI});const AI=ok,_I={code:0,name:"identity",encode:AI,digest:e=>gI(0,AI(e))};Object.freeze({__proto__:null,identity:_I}),new TextEncoder,new TextDecoder;const xI={...gk,...yk,...bk,...Ek,...xk,...Mk,...Uk,...Fk,...Kk,...Yk};function SI(e,t,r,n){return{name:e,prefix:t,encoder:{name:e,prefix:t,encode:r},decoder:{decode:n}}}const kI=SI("utf8","u",(e=>"u"+new TextDecoder("utf8").decode(e)),(e=>(new TextEncoder).encode(e.substring(1)))),II=SI("ascii","a",(e=>{let t="a";for(let r=0;r<e.length;r++)t+=String.fromCharCode(e[r]);return t}),(e=>{const t=function(e=0){return null!=globalThis.Buffer&&null!=globalThis.Buffer.allocUnsafe?globalThis.Buffer.allocUnsafe(e):new Uint8Array(e)}((e=e.substring(1)).length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t})),OI={utf8:kI,"utf-8":kI,hex:xI.base16,latin1:II,ascii:II,binary:II,...xI};var TI=Object.defineProperty,PI=(e,t,r)=>((e,t,r)=>t in e?TI(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r)(e,"symbol"!=typeof t?t+"":t,r);class RI{constructor(e,t){this.core=e,this.logger=t,PI(this,"keychain",new Map),PI(this,"name","keychain"),PI(this,"version","0.3"),PI(this,"initialized",!1),PI(this,"storagePrefix",_S),PI(this,"init",(async()=>{if(!this.initialized){const e=await this.getKeyChain();typeof e<"u"&&(this.keychain=e),this.initialized=!0}})),PI(this,"has",(e=>(this.isInitialized(),this.keychain.has(e)))),PI(this,"set",(async(e,t)=>{this.isInitialized(),this.keychain.set(e,t),await this.persist()})),PI(this,"get",(e=>{this.isInitialized();const t=this.keychain.get(e);if(typeof t>"u"){const{message:t}=Ix("NO_MATCHING_KEY",`${this.name}: ${e}`);throw new Error(t)}return t})),PI(this,"del",(async e=>{this.isInitialized(),this.keychain.delete(e),await this.persist()})),this.core=e,this.logger=Dd(t,this.name)}get context(){return Ud(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}async setKeyChain(e){await this.core.storage.setItem(this.storageKey,Pw(e))}async getKeyChain(){const e=await this.core.storage.getItem(this.storageKey);return typeof e<"u"?Rw(e):void 0}async persist(){await this.setKeyChain(this.keychain)}isInitialized(){if(!this.initialized){const{message:e}=Ix("NOT_INITIALIZED",this.name);throw new Error(e)}}}var NI=Object.defineProperty,CI=(e,t,r)=>((e,t,r)=>t in e?NI(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r)(e,"symbol"!=typeof t?t+"":t,r);class MI{constructor(e,t,r){this.core=e,this.logger=t,CI(this,"name","crypto"),CI(this,"keychain"),CI(this,"randomSessionIdentifier",ix()),CI(this,"initialized",!1),CI(this,"init",(async()=>{this.initialized||(await this.keychain.init(),this.initialized=!0)})),CI(this,"hasKeys",(e=>(this.isInitialized(),this.keychain.has(e)))),CI(this,"getClientId",(async()=>(this.isInitialized(),_y(ky(await this.getClientSeed()).publicKey)))),CI(this,"generateKeyPair",(()=>{this.isInitialized();const e=function(){const e=j_.utils.randomPrivateKey(),t=j_.getPublicKey(e);return{privateKey:aw(e,ex),publicKey:aw(t,ex)}}();return this.setPrivateKey(e.publicKey,e.privateKey)})),CI(this,"signJWT",(async e=>{this.isInitialized();const t=ky(await this.getClientSeed()),r=this.randomSessionIdentifier,n=kS;return await async function(e,t,r,n,i=(0,Df.fromMiliseconds)(Date.now())){const o={alg:"EdDSA",typ:"JWT"},s={iss:_y(n.publicKey),sub:e,aud:t,iat:i,exp:i+r},a=function(e){return wy([Ay(e.header),Ay(e.payload)].join(Dg),zg)}({header:o,payload:s});return function(e){return[Ay(e.header),Ay(e.payload),xy(e.signature)].join(Dg)}({header:o,payload:s,signature:Ug.sign(a,n.secretKey.slice(0,32))})}(r,e,n,t)})),CI(this,"generateSharedKey",((e,t,r)=>{this.isInitialized();const n=function(e,t){const r=j_.getSharedSecret(sw(e,ex),sw(t,ex));return aw(((e,t,r,n,i)=>function(e,t,r,n=32){if(Vw(e),Hw(n),n>255*e.outputLen)throw new Error("Length should be <= 255*HashLen");const i=Math.ceil(n/e.outputLen);void 0===r&&(r=AA);const o=new Uint8Array(i*e.outputLen),s=wA.create(e,t),a=s._cloneInto(),c=new Uint8Array(s.outputLen);for(let t=0;t<i;t++)EA[0]=t+1,a.update(0===t?AA:c).update(r).update(EA).digestInto(c),o.set(c,e.outputLen*t),s._cloneInto(a);return s.destroy(),a.destroy(),c.fill(0),EA.fill(0),o.slice(0,n)}(e,function(e,t,r){return Vw(e),void 0===r&&(r=new Uint8Array(e.outputLen)),wA(e,iE(r),iE(t))}(e,t,r),n,i))(PA,r,void 0,void 0,32),ex)}(this.getPrivateKey(e),t);return this.setSymKey(n,r)})),CI(this,"setSymKey",(async(e,t)=>{this.isInitialized();const r=t||ox(e);return await this.keychain.set(r,e),r})),CI(this,"deleteKeyPair",(async e=>{this.isInitialized(),await this.keychain.del(e)})),CI(this,"deleteSymKey",(async e=>{this.isInitialized(),await this.keychain.del(e)})),CI(this,"encode",(async(e,t,r)=>{this.isInitialized();const n=dx(r),i=hd(t);if(gx(n))return function(e,t){const r=ax(2),n=aE(12),i=hx({type:r,sealed:sw(e,nx),iv:n});return t===rx?ux(i):i}(i,r?.encoding);if(px(n)){const t=n.senderPublicKey,r=n.receiverPublicKey;e=await this.generateSharedKey(t,r)}const o=this.getSymKey(e),{type:s,senderPublicKey:a}=n;return function(e){const t=ax(typeof e.type<"u"?e.type:0);if(1===cx(t)&&typeof e.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");const r=typeof e.senderPublicKey<"u"?sw(e.senderPublicKey,ex):void 0,n=typeof e.iv<"u"?sw(e.iv,ex):aE(12),i=sw(e.symKey,ex),o=hx({type:t,sealed:vA(i,n).encrypt(sw(e.message,nx)),iv:n,senderPublicKey:r});return e.encoding===rx?ux(o):o}({type:s,symKey:o,message:i,senderPublicKey:a,encoding:r?.encoding})})),CI(this,"decode",(async(e,t,r)=>{this.isInitialized();const n=function(e,t){const r=fx({encoded:e,encoding:t?.encoding});return dx({type:cx(r.type),senderPublicKey:typeof r.senderPublicKey<"u"?aw(r.senderPublicKey,ex):void 0,receiverPublicKey:t?.receiverPublicKey})}(t,r);if(gx(n)){const e=function(e,t){const{sealed:r}=fx({encoded:e,encoding:t});return aw(r,nx)}(t,r?.encoding);return ld(e)}if(px(n)){const t=n.receiverPublicKey,r=n.senderPublicKey;e=await this.generateSharedKey(t,r)}try{const n=function(e){const t=sw(e.symKey,ex),{sealed:r,iv:n}=fx({encoded:e.encoded,encoding:e.encoding}),i=vA(t,n).decrypt(r);if(null===i)throw new Error("Failed to decrypt");return aw(i,nx)}({symKey:this.getSymKey(e),encoded:t,encoding:r?.encoding});return ld(n)}catch(t){this.logger.error(`Failed to decode message from topic: '${e}', clientId: '${await this.getClientId()}'`),this.logger.error(t)}})),CI(this,"getPayloadType",((e,t=tx)=>cx(fx({encoded:e,encoding:t}).type))),CI(this,"getPayloadSenderPublicKey",((e,t=tx)=>{const r=fx({encoded:e,encoding:t});return r.senderPublicKey?aw(r.senderPublicKey,ex):void 0})),this.core=e,this.logger=Dd(t,this.name),this.keychain=r||new RI(this.core,this.logger)}get context(){return Ud(this.logger)}async setPrivateKey(e,t){return await this.keychain.set(e,t),e}getPrivateKey(e){return this.keychain.get(e)}async getClientSeed(){let e="";try{e=this.keychain.get(SS)}catch{e=ix(),await this.keychain.set(SS,e)}return function(e,t="utf8"){const r=OI[t];if(!r)throw new Error(`Unsupported encoding "${t}"`);return"utf8"!==t&&"utf-8"!==t||null==globalThis.Buffer||null==globalThis.Buffer.from?r.decoder.decode(`${r.prefix}${e}`):globalThis.Buffer.from(e,"utf8")}(e,"base16")}getSymKey(e){return this.keychain.get(e)}isInitialized(){if(!this.initialized){const{message:e}=Ix("NOT_INITIALIZED",this.name);throw new Error(e)}}}var LI=Object.defineProperty,BI=Object.defineProperties,UI=Object.getOwnPropertyDescriptors,DI=Object.getOwnPropertySymbols,jI=Object.prototype.hasOwnProperty,FI=Object.prototype.propertyIsEnumerable,zI=(e,t,r)=>t in e?LI(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,qI=(e,t,r)=>zI(e,"symbol"!=typeof t?t+"":t,r);class GI extends Kd{constructor(e,t){super(e,t),this.logger=e,this.core=t,qI(this,"messages",new Map),qI(this,"messagesWithoutClientAck",new Map),qI(this,"name","messages"),qI(this,"version","0.3"),qI(this,"initialized",!1),qI(this,"storagePrefix",_S),qI(this,"init",(async()=>{if(!this.initialized){this.logger.trace("Initialized");try{const e=await this.getRelayerMessages();typeof e<"u"&&(this.messages=e);const t=await this.getRelayerMessagesWithoutClientAck();typeof t<"u"&&(this.messagesWithoutClientAck=t),this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",size:this.messages.size})}catch(e){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(e)}finally{this.initialized=!0}}})),qI(this,"set",(async(e,t,r)=>{this.isInitialized();const n=sx(t);let i=this.messages.get(e);if(typeof i>"u"&&(i={}),typeof i[n]<"u")return n;if(i[n]=t,this.messages.set(e,i),r===jS){const r=this.messagesWithoutClientAck.get(e)||{};this.messagesWithoutClientAck.set(e,((e,t)=>BI(e,UI(t)))(((e,t)=>{for(var r in t||(t={}))jI.call(t,r)&&zI(e,r,t[r]);if(DI)for(var r of DI(t))FI.call(t,r)&&zI(e,r,t[r]);return e})({},r),{[n]:t}))}return await this.persist(),n})),qI(this,"get",(e=>{this.isInitialized();let t=this.messages.get(e);return typeof t>"u"&&(t={}),t})),qI(this,"getWithoutAck",(e=>{this.isInitialized();const t={};for(const r of e){const e=this.messagesWithoutClientAck.get(r)||{};t[r]=Object.values(e)}return t})),qI(this,"has",((e,t)=>(this.isInitialized(),typeof this.get(e)[sx(t)]<"u"))),qI(this,"ack",(async(e,t)=>{this.isInitialized();const r=this.messagesWithoutClientAck.get(e);typeof r>"u"||(delete r[sx(t)],0===Object.keys(r).length?this.messagesWithoutClientAck.delete(e):this.messagesWithoutClientAck.set(e,r),await this.persist())})),qI(this,"del",(async e=>{this.isInitialized(),this.messages.delete(e),this.messagesWithoutClientAck.delete(e),await this.persist()})),this.logger=Dd(e,this.name),this.core=t}get context(){return Ud(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get storageKeyWithoutClientAck(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name+"_withoutClientAck"}async setRelayerMessages(e){await this.core.storage.setItem(this.storageKey,Pw(e))}async setRelayerMessagesWithoutClientAck(e){await this.core.storage.setItem(this.storageKeyWithoutClientAck,Pw(e))}async getRelayerMessages(){const e=await this.core.storage.getItem(this.storageKey);return typeof e<"u"?Rw(e):void 0}async getRelayerMessagesWithoutClientAck(){const e=await this.core.storage.getItem(this.storageKeyWithoutClientAck);return typeof e<"u"?Rw(e):void 0}async persist(){await this.setRelayerMessages(this.messages),await this.setRelayerMessagesWithoutClientAck(this.messagesWithoutClientAck)}isInitialized(){if(!this.initialized){const{message:e}=Ix("NOT_INITIALIZED",this.name);throw new Error(e)}}}var HI=Object.defineProperty,KI=Object.defineProperties,VI=Object.getOwnPropertyDescriptors,WI=Object.getOwnPropertySymbols,$I=Object.prototype.hasOwnProperty,JI=Object.prototype.propertyIsEnumerable,YI=(e,t,r)=>t in e?HI(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,QI=(e,t)=>{for(var r in t||(t={}))$I.call(t,r)&&YI(e,r,t[r]);if(WI)for(var r of WI(t))JI.call(t,r)&&YI(e,r,t[r]);return e},XI=(e,t)=>KI(e,VI(t)),ZI=(e,t,r)=>YI(e,"symbol"!=typeof t?t+"":t,r);class eO extends Vd{constructor(e,t){super(e,t),this.relayer=e,this.logger=t,ZI(this,"events",new Et.EventEmitter),ZI(this,"name","publisher"),ZI(this,"queue",new Map),ZI(this,"publishTimeout",(0,Df.toMiliseconds)(Df.ONE_MINUTE)),ZI(this,"initialPublishTimeout",(0,Df.toMiliseconds)(15*Df.ONE_SECOND)),ZI(this,"needsTransportRestart",!1),ZI(this,"publish",(async(e,t,r)=>{var n;this.logger.debug("Publishing Payload"),this.logger.trace({type:"method",method:"publish",params:{topic:e,message:t,opts:r}});const i=r?.ttl||IS,o=mx(r),s=r?.prompt||!1,a=r?.tag||0,c=r?.id||iS().toString(),u={topic:e,message:t,opts:{ttl:i,relay:o,prompt:s,tag:a,id:c,attestation:r?.attestation,tvf:r?.tvf}},l=`Failed to publish payload, please try again. id:${c} tag:${a}`;try{const n=new Promise((async n=>{const o=({id:e})=>{u.opts.id===e&&(this.removeRequestFromQueue(e),this.relayer.events.removeListener(NS,o),n(u))};this.relayer.events.on(NS,o);const l=Cw(new Promise(((n,o)=>{this.rpcPublish({topic:e,message:t,ttl:i,prompt:s,tag:a,id:c,attestation:r?.attestation,tvf:r?.tvf}).then(n).catch((e=>{this.logger.warn(e,e?.message),o(e)}))})),this.initialPublishTimeout,`Failed initial publish, retrying.... id:${c} tag:${a}`);try{await l,this.events.removeListener(NS,o)}catch(e){this.queue.set(c,XI(QI({},u),{attempt:1})),this.logger.warn(e,e?.message)}}));this.logger.trace({type:"method",method:"publish",params:{id:c,topic:e,message:t,opts:r}}),await Cw(n,this.publishTimeout,l)}catch(e){if(this.logger.debug("Failed to Publish Payload"),this.logger.error(e),null!=(n=r?.internal)&&n.throwOnFailedPublish)throw e}finally{this.queue.delete(c)}})),ZI(this,"on",((e,t)=>{this.events.on(e,t)})),ZI(this,"once",((e,t)=>{this.events.once(e,t)})),ZI(this,"off",((e,t)=>{this.events.off(e,t)})),ZI(this,"removeListener",((e,t)=>{this.events.removeListener(e,t)})),this.relayer=e,this.logger=Dd(t,this.name),this.registerEventListeners()}get context(){return Ud(this.logger)}async rpcPublish(e){var t,r,n,i;const{topic:o,message:s,ttl:a=IS,prompt:c,tag:u,id:l,attestation:h,tvf:f}=e,d={method:yx(mx().protocol).publish,params:QI({topic:o,message:s,ttl:a,prompt:c,tag:u,attestation:h},f),id:l};Rx(null==(t=d.params)?void 0:t.prompt)&&(null==(r=d.params)||delete r.prompt),Rx(null==(n=d.params)?void 0:n.tag)&&(null==(i=d.params)||delete i.tag),this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"message",direction:"outgoing",request:d});const p=await this.relayer.request(d);return this.relayer.events.emit(NS,e),this.logger.debug("Successfully Published Payload"),p}removeRequestFromQueue(e){this.queue.delete(e)}checkQueue(){this.queue.forEach((async(e,t)=>{const r=e.attempt+1;this.queue.set(t,XI(QI({},e),{attempt:r}));const{topic:n,message:i,opts:o,attestation:s}=e;this.logger.warn({},`Publisher: queue->publishing: ${e.opts.id}, tag: ${e.opts.tag}, attempt: ${r}`),await this.rpcPublish(XI(QI({},e),{topic:n,message:i,ttl:o.ttl,prompt:o.prompt,tag:o.tag,id:o.id,attestation:s,tvf:o.tvf})),this.logger.warn({},`Publisher: queue->published: ${e.opts.id}`)}))}registerEventListeners(){this.relayer.core.heartbeat.on(qf,(()=>{if(this.needsTransportRestart)return this.needsTransportRestart=!1,void this.relayer.events.emit(RS);this.checkQueue()})),this.relayer.on(PS,(e=>{this.removeRequestFromQueue(e.id.toString())}))}}var tO=Object.defineProperty,rO=(e,t,r)=>((e,t,r)=>t in e?tO(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r)(e,"symbol"!=typeof t?t+"":t,r);class nO{constructor(){rO(this,"map",new Map),rO(this,"set",((e,t)=>{const r=this.get(e);this.exists(e,t)||this.map.set(e,[...r,t])})),rO(this,"get",(e=>this.map.get(e)||[])),rO(this,"exists",((e,t)=>this.get(e).includes(t))),rO(this,"delete",((e,t)=>{if(typeof t>"u")return void this.map.delete(e);if(!this.map.has(e))return;const r=this.get(e);if(!this.exists(e,t))return;const n=r.filter((e=>e!==t));n.length?this.map.set(e,n):this.map.delete(e)})),rO(this,"clear",(()=>{this.map.clear()}))}get topics(){return Array.from(this.map.keys())}}var iO=Object.defineProperty,oO=Object.defineProperties,sO=Object.getOwnPropertyDescriptors,aO=Object.getOwnPropertySymbols,cO=Object.prototype.hasOwnProperty,uO=Object.prototype.propertyIsEnumerable,lO=(e,t,r)=>t in e?iO(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,hO=(e,t)=>{for(var r in t||(t={}))cO.call(t,r)&&lO(e,r,t[r]);if(aO)for(var r of aO(t))uO.call(t,r)&&lO(e,r,t[r]);return e},fO=(e,t)=>oO(e,sO(t)),dO=(e,t,r)=>lO(e,"symbol"!=typeof t?t+"":t,r);class pO extends Jd{constructor(e,t){super(e,t),this.relayer=e,this.logger=t,dO(this,"subscriptions",new Map),dO(this,"topicMap",new nO),dO(this,"events",new Et.EventEmitter),dO(this,"name","subscription"),dO(this,"version","0.3"),dO(this,"pending",new Map),dO(this,"cached",[]),dO(this,"initialized",!1),dO(this,"storagePrefix",_S),dO(this,"subscribeTimeout",(0,Df.toMiliseconds)(Df.ONE_MINUTE)),dO(this,"initialSubscribeTimeout",(0,Df.toMiliseconds)(15*Df.ONE_SECOND)),dO(this,"clientId"),dO(this,"batchSubscribeTopicsLimit",500),dO(this,"init",(async()=>{this.initialized||(this.logger.trace("Initialized"),this.registerEventListeners(),await this.restore()),this.initialized=!0})),dO(this,"subscribe",(async(e,t)=>{this.isInitialized(),this.logger.debug("Subscribing Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:e,opts:t}});try{const r=mx(t),n={topic:e,relay:r,transportType:t?.transportType};this.pending.set(e,n);const i=await this.rpcSubscribe(e,r,t);return"string"==typeof i&&(this.onSubscribe(i,n),this.logger.debug("Successfully Subscribed Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:e,opts:t}})),i}catch(e){throw this.logger.debug("Failed to Subscribe Topic"),this.logger.error(e),e}})),dO(this,"unsubscribe",(async(e,t)=>{this.isInitialized(),typeof t?.id<"u"?await this.unsubscribeById(e,t.id,t):await this.unsubscribeByTopic(e,t)})),dO(this,"isSubscribed",(e=>new Promise((t=>{t(this.topicMap.topics.includes(e))})))),dO(this,"isKnownTopic",(e=>new Promise((t=>{t(this.topicMap.topics.includes(e)||this.pending.has(e)||this.cached.some((t=>t.topic===e)))})))),dO(this,"on",((e,t)=>{this.events.on(e,t)})),dO(this,"once",((e,t)=>{this.events.once(e,t)})),dO(this,"off",((e,t)=>{this.events.off(e,t)})),dO(this,"removeListener",((e,t)=>{this.events.removeListener(e,t)})),dO(this,"start",(async()=>{await this.onConnect()})),dO(this,"stop",(async()=>{await this.onDisconnect()})),dO(this,"restart",(async()=>{await this.restore(),await this.onRestart()})),dO(this,"checkPending",(async()=>{if(!(0!==this.pending.size||this.initialized&&this.relayer.connected))return;const e=[];this.pending.forEach((t=>{e.push(t)})),await this.batchSubscribe(e)})),dO(this,"registerEventListeners",(()=>{this.relayer.core.heartbeat.on(qf,(async()=>{await this.checkPending()})),this.events.on(zS,(async e=>{const t=zS;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,data:e}),await this.persist()})),this.events.on(qS,(async e=>{const t=qS;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,data:e}),await this.persist()}))})),this.relayer=e,this.logger=Dd(t,this.name),this.clientId=""}get context(){return Ud(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.relayer.core.customStoragePrefix+"//"+this.name}get length(){return this.subscriptions.size}get ids(){return Array.from(this.subscriptions.keys())}get values(){return Array.from(this.subscriptions.values())}get topics(){return this.topicMap.topics}get hasAnyTopics(){return this.topicMap.topics.length>0||this.pending.size>0||this.cached.length>0||this.subscriptions.size>0}hasSubscription(e,t){let r=!1;try{r=this.getSubscription(e).topic===t}catch{}return r}reset(){this.cached=[],this.initialized=!0}onDisable(){this.cached=this.values,this.subscriptions.clear(),this.topicMap.clear()}async unsubscribeByTopic(e,t){const r=this.topicMap.get(e);await Promise.all(r.map((async r=>await this.unsubscribeById(e,r,t))))}async unsubscribeById(e,t,r){this.logger.debug("Unsubscribing Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:e,id:t,opts:r}});try{const n=mx(r);await this.restartToComplete({topic:e,id:t,relay:n}),await this.rpcUnsubscribe(e,t,n);const i=Ox("USER_DISCONNECTED",`${this.name}, ${e}`);await this.onUnsubscribe(e,t,i),this.logger.debug("Successfully Unsubscribed Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:e,id:t,opts:r}})}catch(e){throw this.logger.debug("Failed to Unsubscribe Topic"),this.logger.error(e),e}}async rpcSubscribe(e,t,r){var n;(!r||r?.transportType===DS.relay)&&await this.restartToComplete({topic:e,id:e,relay:t});const i={method:yx(t.protocol).subscribe,params:{topic:e}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:i});const o=null==(n=r?.internal)?void 0:n.throwOnFailedPublish;try{const t=await this.getSubscriptionId(e);if(r?.transportType===DS.link_mode)return setTimeout((()=>{(this.relayer.connected||this.relayer.connecting)&&this.relayer.request(i).catch((e=>this.logger.warn(e)))}),(0,Df.toMiliseconds)(Df.ONE_SECOND)),t;const n=new Promise((async t=>{const r=n=>{n.topic===e&&(this.events.removeListener(zS,r),t(n.id))};this.events.on(zS,r);try{const n=await Cw(new Promise(((e,t)=>{this.relayer.request(i).catch((e=>{this.logger.warn(e,e?.message),t(e)})).then(e)})),this.initialSubscribeTimeout,`Subscribing to ${e} failed, please try again`);this.events.removeListener(zS,r),t(n)}catch{}})),s=await Cw(n,this.subscribeTimeout,`Subscribing to ${e} failed, please try again`);if(!s&&o)throw new Error(`Subscribing to ${e} failed, please try again`);return s?t:null}catch(e){if(this.logger.debug("Outgoing Relay Subscribe Payload stalled"),this.relayer.events.emit(RS),o)throw e}return null}async rpcBatchSubscribe(e){if(!e.length)return;const t={method:yx(e[0].relay.protocol).batchSubscribe,params:{topics:e.map((e=>e.topic))}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:t});try{await await Cw(new Promise((e=>{this.relayer.request(t).catch((e=>this.logger.warn(e))).then(e)})),this.subscribeTimeout,"rpcBatchSubscribe failed, please try again")}catch{this.relayer.events.emit(RS)}}async rpcBatchFetchMessages(e){if(!e.length)return;const t={method:yx(e[0].relay.protocol).batchFetchMessages,params:{topics:e.map((e=>e.topic))}};let r;this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:t});try{r=await await Cw(new Promise(((e,r)=>{this.relayer.request(t).catch((e=>{this.logger.warn(e),r(e)})).then(e)})),this.subscribeTimeout,"rpcBatchFetchMessages failed, please try again")}catch{this.relayer.events.emit(RS)}return r}rpcUnsubscribe(e,t,r){const n={method:yx(r.protocol).unsubscribe,params:{topic:e,id:t}};return this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:n}),this.relayer.request(n)}onSubscribe(e,t){this.setSubscription(e,fO(hO({},t),{id:e})),this.pending.delete(t.topic)}onBatchSubscribe(e){e.length&&e.forEach((e=>{this.setSubscription(e.id,hO({},e)),this.pending.delete(e.topic)}))}async onUnsubscribe(e,t,r){this.events.removeAllListeners(t),this.hasSubscription(t,e)&&this.deleteSubscription(t,r),await this.relayer.messages.del(e)}async setRelayerSubscriptions(e){await this.relayer.core.storage.setItem(this.storageKey,e)}async getRelayerSubscriptions(){return await this.relayer.core.storage.getItem(this.storageKey)}setSubscription(e,t){this.logger.debug("Setting subscription"),this.logger.trace({type:"method",method:"setSubscription",id:e,subscription:t}),this.addSubscription(e,t)}addSubscription(e,t){this.subscriptions.set(e,hO({},t)),this.topicMap.set(t.topic,e),this.events.emit(zS,t)}getSubscription(e){this.logger.debug("Getting subscription"),this.logger.trace({type:"method",method:"getSubscription",id:e});const t=this.subscriptions.get(e);if(!t){const{message:t}=Ix("NO_MATCHING_KEY",`${this.name}: ${e}`);throw new Error(t)}return t}deleteSubscription(e,t){this.logger.debug("Deleting subscription"),this.logger.trace({type:"method",method:"deleteSubscription",id:e,reason:t});const r=this.getSubscription(e);this.subscriptions.delete(e),this.topicMap.delete(r.topic,e),this.events.emit(qS,fO(hO({},r),{reason:t}))}async persist(){await this.setRelayerSubscriptions(this.values),this.events.emit("subscription_sync")}async onRestart(){if(this.cached.length){const e=[...this.cached],t=Math.ceil(this.cached.length/this.batchSubscribeTopicsLimit);for(let r=0;r<t;r++){const t=e.splice(0,this.batchSubscribeTopicsLimit);await this.batchSubscribe(t)}}this.events.emit("subscription_resubscribed")}async restore(){try{const e=await this.getRelayerSubscriptions();if(typeof e>"u"||!e.length)return;if(this.subscriptions.size){const{message:e}=Ix("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(e),this.logger.error(`${this.name}: ${JSON.stringify(this.values)}`),new Error(e)}this.cached=e,this.logger.debug(`Successfully Restored subscriptions for ${this.name}`),this.logger.trace({type:"method",method:"restore",subscriptions:this.values})}catch(e){this.logger.debug(`Failed to Restore subscriptions for ${this.name}`),this.logger.error(e)}}async batchSubscribe(e){e.length&&(await this.rpcBatchSubscribe(e),this.onBatchSubscribe(await Promise.all(e.map((async e=>fO(hO({},e),{id:await this.getSubscriptionId(e.topic)}))))))}async batchFetchMessages(e){if(!e.length)return;this.logger.trace(`Fetching batch messages for ${e.length} subscriptions`);const t=await this.rpcBatchFetchMessages(e);t&&t.messages&&(await function(e){return new Promise((t=>setTimeout(t,e)))}((0,Df.toMiliseconds)(Df.ONE_SECOND)),await this.relayer.handleBatchMessageEvents(t.messages))}async onConnect(){await this.restart(),this.reset()}onDisconnect(){this.onDisable()}isInitialized(){if(!this.initialized){const{message:e}=Ix("NOT_INITIALIZED",this.name);throw new Error(e)}}async restartToComplete(e){!this.relayer.connected&&!this.relayer.connecting&&(this.cached.push(e),await this.relayer.transportOpen())}async getClientId(){return this.clientId||(this.clientId=await this.relayer.core.crypto.getClientId()),this.clientId}async getSubscriptionId(e){return sx(e+await this.getClientId())}}var gO=Object.defineProperty,mO=Object.getOwnPropertySymbols,yO=Object.prototype.hasOwnProperty,vO=Object.prototype.propertyIsEnumerable,bO=(e,t,r)=>t in e?gO(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,wO=(e,t)=>{for(var r in t||(t={}))yO.call(t,r)&&bO(e,r,t[r]);if(mO)for(var r of mO(t))vO.call(t,r)&&bO(e,r,t[r]);return e},EO=(e,t,r)=>bO(e,"symbol"!=typeof t?t+"":t,r);class AO extends Wd{constructor(e){super(e),EO(this,"protocol","wc"),EO(this,"version",2),EO(this,"core"),EO(this,"logger"),EO(this,"events",new Et.EventEmitter),EO(this,"provider"),EO(this,"messages"),EO(this,"subscriber"),EO(this,"publisher"),EO(this,"name","relayer"),EO(this,"transportExplicitlyClosed",!1),EO(this,"initialized",!1),EO(this,"connectionAttemptInProgress",!1),EO(this,"relayUrl"),EO(this,"projectId"),EO(this,"packageName"),EO(this,"bundleId"),EO(this,"hasExperiencedNetworkDisruption",!1),EO(this,"pingTimeout"),EO(this,"heartBeatTimeout",(0,Df.toMiliseconds)(Df.THIRTY_SECONDS+Df.FIVE_SECONDS)),EO(this,"reconnectTimeout"),EO(this,"connectPromise"),EO(this,"reconnectInProgress",!1),EO(this,"requestsInFlight",[]),EO(this,"connectTimeout",(0,Df.toMiliseconds)(15*Df.ONE_SECOND)),EO(this,"request",(async e=>{var t,r;this.logger.debug("Publishing Request Payload");const n=e.id||iS().toString();await this.toEstablishConnection();try{this.logger.trace({id:n,method:e.method,topic:null==(t=e.params)?void 0:t.topic},"relayer.request - publishing...");const i=`${n}:${(null==(r=e.params)?void 0:r.tag)||""}`;this.requestsInFlight.push(i);const o=await this.provider.request(e);return this.requestsInFlight=this.requestsInFlight.filter((e=>e!==i)),o}catch(e){throw this.logger.debug(`Failed to Publish Request: ${n}`),e}})),EO(this,"resetPingTimeout",(()=>{Aw()&&(clearTimeout(this.pingTimeout),this.pingTimeout=setTimeout((()=>{var e,t,r,n;try{this.logger.debug({},"pingTimeout: Connection stalled, terminating..."),null==(n=null==(r=null==(t=null==(e=this.provider)?void 0:e.connection)?void 0:t.socket)?void 0:r.terminate)||n.call(r)}catch(e){this.logger.warn(e,e?.message)}}),this.heartBeatTimeout))})),EO(this,"onPayloadHandler",(e=>{this.onProviderPayload(e),this.resetPingTimeout()})),EO(this,"onConnectHandler",(()=>{this.logger.warn({},"Relayer connected "),this.startPingTimeout(),this.events.emit("relayer_connect")})),EO(this,"onDisconnectHandler",(()=>{this.logger.warn({},"Relayer disconnected "),this.requestsInFlight=[],this.onProviderDisconnect()})),EO(this,"onProviderErrorHandler",(e=>{this.logger.fatal(`Fatal socket error: ${e.message}`),this.events.emit("relayer_error",e),this.logger.fatal("Fatal socket error received, closing transport"),this.transportClose()})),EO(this,"registerProviderListeners",(()=>{this.provider.on(CS,this.onPayloadHandler),this.provider.on(MS,this.onConnectHandler),this.provider.on(LS,this.onDisconnectHandler),this.provider.on(BS,this.onProviderErrorHandler)})),this.core=e.core,this.logger=typeof e.logger<"u"&&"string"!=typeof e.logger?Dd(e.logger,this.name):wd()(Bd({level:e.logger||"error"})),this.messages=new GI(this.logger,e.core),this.subscriber=new pO(this,this.logger),this.publisher=new eO(this,this.logger),this.relayUrl=e?.relayUrl||OS,this.projectId=e.projectId,_w()&&typeof r.g<"u"&&typeof(null==r.g?void 0:r.g.Platform)<"u"&&"android"===(null==r.g?void 0:r.g.Platform.OS)?this.packageName=kw():_w()&&typeof r.g<"u"&&typeof(null==r.g?void 0:r.g.Platform)<"u"&&"ios"===(null==r.g?void 0:r.g.Platform.OS)&&(this.bundleId=kw()),this.provider={}}async init(){if(this.logger.trace("Initialized"),this.registerEventListeners(),await Promise.all([this.messages.init(),this.subscriber.init()]),this.initialized=!0,this.subscriber.hasAnyTopics)try{await this.transportOpen()}catch(e){this.logger.warn(e,e?.message)}}get context(){return Ud(this.logger)}get connected(){var e,t,r;return 1===(null==(r=null==(t=null==(e=this.provider)?void 0:e.connection)?void 0:t.socket)?void 0:r.readyState)||!1}get connecting(){var e,t,r;return 0===(null==(r=null==(t=null==(e=this.provider)?void 0:e.connection)?void 0:t.socket)?void 0:r.readyState)||void 0!==this.connectPromise||!1}async publish(e,t,r){this.isInitialized(),await this.publisher.publish(e,t,r),await this.recordMessageEvent({topic:e,message:t,publishedAt:Date.now(),transportType:DS.relay},"outbound")}async subscribe(e,t){var r,n,i;this.isInitialized(),(null==t||!t.transportType||"relay"===t?.transportType)&&await this.toEstablishConnection();const o=typeof(null==(r=t?.internal)?void 0:r.throwOnFailedPublish)>"u"||(null==(n=t?.internal)?void 0:n.throwOnFailedPublish);let s,a=(null==(i=this.subscriber.topicMap.get(e))?void 0:i[0])||"";const c=t=>{t.topic===e&&(this.subscriber.off(zS,c),s())};return await Promise.all([new Promise((e=>{s=e,this.subscriber.on(zS,c)})),new Promise((async(r,n)=>{a=await this.subscriber.subscribe(e,wO({internal:{throwOnFailedPublish:o}},t)).catch((e=>{o&&n(e)}))||a,r()}))]),a}async unsubscribe(e,t){this.isInitialized(),await this.subscriber.unsubscribe(e,t)}on(e,t){this.events.on(e,t)}once(e,t){this.events.once(e,t)}off(e,t){this.events.off(e,t)}removeListener(e,t){this.events.removeListener(e,t)}async transportDisconnect(){this.provider.disconnect&&(this.hasExperiencedNetworkDisruption||this.connected)?await Cw(this.provider.disconnect(),2e3,"provider.disconnect()").catch((()=>this.onProviderDisconnect())):this.onProviderDisconnect()}async transportClose(){this.transportExplicitlyClosed=!0,await this.transportDisconnect()}async transportOpen(e){if(this.subscriber.hasAnyTopics){if(this.connectPromise?(this.logger.debug({},"Waiting for existing connection attempt to resolve..."),await this.connectPromise,this.logger.debug({},"Existing connection attempt resolved")):(this.connectPromise=new Promise((async(t,r)=>{await this.connect(e).then(t).catch(r).finally((()=>{this.connectPromise=void 0}))})),await this.connectPromise),!this.connected)throw new Error(`Couldn't establish socket connection to the relay server: ${this.relayUrl}`)}else this.logger.warn("Starting WS connection skipped because the client has no topics to work with.")}async restartTransport(e){this.logger.debug({},"Restarting transport..."),!this.connectionAttemptInProgress&&(this.relayUrl=e||this.relayUrl,await this.confirmOnlineStateOrThrow(),await this.transportClose(),await this.transportOpen())}async confirmOnlineStateOrThrow(){if(!await Gx())throw new Error("No internet connection detected. Please restart your network and try again.")}async handleBatchMessageEvents(e){if(0===e?.length)return void this.logger.trace("Batch message events is empty. Ignoring...");const t=e.sort(((e,t)=>e.publishedAt-t.publishedAt));this.logger.debug(`Batch of ${t.length} message events sorted`);for(const e of t)try{await this.onMessageEvent(e)}catch(e){this.logger.warn(e,"Error while processing batch message event: "+e?.message)}this.logger.trace(`Batch of ${t.length} message events processed`)}async onLinkMessageEvent(e,t){const{topic:r}=e;if(!t.sessionExists){const e={topic:r,expiry:Bw(Df.FIVE_MINUTES),relay:{protocol:"irn"},active:!1};await this.core.pairing.pairings.set(r,e)}this.events.emit(TS,e),await this.recordMessageEvent(e,jS)}async connect(e){await this.confirmOnlineStateOrThrow(),e&&e!==this.relayUrl&&(this.relayUrl=e,await this.transportDisconnect()),this.connectionAttemptInProgress=!0,this.transportExplicitlyClosed=!1;let t=1;for(;t<6;){try{if(this.transportExplicitlyClosed)break;this.logger.debug({},`Connecting to ${this.relayUrl}, attempt: ${t}...`),await this.createProvider(),await new Promise((async(e,t)=>{const r=()=>{t(new Error("Connection interrupted while trying to subscribe"))};this.provider.once(LS,r),await Cw(new Promise(((e,t)=>{this.provider.connect().then(e).catch(t)})),this.connectTimeout,`Socket stalled when trying to connect to ${this.relayUrl}`).catch((e=>{t(e)})).finally((()=>{this.provider.off(LS,r),clearTimeout(this.reconnectTimeout)})),await new Promise((async(e,t)=>{const r=()=>{t(new Error("Connection interrupted while trying to subscribe"))};this.provider.once(LS,r),await this.subscriber.start().then(e).catch(t).finally((()=>{this.provider.off(LS,r)}))})),this.hasExperiencedNetworkDisruption=!1,e()}))}catch(e){await this.subscriber.stop();const t=e;this.logger.warn({},t.message),this.hasExperiencedNetworkDisruption=!0}finally{this.connectionAttemptInProgress=!1}if(this.connected){this.logger.debug({},`Connected to ${this.relayUrl} successfully on attempt: ${t}`);break}await new Promise((e=>setTimeout(e,(0,Df.toMiliseconds)(1*t)))),t++}}startPingTimeout(){var e,t,r,n,i;if(Aw())try{null!=(t=null==(e=this.provider)?void 0:e.connection)&&t.socket&&(null==(i=null==(n=null==(r=this.provider)?void 0:r.connection)?void 0:n.socket)||i.on("ping",(()=>{this.resetPingTimeout()}))),this.resetPingTimeout()}catch(e){this.logger.warn(e,e?.message)}}async createProvider(){this.provider.connection&&this.unregisterProviderListeners();const e=await this.core.crypto.signJWT(this.relayUrl);this.provider=new vS(new ES(function({protocol:e,version:t,relayUrl:r,sdkVersion:n,auth:i,projectId:o,useOnCloseEvent:s,bundleId:a,packageName:c}){const u=r.split("?"),l={auth:i,ua:Ow(e,t,n),projectId:o,useOnCloseEvent:s||void 0,packageName:c||void 0,bundleId:a||void 0},h=function(e,t){const r=new URLSearchParams(e);for(const e of Object.keys(t).sort())if(t.hasOwnProperty(e)){const n=t[e];void 0!==n&&r.set(e,n)}return r.toString()}(u[1]||"",l);return u[0]+"?"+h}({sdkVersion:US,protocol:this.protocol,version:this.version,relayUrl:this.relayUrl,projectId:this.projectId,auth:e,useOnCloseEvent:!0,bundleId:this.bundleId,packageName:this.packageName}))),this.registerProviderListeners()}async recordMessageEvent(e,t){const{topic:r,message:n}=e;await this.messages.set(r,n,t)}async shouldIgnoreMessageEvent(e){const{topic:t,message:r}=e;if(!r||0===r.length)return this.logger.warn(`Ignoring invalid/empty message: ${r}`),!0;if(!await this.subscriber.isKnownTopic(t))return this.logger.warn(`Ignoring message for unknown topic ${t}`),!0;const n=this.messages.has(t,r);return n&&this.logger.warn(`Ignoring duplicate message: ${r}`),n}async onProviderPayload(e){if(this.logger.debug("Incoming Relay Payload"),this.logger.trace({type:"payload",direction:"incoming",payload:e}),pS(e)){if(!e.method.endsWith("_subscription"))return;const t=e.params,{topic:r,message:n,publishedAt:i,attestation:o}=t.data,s={topic:r,message:n,publishedAt:i,transportType:DS.relay,attestation:o};this.logger.debug("Emitting Relayer Payload"),this.logger.trace(wO({type:"event",event:t.id},s)),this.events.emit(t.id,s),await this.acknowledgePayload(e),await this.onMessageEvent(s)}else gS(e)&&this.events.emit(PS,e)}async onMessageEvent(e){await this.shouldIgnoreMessageEvent(e)||(await this.recordMessageEvent(e,jS),this.events.emit(TS,e))}async acknowledgePayload(e){const t=sS(e.id,!0);await this.provider.connection.send(t)}unregisterProviderListeners(){this.provider.off(CS,this.onPayloadHandler),this.provider.off(MS,this.onConnectHandler),this.provider.off(LS,this.onDisconnectHandler),this.provider.off(BS,this.onProviderErrorHandler),clearTimeout(this.pingTimeout)}async registerEventListeners(){let e=await Gx();!function(e){switch(Sw()){case ww:!function(e){!_w()&&xw()&&(window.addEventListener("online",(()=>e(!0))),window.addEventListener("offline",(()=>e(!1))))}(e);break;case bw:!function(e){_w()&&typeof r.g<"u"&&null!=r.g&&r.g.NetInfo&&r.g?.NetInfo.addEventListener((t=>e(t?.isConnected)))}(e)}}((async t=>{e!==t&&(e=t,t?await this.transportOpen().catch((e=>this.logger.error(e,e?.message))):(this.hasExperiencedNetworkDisruption=!0,await this.transportDisconnect(),this.transportExplicitlyClosed=!1))}))}async onProviderDisconnect(){clearTimeout(this.pingTimeout),this.events.emit("relayer_disconnect"),this.connectionAttemptInProgress=!1,!this.reconnectInProgress&&(this.reconnectInProgress=!0,await this.subscriber.stop(),this.subscriber.hasAnyTopics&&(this.transportExplicitlyClosed||(this.reconnectTimeout=setTimeout((async()=>{await this.transportOpen().catch((e=>this.logger.error(e,e?.message))),this.reconnectTimeout=void 0,this.reconnectInProgress=!1}),(0,Df.toMiliseconds)(.1)))))}isInitialized(){if(!this.initialized){const{message:e}=Ix("NOT_INITIALIZED",this.name);throw new Error(e)}}async toEstablishConnection(){await this.confirmOnlineStateOrThrow(),!this.connected&&await this.connect()}}function _O(){}function xO(e){if(!e||"object"!=typeof e)return!1;const t=Object.getPrototypeOf(e);return(null===t||t===Object.prototype||null===Object.getPrototypeOf(t))&&"[object Object]"===Object.prototype.toString.call(e)}function SO(e){return Object.getOwnPropertySymbols(e).filter((t=>Object.prototype.propertyIsEnumerable.call(e,t)))}function kO(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":Object.prototype.toString.call(e)}const IO="[object Arguments]",OO="[object Object]";function TO(e,t,r,n,i,o,s){const a=s(e,t,r,n,i,o);if(void 0!==a)return a;if(typeof e==typeof t)switch(typeof e){case"bigint":case"string":case"boolean":case"symbol":case"undefined":case"function":return e===t;case"number":return e===t||Object.is(e,t);case"object":return PO(e,t,o,s)}return PO(e,t,o,s)}function PO(e,t,r,n){if(Object.is(e,t))return!0;let i=kO(e),o=kO(t);if(i===IO&&(i=OO),o===IO&&(o=OO),i!==o)return!1;switch(i){case"[object String]":return e.toString()===t.toString();case"[object Number]":return function(e,t){return e===t||Number.isNaN(e)&&Number.isNaN(t)}(e.valueOf(),t.valueOf());case"[object Boolean]":case"[object Date]":case"[object Symbol]":return Object.is(e.valueOf(),t.valueOf());case"[object RegExp]":return e.source===t.source&&e.flags===t.flags;case"[object Function]":return e===t}const s=(r=r??new Map).get(e),a=r.get(t);if(null!=s&&null!=a)return s===t;r.set(e,t),r.set(t,e);try{switch(i){case"[object Map]":if(e.size!==t.size)return!1;for(const[i,o]of e.entries())if(!t.has(i)||!TO(o,t.get(i),i,e,t,r,n))return!1;return!0;case"[object Set]":{if(e.size!==t.size)return!1;const i=Array.from(e.values()),o=Array.from(t.values());for(let s=0;s<i.length;s++){const a=i[s],c=o.findIndex((i=>TO(a,i,void 0,e,t,r,n)));if(-1===c)return!1;o.splice(c,1)}return!0}case"[object Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":case"[object BigUint64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object BigInt64Array]":case"[object Float32Array]":case"[object Float64Array]":if(typeof Buffer<"u"&&Buffer.isBuffer(e)!==Buffer.isBuffer(t)||e.length!==t.length)return!1;for(let i=0;i<e.length;i++)if(!TO(e[i],t[i],i,e,t,r,n))return!1;return!0;case"[object ArrayBuffer]":return e.byteLength===t.byteLength&&PO(new Uint8Array(e),new Uint8Array(t),r,n);case"[object DataView]":return e.byteLength===t.byteLength&&e.byteOffset===t.byteOffset&&PO(new Uint8Array(e),new Uint8Array(t),r,n);case"[object Error]":return e.name===t.name&&e.message===t.message;case OO:{if(!(PO(e.constructor,t.constructor,r,n)||xO(e)&&xO(t)))return!1;const i=[...Object.keys(e),...SO(e)],o=[...Object.keys(t),...SO(t)];if(i.length!==o.length)return!1;for(let o=0;o<i.length;o++){const s=i[o],a=e[s];if(!Object.hasOwn(t,s))return!1;if(!TO(a,t[s],s,e,t,r,n))return!1}return!0}default:return!1}}finally{r.delete(e),r.delete(t)}}var RO=Object.defineProperty,NO=Object.getOwnPropertySymbols,CO=Object.prototype.hasOwnProperty,MO=Object.prototype.propertyIsEnumerable,LO=(e,t,r)=>t in e?RO(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,BO=(e,t)=>{for(var r in t||(t={}))CO.call(t,r)&&LO(e,r,t[r]);if(NO)for(var r of NO(t))MO.call(t,r)&&LO(e,r,t[r]);return e},UO=(e,t,r)=>LO(e,"symbol"!=typeof t?t+"":t,r);class DO extends $d{constructor(e,t,r,n=_S,i=void 0){super(e,t,r,n),this.core=e,this.logger=t,this.name=r,UO(this,"map",new Map),UO(this,"version","0.3"),UO(this,"cached",[]),UO(this,"initialized",!1),UO(this,"getKey"),UO(this,"storagePrefix",_S),UO(this,"recentlyDeleted",[]),UO(this,"recentlyDeletedLimit",200),UO(this,"init",(async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach((e=>{this.getKey&&null!==e&&!Rx(e)?this.map.set(this.getKey(e),e):function(e){var t;return null==(t=e?.proposer)?void 0:t.publicKey}(e)?this.map.set(e.id,e):function(e){return e?.topic}(e)&&this.map.set(e.topic,e)})),this.cached=[],this.initialized=!0)})),UO(this,"set",(async(e,t)=>{this.isInitialized(),this.map.has(e)?await this.update(e,t):(this.logger.debug("Setting value"),this.logger.trace({type:"method",method:"set",key:e,value:t}),this.map.set(e,t),await this.persist())})),UO(this,"get",(e=>(this.isInitialized(),this.logger.debug("Getting value"),this.logger.trace({type:"method",method:"get",key:e}),this.getData(e)))),UO(this,"getAll",(e=>(this.isInitialized(),e?this.values.filter((t=>Object.keys(e).every((r=>function(e,t){return function(e,t,r){return TO(e,t,void 0,void 0,void 0,void 0,r)}(e,t,_O)}(t[r],e[r]))))):this.values))),UO(this,"update",(async(e,t)=>{this.isInitialized(),this.logger.debug("Updating value"),this.logger.trace({type:"method",method:"update",key:e,update:t});const r=BO(BO({},this.getData(e)),t);this.map.set(e,r),await this.persist()})),UO(this,"delete",(async(e,t)=>{this.isInitialized(),this.map.has(e)&&(this.logger.debug("Deleting value"),this.logger.trace({type:"method",method:"delete",key:e,reason:t}),this.map.delete(e),this.addToRecentlyDeleted(e),await this.persist())})),this.logger=Dd(t,this.name),this.storagePrefix=n,this.getKey=i}get context(){return Ud(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get length(){return this.map.size}get keys(){return Array.from(this.map.keys())}get values(){return Array.from(this.map.values())}addToRecentlyDeleted(e){this.recentlyDeleted.push(e),this.recentlyDeleted.length>=this.recentlyDeletedLimit&&this.recentlyDeleted.splice(0,this.recentlyDeletedLimit/2)}async setDataStore(e){await this.core.storage.setItem(this.storageKey,e)}async getDataStore(){return await this.core.storage.getItem(this.storageKey)}getData(e){const t=this.map.get(e);if(!t){if(this.recentlyDeleted.includes(e)){const{message:t}=Ix("MISSING_OR_INVALID",`Record was recently deleted - ${this.name}: ${e}`);throw this.logger.error(t),new Error(t)}const{message:t}=Ix("NO_MATCHING_KEY",`${this.name}: ${e}`);throw this.logger.error(t),new Error(t)}return t}async persist(){await this.setDataStore(this.values)}async restore(){try{const e=await this.getDataStore();if(typeof e>"u"||!e.length)return;if(this.map.size){const{message:e}=Ix("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(e),new Error(e)}this.cached=e,this.logger.debug(`Successfully Restored value for ${this.name}`),this.logger.trace({type:"method",method:"restore",value:this.values})}catch(e){this.logger.debug(`Failed to Restore value for ${this.name}`),this.logger.error(e)}}isInitialized(){if(!this.initialized){const{message:e}=Ix("NOT_INITIALIZED",this.name);throw new Error(e)}}}var jO=Object.defineProperty,FO=(e,t,r)=>((e,t,r)=>t in e?jO(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r)(e,"symbol"!=typeof t?t+"":t,r);class zO{constructor(e,t){this.core=e,this.logger=t,FO(this,"name","pairing"),FO(this,"version","0.3"),FO(this,"events",new(At())),FO(this,"pairings"),FO(this,"initialized",!1),FO(this,"storagePrefix",_S),FO(this,"ignoredPayloadTypes",[1]),FO(this,"registeredMethods",[]),FO(this,"init",(async()=>{this.initialized||(await this.pairings.init(),await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.initialized=!0,this.logger.trace("Initialized"))})),FO(this,"register",(({methods:e})=>{this.isInitialized(),this.registeredMethods=[...new Set([...this.registeredMethods,...e])]})),FO(this,"create",(async e=>{this.isInitialized();const t=ix(),r=await this.core.crypto.setSymKey(t),n=Bw(Df.FIVE_MINUTES),i={protocol:"irn"},o={topic:r,expiry:n,relay:i,active:!1,methods:e?.methods},s=Ex({protocol:this.core.protocol,version:this.core.version,topic:r,symKey:t,relay:i,expiryTimestamp:n,methods:e?.methods});return this.events.emit(HS,o),this.core.expirer.set(r,n),await this.pairings.set(r,o),await this.core.relayer.subscribe(r,{transportType:e?.transportType}),{topic:r,uri:s}})),FO(this,"pair",(async e=>{this.isInitialized();const t=this.core.eventClient.createEvent({properties:{topic:e?.uri,trace:["pairing_started"]}});this.isValidPair(e,t);const{topic:r,symKey:n,relay:i,expiryTimestamp:o,methods:s}=bx(e.uri);let a;if(t.props.properties.topic=r,t.addTrace("pairing_uri_validation_success"),t.addTrace("pairing_uri_not_expired"),this.pairings.keys.includes(r)){if(a=this.pairings.get(r),t.addTrace("existing_pairing"),a.active)throw t.setError("active_pairing_already_exists"),new Error(`Pairing already exists: ${r}. Please try again with a new connection URI.`);t.addTrace("pairing_not_expired")}const c=o||Bw(Df.FIVE_MINUTES),u={topic:r,relay:i,expiry:c,active:!1,methods:s};this.core.expirer.set(r,c),await this.pairings.set(r,u),t.addTrace("store_new_pairing"),e.activatePairing&&await this.activate({topic:r}),this.events.emit(HS,u),t.addTrace("emit_inactive_pairing"),this.core.crypto.keychain.has(r)||await this.core.crypto.setSymKey(n,r),t.addTrace("subscribing_pairing_topic");try{await this.core.relayer.confirmOnlineStateOrThrow()}catch{t.setError("no_internet_connection")}try{await this.core.relayer.subscribe(r,{relay:i})}catch(e){throw t.setError("subscribe_pairing_topic_failure"),e}return t.addTrace("subscribe_pairing_topic_success"),u})),FO(this,"activate",(async({topic:e})=>{this.isInitialized();const t=Bw(Df.FIVE_MINUTES);this.core.expirer.set(e,t),await this.pairings.update(e,{active:!0,expiry:t})})),FO(this,"ping",(async e=>{this.isInitialized(),await this.isValidPing(e),this.logger.warn("ping() is deprecated and will be removed in the next major release.");const{topic:t}=e;if(this.pairings.keys.includes(t)){const e=await this.sendRequest(t,"wc_pairingPing",{}),{done:r,resolve:n,reject:i}=Nw();this.events.once(Dw("pairing_ping",e),(({error:e})=>{e?i(e):n()})),await r()}})),FO(this,"updateExpiry",(async({topic:e,expiry:t})=>{this.isInitialized(),await this.pairings.update(e,{expiry:t})})),FO(this,"updateMetadata",(async({topic:e,metadata:t})=>{this.isInitialized(),await this.pairings.update(e,{peerMetadata:t})})),FO(this,"getPairings",(()=>(this.isInitialized(),this.pairings.values))),FO(this,"disconnect",(async e=>{this.isInitialized(),await this.isValidDisconnect(e);const{topic:t}=e;this.pairings.keys.includes(t)&&(await this.sendRequest(t,"wc_pairingDelete",Ox("USER_DISCONNECTED")),await this.deletePairing(t))})),FO(this,"formatUriFromPairing",(e=>{this.isInitialized();const{topic:t,relay:r,expiry:n,methods:i}=e,o=this.core.crypto.keychain.get(t);return Ex({protocol:this.core.protocol,version:this.core.version,topic:t,symKey:o,relay:r,expiryTimestamp:n,methods:i})})),FO(this,"sendRequest",(async(e,t,r)=>{const n=oS(t,r),i=await this.core.crypto.encode(e,n),o=GS[t].req;return this.core.history.set(e,n),this.core.relayer.publish(e,i,o),n.id})),FO(this,"sendResult",(async(e,t,r)=>{const n=sS(e,r),i=await this.core.crypto.encode(t,n),o=(await this.core.history.get(t,e)).request.method,s=GS[o].res;await this.core.relayer.publish(t,i,s),await this.core.history.resolve(n)})),FO(this,"sendError",(async(e,t,r)=>{const n=aS(e,r),i=await this.core.crypto.encode(t,n),o=(await this.core.history.get(t,e)).request.method,s=GS[o]?GS[o].res:GS.unregistered_method.res;await this.core.relayer.publish(t,i,s),await this.core.history.resolve(n)})),FO(this,"deletePairing",(async(e,t)=>{await this.core.relayer.unsubscribe(e),await Promise.all([this.pairings.delete(e,Ox("USER_DISCONNECTED")),this.core.crypto.deleteSymKey(e),t?Promise.resolve():this.core.expirer.del(e)])})),FO(this,"cleanup",(async()=>{const e=this.pairings.getAll().filter((e=>Uw(e.expiry)));await Promise.all(e.map((e=>this.deletePairing(e.topic))))})),FO(this,"onRelayEventRequest",(async e=>{const{topic:t,payload:r}=e;switch(r.method){case"wc_pairingPing":return await this.onPairingPingRequest(t,r);case"wc_pairingDelete":return await this.onPairingDeleteRequest(t,r);default:return await this.onUnknownRpcMethodRequest(t,r)}})),FO(this,"onRelayEventResponse",(async e=>{const{topic:t,payload:r}=e,n=(await this.core.history.get(t,r.id)).request.method;return"wc_pairingPing"===n?this.onPairingPingResponse(t,r):this.onUnknownRpcMethodResponse(n)})),FO(this,"onPairingPingRequest",(async(e,t)=>{const{id:r}=t;try{this.isValidPing({topic:e}),await this.sendResult(r,e,!0),this.events.emit("pairing_ping",{id:r,topic:e})}catch(t){await this.sendError(r,e,t),this.logger.error(t)}})),FO(this,"onPairingPingResponse",((e,t)=>{const{id:r}=t;setTimeout((()=>{mS(t)?this.events.emit(Dw("pairing_ping",r),{}):yS(t)&&this.events.emit(Dw("pairing_ping",r),{error:t.error})}),500)})),FO(this,"onPairingDeleteRequest",(async(e,t)=>{const{id:r}=t;try{this.isValidDisconnect({topic:e}),await this.deletePairing(e),this.events.emit(KS,{id:r,topic:e})}catch(t){await this.sendError(r,e,t),this.logger.error(t)}})),FO(this,"onUnknownRpcMethodRequest",(async(e,t)=>{const{id:r,method:n}=t;try{if(this.registeredMethods.includes(n))return;const t=Ox("WC_METHOD_UNSUPPORTED",n);await this.sendError(r,e,t),this.logger.error(t)}catch(t){await this.sendError(r,e,t),this.logger.error(t)}})),FO(this,"onUnknownRpcMethodResponse",(e=>{this.registeredMethods.includes(e)||this.logger.error(Ox("WC_METHOD_UNSUPPORTED",e))})),FO(this,"isValidPair",((e,t)=>{var r;if(!jx(e)){const{message:r}=Ix("MISSING_OR_INVALID",`pair() params: ${e}`);throw t.setError(rk),new Error(r)}if(!function(e){function t(e){try{return typeof new URL(e)<"u"}catch{return!1}}try{if(Nx(e,!1))return!!t(e)||t(Gw(e))}catch{}return!1}(e.uri)){const{message:r}=Ix("MISSING_OR_INVALID",`pair() uri: ${e.uri}`);throw t.setError(rk),new Error(r)}const n=bx(e?.uri);if(null==(r=n?.relay)||!r.protocol){const{message:e}=Ix("MISSING_OR_INVALID","pair() uri#relay-protocol");throw t.setError(rk),new Error(e)}if(null==n||!n.symKey){const{message:e}=Ix("MISSING_OR_INVALID","pair() uri#symKey");throw t.setError(rk),new Error(e)}if(null!=n&&n.expiryTimestamp&&(0,Df.toMiliseconds)(n?.expiryTimestamp)<Date.now()){t.setError("pairing_expired");const{message:e}=Ix("EXPIRED","pair() URI has expired. Please try again with a new connection URI.");throw new Error(e)}})),FO(this,"isValidPing",(async e=>{if(!jx(e)){const{message:t}=Ix("MISSING_OR_INVALID",`ping() params: ${e}`);throw new Error(t)}const{topic:t}=e;await this.isValidPairingTopic(t)})),FO(this,"isValidDisconnect",(async e=>{if(!jx(e)){const{message:t}=Ix("MISSING_OR_INVALID",`disconnect() params: ${e}`);throw new Error(t)}const{topic:t}=e;await this.isValidPairingTopic(t)})),FO(this,"isValidPairingTopic",(async e=>{if(!Nx(e,!1)){const{message:t}=Ix("MISSING_OR_INVALID",`pairing topic should be a string: ${e}`);throw new Error(t)}if(!this.pairings.keys.includes(e)){const{message:t}=Ix("NO_MATCHING_KEY",`pairing topic doesn't exist: ${e}`);throw new Error(t)}if(Uw(this.pairings.get(e).expiry)){await this.deletePairing(e);const{message:t}=Ix("EXPIRED",`pairing topic: ${e}`);throw new Error(t)}})),this.core=e,this.logger=Dd(t,this.name),this.pairings=new DO(this.core,this.logger,this.name,this.storagePrefix)}get context(){return Ud(this.logger)}isInitialized(){if(!this.initialized){const{message:e}=Ix("NOT_INITIALIZED",this.name);throw new Error(e)}}registerRelayerEvents(){this.core.relayer.on(TS,(async e=>{const{topic:t,message:r,transportType:n}=e;if(this.pairings.keys.includes(t)&&n!==DS.link_mode&&!this.ignoredPayloadTypes.includes(this.core.crypto.getPayloadType(r)))try{const e=await this.core.crypto.decode(t,r);pS(e)?(this.core.history.set(t,e),await this.onRelayEventRequest({topic:t,payload:e})):gS(e)&&(await this.core.history.resolve(e),await this.onRelayEventResponse({topic:t,payload:e}),this.core.history.delete(t,e.id)),await this.core.relayer.messages.ack(t,r)}catch(e){this.logger.error(e)}}))}registerExpirerEvents(){this.core.expirer.on(QS,(async e=>{const{topic:t}=Lw(e.target);t&&this.pairings.keys.includes(t)&&(await this.deletePairing(t,!0),this.events.emit("pairing_expire",{topic:t}))}))}}var qO=Object.defineProperty,GO=(e,t,r)=>((e,t,r)=>t in e?qO(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r)(e,"symbol"!=typeof t?t+"":t,r);class HO extends Hd{constructor(e,t){super(e,t),this.core=e,this.logger=t,GO(this,"records",new Map),GO(this,"events",new Et.EventEmitter),GO(this,"name","history"),GO(this,"version","0.3"),GO(this,"cached",[]),GO(this,"initialized",!1),GO(this,"storagePrefix",_S),GO(this,"init",(async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach((e=>this.records.set(e.id,e))),this.cached=[],this.registerEventListeners(),this.initialized=!0)})),GO(this,"set",((e,t,r)=>{if(this.isInitialized(),this.logger.debug("Setting JSON-RPC request history record"),this.logger.trace({type:"method",method:"set",topic:e,request:t,chainId:r}),this.records.has(t.id))return;const n={id:t.id,topic:e,request:{method:t.method,params:t.params||null},chainId:r,expiry:Bw(Df.THIRTY_DAYS)};this.records.set(n.id,n),this.persist(),this.events.emit(VS,n)})),GO(this,"resolve",(async e=>{if(this.isInitialized(),this.logger.debug("Updating JSON-RPC response history record"),this.logger.trace({type:"method",method:"update",response:e}),!this.records.has(e.id))return;const t=await this.getRecord(e.id);typeof t.response>"u"&&(t.response=yS(e)?{error:e.error}:{result:e.result},this.records.set(t.id,t),this.persist(),this.events.emit(WS,t))})),GO(this,"get",(async(e,t)=>(this.isInitialized(),this.logger.debug("Getting record"),this.logger.trace({type:"method",method:"get",topic:e,id:t}),await this.getRecord(t)))),GO(this,"delete",((e,t)=>{this.isInitialized(),this.logger.debug("Deleting record"),this.logger.trace({type:"method",method:"delete",id:t}),this.values.forEach((r=>{if(r.topic===e){if(typeof t<"u"&&r.id!==t)return;this.records.delete(r.id),this.events.emit($S,r)}})),this.persist()})),GO(this,"exists",(async(e,t)=>(this.isInitialized(),!!this.records.has(t)&&(await this.getRecord(t)).topic===e))),GO(this,"on",((e,t)=>{this.events.on(e,t)})),GO(this,"once",((e,t)=>{this.events.once(e,t)})),GO(this,"off",((e,t)=>{this.events.off(e,t)})),GO(this,"removeListener",((e,t)=>{this.events.removeListener(e,t)})),this.logger=Dd(t,this.name)}get context(){return Ud(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get size(){return this.records.size}get keys(){return Array.from(this.records.keys())}get values(){return Array.from(this.records.values())}get pending(){const e=[];return this.values.forEach((t=>{if(typeof t.response<"u")return;const r={topic:t.topic,request:oS(t.request.method,t.request.params,t.id),chainId:t.chainId};return e.push(r)})),e}async setJsonRpcRecords(e){await this.core.storage.setItem(this.storageKey,e)}async getJsonRpcRecords(){return await this.core.storage.getItem(this.storageKey)}getRecord(e){this.isInitialized();const t=this.records.get(e);if(!t){const{message:t}=Ix("NO_MATCHING_KEY",`${this.name}: ${e}`);throw new Error(t)}return t}async persist(){await this.setJsonRpcRecords(this.values),this.events.emit("history_sync")}async restore(){try{const e=await this.getJsonRpcRecords();if(typeof e>"u"||!e.length)return;if(this.records.size){const{message:e}=Ix("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(e),new Error(e)}this.cached=e,this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",records:this.values})}catch(e){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(e)}}registerEventListeners(){this.events.on(VS,(e=>{const t=VS;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,record:e})})),this.events.on(WS,(e=>{const t=WS;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,record:e})})),this.events.on($S,(e=>{const t=$S;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,record:e})})),this.core.heartbeat.on(qf,(()=>{this.cleanup()}))}cleanup(){try{this.isInitialized();let e=!1;this.records.forEach((t=>{(0,Df.toMiliseconds)(t.expiry||0)-Date.now()<=0&&(this.logger.info(`Deleting expired history log: ${t.id}`),this.records.delete(t.id),this.events.emit($S,t,!1),e=!0)})),e&&this.persist()}catch(e){this.logger.warn(e)}}isInitialized(){if(!this.initialized){const{message:e}=Ix("NOT_INITIALIZED",this.name);throw new Error(e)}}}var KO=Object.defineProperty,VO=(e,t,r)=>((e,t,r)=>t in e?KO(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r)(e,"symbol"!=typeof t?t+"":t,r);class WO extends Yd{constructor(e,t){super(e,t),this.core=e,this.logger=t,VO(this,"expirations",new Map),VO(this,"events",new Et.EventEmitter),VO(this,"name","expirer"),VO(this,"version","0.3"),VO(this,"cached",[]),VO(this,"initialized",!1),VO(this,"storagePrefix",_S),VO(this,"init",(async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach((e=>this.expirations.set(e.target,e))),this.cached=[],this.registerEventListeners(),this.initialized=!0)})),VO(this,"has",(e=>{try{const t=this.formatTarget(e);return typeof this.getExpiration(t)<"u"}catch{return!1}})),VO(this,"set",((e,t)=>{this.isInitialized();const r=this.formatTarget(e),n={target:r,expiry:t};this.expirations.set(r,n),this.checkExpiry(r,n),this.events.emit(JS,{target:r,expiration:n})})),VO(this,"get",(e=>{this.isInitialized();const t=this.formatTarget(e);return this.getExpiration(t)})),VO(this,"del",(e=>{if(this.isInitialized(),this.has(e)){const t=this.formatTarget(e),r=this.getExpiration(t);this.expirations.delete(t),this.events.emit(YS,{target:t,expiration:r})}})),VO(this,"on",((e,t)=>{this.events.on(e,t)})),VO(this,"once",((e,t)=>{this.events.once(e,t)})),VO(this,"off",((e,t)=>{this.events.off(e,t)})),VO(this,"removeListener",((e,t)=>{this.events.removeListener(e,t)})),this.logger=Dd(t,this.name)}get context(){return Ud(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get length(){return this.expirations.size}get keys(){return Array.from(this.expirations.keys())}get values(){return Array.from(this.expirations.values())}formatTarget(e){if("string"==typeof e)return function(e){return Mw("topic",e)}(e);if("number"==typeof e)return function(e){return Mw("id",e)}(e);const{message:t}=Ix("UNKNOWN_TYPE","Target type: "+typeof e);throw new Error(t)}async setExpirations(e){await this.core.storage.setItem(this.storageKey,e)}async getExpirations(){return await this.core.storage.getItem(this.storageKey)}async persist(){await this.setExpirations(this.values),this.events.emit("expirer_sync")}async restore(){try{const e=await this.getExpirations();if(typeof e>"u"||!e.length)return;if(this.expirations.size){const{message:e}=Ix("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(e),new Error(e)}this.cached=e,this.logger.debug(`Successfully Restored expirations for ${this.name}`),this.logger.trace({type:"method",method:"restore",expirations:this.values})}catch(e){this.logger.debug(`Failed to Restore expirations for ${this.name}`),this.logger.error(e)}}getExpiration(e){const t=this.expirations.get(e);if(!t){const{message:t}=Ix("NO_MATCHING_KEY",`${this.name}: ${e}`);throw this.logger.warn(t),new Error(t)}return t}checkExpiry(e,t){const{expiry:r}=t;(0,Df.toMiliseconds)(r)-Date.now()<=0&&this.expire(e,t)}expire(e,t){this.expirations.delete(e),this.events.emit(QS,{target:e,expiration:t})}checkExpirations(){this.core.relayer.connected&&this.expirations.forEach(((e,t)=>this.checkExpiry(t,e)))}registerEventListeners(){this.core.heartbeat.on(qf,(()=>this.checkExpirations())),this.events.on(JS,(e=>{const t=JS;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,data:e}),this.persist()})),this.events.on(QS,(e=>{const t=QS;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,data:e}),this.persist()})),this.events.on(YS,(e=>{const t=YS;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,data:e}),this.persist()}))}isInitialized(){if(!this.initialized){const{message:e}=Ix("NOT_INITIALIZED",this.name);throw new Error(e)}}}var $O=Object.defineProperty,JO=(e,t,r)=>((e,t,r)=>t in e?$O(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r)(e,"symbol"!=typeof t?t+"":t,r);class YO extends Qd{constructor(e,t,r){super(e,t,r),this.core=e,this.logger=t,this.store=r,JO(this,"name","verify-api"),JO(this,"abortController"),JO(this,"isDevEnv"),JO(this,"verifyUrlV3",ek),JO(this,"storagePrefix",_S),JO(this,"version",2),JO(this,"publicKey"),JO(this,"fetchPromise"),JO(this,"init",(async()=>{var e;this.isDevEnv||(this.publicKey=await this.store.getItem(this.storeKey),this.publicKey&&(0,Df.toMiliseconds)(null==(e=this.publicKey)?void 0:e.expiresAt)<Date.now()&&(this.logger.debug("verify v2 public key expired"),await this.removePublicKey()))})),JO(this,"register",(async e=>{if(!xw()||this.isDevEnv)return;const t=window.location.origin,{id:r,decryptedId:n}=e,i=`${this.verifyUrlV3}/attestation?projectId=${this.core.projectId}&origin=${t}&id=${r}&decryptedId=${n}`;try{const e=(0,Uy.getDocument)(),t=this.startAbortTimer(5*Df.ONE_SECOND),n=await new Promise(((n,o)=>{const s=()=>{window.removeEventListener("message",c),e.body.removeChild(a),o("attestation aborted")};this.abortController.signal.addEventListener("abort",s);const a=e.createElement("iframe");a.src=i,a.style.display="none",a.addEventListener("error",s,{signal:this.abortController.signal});const c=i=>{if(i.data&&"string"==typeof i.data)try{const o=JSON.parse(i.data);if("verify_attestation"===o.type){if(Sy(o.attestation).payload.id!==r)return;clearInterval(t),e.body.removeChild(a),this.abortController.signal.removeEventListener("abort",s),window.removeEventListener("message",c),n(null===o.attestation?"":o.attestation)}}catch(e){this.logger.warn(e)}};e.body.appendChild(a),window.addEventListener("message",c,{signal:this.abortController.signal})}));return this.logger.debug("jwt attestation",n),n}catch(e){this.logger.warn(e)}return""})),JO(this,"resolve",(async e=>{if(this.isDevEnv)return"";const{attestationId:t,hash:r,encryptedId:n}=e;if(""===t)return void this.logger.debug("resolve: attestationId is empty, skipping");if(t){if(Sy(t).payload.id!==n)return;const e=await this.isValidJwtAttestation(t);if(e)return e.isVerified?e:void this.logger.warn("resolve: jwt attestation: origin url not verified")}if(!r)return;const i=this.getVerifyUrl(e?.verifyUrl);return this.fetchAttestation(r,i)})),JO(this,"fetchAttestation",(async(e,t)=>{this.logger.debug(`resolving attestation: ${e} from url: ${t}`);const r=this.startAbortTimer(5*Df.ONE_SECOND),n=await fetch(`${t}/attestation/${e}?v2Supported=true`,{signal:this.abortController.signal});return clearTimeout(r),200===n.status?await n.json():void 0})),JO(this,"getVerifyUrl",(e=>{let t=e||ZS;return tk.includes(t)||(this.logger.info(`verify url: ${t}, not included in trusted list, assigning default: ${ZS}`),t=ZS),t})),JO(this,"fetchPublicKey",(async()=>{try{this.logger.debug(`fetching public key from: ${this.verifyUrlV3}`);const e=this.startAbortTimer(Df.FIVE_SECONDS),t=await fetch(`${this.verifyUrlV3}/public-key`,{signal:this.abortController.signal});return clearTimeout(e),await t.json()}catch(e){this.logger.warn(e)}})),JO(this,"persistPublicKey",(async e=>{this.logger.debug("persisting public key to local storage",e),await this.store.setItem(this.storeKey,e),this.publicKey=e})),JO(this,"removePublicKey",(async()=>{this.logger.debug("removing verify v2 public key from storage"),await this.store.removeItem(this.storeKey),this.publicKey=void 0})),JO(this,"isValidJwtAttestation",(async e=>{const t=await this.getPublicKey();try{if(t)return this.validateAttestation(e,t)}catch(e){this.logger.error(e),this.logger.warn("error validating attestation")}const r=await this.fetchAndPersistPublicKey();try{if(r)return this.validateAttestation(e,r)}catch(e){this.logger.error(e),this.logger.warn("error validating attestation")}})),JO(this,"getPublicKey",(async()=>this.publicKey?this.publicKey:await this.fetchAndPersistPublicKey())),JO(this,"fetchAndPersistPublicKey",(async()=>{if(this.fetchPromise)return await this.fetchPromise,this.publicKey;this.fetchPromise=new Promise((async e=>{const t=await this.fetchPublicKey();t&&(await this.persistPublicKey(t),e(t))}));const e=await this.fetchPromise;return this.fetchPromise=void 0,e})),JO(this,"validateAttestation",((e,t)=>{const r=function(e,t){const[r,n,i]=e.split("."),o=Buffer.from(lx(i),"base64");if(64!==o.length)throw new Error("Invalid signature length");const s=o.slice(0,32),a=o.slice(32,64),c=PA(`${r}.${n}`),u=function(e){const t=Buffer.from(e.x,"base64"),r=Buffer.from(e.y,"base64");return Bv([new Uint8Array([4]),t,r])}(t);if(!X_.verify(Bv([s,a]),c,u))throw new Error("Invalid signature");return Sy(e).payload}(e,t.publicKey),n={hasExpired:(0,Df.toMiliseconds)(r.exp)<Date.now(),payload:r};if(n.hasExpired)throw this.logger.warn("resolve: jwt attestation expired"),new Error("JWT attestation expired");return{origin:n.payload.origin,isScam:n.payload.isScam,isVerified:n.payload.isVerified}})),this.logger=Dd(t,this.name),this.abortController=new AbortController,this.isDevEnv=qw(),this.init()}get storeKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//verify:public:key"}get context(){return Ud(this.logger)}startAbortTimer(e){return this.abortController=new AbortController,setTimeout((()=>this.abortController.abort()),(0,Df.toMiliseconds)(e))}}var QO=Object.defineProperty,XO=(e,t,r)=>((e,t,r)=>t in e?QO(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r)(e,"symbol"!=typeof t?t+"":t,r);class ZO extends Xd{constructor(e,t){super(e,t),this.projectId=e,this.logger=t,XO(this,"context","echo"),XO(this,"registerDeviceToken",(async e=>{const{clientId:t,token:r,notificationType:n,enableEncrypted:i=!1}=e,o=`https://echo.walletconnect.com/${this.projectId}/clients`;await fetch(o,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({client_id:t,type:n,token:r,always_raw:i})})})),this.logger=Dd(t,this.context)}}var eT=Object.defineProperty,tT=Object.getOwnPropertySymbols,rT=Object.prototype.hasOwnProperty,nT=Object.prototype.propertyIsEnumerable,iT=(e,t,r)=>t in e?eT(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,oT=(e,t)=>{for(var r in t||(t={}))rT.call(t,r)&&iT(e,r,t[r]);if(tT)for(var r of tT(t))nT.call(t,r)&&iT(e,r,t[r]);return e},sT=(e,t,r)=>iT(e,"symbol"!=typeof t?t+"":t,r);class aT extends Zd{constructor(e,t,r=!0){super(e,t,r),this.core=e,this.logger=t,sT(this,"context","event-client"),sT(this,"storagePrefix",_S),sT(this,"storageVersion",.1),sT(this,"events",new Map),sT(this,"shouldPersist",!1),sT(this,"init",(async()=>{if(!qw())try{const e={eventId:zw(),timestamp:Date.now(),domain:this.getAppDomain(),props:{event:"INIT",type:"",properties:{client_id:await this.core.crypto.getClientId(),user_agent:Ow(this.core.relayer.protocol,this.core.relayer.version,US)}}};await this.sendEvent([e])}catch(e){this.logger.warn(e)}})),sT(this,"createEvent",(e=>{const{event:t="ERROR",type:r="",properties:{topic:n,trace:i}}=e,o=zw(),s=this.core.projectId||"",a=Date.now(),c=oT({eventId:o,timestamp:a,props:{event:t,type:r,properties:{topic:n,trace:i}},bundleId:s,domain:this.getAppDomain()},this.setMethods(o));return this.telemetryEnabled&&(this.events.set(o,c),this.shouldPersist=!0),c})),sT(this,"getEvent",(e=>{const{eventId:t,topic:r}=e;if(t)return this.events.get(t);const n=Array.from(this.events.values()).find((e=>e.props.properties.topic===r));return n?oT(oT({},n),this.setMethods(n.eventId)):void 0})),sT(this,"deleteEvent",(e=>{const{eventId:t}=e;this.events.delete(t),this.shouldPersist=!0})),sT(this,"setEventListeners",(()=>{this.core.heartbeat.on(qf,(async()=>{this.shouldPersist&&await this.persist(),this.events.forEach((e=>{(0,Df.fromMiliseconds)(Date.now())-(0,Df.fromMiliseconds)(e.timestamp)>86400&&(this.events.delete(e.eventId),this.shouldPersist=!0)}))}))})),sT(this,"setMethods",(e=>({addTrace:t=>this.addTrace(e,t),setError:t=>this.setError(e,t)}))),sT(this,"addTrace",((e,t)=>{const r=this.events.get(e);r&&(r.props.properties.trace.push(t),this.events.set(e,r),this.shouldPersist=!0)})),sT(this,"setError",((e,t)=>{const r=this.events.get(e);r&&(r.props.type=t,r.timestamp=Date.now(),this.events.set(e,r),this.shouldPersist=!0)})),sT(this,"persist",(async()=>{await this.core.storage.setItem(this.storageKey,Array.from(this.events.values())),this.shouldPersist=!1})),sT(this,"restore",(async()=>{try{const e=await this.core.storage.getItem(this.storageKey)||[];if(!e.length)return;e.forEach((e=>{this.events.set(e.eventId,oT(oT({},e),this.setMethods(e.eventId)))}))}catch(e){this.logger.warn(e)}})),sT(this,"submit",(async()=>{if(!this.telemetryEnabled||0===this.events.size)return;const e=[];for(const[t,r]of this.events)r.props.type&&e.push(r);if(0!==e.length)try{if((await this.sendEvent(e)).ok)for(const t of e)this.events.delete(t.eventId),this.shouldPersist=!0}catch(e){this.logger.warn(e)}})),sT(this,"sendEvent",(async e=>{const t=this.getAppDomain()?"":"&sp=desktop";return await fetch(`https://pulse.walletconnect.org/batch?projectId=${this.core.projectId}&st=events_sdk&sv=js-${US}${t}`,{method:"POST",body:JSON.stringify(e)})})),sT(this,"getAppDomain",(()=>Iw().url)),this.logger=Dd(t,this.context),this.telemetryEnabled=r,r?this.restore().then((async()=>{await this.submit(),this.setEventListeners()})):this.persist()}get storageKey(){return this.storagePrefix+this.storageVersion+this.core.customStoragePrefix+"//"+this.context}}var cT=Object.defineProperty,uT=Object.getOwnPropertySymbols,lT=Object.prototype.hasOwnProperty,hT=Object.prototype.propertyIsEnumerable,fT=(e,t,r)=>t in e?cT(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,dT=(e,t)=>{for(var r in t||(t={}))lT.call(t,r)&&fT(e,r,t[r]);if(uT)for(var r of uT(t))hT.call(t,r)&&fT(e,r,t[r]);return e},pT=(e,t,r)=>fT(e,"symbol"!=typeof t?t+"":t,r);class gT extends qd{constructor(e){var t;super(e),pT(this,"protocol","wc"),pT(this,"version",2),pT(this,"name",AS),pT(this,"relayUrl"),pT(this,"projectId"),pT(this,"customStoragePrefix"),pT(this,"events",new Et.EventEmitter),pT(this,"logger"),pT(this,"heartbeat"),pT(this,"relayer"),pT(this,"crypto"),pT(this,"storage"),pT(this,"history"),pT(this,"expirer"),pT(this,"pairing"),pT(this,"verify"),pT(this,"echoClient"),pT(this,"linkModeSupportedApps"),pT(this,"eventClient"),pT(this,"initialized",!1),pT(this,"logChunkController"),pT(this,"on",((e,t)=>this.events.on(e,t))),pT(this,"once",((e,t)=>this.events.once(e,t))),pT(this,"off",((e,t)=>this.events.off(e,t))),pT(this,"removeListener",((e,t)=>this.events.removeListener(e,t))),pT(this,"dispatchEnvelope",(({topic:e,message:t,sessionExists:r})=>{if(!e||!t)return;const n={topic:e,message:t,publishedAt:Date.now(),transportType:DS.link_mode};this.relayer.onLinkMessageEvent(n,{sessionExists:r})}));const r=this.getGlobalCore(e?.customStoragePrefix);if(r)try{return this.customStoragePrefix=r.customStoragePrefix,this.logger=r.logger,this.heartbeat=r.heartbeat,this.crypto=r.crypto,this.history=r.history,this.expirer=r.expirer,this.storage=r.storage,this.relayer=r.relayer,this.pairing=r.pairing,this.verify=r.verify,this.echoClient=r.echoClient,this.linkModeSupportedApps=r.linkModeSupportedApps,this.eventClient=r.eventClient,this.initialized=r.initialized,this.logChunkController=r.logChunkController,r}catch(e){console.warn("Failed to copy global core",e)}this.projectId=e?.projectId,this.relayUrl=e?.relayUrl||OS,this.customStoragePrefix=null!=e&&e.customStoragePrefix?`:${e.customStoragePrefix}`:"";const n=Bd({level:"string"==typeof e?.logger&&e.logger?e.logger:"error",name:AS}),{logger:i,chunkLoggerController:o}=jd({opts:n,maxSizeInBytes:e?.maxLogBlobSizeInBytes,loggerOverride:e?.logger});this.logChunkController=o,null!=(t=this.logChunkController)&&t.downloadLogsBlobInBrowser&&(window.downloadLogsBlobInBrowser=async()=>{var e,t;null!=(e=this.logChunkController)&&e.downloadLogsBlobInBrowser&&(null==(t=this.logChunkController)||t.downloadLogsBlobInBrowser({clientId:await this.crypto.getClientId()}))}),this.logger=Dd(i,this.name),this.heartbeat=new Gf,this.crypto=new MI(this,this.logger,e?.keychain),this.history=new HO(this,this.logger),this.expirer=new WO(this,this.logger),this.storage=null!=e&&e.storage?e.storage:new vd(dT(dT({},xS),e?.storageOptions)),this.relayer=new AO({core:this,logger:this.logger,relayUrl:this.relayUrl,projectId:this.projectId}),this.pairing=new zO(this,this.logger),this.verify=new YO(this,this.logger,this.storage),this.echoClient=new ZO(this.projectId||"",this.logger),this.linkModeSupportedApps=[],this.eventClient=new aT(this,this.logger,e?.telemetryEnabled),this.setGlobalCore(this)}static async init(e){const t=new gT(e);await t.initialize();const r=await t.crypto.getClientId();return await t.storage.setItem("WALLETCONNECT_CLIENT_ID",r),t}get context(){return Ud(this.logger)}async start(){this.initialized||await this.initialize()}async getLogsBlob(){var e;return null==(e=this.logChunkController)?void 0:e.logsToBlob({clientId:await this.crypto.getClientId()})}async addLinkModeSupportedApp(e){this.linkModeSupportedApps.includes(e)||(this.linkModeSupportedApps.push(e),await this.storage.setItem(FS,this.linkModeSupportedApps))}async initialize(){this.logger.trace("Initialized");try{await this.crypto.init(),await this.history.init(),await this.expirer.init(),await this.relayer.init(),await this.heartbeat.init(),await this.pairing.init(),this.linkModeSupportedApps=await this.storage.getItem(FS)||[],this.initialized=!0,this.logger.info("Core Initialization Success")}catch(e){throw this.logger.warn(`Core Initialization Failure at epoch ${Date.now()}`,e),this.logger.error(e.message),e}}getGlobalCore(e=""){try{if(this.isGlobalCoreDisabled())return;const t=`_walletConnectCore_${e}`,r=`${t}_count`;return globalThis[r]=(globalThis[r]||0)+1,globalThis[r]>1&&console.warn(`WalletConnect Core is already initialized. This is probably a mistake and can lead to unexpected behavior. Init() was called ${globalThis[r]} times.`),globalThis[t]}catch(e){return void console.warn("Failed to get global WalletConnect core",e)}}setGlobalCore(e){var t;try{if(this.isGlobalCoreDisabled())return;const r=`_walletConnectCore_${(null==(t=e.opts)?void 0:t.customStoragePrefix)||""}`;globalThis[r]=e}catch(e){console.warn("Failed to set global WalletConnect core",e)}}isGlobalCoreDisabled(){try{return typeof process<"u"&&"true"===process.env.DISABLE_GLOBAL_CORE}catch{return!0}}}const mT=gT,yT="client",vT=`wc@2:${yT}:`,bT=yT,wT="WALLETCONNECT_DEEPLINK_CHOICE",ET="Proposal expired",AT=Df.SEVEN_DAYS,_T={wc_sessionPropose:{req:{ttl:Df.FIVE_MINUTES,prompt:!0,tag:1100},res:{ttl:Df.FIVE_MINUTES,prompt:!1,tag:1101},reject:{ttl:Df.FIVE_MINUTES,prompt:!1,tag:1120},autoReject:{ttl:Df.FIVE_MINUTES,prompt:!1,tag:1121}},wc_sessionSettle:{req:{ttl:Df.FIVE_MINUTES,prompt:!1,tag:1102},res:{ttl:Df.FIVE_MINUTES,prompt:!1,tag:1103}},wc_sessionUpdate:{req:{ttl:Df.ONE_DAY,prompt:!1,tag:1104},res:{ttl:Df.ONE_DAY,prompt:!1,tag:1105}},wc_sessionExtend:{req:{ttl:Df.ONE_DAY,prompt:!1,tag:1106},res:{ttl:Df.ONE_DAY,prompt:!1,tag:1107}},wc_sessionRequest:{req:{ttl:Df.FIVE_MINUTES,prompt:!0,tag:1108},res:{ttl:Df.FIVE_MINUTES,prompt:!1,tag:1109}},wc_sessionEvent:{req:{ttl:Df.FIVE_MINUTES,prompt:!0,tag:1110},res:{ttl:Df.FIVE_MINUTES,prompt:!1,tag:1111}},wc_sessionDelete:{req:{ttl:Df.ONE_DAY,prompt:!1,tag:1112},res:{ttl:Df.ONE_DAY,prompt:!1,tag:1113}},wc_sessionPing:{req:{ttl:Df.ONE_DAY,prompt:!1,tag:1114},res:{ttl:Df.ONE_DAY,prompt:!1,tag:1115}},wc_sessionAuthenticate:{req:{ttl:Df.ONE_HOUR,prompt:!0,tag:1116},res:{ttl:Df.ONE_HOUR,prompt:!1,tag:1117},reject:{ttl:Df.FIVE_MINUTES,prompt:!1,tag:1118},autoReject:{ttl:Df.FIVE_MINUTES,prompt:!1,tag:1119}}},xT={min:Df.FIVE_MINUTES,max:Df.SEVEN_DAYS},ST="IDLE",kT="ACTIVE",IT={eth_sendTransaction:{key:""},eth_sendRawTransaction:{key:""},wallet_sendCalls:{key:""},solana_signTransaction:{key:"signature"},solana_signAllTransactions:{key:"transactions"},solana_signAndSendTransaction:{key:"signature"}},OT=["wc_sessionPropose","wc_sessionRequest","wc_authRequest","wc_sessionAuthenticate"],TT="wc@1.5:auth:",PT=`${TT}:PUB_KEY`;var RT=Object.defineProperty,NT=Object.defineProperties,CT=Object.getOwnPropertyDescriptors,MT=Object.getOwnPropertySymbols,LT=Object.prototype.hasOwnProperty,BT=Object.prototype.propertyIsEnumerable,UT=(e,t,r)=>t in e?RT(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,DT=(e,t)=>{for(var r in t||(t={}))LT.call(t,r)&&UT(e,r,t[r]);if(MT)for(var r of MT(t))BT.call(t,r)&&UT(e,r,t[r]);return e},jT=(e,t)=>NT(e,CT(t)),FT=(e,t,r)=>UT(e,"symbol"!=typeof t?t+"":t,r);class zT extends np{constructor(e){super(e),FT(this,"name","engine"),FT(this,"events",new(At())),FT(this,"initialized",!1),FT(this,"requestQueue",{state:ST,queue:[]}),FT(this,"sessionRequestQueue",{state:ST,queue:[]}),FT(this,"requestQueueDelay",Df.ONE_SECOND),FT(this,"expectedPairingMethodMap",new Map),FT(this,"recentlyDeletedMap",new Map),FT(this,"recentlyDeletedLimit",200),FT(this,"relayMessageCache",[]),FT(this,"pendingSessions",new Map),FT(this,"init",(async()=>{this.initialized||(await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.registerPairingEvents(),await this.registerLinkModeListeners(),this.client.core.pairing.register({methods:Object.keys(_T)}),this.initialized=!0,setTimeout((async()=>{await this.processPendingMessageEvents(),this.sessionRequestQueue.queue=this.getPendingSessionRequests(),this.processSessionRequestQueue()}),(0,Df.toMiliseconds)(this.requestQueueDelay)))})),FT(this,"connect",(async e=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();const t=jT(DT({},e),{requiredNamespaces:e.requiredNamespaces||{},optionalNamespaces:e.optionalNamespaces||{}});await this.isValidConnect(t);const{pairingTopic:r,requiredNamespaces:n,optionalNamespaces:i,sessionProperties:o,scopedProperties:s,relays:a}=t;let c,u=r,l=!1;try{if(u){const e=this.client.core.pairing.pairings.get(u);this.client.logger.warn("connect() with existing pairing topic is deprecated and will be removed in the next major release."),l=e.active}}catch(e){throw this.client.logger.error(`connect() -> pairing.get(${u}) failed`),e}if(!u||!l){const{topic:e,uri:t}=await this.client.core.pairing.create();u=e,c=t}if(!u){const{message:e}=Ix("NO_MATCHING_KEY",`connect() pairing topic: ${u}`);throw new Error(e)}const h=await this.client.core.crypto.generateKeyPair(),f=_T.wc_sessionPropose.req.ttl||Df.FIVE_MINUTES,d=Bw(f),p=jT(DT(DT({requiredNamespaces:n,optionalNamespaces:i,relays:a??[{protocol:"irn"}],proposer:{publicKey:h,metadata:this.client.metadata},expiryTimestamp:d,pairingTopic:u},o&&{sessionProperties:o}),s&&{scopedProperties:s}),{id:nS()}),g=Dw("session_connect",p.id),{reject:m,resolve:y,done:v}=Nw(f,ET),b=({id:e})=>{e===p.id&&(this.client.events.off("proposal_expire",b),this.pendingSessions.delete(p.id),this.events.emit(g,{error:{message:ET,code:0}}))};return this.client.events.on("proposal_expire",b),this.events.once(g,(({error:e,session:t})=>{this.client.events.off("proposal_expire",b),e?m(e):t&&y(t)})),await this.sendRequest({topic:u,method:"wc_sessionPropose",params:p,throwOnFailedPublish:!0,clientRpcId:p.id}),await this.setProposal(p.id,p),{uri:c,approval:v}})),FT(this,"pair",(async e=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{return await this.client.core.pairing.pair(e)}catch(e){throw this.client.logger.error("pair() failed"),e}})),FT(this,"approve",(async e=>{var t,r,n;const i=this.client.core.eventClient.createEvent({properties:{topic:null==(t=e?.id)?void 0:t.toString(),trace:[nk]}});try{this.isInitialized(),await this.confirmOnlineStateOrThrow()}catch(e){throw i.setError("no_internet_connection"),e}try{await this.isValidProposalId(e?.id)}catch(t){throw this.client.logger.error(`approve() -> proposal.get(${e?.id}) failed`),i.setError("proposal_not_found"),t}try{await this.isValidApprove(e)}catch(e){throw this.client.logger.error("approve() -> isValidApprove() failed"),i.setError("session_approve_namespace_validation_failure"),e}const{id:o,relayProtocol:s,namespaces:a,sessionProperties:c,scopedProperties:u,sessionConfig:l}=e,h=this.client.proposal.get(o);this.client.core.eventClient.deleteEvent({eventId:i.eventId});const{pairingTopic:f,proposer:d,requiredNamespaces:p,optionalNamespaces:g}=h;let m=null==(r=this.client.core.eventClient)?void 0:r.getEvent({topic:f});m||(m=null==(n=this.client.core.eventClient)?void 0:n.createEvent({type:nk,properties:{topic:f,trace:[nk,"session_namespaces_validation_success"]}}));const y=await this.client.core.crypto.generateKeyPair(),v=d.publicKey,b=await this.client.core.crypto.generateSharedKey(y,v),w=DT(DT(DT({relay:{protocol:s??"irn"},namespaces:a,controller:{publicKey:y,metadata:this.client.metadata},expiry:Bw(AT)},c&&{sessionProperties:c}),u&&{scopedProperties:u}),l&&{sessionConfig:l}),E=DS.relay;m.addTrace("subscribing_session_topic");try{await this.client.core.relayer.subscribe(b,{transportType:E})}catch(e){throw m.setError("subscribe_session_topic_failure"),e}m.addTrace("subscribe_session_topic_success");const A=jT(DT({},w),{topic:b,requiredNamespaces:p,optionalNamespaces:g,pairingTopic:f,acknowledged:!1,self:w.controller,peer:{publicKey:d.publicKey,metadata:d.metadata},controller:y,transportType:DS.relay});await this.client.session.set(b,A),m.addTrace("store_session");try{m.addTrace("publishing_session_settle"),await this.sendRequest({topic:b,method:"wc_sessionSettle",params:w,throwOnFailedPublish:!0}).catch((e=>{throw m?.setError("session_settle_publish_failure"),e})),m.addTrace("session_settle_publish_success"),m.addTrace("publishing_session_approve"),await this.sendResult({id:o,topic:f,result:{relay:{protocol:s??"irn"},responderPublicKey:y},throwOnFailedPublish:!0}).catch((e=>{throw m?.setError("session_approve_publish_failure"),e})),m.addTrace("session_approve_publish_success")}catch(e){throw this.client.logger.error(e),this.client.session.delete(b,Ox("USER_DISCONNECTED")),await this.client.core.relayer.unsubscribe(b),e}return this.client.core.eventClient.deleteEvent({eventId:m.eventId}),await this.client.core.pairing.updateMetadata({topic:f,metadata:d.metadata}),await this.client.proposal.delete(o,Ox("USER_DISCONNECTED")),await this.client.core.pairing.activate({topic:f}),await this.setExpiry(b,Bw(AT)),{topic:b,acknowledged:()=>Promise.resolve(this.client.session.get(b))}})),FT(this,"reject",(async e=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidReject(e)}catch(e){throw this.client.logger.error("reject() -> isValidReject() failed"),e}const{id:t,reason:r}=e;let n;try{n=this.client.proposal.get(t).pairingTopic}catch(e){throw this.client.logger.error(`reject() -> proposal.get(${t}) failed`),e}n&&(await this.sendError({id:t,topic:n,error:r,rpcOpts:_T.wc_sessionPropose.reject}),await this.client.proposal.delete(t,Ox("USER_DISCONNECTED")))})),FT(this,"update",(async e=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidUpdate(e)}catch(e){throw this.client.logger.error("update() -> isValidUpdate() failed"),e}const{topic:t,namespaces:r}=e,{done:n,resolve:i,reject:o}=Nw(),s=nS(),a=iS().toString(),c=this.client.session.get(t).namespaces;return this.events.once(Dw("session_update",s),(({error:e})=>{e?o(e):i()})),await this.client.session.update(t,{namespaces:r}),await this.sendRequest({topic:t,method:"wc_sessionUpdate",params:{namespaces:r},throwOnFailedPublish:!0,clientRpcId:s,relayRpcId:a}).catch((e=>{this.client.logger.error(e),this.client.session.update(t,{namespaces:c}),o(e)})),{acknowledged:n}})),FT(this,"extend",(async e=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidExtend(e)}catch(e){throw this.client.logger.error("extend() -> isValidExtend() failed"),e}const{topic:t}=e,r=nS(),{done:n,resolve:i,reject:o}=Nw();return this.events.once(Dw("session_extend",r),(({error:e})=>{e?o(e):i()})),await this.setExpiry(t,Bw(AT)),this.sendRequest({topic:t,method:"wc_sessionExtend",params:{},clientRpcId:r,throwOnFailedPublish:!0}).catch((e=>{o(e)})),{acknowledged:n}})),FT(this,"request",(async e=>{this.isInitialized();try{await this.isValidRequest(e)}catch(e){throw this.client.logger.error("request() -> isValidRequest() failed"),e}const{chainId:t,request:n,topic:i,expiry:o=_T.wc_sessionRequest.req.ttl}=e,s=this.client.session.get(i);s?.transportType===DS.relay&&await this.confirmOnlineStateOrThrow();const a=nS(),c=iS().toString(),{done:u,resolve:l,reject:h}=Nw(o,"Request expired. Please try again.");this.events.once(Dw("session_request",a),(({error:e,result:t})=>{e?h(e):l(t)}));const f="wc_sessionRequest",d=this.getAppLinkIfEnabled(s.peer.metadata,s.transportType);if(d)return await this.sendRequest({clientRpcId:a,relayRpcId:c,topic:i,method:f,params:{request:jT(DT({},n),{expiryTimestamp:Bw(o)}),chainId:t},expiry:o,throwOnFailedPublish:!0,appLink:d}).catch((e=>h(e))),this.client.events.emit("session_request_sent",{topic:i,request:n,chainId:t,id:a}),await u();const p={request:jT(DT({},n),{expiryTimestamp:Bw(o)}),chainId:t},g=this.shouldSetTVF(f,p);return await Promise.all([new Promise((async e=>{await this.sendRequest(DT({clientRpcId:a,relayRpcId:c,topic:i,method:f,params:p,expiry:o,throwOnFailedPublish:!0},g&&{tvf:this.getTVFParams(a,p)})).catch((e=>h(e))),this.client.events.emit("session_request_sent",{topic:i,request:n,chainId:t,id:a}),e()})),new Promise((async e=>{var t;if(null==(t=s.sessionConfig)||!t.disableDeepLink){const e=await async function(e,t){let r="";try{if(xw()&&(r=localStorage.getItem(t),r))return r;r=await e.getItem(t)}catch(e){console.error(e)}return r}(this.client.core.storage,wT);await async function({id:e,topic:t,wcDeepLink:n}){var i;try{if(!n)return;const o="string"==typeof n?JSON.parse(n):n,s=o?.href;if("string"!=typeof s)return;const a=function(e,t,r){const n=`requestId=${t}&sessionTopic=${r}`;e.endsWith("/")&&(e=e.slice(0,-1));let i=`${e}`;return i=e.startsWith("https://t.me")?`${i}${e.includes("?")?"&startapp=":"?startapp="}${function(e,t=!1){const r=Buffer.from(e).toString("base64");return t?r.replace(/[=]/g,""):r}(n,!0)}`:`${i}/wc?${n}`,i}(s,e,t),c=Sw();if(c===ww){if(null==(i=(0,Uy.getDocument)())||!i.hasFocus())return void console.warn("Document does not have focus, skipping deeplink.");!function(e){let t="_self";!function(){try{return window.self!==window.top}catch{return!1}}()?(typeof window<"u"&&(!!window.TelegramWebviewProxy||!!window.Telegram||!!window.TelegramWebviewProxyProto)||e.startsWith("https://")||e.startsWith("http://"))&&(t="_blank"):t="_top",window.open(e,t,"noreferrer noopener")}(a)}else c===bw&&typeof(null==r.g?void 0:r.g.Linking)<"u"&&await r.g.Linking.openURL(a)}catch(e){console.error(e)}}({id:a,topic:i,wcDeepLink:e})}e()})),u()]).then((e=>e[2]))})),FT(this,"respond",(async e=>{this.isInitialized(),await this.isValidRespond(e);const{topic:t,response:r}=e,{id:n}=r,i=this.client.session.get(t);i.transportType===DS.relay&&await this.confirmOnlineStateOrThrow();const o=this.getAppLinkIfEnabled(i.peer.metadata,i.transportType);mS(r)?await this.sendResult({id:n,topic:t,result:r.result,throwOnFailedPublish:!0,appLink:o}):yS(r)&&await this.sendError({id:n,topic:t,error:r.error,appLink:o}),this.cleanupAfterResponse(e)})),FT(this,"ping",(async e=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidPing(e)}catch(e){throw this.client.logger.error("ping() -> isValidPing() failed"),e}const{topic:t}=e;if(this.client.session.keys.includes(t)){const e=nS(),r=iS().toString(),{done:n,resolve:i,reject:o}=Nw();this.events.once(Dw("session_ping",e),(({error:e})=>{e?o(e):i()})),await Promise.all([this.sendRequest({topic:t,method:"wc_sessionPing",params:{},throwOnFailedPublish:!0,clientRpcId:e,relayRpcId:r}),n()])}else this.client.core.pairing.pairings.keys.includes(t)&&(this.client.logger.warn("ping() on pairing topic is deprecated and will be removed in the next major release."),await this.client.core.pairing.ping({topic:t}))})),FT(this,"emit",(async e=>{this.isInitialized(),await this.confirmOnlineStateOrThrow(),await this.isValidEmit(e);const{topic:t,event:r,chainId:n}=e,i=iS().toString(),o=nS();await this.sendRequest({topic:t,method:"wc_sessionEvent",params:{event:r,chainId:n},throwOnFailedPublish:!0,relayRpcId:i,clientRpcId:o})})),FT(this,"disconnect",(async e=>{this.isInitialized(),await this.confirmOnlineStateOrThrow(),await this.isValidDisconnect(e);const{topic:t}=e;if(this.client.session.keys.includes(t))await this.sendRequest({topic:t,method:"wc_sessionDelete",params:Ox("USER_DISCONNECTED"),throwOnFailedPublish:!0}),await this.deleteSession({topic:t,emitEvent:!1});else{if(!this.client.core.pairing.pairings.keys.includes(t)){const{message:e}=Ix("MISMATCHED_TOPIC",`Session or pairing topic not found: ${t}`);throw new Error(e)}await this.client.core.pairing.disconnect({topic:t})}})),FT(this,"find",(e=>(this.isInitialized(),this.client.session.getAll().filter((t=>function(e,t){const{requiredNamespaces:r}=t,n=Object.keys(e.namespaces),i=Object.keys(r);let o=!0;return!!Tw(i,n)&&(n.forEach((t=>{const{accounts:n,methods:i,events:s}=e.namespaces[t],a=_x(n),c=r[t];Tw(lw(t,c),a)&&Tw(c.methods,i)&&Tw(c.events,s)||(o=!1)})),o)}(t,e)))))),FT(this,"getPendingSessionRequests",(()=>this.client.pendingRequest.getAll())),FT(this,"authenticate",(async(e,t)=>{var r;this.isInitialized(),this.isValidAuthenticate(e);const n=t&&this.client.core.linkModeSupportedApps.includes(t)&&(null==(r=this.client.metadata.redirect)?void 0:r.linkMode),i=n?DS.link_mode:DS.relay;i===DS.relay&&await this.confirmOnlineStateOrThrow();const{chains:o,statement:s="",uri:a,domain:c,nonce:u,type:l,exp:h,nbf:f,methods:d=[],expiry:p}=e,g=[...e.resources||[]],{topic:m,uri:y}=await this.client.core.pairing.create({methods:["wc_sessionAuthenticate"],transportType:i});this.client.logger.info({message:"Generated new pairing",pairing:{topic:m,uri:y}});const v=await this.client.core.crypto.generateKeyPair(),b=ox(v);if(await Promise.all([this.client.auth.authKeys.set(PT,{responseTopic:b,publicKey:v}),this.client.auth.pairingTopics.set(b,{topic:b,pairingTopic:m})]),await this.client.core.relayer.subscribe(b,{transportType:i}),this.client.logger.info(`sending request to new pairing topic: ${m}`),d.length>0){const{namespace:e}=uw(o[0]);let t=function(e,t,r){const n=function(e,t,r,n={}){return r?.sort(((e,t)=>e.localeCompare(t))),{att:{[e]:UE(t,r,n)}}}(e,t,r);return DE(n)}(e,"request",d);GE(g)&&(t=FE(t,g.pop())),g.push(t)}const w=p&&p>_T.wc_sessionAuthenticate.req.ttl?p:_T.wc_sessionAuthenticate.req.ttl,E={authPayload:{type:l??"caip122",chains:o,statement:s,aud:a,domain:c,version:"1",nonce:u,iat:(new Date).toISOString(),exp:h,nbf:f,resources:g},requester:{publicKey:v,metadata:this.client.metadata},expiryTimestamp:Bw(w)},A={requiredNamespaces:{},optionalNamespaces:{eip155:{chains:o,methods:[...new Set(["personal_sign",...d])],events:["chainChanged","accountsChanged"]}},relays:[{protocol:"irn"}],pairingTopic:m,proposer:{publicKey:v,metadata:this.client.metadata},expiryTimestamp:Bw(_T.wc_sessionPropose.req.ttl),id:nS()},{done:_,resolve:x,reject:S}=Nw(w,"Request expired"),k=nS(),I=Dw("session_connect",A.id),O=Dw("session_request",k),T=async({error:e,session:t})=>{this.events.off(O,P),e?S(e):t&&x({session:t})},P=async e=>{var r,n,o;if(await this.deletePendingAuthRequest(k,{message:"fulfilled",code:0}),e.error){const t=Ox("WC_METHOD_UNSUPPORTED","wc_sessionAuthenticate");return e.error.code===t.code?void 0:(this.events.off(I,T),S(e.error.message))}await this.deleteProposal(A.id),this.events.off(I,T);const{cacaos:s,responder:a}=e.result,c=[],u=[];for(const e of s){await ME({cacao:e,projectId:this.client.core.projectId})||(this.client.logger.error(e,"Signature verification failed"),S(Ox("SESSION_SETTLEMENT_FAILED","Signature verification failed")));const{p:t}=e,r=GE(t.resources),n=[NE(t.iss)],i=CE(t.iss);if(r){const e=zE(r),t=qE(r);c.push(...e),n.push(...t)}for(const e of n)u.push(`${e}:${i}`)}const l=await this.client.core.crypto.generateSharedKey(v,a.publicKey);let h;c.length>0&&(h={topic:l,acknowledged:!0,self:{publicKey:v,metadata:this.client.metadata},peer:a,controller:a.publicKey,expiry:Bw(AT),requiredNamespaces:{},optionalNamespaces:{},relay:{protocol:"irn"},pairingTopic:m,namespaces:xx([...new Set(c)],[...new Set(u)]),transportType:i},await this.client.core.relayer.subscribe(l,{transportType:i}),await this.client.session.set(l,h),m&&await this.client.core.pairing.updateMetadata({topic:m,metadata:a.metadata}),h=this.client.session.get(l)),null!=(r=this.client.metadata.redirect)&&r.linkMode&&null!=(n=a.metadata.redirect)&&n.linkMode&&null!=(o=a.metadata.redirect)&&o.universal&&t&&(this.client.core.addLinkModeSupportedApp(a.metadata.redirect.universal),this.client.session.update(l,{transportType:DS.link_mode})),x({auths:s,session:h})};let R;this.events.once(I,T),this.events.once(O,P);try{if(n){const e=oS("wc_sessionAuthenticate",E,k);this.client.core.history.set(m,e);const r=await this.client.core.crypto.encode("",e,{type:2,encoding:rx});R=Ax(t,m,r)}else await Promise.all([this.sendRequest({topic:m,method:"wc_sessionAuthenticate",params:E,expiry:e.expiry,throwOnFailedPublish:!0,clientRpcId:k}),this.sendRequest({topic:m,method:"wc_sessionPropose",params:A,expiry:_T.wc_sessionPropose.req.ttl,throwOnFailedPublish:!0,clientRpcId:A.id})])}catch(e){throw this.events.off(I,T),this.events.off(O,P),e}return await this.setProposal(A.id,A),await this.setAuthRequest(k,{request:jT(DT({},E),{verifyContext:{}}),pairingTopic:m,transportType:i}),{uri:R??y,response:_}})),FT(this,"approveSessionAuthenticate",(async e=>{const{id:t,auths:r}=e,n=this.client.core.eventClient.createEvent({properties:{topic:t.toString(),trace:["authenticated_session_approve_started"]}});try{this.isInitialized()}catch(e){throw n.setError("no_internet_connection"),e}const i=this.getPendingAuthRequest(t);if(!i)throw n.setError("authenticated_session_pending_request_not_found"),new Error(`Could not find pending auth request with id ${t}`);const o=i.transportType||DS.relay;o===DS.relay&&await this.confirmOnlineStateOrThrow();const s=i.requester.publicKey,a=await this.client.core.crypto.generateKeyPair(),c=ox(s),u={type:1,receiverPublicKey:s,senderPublicKey:a},l=[],h=[];for(const e of r){if(!await ME({cacao:e,projectId:this.client.core.projectId})){n.setError("invalid_cacao");const e=Ox("SESSION_SETTLEMENT_FAILED","Signature verification failed");throw await this.sendError({id:t,topic:c,error:e,encodeOpts:u}),new Error(e.message)}n.addTrace("cacaos_verified");const{p:r}=e,i=GE(r.resources),o=[NE(r.iss)],s=CE(r.iss);if(i){const e=zE(i),t=qE(i);l.push(...e),o.push(...t)}for(const e of o)h.push(`${e}:${s}`)}const f=await this.client.core.crypto.generateSharedKey(a,s);let d;if(n.addTrace("create_authenticated_session_topic"),l?.length>0){d={topic:f,acknowledged:!0,self:{publicKey:a,metadata:this.client.metadata},peer:{publicKey:s,metadata:i.requester.metadata},controller:s,expiry:Bw(AT),authentication:r,requiredNamespaces:{},optionalNamespaces:{},relay:{protocol:"irn"},pairingTopic:i.pairingTopic,namespaces:xx([...new Set(l)],[...new Set(h)]),transportType:o},n.addTrace("subscribing_authenticated_session_topic");try{await this.client.core.relayer.subscribe(f,{transportType:o})}catch(e){throw n.setError("subscribe_authenticated_session_topic_failure"),e}n.addTrace("subscribe_authenticated_session_topic_success"),await this.client.session.set(f,d),n.addTrace("store_authenticated_session"),await this.client.core.pairing.updateMetadata({topic:i.pairingTopic,metadata:i.requester.metadata})}n.addTrace("publishing_authenticated_session_approve");try{await this.sendResult({topic:c,id:t,result:{cacaos:r,responder:{publicKey:a,metadata:this.client.metadata}},encodeOpts:u,throwOnFailedPublish:!0,appLink:this.getAppLinkIfEnabled(i.requester.metadata,o)})}catch(e){throw n.setError("authenticated_session_approve_publish_failure"),e}return await this.client.auth.requests.delete(t,{message:"fulfilled",code:0}),await this.client.core.pairing.activate({topic:i.pairingTopic}),this.client.core.eventClient.deleteEvent({eventId:n.eventId}),{session:d}})),FT(this,"rejectSessionAuthenticate",(async e=>{this.isInitialized();const{id:t,reason:r}=e,n=this.getPendingAuthRequest(t);if(!n)throw new Error(`Could not find pending auth request with id ${t}`);n.transportType===DS.relay&&await this.confirmOnlineStateOrThrow();const i=n.requester.publicKey,o=await this.client.core.crypto.generateKeyPair(),s=ox(i),a={type:1,receiverPublicKey:i,senderPublicKey:o};await this.sendError({id:t,topic:s,error:r,encodeOpts:a,rpcOpts:_T.wc_sessionAuthenticate.reject,appLink:this.getAppLinkIfEnabled(n.requester.metadata,n.transportType)}),await this.client.auth.requests.delete(t,{message:"rejected",code:0}),await this.client.proposal.delete(t,Ox("USER_DISCONNECTED"))})),FT(this,"formatAuthMessage",(e=>{this.isInitialized();const{request:t,iss:r}=e;return LE(t,r)})),FT(this,"processRelayMessageCache",(()=>{setTimeout((async()=>{if(0!==this.relayMessageCache.length)for(;this.relayMessageCache.length>0;)try{const e=this.relayMessageCache.shift();e&&await this.onRelayMessage(e)}catch(e){this.client.logger.error(e)}}),50)})),FT(this,"cleanupDuplicatePairings",(async e=>{if(e.pairingTopic)try{const t=this.client.core.pairing.pairings.get(e.pairingTopic),r=this.client.core.pairing.pairings.getAll().filter((r=>{var n,i;return(null==(n=r.peerMetadata)?void 0:n.url)&&(null==(i=r.peerMetadata)?void 0:i.url)===e.peer.metadata.url&&r.topic&&r.topic!==t.topic}));if(0===r.length)return;this.client.logger.info(`Cleaning up ${r.length} duplicate pairing(s)`),await Promise.all(r.map((e=>this.client.core.pairing.disconnect({topic:e.topic})))),this.client.logger.info("Duplicate pairings clean up finished")}catch(e){this.client.logger.error(e)}})),FT(this,"deleteSession",(async e=>{var t;const{topic:r,expirerHasDeleted:n=!1,emitEvent:i=!0,id:o=0}=e,{self:s}=this.client.session.get(r);await this.client.core.relayer.unsubscribe(r),await this.client.session.delete(r,Ox("USER_DISCONNECTED")),this.addToRecentlyDeleted(r,"session"),this.client.core.crypto.keychain.has(s.publicKey)&&await this.client.core.crypto.deleteKeyPair(s.publicKey),this.client.core.crypto.keychain.has(r)&&await this.client.core.crypto.deleteSymKey(r),n||this.client.core.expirer.del(r),this.client.core.storage.removeItem(wT).catch((e=>this.client.logger.warn(e))),this.getPendingSessionRequests().forEach((e=>{e.topic===r&&this.deletePendingSessionRequest(e.id,Ox("USER_DISCONNECTED"))})),r===(null==(t=this.sessionRequestQueue.queue[0])?void 0:t.topic)&&(this.sessionRequestQueue.state=ST),i&&this.client.events.emit("session_delete",{id:o,topic:r})})),FT(this,"deleteProposal",(async(e,t)=>{if(t)try{const t=this.client.proposal.get(e),r=this.client.core.eventClient.getEvent({topic:t.pairingTopic});r?.setError("proposal_expired")}catch{}await Promise.all([this.client.proposal.delete(e,Ox("USER_DISCONNECTED")),t?Promise.resolve():this.client.core.expirer.del(e)]),this.addToRecentlyDeleted(e,"proposal")})),FT(this,"deletePendingSessionRequest",(async(e,t,r=!1)=>{await Promise.all([this.client.pendingRequest.delete(e,t),r?Promise.resolve():this.client.core.expirer.del(e)]),this.addToRecentlyDeleted(e,"request"),this.sessionRequestQueue.queue=this.sessionRequestQueue.queue.filter((t=>t.id!==e)),r&&(this.sessionRequestQueue.state=ST,this.client.events.emit("session_request_expire",{id:e}))})),FT(this,"deletePendingAuthRequest",(async(e,t,r=!1)=>{await Promise.all([this.client.auth.requests.delete(e,t),r?Promise.resolve():this.client.core.expirer.del(e)])})),FT(this,"setExpiry",(async(e,t)=>{this.client.session.keys.includes(e)&&(this.client.core.expirer.set(e,t),await this.client.session.update(e,{expiry:t}))})),FT(this,"setProposal",(async(e,t)=>{this.client.core.expirer.set(e,Bw(_T.wc_sessionPropose.req.ttl)),await this.client.proposal.set(e,t)})),FT(this,"setAuthRequest",(async(e,t)=>{const{request:r,pairingTopic:n,transportType:i=DS.relay}=t;this.client.core.expirer.set(e,r.expiryTimestamp),await this.client.auth.requests.set(e,{authPayload:r.authPayload,requester:r.requester,expiryTimestamp:r.expiryTimestamp,id:e,pairingTopic:n,verifyContext:r.verifyContext,transportType:i})})),FT(this,"setPendingSessionRequest",(async e=>{const{id:t,topic:r,params:n,verifyContext:i}=e,o=n.request.expiryTimestamp||Bw(_T.wc_sessionRequest.req.ttl);this.client.core.expirer.set(t,o),await this.client.pendingRequest.set(t,{id:t,topic:r,params:n,verifyContext:i})})),FT(this,"sendRequest",(async e=>{const{topic:t,method:n,params:i,expiry:o,relayRpcId:s,clientRpcId:a,throwOnFailedPublish:c,appLink:u,tvf:l}=e,h=oS(n,i,a);let f;const d=!!u;try{const e=d?rx:tx;f=await this.client.core.crypto.encode(t,h,{encoding:e})}catch(e){throw await this.cleanup(),this.client.logger.error(`sendRequest() -> core.crypto.encode() for topic ${t} failed`),e}let p;if(OT.includes(n)){const e=sx(JSON.stringify(h)),t=sx(f);p=await this.client.core.verify.register({id:t,decryptedId:e})}const g=_T[n].req;if(g.attestation=p,o&&(g.ttl=o),s&&(g.id=s),this.client.core.history.set(t,h),d){const e=Ax(u,t,f);await r.g.Linking.openURL(e,this.client.name)}else{const e=_T[n].req;o&&(e.ttl=o),s&&(e.id=s),e.tvf=jT(DT({},l),{correlationId:h.id}),c?(e.internal=jT(DT({},e.internal),{throwOnFailedPublish:!0}),await this.client.core.relayer.publish(t,f,e)):this.client.core.relayer.publish(t,f,e).catch((e=>this.client.logger.error(e)))}return h.id})),FT(this,"sendResult",(async e=>{const{id:t,topic:n,result:i,throwOnFailedPublish:o,encodeOpts:s,appLink:a}=e,c=sS(t,i);let u;const l=a&&typeof(null==r.g?void 0:r.g.Linking)<"u";try{const e=l?rx:tx;u=await this.client.core.crypto.encode(n,c,jT(DT({},s||{}),{encoding:e}))}catch(e){throw await this.cleanup(),this.client.logger.error(`sendResult() -> core.crypto.encode() for topic ${n} failed`),e}let h,f;try{h=await this.client.core.history.get(n,t);const e=h.request;try{this.shouldSetTVF(e.method,e.params)&&(f=this.getTVFParams(t,e.params,i))}catch(e){this.client.logger.warn("sendResult() -> getTVFParams() failed",e)}}catch(e){throw this.client.logger.error(`sendResult() -> history.get(${n}, ${t}) failed`),e}if(l){const e=Ax(a,n,u);await r.g.Linking.openURL(e,this.client.name)}else{const e=h.request.method,r=_T[e].res;r.tvf=jT(DT({},f),{correlationId:t}),o?(r.internal=jT(DT({},r.internal),{throwOnFailedPublish:!0}),await this.client.core.relayer.publish(n,u,r)):this.client.core.relayer.publish(n,u,r).catch((e=>this.client.logger.error(e)))}await this.client.core.history.resolve(c)})),FT(this,"sendError",(async e=>{const{id:t,topic:n,error:i,encodeOpts:o,rpcOpts:s,appLink:a}=e,c=aS(t,i);let u;const l=a&&typeof(null==r.g?void 0:r.g.Linking)<"u";try{const e=l?rx:tx;u=await this.client.core.crypto.encode(n,c,jT(DT({},o||{}),{encoding:e}))}catch(e){throw await this.cleanup(),this.client.logger.error(`sendError() -> core.crypto.encode() for topic ${n} failed`),e}let h;try{h=await this.client.core.history.get(n,t)}catch(e){throw this.client.logger.error(`sendError() -> history.get(${n}, ${t}) failed`),e}if(l){const e=Ax(a,n,u);await r.g.Linking.openURL(e,this.client.name)}else{const e=h.request.method,t=s||_T[e].res;this.client.core.relayer.publish(n,u,t)}await this.client.core.history.resolve(c)})),FT(this,"cleanup",(async()=>{const e=[],t=[];this.client.session.getAll().forEach((t=>{let r=!1;Uw(t.expiry)&&(r=!0),this.client.core.crypto.keychain.has(t.topic)||(r=!0),r&&e.push(t.topic)})),this.client.proposal.getAll().forEach((e=>{Uw(e.expiryTimestamp)&&t.push(e.id)})),await Promise.all([...e.map((e=>this.deleteSession({topic:e}))),...t.map((e=>this.deleteProposal(e)))])})),FT(this,"onProviderMessageEvent",(async e=>{!this.initialized||this.relayMessageCache.length>0?this.relayMessageCache.push(e):await this.onRelayMessage(e)})),FT(this,"onRelayEventRequest",(async e=>{this.requestQueue.queue.push(e),await this.processRequestsQueue()})),FT(this,"processRequestsQueue",(async()=>{if(this.requestQueue.state!==kT){for(this.client.logger.info(`Request queue starting with ${this.requestQueue.queue.length} requests`);this.requestQueue.queue.length>0;){this.requestQueue.state=kT;const e=this.requestQueue.queue.shift();if(e)try{await this.processRequest(e)}catch(e){this.client.logger.warn(e)}}this.requestQueue.state=ST}else this.client.logger.info("Request queue already active, skipping...")})),FT(this,"processRequest",(async e=>{const{topic:t,payload:r,attestation:n,transportType:i,encryptedId:o}=e,s=r.method;if(!this.shouldIgnorePairingRequest({topic:t,requestMethod:s}))switch(s){case"wc_sessionPropose":return await this.onSessionProposeRequest({topic:t,payload:r,attestation:n,encryptedId:o});case"wc_sessionSettle":return await this.onSessionSettleRequest(t,r);case"wc_sessionUpdate":return await this.onSessionUpdateRequest(t,r);case"wc_sessionExtend":return await this.onSessionExtendRequest(t,r);case"wc_sessionPing":return await this.onSessionPingRequest(t,r);case"wc_sessionDelete":return await this.onSessionDeleteRequest(t,r);case"wc_sessionRequest":return await this.onSessionRequest({topic:t,payload:r,attestation:n,encryptedId:o,transportType:i});case"wc_sessionEvent":return await this.onSessionEventRequest(t,r);case"wc_sessionAuthenticate":return await this.onSessionAuthenticateRequest({topic:t,payload:r,attestation:n,encryptedId:o,transportType:i});default:return this.client.logger.info(`Unsupported request method ${s}`)}})),FT(this,"onRelayEventResponse",(async e=>{const{topic:t,payload:r,transportType:n}=e,i=(await this.client.core.history.get(t,r.id)).request.method;switch(i){case"wc_sessionPropose":return this.onSessionProposeResponse(t,r,n);case"wc_sessionSettle":return this.onSessionSettleResponse(t,r);case"wc_sessionUpdate":return this.onSessionUpdateResponse(t,r);case"wc_sessionExtend":return this.onSessionExtendResponse(t,r);case"wc_sessionPing":return this.onSessionPingResponse(t,r);case"wc_sessionRequest":return this.onSessionRequestResponse(t,r);case"wc_sessionAuthenticate":return this.onSessionAuthenticateResponse(t,r);default:return this.client.logger.info(`Unsupported response method ${i}`)}})),FT(this,"onRelayEventUnknownPayload",(e=>{const{topic:t}=e,{message:r}=Ix("MISSING_OR_INVALID",`Decoded payload on topic ${t} is not identifiable as a JSON-RPC request or a response.`);throw new Error(r)})),FT(this,"shouldIgnorePairingRequest",(e=>{const{topic:t,requestMethod:r}=e,n=this.expectedPairingMethodMap.get(t);return!(!n||n.includes(r)||!(n.includes("wc_sessionAuthenticate")&&this.client.events.listenerCount("session_authenticate")>0))})),FT(this,"onSessionProposeRequest",(async e=>{const{topic:t,payload:r,attestation:n,encryptedId:i}=e,{params:o,id:s}=r;try{const e=this.client.core.eventClient.getEvent({topic:t});0===this.client.events.listenerCount("session_proposal")&&(console.warn("No listener for session_proposal event"),e?.setError("proposal_listener_not_found")),this.isValidConnect(DT({},r.params));const a=o.expiryTimestamp||Bw(_T.wc_sessionPropose.req.ttl),c=DT({id:s,pairingTopic:t,expiryTimestamp:a},o);await this.setProposal(s,c);const u=await this.getVerifyContext({attestationId:n,hash:sx(JSON.stringify(r)),encryptedId:i,metadata:c.proposer.metadata});e?.addTrace("emit_session_proposal"),this.client.events.emit("session_proposal",{id:s,params:c,verifyContext:u})}catch(e){await this.sendError({id:s,topic:t,error:e,rpcOpts:_T.wc_sessionPropose.autoReject}),this.client.logger.error(e)}})),FT(this,"onSessionProposeResponse",(async(e,t,r)=>{const{id:n}=t;if(mS(t)){const{result:i}=t;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",result:i});const o=this.client.proposal.get(n);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",proposal:o});const s=o.proposer.publicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",selfPublicKey:s});const a=i.responderPublicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",peerPublicKey:a});const c=await this.client.core.crypto.generateSharedKey(s,a);this.pendingSessions.set(n,{sessionTopic:c,pairingTopic:e,proposalId:n,publicKey:s});const u=await this.client.core.relayer.subscribe(c,{transportType:r});this.client.logger.trace({type:"method",method:"onSessionProposeResponse",subscriptionId:u}),await this.client.core.pairing.activate({topic:e})}else if(yS(t)){await this.client.proposal.delete(n,Ox("USER_DISCONNECTED"));const e=Dw("session_connect",n);if(0===this.events.listenerCount(e))throw new Error(`emitting ${e} without any listeners, 954`);this.events.emit(e,{error:t.error})}})),FT(this,"onSessionSettleRequest",(async(e,t)=>{const{id:r,params:n}=t;try{this.isValidSessionSettleRequest(n);const{relay:r,controller:i,expiry:o,namespaces:s,sessionProperties:a,scopedProperties:c,sessionConfig:u}=t.params,l=[...this.pendingSessions.values()].find((t=>t.sessionTopic===e));if(!l)return this.client.logger.error(`Pending session not found for topic ${e}`);const h=this.client.proposal.get(l.proposalId),f=jT(DT(DT(DT({topic:e,relay:r,expiry:o,namespaces:s,acknowledged:!0,pairingTopic:l.pairingTopic,requiredNamespaces:h.requiredNamespaces,optionalNamespaces:h.optionalNamespaces,controller:i.publicKey,self:{publicKey:l.publicKey,metadata:this.client.metadata},peer:{publicKey:i.publicKey,metadata:i.metadata}},a&&{sessionProperties:a}),c&&{scopedProperties:c}),u&&{sessionConfig:u}),{transportType:DS.relay});await this.client.session.set(f.topic,f),await this.setExpiry(f.topic,f.expiry),await this.client.core.pairing.updateMetadata({topic:l.pairingTopic,metadata:f.peer.metadata}),this.client.events.emit("session_connect",{session:f}),this.events.emit(Dw("session_connect",l.proposalId),{session:f}),this.pendingSessions.delete(l.proposalId),this.deleteProposal(l.proposalId,!1),this.cleanupDuplicatePairings(f),await this.sendResult({id:t.id,topic:e,result:!0,throwOnFailedPublish:!0})}catch(t){await this.sendError({id:r,topic:e,error:t}),this.client.logger.error(t)}})),FT(this,"onSessionSettleResponse",(async(e,t)=>{const{id:r}=t;mS(t)?(await this.client.session.update(e,{acknowledged:!0}),this.events.emit(Dw("session_approve",r),{})):yS(t)&&(await this.client.session.delete(e,Ox("USER_DISCONNECTED")),this.events.emit(Dw("session_approve",r),{error:t.error}))})),FT(this,"onSessionUpdateRequest",(async(e,t)=>{const{params:r,id:n}=t;try{const t=`${e}_session_update`,i=Kx.get(t);if(i&&this.isRequestOutOfSync(i,n))return this.client.logger.warn(`Discarding out of sync request - ${n}`),void this.sendError({id:n,topic:e,error:Ox("INVALID_UPDATE_REQUEST")});this.isValidUpdate(DT({topic:e},r));try{Kx.set(t,n),await this.client.session.update(e,{namespaces:r.namespaces}),await this.sendResult({id:n,topic:e,result:!0,throwOnFailedPublish:!0})}catch(e){throw Kx.delete(t),e}this.client.events.emit("session_update",{id:n,topic:e,params:r})}catch(t){await this.sendError({id:n,topic:e,error:t}),this.client.logger.error(t)}})),FT(this,"isRequestOutOfSync",((e,t)=>t.toString().slice(0,-3)<e.toString().slice(0,-3))),FT(this,"onSessionUpdateResponse",((e,t)=>{const{id:r}=t,n=Dw("session_update",r);if(0===this.events.listenerCount(n))throw new Error(`emitting ${n} without any listeners`);mS(t)?this.events.emit(Dw("session_update",r),{}):yS(t)&&this.events.emit(Dw("session_update",r),{error:t.error})})),FT(this,"onSessionExtendRequest",(async(e,t)=>{const{id:r}=t;try{this.isValidExtend({topic:e}),await this.setExpiry(e,Bw(AT)),await this.sendResult({id:r,topic:e,result:!0,throwOnFailedPublish:!0}),this.client.events.emit("session_extend",{id:r,topic:e})}catch(t){await this.sendError({id:r,topic:e,error:t}),this.client.logger.error(t)}})),FT(this,"onSessionExtendResponse",((e,t)=>{const{id:r}=t,n=Dw("session_extend",r);if(0===this.events.listenerCount(n))throw new Error(`emitting ${n} without any listeners`);mS(t)?this.events.emit(Dw("session_extend",r),{}):yS(t)&&this.events.emit(Dw("session_extend",r),{error:t.error})})),FT(this,"onSessionPingRequest",(async(e,t)=>{const{id:r}=t;try{this.isValidPing({topic:e}),await this.sendResult({id:r,topic:e,result:!0,throwOnFailedPublish:!0}),this.client.events.emit("session_ping",{id:r,topic:e})}catch(t){await this.sendError({id:r,topic:e,error:t}),this.client.logger.error(t)}})),FT(this,"onSessionPingResponse",((e,t)=>{const{id:r}=t,n=Dw("session_ping",r);setTimeout((()=>{if(0===this.events.listenerCount(n))throw new Error(`emitting ${n} without any listeners 2176`);mS(t)?this.events.emit(Dw("session_ping",r),{}):yS(t)&&this.events.emit(Dw("session_ping",r),{error:t.error})}),500)})),FT(this,"onSessionDeleteRequest",(async(e,t)=>{const{id:r}=t;try{this.isValidDisconnect({topic:e,reason:t.params}),Promise.all([new Promise((t=>{this.client.core.relayer.once(NS,(async()=>{t(await this.deleteSession({topic:e,id:r}))}))})),this.sendResult({id:r,topic:e,result:!0,throwOnFailedPublish:!0}),this.cleanupPendingSentRequestsForTopic({topic:e,error:Ox("USER_DISCONNECTED")})]).catch((e=>this.client.logger.error(e)))}catch(e){this.client.logger.error(e)}})),FT(this,"onSessionRequest",(async e=>{var t,r,n;const{topic:i,payload:o,attestation:s,encryptedId:a,transportType:c}=e,{id:u,params:l}=o;try{await this.isValidRequest(DT({topic:i},l));const e=this.client.session.get(i),o={id:u,topic:i,params:l,verifyContext:await this.getVerifyContext({attestationId:s,hash:sx(JSON.stringify(oS("wc_sessionRequest",l,u))),encryptedId:a,metadata:e.peer.metadata,transportType:c})};await this.setPendingSessionRequest(o),c===DS.link_mode&&null!=(t=e.peer.metadata.redirect)&&t.universal&&this.client.core.addLinkModeSupportedApp(null==(r=e.peer.metadata.redirect)?void 0:r.universal),null!=(n=this.client.signConfig)&&n.disableRequestQueue?this.emitSessionRequest(o):(this.addSessionRequestToSessionRequestQueue(o),this.processSessionRequestQueue())}catch(e){await this.sendError({id:u,topic:i,error:e}),this.client.logger.error(e)}})),FT(this,"onSessionRequestResponse",((e,t)=>{const{id:r}=t,n=Dw("session_request",r);if(0===this.events.listenerCount(n))throw new Error(`emitting ${n} without any listeners`);mS(t)?this.events.emit(Dw("session_request",r),{result:t.result}):yS(t)&&this.events.emit(Dw("session_request",r),{error:t.error})})),FT(this,"onSessionEventRequest",(async(e,t)=>{const{id:r,params:n}=t;try{const t=`${e}_session_event_${n.event.name}`,i=Kx.get(t);if(i&&this.isRequestOutOfSync(i,r))return void this.client.logger.info(`Discarding out of sync request - ${r}`);this.isValidEmit(DT({topic:e},n)),this.client.events.emit("session_event",{id:r,topic:e,params:n}),Kx.set(t,r)}catch(t){await this.sendError({id:r,topic:e,error:t}),this.client.logger.error(t)}})),FT(this,"onSessionAuthenticateResponse",((e,t)=>{const{id:r}=t;this.client.logger.trace({type:"method",method:"onSessionAuthenticateResponse",topic:e,payload:t}),mS(t)?this.events.emit(Dw("session_request",r),{result:t.result}):yS(t)&&this.events.emit(Dw("session_request",r),{error:t.error})})),FT(this,"onSessionAuthenticateRequest",(async e=>{var t;const{topic:r,payload:n,attestation:i,encryptedId:o,transportType:s}=e;try{const{requester:e,authPayload:a,expiryTimestamp:c}=n.params,u=await this.getVerifyContext({attestationId:i,hash:sx(JSON.stringify(n)),encryptedId:o,metadata:e.metadata,transportType:s}),l={requester:e,pairingTopic:r,id:n.id,authPayload:a,verifyContext:u,expiryTimestamp:c};await this.setAuthRequest(n.id,{request:l,pairingTopic:r,transportType:s}),s===DS.link_mode&&null!=(t=e.metadata.redirect)&&t.universal&&this.client.core.addLinkModeSupportedApp(e.metadata.redirect.universal),this.client.events.emit("session_authenticate",{topic:r,params:n.params,id:n.id,verifyContext:u})}catch(e){this.client.logger.error(e);const t=n.params.requester.publicKey,i=await this.client.core.crypto.generateKeyPair(),o=this.getAppLinkIfEnabled(n.params.requester.metadata,s),a={type:1,receiverPublicKey:t,senderPublicKey:i};await this.sendError({id:n.id,topic:r,error:e,encodeOpts:a,rpcOpts:_T.wc_sessionAuthenticate.autoReject,appLink:o})}})),FT(this,"addSessionRequestToSessionRequestQueue",(e=>{this.sessionRequestQueue.queue.push(e)})),FT(this,"cleanupAfterResponse",(e=>{this.deletePendingSessionRequest(e.response.id,{message:"fulfilled",code:0}),setTimeout((()=>{this.sessionRequestQueue.state=ST,this.processSessionRequestQueue()}),(0,Df.toMiliseconds)(this.requestQueueDelay))})),FT(this,"cleanupPendingSentRequestsForTopic",(({topic:e,error:t})=>{const r=this.client.core.history.pending;r.length>0&&r.filter((t=>t.topic===e&&"wc_sessionRequest"===t.request.method)).forEach((e=>{const r=Dw("session_request",e.request.id);if(0===this.events.listenerCount(r))throw new Error(`emitting ${r} without any listeners`);this.events.emit(Dw("session_request",e.request.id),{error:t})}))})),FT(this,"processSessionRequestQueue",(()=>{if(this.sessionRequestQueue.state===kT)return void this.client.logger.info("session request queue is already active.");const e=this.sessionRequestQueue.queue[0];if(e)try{this.sessionRequestQueue.state=kT,this.emitSessionRequest(e)}catch(e){this.client.logger.error(e)}else this.client.logger.info("session request queue is empty.")})),FT(this,"emitSessionRequest",(e=>{this.client.events.emit("session_request",e)})),FT(this,"onPairingCreated",(e=>{if(e.methods&&this.expectedPairingMethodMap.set(e.topic,e.methods),e.active)return;const t=this.client.proposal.getAll().find((t=>t.pairingTopic===e.topic));t&&this.onSessionProposeRequest({topic:e.topic,payload:oS("wc_sessionPropose",jT(DT({},t),{requiredNamespaces:t.requiredNamespaces,optionalNamespaces:t.optionalNamespaces,relays:t.relays,proposer:t.proposer,sessionProperties:t.sessionProperties,scopedProperties:t.scopedProperties}),t.id)})})),FT(this,"isValidConnect",(async e=>{if(!jx(e)){const{message:t}=Ix("MISSING_OR_INVALID",`connect() params: ${JSON.stringify(e)}`);throw new Error(t)}const{pairingTopic:t,requiredNamespaces:r,optionalNamespaces:n,sessionProperties:i,scopedProperties:o,relays:s}=e;if(Rx(t)||await this.isValidPairingTopic(t),!function(e){let t=!1;return e?e&&Tx(e)&&e.length&&e.forEach((e=>{t=Dx(e)})):t=!0,t}(s)){const{message:e}=Ix("MISSING_OR_INVALID",`connect() relays: ${s}`);throw new Error(e)}if(!Rx(r)&&0!==Px(r)&&this.validateNamespaces(r,"requiredNamespaces"),!Rx(n)&&0!==Px(n)&&this.validateNamespaces(n,"optionalNamespaces"),Rx(i)||this.validateSessionProps(i,"sessionProperties"),!Rx(o)){this.validateSessionProps(o,"scopedProperties");const e=Object.keys(r||{}).concat(Object.keys(n||{}));if(!Object.keys(o).every((t=>e.includes(t))))throw new Error(`Scoped properties must be a subset of required/optional namespaces, received: ${JSON.stringify(o)}, required/optional namespaces: ${JSON.stringify(e)}`)}})),FT(this,"validateNamespaces",((e,t)=>{const r=function(e,t,r){let n=null;if(e&&Px(e)){const i=Bx(e,t);i&&(n=i);const o=function(e,t,r){let n=null;return Object.entries(e).forEach((([e,i])=>{if(n)return;const o=function(e,t,r){let n=null;return Tx(t)&&t.length?t.forEach((e=>{n||Mx(e)||(n=Ox("UNSUPPORTED_CHAINS",`${r}, chain ${e} should be a string and conform to "namespace:chainId" format`))})):Mx(e)||(n=Ox("UNSUPPORTED_CHAINS",`${r}, chains must be defined as "namespace:chainId" e.g. "eip155:1": {...} in the namespace key OR as an array of CAIP-2 chainIds e.g. eip155: { chains: ["eip155:1", "eip155:5"] }`)),n}(e,lw(e,i),`${t} ${r}`);o&&(n=o)})),n}(e,t,r);o&&(n=o)}else n=Ix("MISSING_OR_INVALID",`${t}, ${r} should be an object with data`);return n}(e,"connect()",t);if(r)throw new Error(r.message)})),FT(this,"isValidApprove",(async e=>{if(!jx(e))throw new Error(Ix("MISSING_OR_INVALID",`approve() params: ${e}`).message);const{id:t,namespaces:r,relayProtocol:n,sessionProperties:i,scopedProperties:o}=e;this.checkRecentlyDeleted(t),await this.isValidProposalId(t);const s=this.client.proposal.get(t),a=Ux(r,"approve()");if(a)throw new Error(a.message);const c=zx(s.requiredNamespaces,r,"approve()");if(c)throw new Error(c.message);if(!Nx(n,!0)){const{message:e}=Ix("MISSING_OR_INVALID",`approve() relayProtocol: ${n}`);throw new Error(e)}if(Rx(i)||this.validateSessionProps(i,"sessionProperties"),!Rx(o)){this.validateSessionProps(o,"scopedProperties");const e=new Set(Object.keys(r));if(!Object.keys(o).every((t=>e.has(t))))throw new Error(`Scoped properties must be a subset of approved namespaces, received: ${JSON.stringify(o)}, approved namespaces: ${Array.from(e).join(", ")}`)}})),FT(this,"isValidReject",(async e=>{if(!jx(e)){const{message:t}=Ix("MISSING_OR_INVALID",`reject() params: ${e}`);throw new Error(t)}const{id:t,reason:r}=e;if(this.checkRecentlyDeleted(t),await this.isValidProposalId(t),!function(e){return!!(e&&"object"==typeof e&&e.code&&Cx(e.code,!1)&&e.message&&Nx(e.message,!1))}(r)){const{message:e}=Ix("MISSING_OR_INVALID",`reject() reason: ${JSON.stringify(r)}`);throw new Error(e)}})),FT(this,"isValidSessionSettleRequest",(e=>{if(!jx(e)){const{message:t}=Ix("MISSING_OR_INVALID",`onSessionSettleRequest() params: ${e}`);throw new Error(t)}const{relay:t,controller:r,namespaces:n,expiry:i}=e;if(!Dx(t)){const{message:e}=Ix("MISSING_OR_INVALID","onSessionSettleRequest() relay protocol should be a string");throw new Error(e)}const o=function(e){let t=null;return Nx(e?.publicKey,!1)||(t=Ix("MISSING_OR_INVALID","onSessionSettleRequest() controller public key should be a string")),t}(r);if(o)throw new Error(o.message);const s=Ux(n,"onSessionSettleRequest()");if(s)throw new Error(s.message);if(Uw(i)){const{message:e}=Ix("EXPIRED","onSessionSettleRequest()");throw new Error(e)}})),FT(this,"isValidUpdate",(async e=>{if(!jx(e)){const{message:t}=Ix("MISSING_OR_INVALID",`update() params: ${e}`);throw new Error(t)}const{topic:t,namespaces:r}=e;this.checkRecentlyDeleted(t),await this.isValidSessionTopic(t);const n=this.client.session.get(t),i=Ux(r,"update()");if(i)throw new Error(i.message);const o=zx(n.requiredNamespaces,r,"update()");if(o)throw new Error(o.message)})),FT(this,"isValidExtend",(async e=>{if(!jx(e)){const{message:t}=Ix("MISSING_OR_INVALID",`extend() params: ${e}`);throw new Error(t)}const{topic:t}=e;this.checkRecentlyDeleted(t),await this.isValidSessionTopic(t)})),FT(this,"isValidRequest",(async e=>{if(!jx(e)){const{message:t}=Ix("MISSING_OR_INVALID",`request() params: ${e}`);throw new Error(t)}const{topic:t,request:r,chainId:n,expiry:i}=e;this.checkRecentlyDeleted(t),await this.isValidSessionTopic(t);const{namespaces:o}=this.client.session.get(t);if(!Fx(o,n)){const{message:e}=Ix("MISSING_OR_INVALID",`request() chainId: ${n}`);throw new Error(e)}if(!function(e){return!(Rx(e)||!Nx(e.method,!1))}(r)){const{message:e}=Ix("MISSING_OR_INVALID",`request() ${JSON.stringify(r)}`);throw new Error(e)}if(!function(e,t,r){return!!Nx(r,!1)&&function(e,t){const r=[];return Object.values(e).forEach((e=>{_x(e.accounts).includes(t)&&r.push(...e.methods)})),r}(e,t).includes(r)}(o,n,r.method)){const{message:e}=Ix("MISSING_OR_INVALID",`request() method: ${r.method}`);throw new Error(e)}if(i&&!function(e,t){return Cx(e,!1)&&e<=t.max&&e>=t.min}(i,xT)){const{message:e}=Ix("MISSING_OR_INVALID",`request() expiry: ${i}. Expiry must be a number (in seconds) between ${xT.min} and ${xT.max}`);throw new Error(e)}})),FT(this,"isValidRespond",(async e=>{var t;if(!jx(e)){const{message:t}=Ix("MISSING_OR_INVALID",`respond() params: ${e}`);throw new Error(t)}const{topic:r,response:n}=e;try{await this.isValidSessionTopic(r)}catch(r){throw null!=(t=e?.response)&&t.id&&this.cleanupAfterResponse(e),r}if(!function(e){return!(Rx(e)||Rx(e.result)&&Rx(e.error)||!Cx(e.id,!1)||!Nx(e.jsonrpc,!1))}(n)){const{message:e}=Ix("MISSING_OR_INVALID",`respond() response: ${JSON.stringify(n)}`);throw new Error(e)}})),FT(this,"isValidPing",(async e=>{if(!jx(e)){const{message:t}=Ix("MISSING_OR_INVALID",`ping() params: ${e}`);throw new Error(t)}const{topic:t}=e;await this.isValidSessionOrPairingTopic(t)})),FT(this,"isValidEmit",(async e=>{if(!jx(e)){const{message:t}=Ix("MISSING_OR_INVALID",`emit() params: ${e}`);throw new Error(t)}const{topic:t,event:r,chainId:n}=e;await this.isValidSessionTopic(t);const{namespaces:i}=this.client.session.get(t);if(!Fx(i,n)){const{message:e}=Ix("MISSING_OR_INVALID",`emit() chainId: ${n}`);throw new Error(e)}if(!function(e){return!(Rx(e)||!Nx(e.name,!1))}(r)){const{message:e}=Ix("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(r)}`);throw new Error(e)}if(!function(e,t,r){return!!Nx(r,!1)&&function(e,t){const r=[];return Object.values(e).forEach((e=>{_x(e.accounts).includes(t)&&r.push(...e.events)})),r}(e,t).includes(r)}(i,n,r.name)){const{message:e}=Ix("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(r)}`);throw new Error(e)}})),FT(this,"isValidDisconnect",(async e=>{if(!jx(e)){const{message:t}=Ix("MISSING_OR_INVALID",`disconnect() params: ${e}`);throw new Error(t)}const{topic:t}=e;await this.isValidSessionOrPairingTopic(t)})),FT(this,"isValidAuthenticate",(e=>{const{chains:t,uri:r,domain:n,nonce:i}=e;if(!Array.isArray(t)||0===t.length)throw new Error("chains is required and must be a non-empty array");if(!Nx(r,!1))throw new Error("uri is required parameter");if(!Nx(n,!1))throw new Error("domain is required parameter");if(!Nx(i,!1))throw new Error("nonce is required parameter");if([...new Set(t.map((e=>uw(e).namespace)))].length>1)throw new Error("Multi-namespace requests are not supported. Please request single namespace only.");const{namespace:o}=uw(t[0]);if("eip155"!==o)throw new Error("Only eip155 namespace is supported for authenticated sessions. Please use .connect() for non-eip155 chains.")})),FT(this,"getVerifyContext",(async e=>{const{attestationId:t,hash:r,encryptedId:n,metadata:i,transportType:o}=e,s={verified:{verifyUrl:i.verifyUrl||ZS,validation:"UNKNOWN",origin:i.url||""}};try{if(o===DS.link_mode){const e=this.getAppLinkIfEnabled(i,o);return s.verified.validation=e&&new URL(e).origin===new URL(i.url).origin?"VALID":"INVALID",s}const e=await this.client.core.verify.resolve({attestationId:t,hash:r,encryptedId:n,verifyUrl:i.verifyUrl});e&&(s.verified.origin=e.origin,s.verified.isScam=e.isScam,s.verified.validation=e.origin===new URL(i.url).origin?"VALID":"INVALID")}catch(e){this.client.logger.warn(e)}return this.client.logger.debug(`Verify context: ${JSON.stringify(s)}`),s})),FT(this,"validateSessionProps",((e,t)=>{Object.values(e).forEach(((r,n)=>{if(null==r){const{message:i}=Ix("MISSING_OR_INVALID",`${t} must contain an existing value for each key. Received: ${r} for key ${Object.keys(e)[n]}`);throw new Error(i)}}))})),FT(this,"getPendingAuthRequest",(e=>{const t=this.client.auth.requests.get(e);return"object"==typeof t?t:void 0})),FT(this,"addToRecentlyDeleted",((e,t)=>{if(this.recentlyDeletedMap.set(e,t),this.recentlyDeletedMap.size>=this.recentlyDeletedLimit){let e=0;const t=this.recentlyDeletedLimit/2;for(const r of this.recentlyDeletedMap.keys()){if(e++>=t)break;this.recentlyDeletedMap.delete(r)}}})),FT(this,"checkRecentlyDeleted",(e=>{const t=this.recentlyDeletedMap.get(e);if(t){const{message:r}=Ix("MISSING_OR_INVALID",`Record was recently deleted - ${t}: ${e}`);throw new Error(r)}})),FT(this,"isLinkModeEnabled",((e,t)=>{var n,i,o,s,a,c,u,l,h;return!(!e||t!==DS.link_mode)&&!0===(null==(i=null==(n=this.client.metadata)?void 0:n.redirect)?void 0:i.linkMode)&&void 0!==(null==(s=null==(o=this.client.metadata)?void 0:o.redirect)?void 0:s.universal)&&""!==(null==(c=null==(a=this.client.metadata)?void 0:a.redirect)?void 0:c.universal)&&void 0!==(null==(u=e?.redirect)?void 0:u.universal)&&""!==(null==(l=e?.redirect)?void 0:l.universal)&&!0===(null==(h=e?.redirect)?void 0:h.linkMode)&&this.client.core.linkModeSupportedApps.includes(e.redirect.universal)&&typeof(null==r.g?void 0:r.g.Linking)<"u"})),FT(this,"getAppLinkIfEnabled",((e,t)=>{var r;return this.isLinkModeEnabled(e,t)?null==(r=e?.redirect)?void 0:r.universal:void 0})),FT(this,"handleLinkModeMessage",(({url:e})=>{if(!e||!e.includes("wc_ev")||!e.includes("topic"))return;const t=Fw(e,"topic")||"",r=decodeURIComponent(Fw(e,"wc_ev")||""),n=this.client.session.keys.includes(t);n&&this.client.session.update(t,{transportType:DS.link_mode}),this.client.core.dispatchEnvelope({topic:t,message:r,sessionExists:n})})),FT(this,"registerLinkModeListeners",(async()=>{var e;if(qw()||_w()&&null!=(e=this.client.metadata.redirect)&&e.linkMode){const e=null==r.g?void 0:r.g.Linking;if(typeof e<"u"){e.addEventListener("url",this.handleLinkModeMessage,this.client.name);const t=await e.getInitialURL();t&&setTimeout((()=>{this.handleLinkModeMessage({url:t})}),50)}}})),FT(this,"shouldSetTVF",((e,t)=>{if(!t||"wc_sessionRequest"!==e)return!1;const{request:r}=t;return Object.keys(IT).includes(r.method)})),FT(this,"getTVFParams",((e,t,r)=>{var n,i;try{const o=t.request.method,s=this.extractTxHashesFromResult(o,r);return jT(DT({correlationId:e,rpcMethods:[o],chainId:t.chainId},this.isValidContractData(t.request.params)&&{contractAddresses:[null==(i=null==(n=t.request.params)?void 0:n[0])?void 0:i.to]}),{txHashes:s})}catch(e){this.client.logger.warn("Error getting TVF params",e)}return{}})),FT(this,"isValidContractData",(e=>{var t;if(!e)return!1;try{const r=e?.data||(null==(t=e?.[0])?void 0:t.data);if(!r.startsWith("0x"))return!1;const n=r.slice(2);return!!/^[0-9a-fA-F]*$/.test(n)&&n.length%2==0}catch{}return!1})),FT(this,"extractTxHashesFromResult",((e,t)=>{try{if("string"==typeof t)return[t];const r=t[IT[e].key];if(Tx(r))return"solana_signAllTransactions"===e?r.map((e=>function(e){const t=atob(e),r=new Uint8Array(t.length);for(let e=0;e<t.length;e++)r[e]=t.charCodeAt(e);const n=r[0];if(0===n)throw new Error("No signatures found");const i=1+64*n;if(r.length<i)throw new Error("Transaction data too short for claimed signature count");if(r.length<100)throw new Error("Transaction too short");const o=Buffer.from(e,"base64").slice(1,65);return Mv.encode(o)}(e))):r;if("string"==typeof r)return[r]}catch(e){this.client.logger.warn("Error extracting tx hashes from result",e)}return[]}))}async processPendingMessageEvents(){try{const e=this.client.session.keys,t=this.client.core.relayer.messages.getWithoutAck(e);for(const[e,r]of Object.entries(t))for(const t of r)try{await this.onProviderMessageEvent({topic:e,message:t,publishedAt:Date.now()})}catch{this.client.logger.warn(`Error processing pending message event for topic: ${e}, message: ${t}`)}}catch(e){this.client.logger.warn("processPendingMessageEvents failed",e)}}isInitialized(){if(!this.initialized){const{message:e}=Ix("NOT_INITIALIZED",this.name);throw new Error(e)}}async confirmOnlineStateOrThrow(){await this.client.core.relayer.confirmOnlineStateOrThrow()}registerRelayerEvents(){this.client.core.relayer.on(TS,(e=>{this.onProviderMessageEvent(e)}))}async onRelayMessage(e){const{topic:t,message:r,attestation:n,transportType:i}=e,{publicKey:o}=this.client.auth.authKeys.keys.includes(PT)?this.client.auth.authKeys.get(PT):{responseTopic:void 0,publicKey:void 0};try{const e=await this.client.core.crypto.decode(t,r,{receiverPublicKey:o,encoding:i===DS.link_mode?rx:tx});pS(e)?(this.client.core.history.set(t,e),await this.onRelayEventRequest({topic:t,payload:e,attestation:n,transportType:i,encryptedId:sx(r)})):gS(e)?(await this.client.core.history.resolve(e),await this.onRelayEventResponse({topic:t,payload:e,transportType:i}),this.client.core.history.delete(t,e.id)):await this.onRelayEventUnknownPayload({topic:t,payload:e,transportType:i}),await this.client.core.relayer.messages.ack(t,r)}catch(e){this.client.logger.error(e)}}registerExpirerEvents(){this.client.core.expirer.on(QS,(async e=>{const{topic:t,id:r}=Lw(e.target);return r&&this.client.pendingRequest.keys.includes(r)?await this.deletePendingSessionRequest(r,Ix("EXPIRED"),!0):r&&this.client.auth.requests.keys.includes(r)?await this.deletePendingAuthRequest(r,Ix("EXPIRED"),!0):void(t?this.client.session.keys.includes(t)&&(await this.deleteSession({topic:t,expirerHasDeleted:!0}),this.client.events.emit("session_expire",{topic:t})):r&&(await this.deleteProposal(r,!0),this.client.events.emit("proposal_expire",{id:r})))}))}registerPairingEvents(){this.client.core.pairing.events.on(HS,(e=>this.onPairingCreated(e))),this.client.core.pairing.events.on(KS,(e=>{this.addToRecentlyDeleted(e.topic,"pairing")}))}isValidPairingTopic(e){if(!Nx(e,!1)){const{message:t}=Ix("MISSING_OR_INVALID",`pairing topic should be a string: ${e}`);throw new Error(t)}if(!this.client.core.pairing.pairings.keys.includes(e)){const{message:t}=Ix("NO_MATCHING_KEY",`pairing topic doesn't exist: ${e}`);throw new Error(t)}if(Uw(this.client.core.pairing.pairings.get(e).expiry)){const{message:t}=Ix("EXPIRED",`pairing topic: ${e}`);throw new Error(t)}}async isValidSessionTopic(e){if(!Nx(e,!1)){const{message:t}=Ix("MISSING_OR_INVALID",`session topic should be a string: ${e}`);throw new Error(t)}if(this.checkRecentlyDeleted(e),!this.client.session.keys.includes(e)){const{message:t}=Ix("NO_MATCHING_KEY",`session topic doesn't exist: ${e}`);throw new Error(t)}if(Uw(this.client.session.get(e).expiry)){await this.deleteSession({topic:e});const{message:t}=Ix("EXPIRED",`session topic: ${e}`);throw new Error(t)}if(!this.client.core.crypto.keychain.has(e)){const{message:t}=Ix("MISSING_OR_INVALID",`session topic does not exist in keychain: ${e}`);throw await this.deleteSession({topic:e}),new Error(t)}}async isValidSessionOrPairingTopic(e){if(this.checkRecentlyDeleted(e),this.client.session.keys.includes(e))await this.isValidSessionTopic(e);else{if(!this.client.core.pairing.pairings.keys.includes(e)){if(Nx(e,!1)){const{message:t}=Ix("NO_MATCHING_KEY",`session or pairing topic doesn't exist: ${e}`);throw new Error(t)}{const{message:t}=Ix("MISSING_OR_INVALID",`session or pairing topic should be a string: ${e}`);throw new Error(t)}}this.isValidPairingTopic(e)}}async isValidProposalId(e){if(!function(e){return"number"==typeof e}(e)){const{message:t}=Ix("MISSING_OR_INVALID",`proposal id should be a number: ${e}`);throw new Error(t)}if(!this.client.proposal.keys.includes(e)){const{message:t}=Ix("NO_MATCHING_KEY",`proposal id doesn't exist: ${e}`);throw new Error(t)}if(Uw(this.client.proposal.get(e).expiryTimestamp)){await this.deleteProposal(e);const{message:t}=Ix("EXPIRED",`proposal id: ${e}`);throw new Error(t)}}}class qT extends DO{constructor(e,t){super(e,t,"proposal",vT),this.core=e,this.logger=t}}class GT extends DO{constructor(e,t){super(e,t,"session",vT),this.core=e,this.logger=t}}class HT extends DO{constructor(e,t){super(e,t,"request",vT,(e=>e.id)),this.core=e,this.logger=t}}class KT extends DO{constructor(e,t){super(e,t,"authKeys",TT,(()=>PT)),this.core=e,this.logger=t}}class VT extends DO{constructor(e,t){super(e,t,"pairingTopics",TT),this.core=e,this.logger=t}}class WT extends DO{constructor(e,t){super(e,t,"requests",TT,(e=>e.id)),this.core=e,this.logger=t}}var $T=Object.defineProperty,JT=(e,t,r)=>((e,t,r)=>t in e?$T(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r)(e,"symbol"!=typeof t?t+"":t,r);class YT{constructor(e,t){this.core=e,this.logger=t,JT(this,"authKeys"),JT(this,"pairingTopics"),JT(this,"requests"),this.authKeys=new KT(this.core,this.logger),this.pairingTopics=new VT(this.core,this.logger),this.requests=new WT(this.core,this.logger)}async init(){await this.authKeys.init(),await this.pairingTopics.init(),await this.requests.init()}}var QT=Object.defineProperty,XT=(e,t,r)=>((e,t,r)=>t in e?QT(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r)(e,"symbol"!=typeof t?t+"":t,r);class ZT extends rp{constructor(e){super(e),XT(this,"protocol","wc"),XT(this,"version",2),XT(this,"name",bT),XT(this,"metadata"),XT(this,"core"),XT(this,"logger"),XT(this,"events",new Et.EventEmitter),XT(this,"engine"),XT(this,"session"),XT(this,"proposal"),XT(this,"pendingRequest"),XT(this,"auth"),XT(this,"signConfig"),XT(this,"on",((e,t)=>this.events.on(e,t))),XT(this,"once",((e,t)=>this.events.once(e,t))),XT(this,"off",((e,t)=>this.events.off(e,t))),XT(this,"removeListener",((e,t)=>this.events.removeListener(e,t))),XT(this,"removeAllListeners",(e=>this.events.removeAllListeners(e))),XT(this,"connect",(async e=>{try{return await this.engine.connect(e)}catch(e){throw this.logger.error(e.message),e}})),XT(this,"pair",(async e=>{try{return await this.engine.pair(e)}catch(e){throw this.logger.error(e.message),e}})),XT(this,"approve",(async e=>{try{return await this.engine.approve(e)}catch(e){throw this.logger.error(e.message),e}})),XT(this,"reject",(async e=>{try{return await this.engine.reject(e)}catch(e){throw this.logger.error(e.message),e}})),XT(this,"update",(async e=>{try{return await this.engine.update(e)}catch(e){throw this.logger.error(e.message),e}})),XT(this,"extend",(async e=>{try{return await this.engine.extend(e)}catch(e){throw this.logger.error(e.message),e}})),XT(this,"request",(async e=>{try{return await this.engine.request(e)}catch(e){throw this.logger.error(e.message),e}})),XT(this,"respond",(async e=>{try{return await this.engine.respond(e)}catch(e){throw this.logger.error(e.message),e}})),XT(this,"ping",(async e=>{try{return await this.engine.ping(e)}catch(e){throw this.logger.error(e.message),e}})),XT(this,"emit",(async e=>{try{return await this.engine.emit(e)}catch(e){throw this.logger.error(e.message),e}})),XT(this,"disconnect",(async e=>{try{return await this.engine.disconnect(e)}catch(e){throw this.logger.error(e.message),e}})),XT(this,"find",(e=>{try{return this.engine.find(e)}catch(e){throw this.logger.error(e.message),e}})),XT(this,"getPendingSessionRequests",(()=>{try{return this.engine.getPendingSessionRequests()}catch(e){throw this.logger.error(e.message),e}})),XT(this,"authenticate",(async(e,t)=>{try{return await this.engine.authenticate(e,t)}catch(e){throw this.logger.error(e.message),e}})),XT(this,"formatAuthMessage",(e=>{try{return this.engine.formatAuthMessage(e)}catch(e){throw this.logger.error(e.message),e}})),XT(this,"approveSessionAuthenticate",(async e=>{try{return await this.engine.approveSessionAuthenticate(e)}catch(e){throw this.logger.error(e.message),e}})),XT(this,"rejectSessionAuthenticate",(async e=>{try{return await this.engine.rejectSessionAuthenticate(e)}catch(e){throw this.logger.error(e.message),e}})),this.name=e?.name||bT,this.metadata=function(e){var t,r;const n=Iw();try{return null!=e&&e.url&&n.url&&e.url!==n.url&&(console.warn(`The configured WalletConnect 'metadata.url':${e.url} differs from the actual page url:${n.url}. This is probably unintended and can lead to issues.`),e.url=n.url),null!=(t=e?.icons)&&t.length&&e.icons.length>0&&(e.icons=e.icons.filter((e=>""!==e))),((e,t)=>fw(e,dw(t)))(vw(vw({},n),e),{url:e?.url||n.url,name:e?.name||n.name,description:e?.description||n.description,icons:null!=(r=e?.icons)&&r.length&&e.icons.length>0?e.icons:n.icons})}catch(t){return console.warn("Error populating app metadata",t),e||n}}(e?.metadata),this.signConfig=e?.signConfig;const t=typeof e?.logger<"u"&&"string"!=typeof e?.logger?e.logger:wd()(Bd({level:e?.logger||"error"}));this.core=e?.core||new mT(e),this.logger=Dd(t,this.name),this.session=new GT(this.core,this.logger),this.proposal=new qT(this.core,this.logger),this.pendingRequest=new HT(this.core,this.logger),this.engine=new zT(this),this.auth=new YT(this.core,this.logger)}static async init(e){const t=new ZT(e);return await t.initialize(),t}get context(){return Ud(this.logger)}get pairing(){return this.core.pairing.pairings}async initialize(){this.logger.trace("Initialized");try{await this.core.start(),await this.session.init(),await this.proposal.init(),await this.pendingRequest.init(),await this.auth.init(),await this.engine.init(),this.logger.info("SignClient Initialization Success"),setTimeout((()=>{this.engine.processRelayMessageCache()}),(0,Df.toMiliseconds)(Df.ONE_SECOND))}catch(e){throw this.logger.info("SignClient Initialization Failure"),this.logger.error(e.message),e}}}var eP,tP,rP,nP,iP,oP,sP,aP,cP,uP,lP,hP={},fP=[],dP=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,pP=Array.isArray;function gP(e,t){for(var r in t)e[r]=t[r];return e}function mP(e){e&&e.parentNode&&e.parentNode.removeChild(e)}function yP(e,t,r,n,i){var o={type:e,props:t,key:r,ref:n,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:null==i?++rP:i,__i:-1,__u:0};return null==i&&null!=tP.vnode&&tP.vnode(o),o}function vP(e){return e.children}function bP(e,t){this.props=e,this.context=t}function wP(e,t){if(null==t)return e.__?wP(e.__,e.__i+1):null;for(var r;t<e.__k.length;t++)if(null!=(r=e.__k[t])&&null!=r.__e)return r.__e;return"function"==typeof e.type?wP(e):null}function EP(e){var t,r;if(null!=(e=e.__)&&null!=e.__c){for(e.__e=e.__c.base=null,t=0;t<e.__k.length;t++)if(null!=(r=e.__k[t])&&null!=r.__e){e.__e=e.__c.base=r.__e;break}return EP(e)}}function AP(e){(!e.__d&&(e.__d=!0)&&nP.push(e)&&!_P.__r++||iP!==tP.debounceRendering)&&((iP=tP.debounceRendering)||oP)(_P)}function _P(){for(var e,t,r,n,i,o,s,a=1;nP.length;)nP.length>a&&nP.sort(sP),e=nP.shift(),a=nP.length,e.__d&&(r=void 0,i=(n=(t=e).__v).__e,o=[],s=[],t.__P&&((r=gP({},n)).__v=n.__v+1,tP.vnode&&tP.vnode(r),PP(t.__P,r,n,t.__n,t.__P.namespaceURI,32&n.__u?[i]:null,o,null==i?wP(n):i,!!(32&n.__u),s),r.__v=n.__v,r.__.__k[r.__i]=r,RP(o,r,s),r.__e!=i&&EP(r)));_P.__r=0}function xP(e,t,r,n,i,o,s,a,c,u,l){var h,f,d,p,g,m,y=n&&n.__k||fP,v=t.length;for(c=function(e,t,r,n,i){var o,s,a,c,u,l=r.length,h=l,f=0;for(e.__k=new Array(i),o=0;o<i;o++)null!=(s=t[o])&&"boolean"!=typeof s&&"function"!=typeof s?(c=o+f,(s=e.__k[o]="string"==typeof s||"number"==typeof s||"bigint"==typeof s||s.constructor==String?yP(null,s,null,null,null):pP(s)?yP(vP,{children:s},null,null,null):void 0===s.constructor&&s.__b>0?yP(s.type,s.props,s.key,s.ref?s.ref:null,s.__v):s).__=e,s.__b=e.__b+1,a=null,-1!==(u=s.__i=kP(s,r,c,h))&&(h--,(a=r[u])&&(a.__u|=2)),null==a||null===a.__v?(-1==u&&(i>l?f--:i<l&&f++),"function"!=typeof s.type&&(s.__u|=4)):u!=c&&(u==c-1?f--:u==c+1?f++:(u>c?f--:f++,s.__u|=4))):e.__k[o]=null;if(h)for(o=0;o<l;o++)null!=(a=r[o])&&!(2&a.__u)&&(a.__e==n&&(n=wP(a)),MP(a,a));return n}(r,t,y,c,v),h=0;h<v;h++)null!=(d=r.__k[h])&&(f=-1===d.__i?hP:y[d.__i]||hP,d.__i=h,m=PP(e,d,f,i,o,s,a,c,u,l),p=d.__e,d.ref&&f.ref!=d.ref&&(f.ref&&CP(f.ref,null,d),l.push(d.ref,d.__c||p,d)),null==g&&null!=p&&(g=p),4&d.__u||f.__k===d.__k?c=SP(d,c,e):"function"==typeof d.type&&void 0!==m?c=m:p&&(c=p.nextSibling),d.__u&=-7);return r.__e=g,c}function SP(e,t,r){var n,i;if("function"==typeof e.type){for(n=e.__k,i=0;n&&i<n.length;i++)n[i]&&(n[i].__=e,t=SP(n[i],t,r));return t}e.__e!=t&&(t&&e.type&&!r.contains(t)&&(t=wP(e)),r.insertBefore(e.__e,t||null),t=e.__e);do{t=t&&t.nextSibling}while(null!=t&&8==t.nodeType);return t}function kP(e,t,r,n){var i,o,s=e.key,a=e.type,c=t[r];if(null===c&&null==e.key||c&&s==c.key&&a===c.type&&!(2&c.__u))return r;if(n>(null==c||2&c.__u?0:1))for(i=r-1,o=r+1;i>=0||o<t.length;){if(i>=0){if((c=t[i])&&!(2&c.__u)&&s==c.key&&a===c.type)return i;i--}if(o<t.length){if((c=t[o])&&!(2&c.__u)&&s==c.key&&a===c.type)return o;o++}}return-1}function IP(e,t,r){"-"==t[0]?e.setProperty(t,null==r?"":r):e[t]=null==r?"":"number"!=typeof r||dP.test(t)?r:r+"px"}function OP(e,t,r,n,i){var o;e:if("style"==t)if("string"==typeof r)e.style.cssText=r;else{if("string"==typeof n&&(e.style.cssText=n=""),n)for(t in n)r&&t in r||IP(e.style,t,"");if(r)for(t in r)n&&r[t]===n[t]||IP(e.style,t,r[t])}else if("o"==t[0]&&"n"==t[1])o=t!=(t=t.replace(aP,"$1")),t=t.toLowerCase()in e||"onFocusOut"==t||"onFocusIn"==t?t.toLowerCase().slice(2):t.slice(2),e.l||(e.l={}),e.l[t+o]=r,r?n?r.t=n.t:(r.t=cP,e.addEventListener(t,o?lP:uP,o)):e.removeEventListener(t,o?lP:uP,o);else{if("http://www.w3.org/2000/svg"==i)t=t.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if("width"!=t&&"height"!=t&&"href"!=t&&"list"!=t&&"form"!=t&&"tabIndex"!=t&&"download"!=t&&"rowSpan"!=t&&"colSpan"!=t&&"role"!=t&&"popover"!=t&&t in e)try{e[t]=null==r?"":r;break e}catch(e){}"function"==typeof r||(null==r||!1===r&&"-"!=t[4]?e.removeAttribute(t):e.setAttribute(t,"popover"==t&&1==r?"":r))}}function TP(e){return function(t){if(this.l){var r=this.l[t.type+e];if(null==t.u)t.u=cP++;else if(t.u<r.t)return;return r(tP.event?tP.event(t):t)}}}function PP(e,t,r,n,i,o,s,a,c,u){var l,h,f,d,p,g,m,y,v,b,w,E,A,_,x,S,k,I=t.type;if(void 0!==t.constructor)return null;128&r.__u&&(c=!!(32&r.__u),o=[a=t.__e=r.__e]),(l=tP.__b)&&l(t);e:if("function"==typeof I)try{if(y=t.props,v="prototype"in I&&I.prototype.render,b=(l=I.contextType)&&n[l.__c],w=l?b?b.props.value:l.__:n,r.__c?m=(h=t.__c=r.__c).__=h.__E:(v?t.__c=h=new I(y,w):(t.__c=h=new bP(y,w),h.constructor=I,h.render=LP),b&&b.sub(h),h.props=y,h.state||(h.state={}),h.context=w,h.__n=n,f=h.__d=!0,h.__h=[],h._sb=[]),v&&null==h.__s&&(h.__s=h.state),v&&null!=I.getDerivedStateFromProps&&(h.__s==h.state&&(h.__s=gP({},h.__s)),gP(h.__s,I.getDerivedStateFromProps(y,h.__s))),d=h.props,p=h.state,h.__v=t,f)v&&null==I.getDerivedStateFromProps&&null!=h.componentWillMount&&h.componentWillMount(),v&&null!=h.componentDidMount&&h.__h.push(h.componentDidMount);else{if(v&&null==I.getDerivedStateFromProps&&y!==d&&null!=h.componentWillReceiveProps&&h.componentWillReceiveProps(y,w),!h.__e&&(null!=h.shouldComponentUpdate&&!1===h.shouldComponentUpdate(y,h.__s,w)||t.__v==r.__v)){for(t.__v!=r.__v&&(h.props=y,h.state=h.__s,h.__d=!1),t.__e=r.__e,t.__k=r.__k,t.__k.some((function(e){e&&(e.__=t)})),E=0;E<h._sb.length;E++)h.__h.push(h._sb[E]);h._sb=[],h.__h.length&&s.push(h);break e}null!=h.componentWillUpdate&&h.componentWillUpdate(y,h.__s,w),v&&null!=h.componentDidUpdate&&h.__h.push((function(){h.componentDidUpdate(d,p,g)}))}if(h.context=w,h.props=y,h.__P=e,h.__e=!1,A=tP.__r,_=0,v){for(h.state=h.__s,h.__d=!1,A&&A(t),l=h.render(h.props,h.state,h.context),x=0;x<h._sb.length;x++)h.__h.push(h._sb[x]);h._sb=[]}else do{h.__d=!1,A&&A(t),l=h.render(h.props,h.state,h.context),h.state=h.__s}while(h.__d&&++_<25);h.state=h.__s,null!=h.getChildContext&&(n=gP(gP({},n),h.getChildContext())),v&&!f&&null!=h.getSnapshotBeforeUpdate&&(g=h.getSnapshotBeforeUpdate(d,p)),S=l,null!=l&&l.type===vP&&null==l.key&&(S=NP(l.props.children)),a=xP(e,pP(S)?S:[S],t,r,n,i,o,s,a,c,u),h.base=t.__e,t.__u&=-161,h.__h.length&&s.push(h),m&&(h.__E=h.__=null)}catch(e){if(t.__v=null,c||null!=o)if(e.then){for(t.__u|=c?160:128;a&&8==a.nodeType&&a.nextSibling;)a=a.nextSibling;o[o.indexOf(a)]=null,t.__e=a}else for(k=o.length;k--;)mP(o[k]);else t.__e=r.__e,t.__k=r.__k;tP.__e(e,t,r)}else null==o&&t.__v==r.__v?(t.__k=r.__k,t.__e=r.__e):a=t.__e=function(e,t,r,n,i,o,s,a,c){var u,l,h,f,d,p,g,m=r.props,y=t.props,v=t.type;if("svg"==v?i="http://www.w3.org/2000/svg":"math"==v?i="http://www.w3.org/1998/Math/MathML":i||(i="http://www.w3.org/1999/xhtml"),null!=o)for(u=0;u<o.length;u++)if((d=o[u])&&"setAttribute"in d==!!v&&(v?d.localName==v:3==d.nodeType)){e=d,o[u]=null;break}if(null==e){if(null==v)return document.createTextNode(y);e=document.createElementNS(i,v,y.is&&y),a&&(tP.__m&&tP.__m(t,o),a=!1),o=null}if(null===v)m===y||a&&e.data===y||(e.data=y);else{if(o=o&&eP.call(e.childNodes),m=r.props||hP,!a&&null!=o)for(m={},u=0;u<e.attributes.length;u++)m[(d=e.attributes[u]).name]=d.value;for(u in m)if(d=m[u],"children"==u);else if("dangerouslySetInnerHTML"==u)h=d;else if(!(u in y)){if("value"==u&&"defaultValue"in y||"checked"==u&&"defaultChecked"in y)continue;OP(e,u,null,d,i)}for(u in y)d=y[u],"children"==u?f=d:"dangerouslySetInnerHTML"==u?l=d:"value"==u?p=d:"checked"==u?g=d:a&&"function"!=typeof d||m[u]===d||OP(e,u,d,m[u],i);if(l)a||h&&(l.__html===h.__html||l.__html===e.innerHTML)||(e.innerHTML=l.__html),t.__k=[];else if(h&&(e.innerHTML=""),xP("template"===t.type?e.content:e,pP(f)?f:[f],t,r,n,"foreignObject"==v?"http://www.w3.org/1999/xhtml":i,o,s,o?o[0]:r.__k&&wP(r,0),a,c),null!=o)for(u=o.length;u--;)mP(o[u]);a||(u="value","progress"==v&&null==p?e.removeAttribute("value"):void 0!==p&&(p!==e[u]||"progress"==v&&!p||"option"==v&&p!==m[u])&&OP(e,u,p,m[u],i),u="checked",void 0!==g&&g!==e[u]&&OP(e,u,g,m[u],i))}return e}(r.__e,t,r,n,i,o,s,c,u);return(l=tP.diffed)&&l(t),128&t.__u?void 0:a}function RP(e,t,r){for(var n=0;n<r.length;n++)CP(r[n],r[++n],r[++n]);tP.__c&&tP.__c(t,e),e.some((function(t){try{e=t.__h,t.__h=[],e.some((function(e){e.call(t)}))}catch(e){tP.__e(e,t.__v)}}))}function NP(e){return"object"!=typeof e||null==e?e:pP(e)?e.map(NP):gP({},e)}function CP(e,t,r){try{if("function"==typeof e){var n="function"==typeof e.__u;n&&e.__u(),n&&null==t||(e.__u=e(t))}else e.current=t}catch(e){tP.__e(e,r)}}function MP(e,t,r){var n,i;if(tP.unmount&&tP.unmount(e),(n=e.ref)&&(n.current&&n.current!==e.__e||CP(n,null,t)),null!=(n=e.__c)){if(n.componentWillUnmount)try{n.componentWillUnmount()}catch(e){tP.__e(e,t)}n.base=n.__P=null}if(n=e.__k)for(i=0;i<n.length;i++)n[i]&&MP(n[i],t,r||"function"!=typeof e.type);r||mP(e.__e),e.__c=e.__=e.__e=void 0}function LP(e,t,r){return this.constructor(e,r)}function BP(e,t,r){var n,i,o,s;t==document&&(t=document.documentElement),tP.__&&tP.__(e,t),i=(n="function"==typeof r)?null:r&&r.__k||t.__k,o=[],s=[],PP(t,e=(!n&&r||t).__k=function(e,t,r){var n,i,o,s={};for(o in t)"key"==o?n=t[o]:"ref"==o?i=t[o]:s[o]=t[o];if(arguments.length>2&&(s.children=arguments.length>3?eP.call(arguments,2):r),"function"==typeof e&&null!=e.defaultProps)for(o in e.defaultProps)void 0===s[o]&&(s[o]=e.defaultProps[o]);return yP(e,s,n,i,null)}(vP,null,[e]),i||hP,hP,t.namespaceURI,!n&&r?[r]:i?null:t.firstChild?eP.call(t.childNodes):null,o,!n&&r?r:i?i.__e:t.firstChild,n,s),RP(o,e,s)}eP=fP.slice,tP={__e:function(e,t,r,n){for(var i,o,s;t=t.__;)if((i=t.__c)&&!i.__)try{if((o=i.constructor)&&null!=o.getDerivedStateFromError&&(i.setState(o.getDerivedStateFromError(e)),s=i.__d),null!=i.componentDidCatch&&(i.componentDidCatch(e,n||{}),s=i.__d),s)return i.__E=i}catch(t){e=t}throw e}},rP=0,bP.prototype.setState=function(e,t){var r;r=null!=this.__s&&this.__s!==this.state?this.__s:this.__s=gP({},this.state),"function"==typeof e&&(e=e(gP({},r),this.props)),e&&gP(r,e),null!=e&&this.__v&&(t&&this._sb.push(t),AP(this))},bP.prototype.forceUpdate=function(e){this.__v&&(this.__e=!0,e&&this.__h.push(e),AP(this))},bP.prototype.render=vP,nP=[],oP="function"==typeof Promise?Promise.prototype.then.bind(Promise.resolve()):setTimeout,sP=function(e,t){return e.__v.__b-t.__v.__b},_P.__r=0,aP=/(PointerCapture)$|Capture$/i,cP=0,uP=TP(!1),lP=TP(!0);let UP=function(e){return e.FLOW_AUTHN="flow_authn",e.FLOW_PRE_AUTHZ="flow_pre_authz",e.FLOW_AUTHZ="flow_authz",e.FLOW_USER_SIGN="flow_user_sign",e}({}),DP=function(e){return e.SESSION_REQUEST="session_proposal",e.SIGNING_REQUEST="signing_request",e}({});const jP="fcl-plugin-service-walletconnect",FP="WC/RPC";function zP(){return"undefined"!=typeof navigator&&/android/i.test(navigator.userAgent)||"undefined"!=typeof navigator&&/iPhone|iPod/.test(navigator.userAgent)||"undefined"!=typeof navigator&&/iPad/.test(navigator.userAgent)}function qP(e){if(e.startsWith("http")){const t=document.createElement("a");t.href=e,t.target="_blank",t.rel="noreferrer noopener",t.click()}else window.open(e,"_blank")}async function GP(e){let{client:t,existingPairing:r}=e;const n=await bu(),i={flow:{methods:[UP.FLOW_AUTHN,UP.FLOW_PRE_AUTHZ,UP.FLOW_AUTHZ,UP.FLOW_USER_SIGN],chains:[`flow:${n}`],events:["chainChanged","accountsChanged"]}},{uri:o,approval:s}=await t.connect({pairingTopic:r?.topic,requiredNamespaces:i});if(!o)throw new Error("FCL-WC: Error creating session proposal. Could not create a proposal URI.");return{uri:o,approval:s}}const HP=async e=>{let{method:t,body:r,session:n,client:i,abortSignal:o}=e;const[s,a,c]=function(e){const[t,r,n]=Object.values(e.namespaces).map((e=>e.accounts)).flat().filter((e=>e.startsWith("flow:")))[0].split(":");return[`${t}:${r}`,n,n]}(n),u=JSON.stringify({...r,addr:a,address:c}),l=await Promise.race([i.request({topic:n.topic,chainId:s,request:{method:t,params:[u]}}),new Promise(((e,t)=>{o?.aborted&&t(new Error("WalletConnect Request aborted")),o?.addEventListener("abort",(()=>{t(new Error("WalletConnect Request aborted"))}))}))]);if("object"==typeof l&&null!=l)switch(l.status){case"APPROVED":case"REDIRECT":return l.data;case"DECLINED":throw new Error(`Declined: ${l.reason||"No reason supplied"}`);default:throw new Error("Declined: No reason supplied")}};var KP=0;function VP(e,t,r,n,i,o){t||(t={});var s,a,c=t;"ref"in t&&(s=t.ref,delete t.ref);var u={type:e,props:c,key:r,ref:s,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,constructor:void 0,__v:--KP,__i:-1,__u:0,__source:i,__self:o};if("function"==typeof e&&(s=e.defaultProps))for(a in s)void 0===c[a]&&(c[a]=s[a]);return tP.vnode&&tP.vnode(u),u}function WP(e){let{title:t,message:r,icon:n,onClick:i,onDismiss:o,animate:s}=e;return VP("div",{className:"fixed bottom-3 left-3 right-3 mx-auto z-[2147483647] flex max-w-sm\n        overflow-hidden rounded-lg border border-gray-200 bg-white p-4 shadow-lg\n        md:bottom-4 md:left-auto md:right-4 dark:bg-gray-700 dark:border-gray-600\n        "+(s?"animate-slideUp":""),role:"alert",onClick:e=>{i&&(e.stopPropagation(),i?.())},children:[n&&VP("img",{className:"h-10 w-10 self-center rounded-md md:self-start",src:n,alt:t}),VP("div",{className:"ml-3 grow",children:[VP("p",{className:"text-sm font-medium text-gray-900 dark:text-gray-100",children:t}),VP("p",{className:"mt-1 text-sm text-gray-500 dark:text-gray-300",children:r})]}),VP("button",{className:"ml-2 inline-flex rounded-full text-gray-400 hover:text-gray-500 focus:ring-0\n          dark:text-gray-200 dark:hover:text-gray-300 "+(zP()?"self-center p-2":"self-start p-0 bg-transparent border-transparent focus:border-transparent"),onClick:e=>{e.stopPropagation(),o?.()},children:[VP("span",{className:"sr-only",children:"Close"}),VP("svg",{className:"h-5 w-5",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",children:VP("path",{fillRule:"evenodd",d:"M14.354 5.646a.5.5 0 00-.708 0L10 9.293 5.354 4.646a.5.5 0 00-.708.708L9.293 10l-4.647 4.646a.5.5 0 00.708.708L10 10.707l4.646 4.647a.5.5 0 00.708-.708L10.707 10l4.647-4.646a.5.5 0 000-.708z"})})]})]})}let $P=null,JP=0,YP=null;const QP=(e,t,r)=>async n=>{let{service:i,body:o,opts:s,abortSignal:a,user:c}=n;var u;u=i.provider?.icon,u&&((new Image).src=u);const{wcRequestHook:l,pairingModalOverride:h,disableNotifications:f}=t,d=await e;O(!!d,"WalletConnect is not initialized");let p,g=null;const m=i.endpoint,y=function(e){let{uid:t}=e;return t&&/^(ftp|http|https):\/\/[^ "]+$/.test(t)||I({title:"WalletConnect Service Warning",message:`service.uid should be a valid universal link url. Found: ${t}`,level:S.warn}),t}(i),v=d.pairing.getAll({active:!0});if(v.length>0&&(p=v?.find((e=>e.peerMetadata?.url===i.uid))),d.session.length>0){const e=d.session.keys.length-1;g=d.session.get(d.session.keys.at(e))}null==g&&(g=await new Promise(((e,t)=>{(function(e){return async t=>{let{service:r,onClose:n,appLink:i,client:o,method:s,pairing:a,wcRequestHook:c,pairingModalOverride:u,abortSignal:l}=t;const h=o.opts?.projectId;O(!!h,"Cannot establish connection, WalletConnect projectId is undefined");let f=null,d=null;try{const{uri:t,approval:p}=await GP({client:o,existingPairing:a});if(f=t,c&&c instanceof Function&&c({type:DP.SESSION_REQUEST,method:s,service:r,session:null,pairing:a??null,uri:t??null}),zP()){const e=new URLSearchParams({uri:t}).toString();qP(null==a?i+"?"+e:i)}else if(!a)if(u)u(t,n);else{d=new(await e)({projectId:h}),d.openModal({uri:t,onClose:n});const r=d.subscribeModal((e=>{!1===e.open&&(n?.(),r())}))}const g=await Promise.race([p(),new Promise(((e,t)=>{l?.aborted&&t(new Error("Session request aborted")),l?.addEventListener("abort",(()=>{t(new Error("Session request aborted"))}))}))]);return g}catch(e){throw e instanceof Error&&I({title:`${e.name} Error establishing WalletConnect session`,message:`\n          ${e.message}\n          uri: ${f}\n        `,level:S.error}),n(),e}finally{d?.closeModal()}}})(r)({service:i,onClose:function(){t("Declined: Externally Halted")},appLink:y,client:d,method:m,pairing:p,wcRequestHook:l,pairingModalOverride:h,abortSignal:a}).then(e,t)}))),l&&l instanceof Function&&l({type:DP.SIGNING_REQUEST,method:m,service:i,session:g??null,pairing:p??null,uri:null}),function(e){let{service:t,user:r}=e;return!(!zP()||t.endpoint===UP.FLOW_AUTHN||t.endpoint===UP.FLOW_AUTHZ&&r?.services?.find((e=>e.method===FP&&"pre-authz"===e.type)))}({service:i,user:c})&&qP(y);const b=f||"true"===g?.sessionProperties?.["fclWc.disableNotificationsOnMobile"]?null:function(e){let{service:t,user:r}=e;const n=r?.services?.find((e=>"authn"===e.type)),i=n?.provider||t.provider;return function(e){let{title:t,message:r,icon:n,onClick:i,onDismiss:o,debounceDelay:s=0}=e;$P||($P=function(){const e=document.createElement("div"),t=e.attachShadow({mode:"open"}),r=document.createElement("div");t.appendChild(r),document.body.appendChild(e);const n=document.createElement("style");n.textContent='*,:after,:before{--tw-border-spacing-x:0;--tw-border-spacing-y:0;--tw-translate-x:0;--tw-translate-y:0;--tw-rotate:0;--tw-skew-x:0;--tw-skew-y:0;--tw-scale-x:1;--tw-scale-y:1;--tw-pan-x: ;--tw-pan-y: ;--tw-pinch-zoom: ;--tw-scroll-snap-strictness:proximity;--tw-gradient-from-position: ;--tw-gradient-via-position: ;--tw-gradient-to-position: ;--tw-ordinal: ;--tw-slashed-zero: ;--tw-numeric-figure: ;--tw-numeric-spacing: ;--tw-numeric-fraction: ;--tw-ring-inset: ;--tw-ring-offset-width:0px;--tw-ring-offset-color:#fff;--tw-ring-color:rgba(59,130,246,.5);--tw-ring-offset-shadow:0 0 #0000;--tw-ring-shadow:0 0 #0000;--tw-shadow:0 0 #0000;--tw-shadow-colored:0 0 #0000;--tw-blur: ;--tw-brightness: ;--tw-contrast: ;--tw-grayscale: ;--tw-hue-rotate: ;--tw-invert: ;--tw-saturate: ;--tw-sepia: ;--tw-drop-shadow: ;--tw-backdrop-blur: ;--tw-backdrop-brightness: ;--tw-backdrop-contrast: ;--tw-backdrop-grayscale: ;--tw-backdrop-hue-rotate: ;--tw-backdrop-invert: ;--tw-backdrop-opacity: ;--tw-backdrop-saturate: ;--tw-backdrop-sepia: ;--tw-contain-size: ;--tw-contain-layout: ;--tw-contain-paint: ;--tw-contain-style: }::backdrop{--tw-border-spacing-x:0;--tw-border-spacing-y:0;--tw-translate-x:0;--tw-translate-y:0;--tw-rotate:0;--tw-skew-x:0;--tw-skew-y:0;--tw-scale-x:1;--tw-scale-y:1;--tw-pan-x: ;--tw-pan-y: ;--tw-pinch-zoom: ;--tw-scroll-snap-strictness:proximity;--tw-gradient-from-position: ;--tw-gradient-via-position: ;--tw-gradient-to-position: ;--tw-ordinal: ;--tw-slashed-zero: ;--tw-numeric-figure: ;--tw-numeric-spacing: ;--tw-numeric-fraction: ;--tw-ring-inset: ;--tw-ring-offset-width:0px;--tw-ring-offset-color:#fff;--tw-ring-color:rgba(59,130,246,.5);--tw-ring-offset-shadow:0 0 #0000;--tw-ring-shadow:0 0 #0000;--tw-shadow:0 0 #0000;--tw-shadow-colored:0 0 #0000;--tw-blur: ;--tw-brightness: ;--tw-contrast: ;--tw-grayscale: ;--tw-hue-rotate: ;--tw-invert: ;--tw-saturate: ;--tw-sepia: ;--tw-drop-shadow: ;--tw-backdrop-blur: ;--tw-backdrop-brightness: ;--tw-backdrop-contrast: ;--tw-backdrop-grayscale: ;--tw-backdrop-hue-rotate: ;--tw-backdrop-invert: ;--tw-backdrop-opacity: ;--tw-backdrop-saturate: ;--tw-backdrop-sepia: ;--tw-contain-size: ;--tw-contain-layout: ;--tw-contain-paint: ;--tw-contain-style: }/*! tailwindcss v3.4.14 | MIT License | https://tailwindcss.com*/*,:after,:before{border:0 solid #e5e7eb;box-sizing:border-box}:after,:before{--tw-content:""}:host,html{-webkit-text-size-adjust:100%;font-feature-settings:normal;-webkit-tap-highlight-color:transparent;font-family:ui-sans-serif,system-ui,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;font-variation-settings:normal;line-height:1.5;-moz-tab-size:4;tab-size:4}body{line-height:inherit;margin:0}hr{border-top-width:1px;color:inherit;height:0}abbr:where([title]){-webkit-text-decoration:underline dotted;text-decoration:underline dotted}h1,h2,h3,h4,h5,h6{font-size:inherit;font-weight:inherit}a{color:inherit;text-decoration:inherit}b,strong{font-weight:bolder}code,kbd,pre,samp{font-feature-settings:normal;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,Liberation Mono,Courier New,monospace;font-size:1em;font-variation-settings:normal}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}table{border-collapse:collapse;border-color:inherit;text-indent:0}button,input,optgroup,select,textarea{font-feature-settings:inherit;color:inherit;font-family:inherit;font-size:100%;font-variation-settings:inherit;font-weight:inherit;letter-spacing:inherit;line-height:inherit;margin:0;padding:0}button,select{text-transform:none}button,input:where([type=button]),input:where([type=reset]),input:where([type=submit]){-webkit-appearance:button;background-color:transparent;background-image:none}:-moz-focusring{outline:auto}:-moz-ui-invalid{box-shadow:none}progress{vertical-align:baseline}::-webkit-inner-spin-button,::-webkit-outer-spin-button{height:auto}[type=search]{-webkit-appearance:textfield;outline-offset:-2px}::-webkit-search-decoration{-webkit-appearance:none}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}summary{display:list-item}blockquote,dd,dl,figure,h1,h2,h3,h4,h5,h6,hr,p,pre{margin:0}fieldset{margin:0}fieldset,legend{padding:0}menu,ol,ul{list-style:none;margin:0;padding:0}dialog{padding:0}textarea{resize:vertical}input::placeholder,textarea::placeholder{color:#9ca3af;opacity:1}[role=button],button{cursor:pointer}:disabled{cursor:default}audio,canvas,embed,iframe,img,object,svg,video{display:block;vertical-align:middle}img,video{height:auto;max-width:100%}[hidden]:where(:not([hidden=until-found])){display:none}.container{width:100%}@media (min-width:640px){.container{max-width:640px}}@media (min-width:768px){.container{max-width:768px}}@media (min-width:1024px){.container{max-width:1024px}}@media (min-width:1280px){.container{max-width:1280px}}@media (min-width:1536px){.container{max-width:1536px}}.sr-only{clip:rect(0,0,0,0);border-width:0;height:1px;margin:-1px;overflow:hidden;padding:0;position:absolute;white-space:nowrap;width:1px}.fixed{position:fixed}.bottom-3{bottom:.75rem}.left-3{left:.75rem}.right-3{right:.75rem}.z-\\[2147483647\\]{z-index:2147483647}.mx-auto{margin-left:auto;margin-right:auto}.ml-2{margin-left:.5rem}.ml-3{margin-left:.75rem}.mt-1{margin-top:.25rem}.flex{display:flex}.inline-flex{display:inline-flex}.h-10{height:2.5rem}.h-5{height:1.25rem}.w-10{width:2.5rem}.w-5{width:1.25rem}.max-w-sm{max-width:24rem}.grow{flex-grow:1}@keyframes slideUp{0%{transform:translateY(100%)}to{transform:translateY(0)}}.animate-slideUp{animation:slideUp .2s ease-out forwards}.self-start{align-self:flex-start}.self-center{align-self:center}.overflow-hidden{overflow:hidden}.rounded-full{border-radius:9999px}.rounded-lg{border-radius:.5rem}.rounded-md{border-radius:.375rem}.border{border-width:1px}.border-gray-200{--tw-border-opacity:1;border-color:rgb(229 231 235/var(--tw-border-opacity))}.border-transparent{border-color:transparent}.bg-transparent{background-color:transparent}.bg-white{--tw-bg-opacity:1;background-color:rgb(255 255 255/var(--tw-bg-opacity))}.p-0{padding:0}.p-2{padding:.5rem}.p-4{padding:1rem}.text-sm{font-size:.875rem;line-height:1.25rem}.font-medium{font-weight:500}.text-gray-400{--tw-text-opacity:1;color:rgb(156 163 175/var(--tw-text-opacity))}.text-gray-500{--tw-text-opacity:1;color:rgb(107 114 128/var(--tw-text-opacity))}.text-gray-900{--tw-text-opacity:1;color:rgb(17 24 39/var(--tw-text-opacity))}.shadow-lg{--tw-shadow:0 10px 15px -3px rgba(0,0,0,.1),0 4px 6px -4px rgba(0,0,0,.1);--tw-shadow-colored:0 10px 15px -3px var(--tw-shadow-color),0 4px 6px -4px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow,0 0 #0000),var(--tw-ring-shadow,0 0 #0000),var(--tw-shadow)}.filter{filter:var(--tw-blur) var(--tw-brightness) var(--tw-contrast) var(--tw-grayscale) var(--tw-hue-rotate) var(--tw-invert) var(--tw-saturate) var(--tw-sepia) var(--tw-drop-shadow)}.hover\\:text-gray-500:hover{--tw-text-opacity:1;color:rgb(107 114 128/var(--tw-text-opacity))}.focus\\:border-transparent:focus{border-color:transparent}.focus\\:ring-0:focus{--tw-ring-offset-shadow:var(--tw-ring-inset) 0 0 0 var(--tw-ring-offset-width) var(--tw-ring-offset-color);--tw-ring-shadow:var(--tw-ring-inset) 0 0 0 calc(var(--tw-ring-offset-width)) var(--tw-ring-color);box-shadow:var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow,0 0 #0000)}.dark\\:border-gray-600:is(.dark *){--tw-border-opacity:1;border-color:rgb(75 85 99/var(--tw-border-opacity))}.dark\\:bg-gray-700:is(.dark *){--tw-bg-opacity:1;background-color:rgb(55 65 81/var(--tw-bg-opacity))}.dark\\:text-gray-100:is(.dark *){--tw-text-opacity:1;color:rgb(243 244 246/var(--tw-text-opacity))}.dark\\:text-gray-200:is(.dark *){--tw-text-opacity:1;color:rgb(229 231 235/var(--tw-text-opacity))}.dark\\:text-gray-300:is(.dark *){--tw-text-opacity:1;color:rgb(209 213 219/var(--tw-text-opacity))}.dark\\:hover\\:text-gray-300:hover:is(.dark *){--tw-text-opacity:1;color:rgb(209 213 219/var(--tw-text-opacity))}@media (min-width:768px){.md\\:bottom-4{bottom:1rem}.md\\:left-auto{left:auto}.md\\:right-4{right:1rem}.md\\:self-start{align-self:flex-start}}',t.appendChild(n);const i=window.matchMedia("(prefers-color-scheme: dark)"),o=()=>{r.classList.toggle("dark",i.matches)};return i.addEventListener("change",o),o(),r}());const a=!YP;function c(){$P&&BP(null,$P)}return YP&&(clearTimeout(YP),YP=null),BP(VP(WP,{title:t,message:r,icon:n,onClick:i,onDismiss:()=>{o?.(),c()},animate:a},JP++),$P),{dismiss:()=>{YP=setTimeout((()=>{YP=null,c()}),s)}}}({title:i?.name||"Mobile Wallet",message:zP()?"Tap to view request in app":"Pending request on your mobile device",icon:i?.icon||"data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 384 512'%3e%3c!--!Font Awesome Free 6.7.1 by %40fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free Copyright 2024 Fonticons%2c Inc.--%3e%3cpath d='M16 64C16 28.7 44.7 0 80 0L304 0c35.3 0 64 28.7 64 64l0 384c0 35.3-28.7 64-64 64L80 512c-35.3 0-64-28.7-64-64L16 64zM224 448a32 32 0 1 0 -64 0 32 32 0 1 0 64 0zM304 64L80 64l0 320 224 0 0-320z'/%3e%3c/svg%3e",onClick:zP()&&t.uid?()=>qP(t.uid):void 0,debounceDelay:"pre-authz"===t.type?500:0})}({user:c,service:i});return await HP({method:m,body:o,session:g,client:d,abortSignal:a}).finally((()=>b?.dismiss()))};let XP=Promise.resolve(null);const ZP=e=>{const{FclWcServicePlugin:t,clientPromise:r}=eR(e);return Hl.authn.update(),{FclWcServicePlugin:t,clientPromise:r}},eR=e=>{if("undefined"==typeof window)throw new Error("FCL Wallet Connect Plugin can only be initialized in the browser");XP=Promise.resolve(XP).catch((()=>null)).then((t=>t||(async e=>{let{projectId:t,metadata:r}=e;O(null!=t,"FCL Wallet Connect Error: WalletConnect projectId is required");try{return ZT.init({logger:"debug",relayUrl:"wss://relay.walletconnect.com",projectId:t,metadata:r})}catch(e){throw e instanceof Error&&I({title:`${e.name} fcl-wc Init Client`,message:e.message,level:S.error}),e}})({projectId:e.projectId,metadata:e.metadata}))).catch((e=>{throw I({title:"WalletConnect Client Initialization Error",message:e.message?e.message:e,level:S.error}),e}));const t=function(e){return{name:jP,f_type:"ServicePlugin",type:"discovery-service",serviceStrategy:{method:FP,exec:QP(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{projectId:"",includeBaseWC:!1,wallets:[],wcRequestHook:null,pairingModalOverride:null,disableNotifications:!1},r.e(940).then(r.bind(r,940)).then((e=>e.WalletConnectModal)))},services:[]}}(XP,e);return{FclWcServicePlugin:t,clientPromise:XP}};async function tR(){return XP.then((e=>{if(!e)throw new Error("WalletConnect client not initialized");return e}))}function rR(){for(var e="",t=32;t--;)e+="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789"[62*Math.random()|0];return e}function nR(e){return nR="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},nR(e)}function iR(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,i,o,s,a=[],c=!0,u=!1;try{if(o=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=o.call(r)).done)&&(a.push(n.value),a.length!==t);c=!0);}catch(e){u=!0,i=e}finally{try{if(!c&&null!=r.return&&(s=r.return(),Object(s)!==s))return}finally{if(u)throw i}}return a}}(e,t)||lR(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function oR(){oR=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,i=Object.defineProperty||function(e,t,r){e[t]=r.value},o="function"==typeof Symbol?Symbol:{},s=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function u(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,r){return e[t]=r}}function l(e,t,r,n){var o=t&&t.prototype instanceof y?t:y,s=Object.create(o.prototype),a=new P(n||[]);return i(s,"_invoke",{value:k(e,r,a)}),s}function h(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=l;var f="suspendedStart",d="suspendedYield",p="executing",g="completed",m={};function y(){}function v(){}function b(){}var w={};u(w,s,(function(){return this}));var E=Object.getPrototypeOf,A=E&&E(E(R([])));A&&A!==r&&n.call(A,s)&&(w=A);var _=b.prototype=y.prototype=Object.create(w);function x(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function S(e,t){function r(i,o,s,a){var c=h(e[i],e,o);if("throw"!==c.type){var u=c.arg,l=u.value;return l&&"object"==nR(l)&&n.call(l,"__await")?t.resolve(l.__await).then((function(e){r("next",e,s,a)}),(function(e){r("throw",e,s,a)})):t.resolve(l).then((function(e){u.value=e,s(u)}),(function(e){return r("throw",e,s,a)}))}a(c.arg)}var o;i(this,"_invoke",{value:function(e,n){function i(){return new t((function(t,i){r(e,n,t,i)}))}return o=o?o.then(i,i):i()}})}function k(t,r,n){var i=f;return function(o,s){if(i===p)throw Error("Generator is already running");if(i===g){if("throw"===o)throw s;return{value:e,done:!0}}for(n.method=o,n.arg=s;;){var a=n.delegate;if(a){var c=I(a,n);if(c){if(c===m)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(i===f)throw i=g,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);i=p;var u=h(t,r,n);if("normal"===u.type){if(i=n.done?g:d,u.arg===m)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(i=g,n.method="throw",n.arg=u.arg)}}}function I(t,r){var n=r.method,i=t.iterator[n];if(i===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,I(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),m;var o=h(i,t.iterator,r.arg);if("throw"===o.type)return r.method="throw",r.arg=o.arg,r.delegate=null,m;var s=o.arg;return s?s.done?(r[t.resultName]=s.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,m):s:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,m)}function O(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function T(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function P(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(O,this),this.reset(!0)}function R(t){if(t||""===t){var r=t[s];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var i=-1,o=function r(){for(;++i<t.length;)if(n.call(t,i))return r.value=t[i],r.done=!1,r;return r.value=e,r.done=!0,r};return o.next=o}}throw new TypeError(nR(t)+" is not iterable")}return v.prototype=b,i(_,"constructor",{value:b,configurable:!0}),i(b,"constructor",{value:v,configurable:!0}),v.displayName=u(b,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===v||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,b):(e.__proto__=b,u(e,c,"GeneratorFunction")),e.prototype=Object.create(_),e},t.awrap=function(e){return{__await:e}},x(S.prototype),u(S.prototype,a,(function(){return this})),t.AsyncIterator=S,t.async=function(e,r,n,i,o){void 0===o&&(o=Promise);var s=new S(l(e,r,n,i),o);return t.isGeneratorFunction(r)?s:s.next().then((function(e){return e.done?e.value:s.next()}))},x(_),u(_,c,"Generator"),u(_,s,(function(){return this})),u(_,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=R,P.prototype={constructor:P,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(T),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function i(n,i){return a.type="throw",a.arg=t,r.next=n,i&&(r.method="next",r.arg=e),!!i}for(var o=this.tryEntries.length-1;o>=0;--o){var s=this.tryEntries[o],a=s.completion;if("root"===s.tryLoc)return i("end");if(s.tryLoc<=this.prev){var c=n.call(s,"catchLoc"),u=n.call(s,"finallyLoc");if(c&&u){if(this.prev<s.catchLoc)return i(s.catchLoc,!0);if(this.prev<s.finallyLoc)return i(s.finallyLoc)}else if(c){if(this.prev<s.catchLoc)return i(s.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<s.finallyLoc)return i(s.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var s=o?o.completion:{};return s.type=e,s.arg=t,o?(this.method="next",this.next=o.finallyLoc,m):this.complete(s)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),m},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),T(r),m}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var i=n.arg;T(r)}return i}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:R(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),m}},t}function sR(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function aR(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?sR(Object(r),!0).forEach((function(t){cR(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):sR(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function cR(e,t,r){return(t=function(e){var t=function(e){if("object"!=nR(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=nR(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==nR(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function uR(e){return function(e){if(Array.isArray(e))return hR(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||lR(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function lR(e,t){if(e){if("string"==typeof e)return hR(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?hR(e,t):void 0}}function hR(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function fR(e,t,r,n,i,o,s){try{var a=e[o](s),c=a.value}catch(e){return void r(e)}a.done?t(c):Promise.resolve(c).then(n,i)}function dR(e){return function(){var t=this,r=arguments;return new Promise((function(n,i){var o=e.apply(t,r);function s(e){fR(o,n,i,s,a,"next",e)}function a(e){fR(o,n,i,s,a,"throw",e)}s(void 0)}))}}var pR=globalThis.AbortController||r(5568);function gR(e){var t=new pR;return null!=e&&e.aborted&&t.abort(),null==e||e.addEventListener("abort",(function(){return t.abort()})),t}var mR=function(e){return e.NOTIFY_QRCODE_CONNECTING="notifyQrCodeConnecting",e.NOTIFY_QRCODE_CONNECTED="notifyQrCodeConnected",e.NOTIFY_QRCODE_ERROR="notifyQrCodeError",e}({}),yR=function(e){return e.REQUEST_WALLETCONNECT_QRCODE="requestWalletConnectQrCode",e.EXEC_SERVICE="execService",e}({}),vR="APPROVED";function bR(e){var t=e.onExecResult,r=e.body,n=e.opts,i=e.args,o=e.abortSignal,s=new Uf({notifications:[]});return s.on(yR.REQUEST_WALLETCONNECT_QRCODE,function(e){var t=e.rpc,r=e.onExecResult,n=e.authnBody,i=e.abortSignal,o=function(e){var t=e.rpc,r=e.authnBody;return function(e){var n=e.uri,i=e.approval,o=e.onExecResult;setTimeout(dR(oR().mark((function e(){var s,a,c;return oR().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,tR();case 3:return s=e.sent,e.next=6,i();case 6:return a=e.sent,t.notify(mR.NOTIFY_QRCODE_CONNECTING,{uri:n}),e.next=10,HP({method:UP.FLOW_AUTHN,body:r,session:a,client:s});case 10:c=e.sent,t.notify(mR.NOTIFY_QRCODE_CONNECTED,{uri:n}),o(c),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(0),t.notify(mR.NOTIFY_QRCODE_ERROR,{uri:n,error:null===e.t0||void 0===e.t0?void 0:e.t0.message});case 18:case"end":return e.stop()}}),e,null,[[0,15]])}))),0)}}({rpc:t,authnBody:n});return function(){var e=dR(oR().mark((function e(t){var n,s,a,c;return oR().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!i.aborted){e.next=2;break}throw new Error("Handler has been terminated");case 2:return e.next=4,tR();case 4:return n=e.sent,e.next=7,GP({client:n});case 7:return s=e.sent,a=s.uri,c=s.approval,o({uri:a,approval:c,onExecResult:r}),e.abrupt("return",{uri:a});case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}({rpc:s,onExecResult:t,authnBody:r,abortSignal:o})),s.on(yR.EXEC_SERVICE,function(e){var t=e.onExecResult,r=e.execStrategyOpts,n=e.execStrategyArgs,i=e.abortSignal;return function(){var e=dR(oR().mark((function e(o){var s,a,c;return oR().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=o.service,e.prev=1,e.next=4,Nh.apply(void 0,[aR(aR({},r),{},{service:s,config:r.config,abortSignal:i})].concat(uR(n.slice(1))));case 4:if(c=e.sent,((null===(a=cf(c))||void 0===a?void 0:a.status)||vR)!==vR){e.next=11;break}return t(c),e.abrupt("return",null);case 11:throw new Error((null==c?void 0:c.reason)||"Service was declined");case 12:e.next=17;break;case 14:throw e.prev=14,e.t0=e.catch(1),new Error((null===e.t0||void 0===e.t0?void 0:e.t0.message)||"Service execution failed");case 17:case"end":return e.stop()}}),e,null,[[1,14]])})));return function(t){return e.apply(this,arguments)}}()}({onExecResult:t,execStrategyOpts:n,execStrategyArgs:i,abortSignal:o})),{connect:s.connect.bind(s),receive:s.receive.bind(s)}}function wR(e){return ER.apply(this,arguments)}function ER(){return ER=dR(oR().mark((function e(t){var r,n,i,o,s;return oR().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.customRpc,n=t.opts,i=t.args,o=t.abortSignal,s=aR(aR({},n.config),{},{client:aR(aR({},n.config.client),{},{discoveryRpcEnabled:!0})}),e.abrupt("return",Nh.apply(void 0,[aR(aR({},n),{},{config:s,customRpc:r,abortSignal:o})].concat(uR(i.slice(1)))));case 3:case"end":return e.stop()}}),e)}))),ER.apply(this,arguments)}var AR="authn";function _R(){return _R=dR(oR().mark((function e(){var t,r,n,i,o,s,a,c,u,l,h=arguments;return oR().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(t=h.length,r=new Array(t),n=0;n<t;n++)r[n]=h[n];if(i=r[0],o=i.body,s=i.abortSignal,(null==(a=i.service)?void 0:a.type)===AR){e.next=6;break}return console.error('ERROR: Invalid service type for FCL Discovery execStrategyHook, expected "'.concat(AR,'" but got "').concat(null==a?void 0:a.type,'"')),e.abrupt("return",Nh.apply(void 0,r));case 6:return c=gR(s),l=new Promise(function(){var e=dR(oR().mark((function e(t,n){var s;return oR().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:s=bR({onExecResult:t,body:o,opts:i,args:r,abortSignal:c.signal}),u=wR({customRpc:s,opts:i,args:r,abortSignal:c.signal}).then(t,n);case 2:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}()),e.next=10,l.catch((function(){}));case 10:return e.next=12,Promise.race([new Promise((function(e){return setTimeout(e,1e3)})),u]).catch((function(){}));case 12:return c.abort(),e.abrupt("return",l);case 14:case"end":return e.stop()}}),e)}))),_R.apply(this,arguments)}var xR="FCL_IFRAME";function SR(e){O(!document.getElementById(xR),"Attempt at triggering multiple Frames",{src:e});var t=document.createElement("iframe");return t.src=e,t.id=xR,t.allow="usb *; hid *; clipboard-write",t.frameBorder="0",t.style.cssText="\n  position:fixed;\n  top: 0px;\n  right: 0px;\n  bottom: 0px;\n  left: 0px;\n  height: 100%;\n  width: 100vw;\n  display:block;\n  background:rgba(0,0,0,0.25);\n  z-index: 2147483647;\n  box-sizing: border-box;\n  color-scheme: light;\n",document.body.append(t),[t.contentWindow,function(){document.getElementById(xR)&&document.getElementById(xR).remove()}]}var kR=null,IR=null;function OR(e){var t;return null==kR||null!==(t=kR)&&void 0!==t&&t.closed?kR=function(e,t,r){var n=r.top.outerHeight/2+r.top.screenY-385,i=r.top.outerWidth/2+r.top.screenX-320,o=r.open(e,"FCL_POP","toolbar=no, location=no, directories=no, status=no, menubar=no, scrollbars=no, resizable=no, copyhistory=no, width=".concat(640,", height=").concat(770,", top=").concat(n,", left=").concat(i));if(!o)throw new Error("Popup failed to open (was it blocked by a popup blocker?)");return o}(e,0,window):IR!==e?(kR.location.replace(e),kR.focus()):kR.focus(),IR=e,[kR,function(){kR&&!kR.closed&&kR.close(),kR=null}]}var TR=null,PR=null;function RR(e){var t;if(null==TR||null!==(t=TR)&&void 0!==t&&t.closed){if(!(TR=window.open(e,"_blank")))throw new Error("Tab failed to open (was it blocked by the browser?)")}else PR!==e?(TR.location.replace(e),TR.focus()):TR.focus();return PR=e,[TR,function(){TR&&!TR.closed&&TR.close(),TR=null}]}var NR=function(){},CR="1.14.0",MR=function(){},LR=function(){},BR=function(){},UR=function(){throw new Error("Strategy util has not been implemented on this platform")},DR={"VIEW/IFRAME":SR,"VIEW/POP":OR,"VIEW/TAB":RR,"VIEW/MOBILE_BROWSER":UR,"VIEW/DEEPLINK":UR};function jR(e){return FR.apply(this,arguments)}function FR(){return FR=dR(oR().mark((function e(t){var r,n,i=arguments;return oR().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=(r=i.length>1&&void 0!==i[1]?i[1]:{serviceEndpoint:function(){}}).serviceEndpoint,e.prev=2,e.abrupt("return",DR[t.method](n(t),r));case 6:throw e.prev=6,e.t0=e.catch(2),console.error("execLocal({service, opts = {}})",e.t0,{service:t,opts:r}),e.t0;case 10:case"end":return e.stop()}}),e,null,[[2,6]])}))),FR.apply(this,arguments)}var zR,qR,GR,HR,KR,VR=cR(cR(cR(cR(cR(cR({},Ru["HTTP/RPC"],df(jR)),Ru["HTTP/POST"],df(jR)),Ru["IFRAME/RPC"],(function(e){var t=e.service,r=e.body,n=e.config,i=e.customRpc,o=e.abortSignal,s=e.opts;return new Promise((function(e,a){var c=rR(),u=s.includeOlderJsonRpcCall,l=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(null==e)return{send:NR,close:NR};var r,n,i=t.onClose||NR,o=t.onMessage||NR,s=t.onReady||NR,a=t.onResponse||NR,c=t.onCustomRpc||NR,u=wf({close:h,send:f,onReady:s,onResponse:a,onMessage:o,onCustomRpc:c,getSource:function(){return r}});window.addEventListener("message",u);var l=iR(SR(sf(e)),2);return r=l[0],n=l[1],{send:f,close:h};function h(){try{window.removeEventListener("message",u),n(),i()}catch(e){console.error("Frame Close Error",e)}}function f(e){try{r.postMessage(JSON.parse(JSON.stringify(e||{})),"*")}catch(t){console.error("Frame Send Error",e,t)}}}(t,{onReady:function(e,o){return dR(oR().mark((function e(){var s;return oR().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:s=o.send,e.prev=1,s({type:"FCL:VIEW:READY:RESPONSE",fclVersion:CR,body:r,service:{params:t.params,data:t.data,type:t.type},config:n}),s({fclVersion:CR,type:"FCL:FRAME:READY:RESPONSE",body:r,service:{params:t.params,data:t.data,type:t.type},config:n,deprecated:{message:"FCL:FRAME:READY:RESPONSE is deprecated and replaced with type: FCL:VIEW:READY:RESPONSE"}}),u&&s({jsonrpc:"2.0",id:c,method:"fcl:sign",params:[r,t.params],deprecated:{message:"jsonrpc is deprecated and replaced with type: FCL:VIEW:READY:RESPONSE"}}),null==i||i.connect({send:function(e){s({type:"FCL:VIEW:CUSTOM_RPC",payload:e})}}),e.next=11;break;case 8:throw e.prev=8,e.t0=e.catch(1),e.t0;case 11:case"end":return e.stop()}}),e,null,[[1,8]])})))()},onResponse:function(t,r){var n=r.close;try{if("object"!==nR(t.data))return;var i=cf(t.data);switch(i.status){case"APPROVED":e(i.data),n();break;case"DECLINED":a("Declined: ".concat(i.reason||"No reason supplied")),n();break;case"REDIRECT":e(i),n();break;default:a("Declined: No reason supplied"),n()}}catch(e){throw console.error("execIframeRPC onResponse error",e),e}},onMessage:function(t,r){var n=r.close;try{if("object"!==nR(t.data))return;if("2.0"!==t.data.jsonrpc)return;if(t.data.id!==c)return;var i=cf(t.data.result);switch(i.status){case"APPROVED":e(i.data),n();break;case"DECLINED":a("Declined: ".concat(i.reason||"No reason supplied")),n();break;case"REDIRECT":e(i),n();break;default:a("Declined: No reason supplied"),n()}}catch(e){throw console.error("execIframeRPC onMessage error",e),e}},onClose:function(){a("Declined: Externally Halted")},onCustomRpc:function(e){null==i||i.receive(e)}}),h=l.close;o&&(o.aborted&&(a("Declined: Aborted"),h()),o.addEventListener("abort",(function(){a("Declined: Aborted"),h()})))}))})),Ru["POP/RPC"],(function(e){var t=e.service,r=e.body,n=e.config,i=e.abortSignal,o=e.customRpc,s=e.opts;return new Promise((function(e,a){var c=rR(),u=s.redir,l=s.includeOlderJsonRpcCall,h=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(null==e)return{send:MR,close:MR};var r,n,i=t.onClose||MR,o=t.onMessage||MR,s=t.onReady||MR,a=t.onResponse||MR,c=t.onCustomRpc||MR,u=wf({close:f,send:d,onReady:s,onResponse:a,onMessage:o,onCustomRpc:c,getSource:function(){return r}});window.addEventListener("message",u);var l=iR(OR(sf(e)),2);r=l[0],n=l[1];var h=setInterval((function(){r&&r.closed&&f()}),500);return{send:d,close:f};function f(){try{window.removeEventListener("message",u),clearInterval(h),n(),i()}catch(e){console.error("Popup Close Error",e)}}function d(e){try{r.postMessage(JSON.parse(JSON.stringify(e||{})),"*")}catch(t){console.error("Popup Send Error",e,t)}}}(t,{customRpc:o,onReady:function(e,i){return dR(oR().mark((function e(){var s;return oR().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:s=i.send,e.prev=1,s({fclVersion:CR,type:"FCL:VIEW:READY:RESPONSE",body:r,service:{params:t.params,data:t.data,type:t.type},config:n}),s({fclVersion:CR,type:"FCL:FRAME:READY:RESPONSE",body:r,service:{params:t.params,data:t.data,type:t.type},config:n,deprecated:{message:"FCL:FRAME:READY:RESPONSE is deprecated and replaced with type: FCL:VIEW:READY:RESPONSE"}}),l&&s({jsonrpc:"2.0",id:c,method:"fcl:sign",params:[r,t.params]}),null==o||o.connect({send:function(e){s({type:"FCL:VIEW:CUSTOM_RPC",payload:e})}}),e.next=11;break;case 8:throw e.prev=8,e.t0=e.catch(1),e.t0;case 11:case"end":return e.stop()}}),e,null,[[1,8]])})))()},onResponse:function(t,r){var n=r.close;try{if("object"!==nR(t.data))return;var i=cf(t.data);switch(i.status){case"APPROVED":e(i.data),!u&&n();break;case"DECLINED":a("Declined: ".concat(i.reason||"No reason supplied")),n();break;case"REDIRECT":e(i),n();break;default:a("Declined: No reason supplied"),n()}}catch(e){throw console.error("execPopRPC onResponse error",e),e}},onMessage:function(t,r){var n=r.close;try{if("object"!==nR(t.data))return;if("2.0"!==t.data.jsonrpc)return;if(t.data.id!==c)return;var i=cf(t.data.result);switch(i.status){case"APPROVED":e(i.data),!u&&n();break;case"DECLINED":a("Declined: ".concat(i.reason||"No reason supplied")),n();break;case"REDIRECT":e(i),n();break;default:a("Declined: No reason supplied"),n()}}catch(e){throw console.error("execPopRPC onMessage error",e),e}},onClose:function(){a("Declined: Externally Halted")},onCustomRpc:function(e){null==o||o.receive(e)}}),f=h.close;i&&(i.aborted&&(a("Declined: Aborted"),f()),i.addEventListener("abort",(function(){a("Declined: Aborted"),f()})))}))})),Ru["TAB/RPC"],(function(e){var t=e.service,r=e.body,n=e.config,i=e.abortSignal,o=e.customRpc,s=e.opts;return new Promise((function(e,a){var c=rR(),u=s.redir,l=s.includeOlderJsonRpcCall,h=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(null==e)return{send:LR,close:LR};var r,n,i=t.onClose||LR,o=t.onMessage||LR,s=t.onReady||LR,a=t.onResponse||LR,c=t.onCustomRpc||LR,u=wf({close:f,send:d,onReady:s,onResponse:a,onMessage:o,onCustomRpc:c,getSource:function(){return r}});window.addEventListener("message",u);var l=iR(RR(sf(e)),2);r=l[0],n=l[1];var h=setInterval((function(){r&&r.closed&&f()}),500);return{send:d,close:f};function f(){try{window.removeEventListener("message",u),clearInterval(h),n(),i()}catch(e){console.error("Tab Close Error",e)}}function d(e){try{r.postMessage(JSON.parse(JSON.stringify(e||{})),"*")}catch(t){console.error("Tab Send Error",e,t)}}}(t,{customRpc:o,onReady:function(e,i){return dR(oR().mark((function e(){var s;return oR().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:s=i.send,e.prev=1,s({fclVersion:CR,type:"FCL:VIEW:READY:RESPONSE",body:r,service:{params:t.params,data:t.data,type:t.type},config:n}),s({fclVersion:CR,type:"FCL:FRAME:READY:RESPONSE",body:r,service:{params:t.params,data:t.data,type:t.type},config:n,deprecated:{message:"FCL:FRAME:READY:RESPONSE is deprecated and replaced with type: FCL:VIEW:READY:RESPONSE"}}),l&&s({jsonrpc:"2.0",id:c,method:"fcl:sign",params:[r,t.params]}),null==o||o.connect({send:function(e){s({type:"FCL:VIEW:CUSTOM_RPC",payload:e})}}),e.next=11;break;case 8:throw e.prev=8,e.t0=e.catch(1),e.t0;case 11:case"end":return e.stop()}}),e,null,[[1,8]])})))()},onResponse:function(t,r){var n=r.close;try{if("object"!==nR(t.data))return;var i=cf(t.data);switch(i.status){case"APPROVED":e(i.data),!u&&n();break;case"DECLINED":a("Declined: ".concat(i.reason||"No reason supplied")),n();break;case"REDIRECT":e(i),n();break;default:a("Declined: No reason supplied"),n()}}catch(e){throw console.error("execPopRPC onResponse error",e),e}},onMessage:function(t,r){var n=r.close;try{if("object"!==nR(t.data))return;if("2.0"!==t.data.jsonrpc)return;if(t.data.id!==c)return;var i=cf(t.data.result);switch(i.status){case"APPROVED":e(i.data),!u&&n();break;case"DECLINED":a("Declined: ".concat(i.reason||"No reason supplied")),n();break;case"REDIRECT":e(i),n();break;default:a("Declined: No reason supplied"),n()}}catch(e){throw console.error("execPopRPC onMessage error",e),e}},onClose:function(){a("Declined: Externally Halted")},onCustomRpc:function(e){null==o||o.receive(e)}}),f=h.close;i&&(i.aborted&&(f(),a("Declined: Aborted")),i.addEventListener("abort",(function(){f(),a("Declined: Aborted")})))}))})),Ru["EXT/RPC"],(function(e){var t=e.service,r=e.body,n=e.config,i=e.abortSignal,o=e.customRpc;return e.opts,new Promise((function(e,s){var a=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(null==e)return{send:BR,close:BR};var r=t.onClose||BR,n=t.onMessage||BR,i=t.onReady||BR,o=t.onResponse||BR,s=t.onCustomRpc||BR,a=wf({close:c,send:u,onReady:i,onResponse:o,onMessage:n,onCustomRpc:s});return window.addEventListener("message",a),u({service:e}),{send:u,close:c};function c(){try{window.removeEventListener("message",a),r()}catch(e){console.error("Ext Close Error",e)}}function u(e){try{window&&window.postMessage(JSON.parse(JSON.stringify(e||{})),"*")}catch(t){console.error("Ext Send Error",e,t)}}}(t,{onReady:function(e,i){return dR(oR().mark((function e(){var s;return oR().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:s=i.send,e.prev=1,s({fclVersion:CR,type:"FCL:VIEW:READY:RESPONSE",body:r,service:{params:t.params,data:t.data,type:t.type},config:n}),null==o||o.connect({send:function(e){s({type:"FCL:VIEW:CUSTOM_RPC",body:e})}}),e.next=9;break;case 6:throw e.prev=6,e.t0=e.catch(1),e.t0;case 9:case"end":return e.stop()}}),e,null,[[1,6]])})))()},onResponse:function(t,r){var n=r.close;try{if("object"!==nR(t.data))return;var i=cf(t.data);switch(i.status){case"APPROVED":e(i.data),n();break;case"DECLINED":s("Declined: ".concat(i.reason||"No reason supplied")),n();break;case"REDIRECT":e(i),n();break;default:s("Declined: No reason supplied"),n()}}catch(e){throw console.error("execExtRPC onResponse error",e),e}},onClose:function(){s("Declined: Externally Halted")},onCustomRpc:function(e){null==o||o.receive(e)}}),c=a.close;i&&(i.aborted&&(c(),s("Declined: Aborted")),i.addEventListener("abort",(function(){c(),s("Declined: Aborted")})))}))})),WR=function(){return"undefined"==typeof window},$R=function(e){if(null==e)return null;try{return JSON.parse(e)}catch(e){return null}},JR={can:!WR()&&!!window.sessionStorage,get:(qR=dR(oR().mark((function e(t){return oR().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",$R(sessionStorage.getItem(t)));case 1:case"end":return e.stop()}}),e)}))),function(e){return qR.apply(this,arguments)}),put:(zR=dR(oR().mark((function e(t,r){return oR().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",sessionStorage.setItem(t,JSON.stringify(r)));case 1:case"end":return e.stop()}}),e)}))),function(e,t){return zR.apply(this,arguments)})},YR={can:!WR()&&!!window.localStorage,get:(HR=dR(oR().mark((function e(t){return oR().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",$R(localStorage.getItem(t)));case 1:case"end":return e.stop()}}),e)}))),function(e){return HR.apply(this,arguments)}),put:(GR=dR(oR().mark((function e(t,r){return oR().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",localStorage.setItem(t,JSON.stringify(r)));case 1:case"end":return e.stop()}}),e)}))),function(e,t){return GR.apply(this,arguments)})},QR="undefined"==typeof window,XR=of({platform:"web",discovery:{execStrategy:function(){return _R.apply(this,arguments)}},getStorageProvider:(KR=dR(oR().mark((function e(){return oR().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ct.get("fcl.storage");case 2:if(e.t0=e.sent,e.t0){e.next=5;break}e.t0=YR;case 5:return e.abrupt("return",e.t0);case 6:case"end":return e.stop()}}),e)}))),function(){return KR.apply(this,arguments)})}),ZR=function(e){var t=function(){var t=Wc(Nc().mark((function t(){var r,n,i,o,s=arguments;return Nc().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=s.length>0&&void 0!==s[0]?s[0]:{},t.prev=1,t.next=4,Su(r);case 4:return t.next=6,Eu(r);case 6:return r=t.sent,i="function"==typeof e?e:of(e),t.next=10,ct().get("fcl.authz",i().authorization);case 10:return o=t.sent,n=Ms([pa(r.cadence),oa(ru(r.args||[])),r.limit&&tu(r.limit)&&ia(r.limit),aa(r.proposer||r.authz||o),ca(r.payer||r.authz||o),$s(r.authorizations||[r.authz||o])]).then(Ls),t.abrupt("return",n);case 15:throw t.prev=15,t.t0=t.catch(1),t.t0;case 18:case"end":return t.stop()}}),t,null,[[1,15]])})));return function(){return t.apply(this,arguments)}}();return t}(XR),eN=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return XR().authenticate(e)},tN=function(){return XR().unauthenticate()},rN=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return XR().unauthenticate(),XR().authenticate(e)},nN=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return XR().authenticate(e)},iN=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return XR().authenticate(e)},oN=XR().authorization;ct({"discovery.wallet.method.default":"IFRAME/RPC"}),Ol({coreStrategies:VR}),function(){if(!QR){var e=null,t=!1;ct.subscribe(function(){var r=dR(oR().mark((function r(n){var i,o,s,a,c,u;return oR().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(i={"walletconnect.projectId":n["walletconnect.projectId"],"walletconnect.disableNotifications":n["walletconnect.disableNotifications"],"app.detail.title":n["app.detail.title"],"app.detail.icon":n["app.detail.icon"],"app.detail.description":n["app.detail.description"],"app.detail.url":n["app.detail.url"]},o=i["walletconnect.projectId"],s=i["walletconnect.disableNotifications"],a=e,e=JSON.stringify(i,null,2),!t){r.next=8;break}return a!==e&&console.warn("FCL WalletConnect Plugin has been already loaded with different configuration. It is not possible to change the configuration after the plugin has been loaded.\n\nPrevious configuration:\n".concat(a,"\n\nCurrent configuration:\n").concat(e)),r.abrupt("return");case 8:if(o){r.next=11;break}return r.abrupt("return");case 11:if(O(!!o,"FCL Configuration value for 'walletconnect.projectId' is required"),!Pl.getPlugins().has(jP)){r.next=16;break}return t||console.warn("It seems like the FCL WalletConnect plugins has been already loaded manually. This is no longer necessary, please see the documentation for more information."),t=!0,r.abrupt("return");case 16:t=!0,(c=ZP({projectId:o,metadata:(l=i,h=void 0,f=void 0,d=void 0,p=void 0,h=l["app.detail.title"],f=l["app.detail.icon"],d=l["app.detail.description"],p=l["app.detail.url"],{name:null!=h?h:document.title,description:null!=d?d:"",url:null!=p?p:window.location.origin,icons:f?[f]:[]}),disableNotifications:s})).clientPromise,u=c.FclWcServicePlugin,Pl.add([u]);case 19:case"end":return r.stop()}var l,h,f,d,p}),r)})));return function(e){return r.apply(this,arguments)}}())}}()},7007:e=>{"use strict";var t,r="object"==typeof Reflect?Reflect:null,n=r&&"function"==typeof r.apply?r.apply:function(e,t,r){return Function.prototype.apply.call(e,t,r)};t=r&&"function"==typeof r.ownKeys?r.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)};var i=Number.isNaN||function(e){return e!=e};function o(){o.init.call(this)}e.exports=o,e.exports.once=function(e,t){return new Promise((function(r,n){function i(r){e.removeListener(t,o),n(r)}function o(){"function"==typeof e.removeListener&&e.removeListener("error",i),r([].slice.call(arguments))}g(e,t,o,{once:!0}),"error"!==t&&function(e,t){"function"==typeof e.on&&g(e,"error",t,{once:!0})}(e,i)}))},o.EventEmitter=o,o.prototype._events=void 0,o.prototype._eventsCount=0,o.prototype._maxListeners=void 0;var s=10;function a(e){if("function"!=typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}function c(e){return void 0===e._maxListeners?o.defaultMaxListeners:e._maxListeners}function u(e,t,r,n){var i,o,s,u;if(a(r),void 0===(o=e._events)?(o=e._events=Object.create(null),e._eventsCount=0):(void 0!==o.newListener&&(e.emit("newListener",t,r.listener?r.listener:r),o=e._events),s=o[t]),void 0===s)s=o[t]=r,++e._eventsCount;else if("function"==typeof s?s=o[t]=n?[r,s]:[s,r]:n?s.unshift(r):s.push(r),(i=c(e))>0&&s.length>i&&!s.warned){s.warned=!0;var l=new Error("Possible EventEmitter memory leak detected. "+s.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");l.name="MaxListenersExceededWarning",l.emitter=e,l.type=t,l.count=s.length,u=l,console&&console.warn&&console.warn(u)}return e}function l(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function h(e,t,r){var n={fired:!1,wrapFn:void 0,target:e,type:t,listener:r},i=l.bind(n);return i.listener=r,n.wrapFn=i,i}function f(e,t,r){var n=e._events;if(void 0===n)return[];var i=n[t];return void 0===i?[]:"function"==typeof i?r?[i.listener||i]:[i]:r?function(e){for(var t=new Array(e.length),r=0;r<t.length;++r)t[r]=e[r].listener||e[r];return t}(i):p(i,i.length)}function d(e){var t=this._events;if(void 0!==t){var r=t[e];if("function"==typeof r)return 1;if(void 0!==r)return r.length}return 0}function p(e,t){for(var r=new Array(t),n=0;n<t;++n)r[n]=e[n];return r}function g(e,t,r,n){if("function"==typeof e.on)n.once?e.once(t,r):e.on(t,r);else{if("function"!=typeof e.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof e);e.addEventListener(t,(function i(o){n.once&&e.removeEventListener(t,i),r(o)}))}}Object.defineProperty(o,"defaultMaxListeners",{enumerable:!0,get:function(){return s},set:function(e){if("number"!=typeof e||e<0||i(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");s=e}}),o.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},o.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||i(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},o.prototype.getMaxListeners=function(){return c(this)},o.prototype.emit=function(e){for(var t=[],r=1;r<arguments.length;r++)t.push(arguments[r]);var i="error"===e,o=this._events;if(void 0!==o)i=i&&void 0===o.error;else if(!i)return!1;if(i){var s;if(t.length>0&&(s=t[0]),s instanceof Error)throw s;var a=new Error("Unhandled error."+(s?" ("+s.message+")":""));throw a.context=s,a}var c=o[e];if(void 0===c)return!1;if("function"==typeof c)n(c,this,t);else{var u=c.length,l=p(c,u);for(r=0;r<u;++r)n(l[r],this,t)}return!0},o.prototype.addListener=function(e,t){return u(this,e,t,!1)},o.prototype.on=o.prototype.addListener,o.prototype.prependListener=function(e,t){return u(this,e,t,!0)},o.prototype.once=function(e,t){return a(t),this.on(e,h(this,e,t)),this},o.prototype.prependOnceListener=function(e,t){return a(t),this.prependListener(e,h(this,e,t)),this},o.prototype.removeListener=function(e,t){var r,n,i,o,s;if(a(t),void 0===(n=this._events))return this;if(void 0===(r=n[e]))return this;if(r===t||r.listener===t)0==--this._eventsCount?this._events=Object.create(null):(delete n[e],n.removeListener&&this.emit("removeListener",e,r.listener||t));else if("function"!=typeof r){for(i=-1,o=r.length-1;o>=0;o--)if(r[o]===t||r[o].listener===t){s=r[o].listener,i=o;break}if(i<0)return this;0===i?r.shift():function(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}(r,i),1===r.length&&(n[e]=r[0]),void 0!==n.removeListener&&this.emit("removeListener",e,s||t)}return this},o.prototype.off=o.prototype.removeListener,o.prototype.removeAllListeners=function(e){var t,r,n;if(void 0===(r=this._events))return this;if(void 0===r.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==r[e]&&(0==--this._eventsCount?this._events=Object.create(null):delete r[e]),this;if(0===arguments.length){var i,o=Object.keys(r);for(n=0;n<o.length;++n)"removeListener"!==(i=o[n])&&this.removeAllListeners(i);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(t=r[e]))this.removeListener(e,t);else if(void 0!==t)for(n=t.length-1;n>=0;n--)this.removeListener(e,t[n]);return this},o.prototype.listeners=function(e){return f(this,e,!0)},o.prototype.rawListeners=function(e){return f(this,e,!1)},o.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):d.call(e,t)},o.prototype.listenerCount=d,o.prototype.eventNames=function(){return this._eventsCount>0?t(this._events):[]}},7173:(e,t,r)=>{"use strict";function n(){return(null===r.g||void 0===r.g?void 0:r.g.crypto)||(null===r.g||void 0===r.g?void 0:r.g.msCrypto)||{}}function i(){const e=n();return e.subtle||e.webkitSubtle}Object.defineProperty(t,"__esModule",{value:!0}),t.isBrowserCryptoAvailable=t.getSubtleCrypto=t.getBrowerCrypto=void 0,t.getBrowerCrypto=n,t.getSubtleCrypto=i,t.isBrowserCryptoAvailable=function(){return!!n()&&!!i()}},7426:(e,t,r)=>{"use strict";var n=r(3349),i=r(6698);function o(e,t){return 55296==(64512&e.charCodeAt(t))&&!(t<0||t+1>=e.length)&&56320==(64512&e.charCodeAt(t+1))}function s(e){return(e>>>24|e>>>8&65280|e<<8&16711680|(255&e)<<24)>>>0}function a(e){return 1===e.length?"0"+e:e}function c(e){return 7===e.length?"0"+e:6===e.length?"00"+e:5===e.length?"000"+e:4===e.length?"0000"+e:3===e.length?"00000"+e:2===e.length?"000000"+e:1===e.length?"0000000"+e:e}t.inherits=i,t.toArray=function(e,t){if(Array.isArray(e))return e.slice();if(!e)return[];var r=[];if("string"==typeof e)if(t){if("hex"===t)for((e=e.replace(/[^a-z0-9]+/gi,"")).length%2!=0&&(e="0"+e),i=0;i<e.length;i+=2)r.push(parseInt(e[i]+e[i+1],16))}else for(var n=0,i=0;i<e.length;i++){var s=e.charCodeAt(i);s<128?r[n++]=s:s<2048?(r[n++]=s>>6|192,r[n++]=63&s|128):o(e,i)?(s=65536+((1023&s)<<10)+(1023&e.charCodeAt(++i)),r[n++]=s>>18|240,r[n++]=s>>12&63|128,r[n++]=s>>6&63|128,r[n++]=63&s|128):(r[n++]=s>>12|224,r[n++]=s>>6&63|128,r[n++]=63&s|128)}else for(i=0;i<e.length;i++)r[i]=0|e[i];return r},t.toHex=function(e){for(var t="",r=0;r<e.length;r++)t+=a(e[r].toString(16));return t},t.htonl=s,t.toHex32=function(e,t){for(var r="",n=0;n<e.length;n++){var i=e[n];"little"===t&&(i=s(i)),r+=c(i.toString(16))}return r},t.zero2=a,t.zero8=c,t.join32=function(e,t,r,i){var o=r-t;n(o%4==0);for(var s=new Array(o/4),a=0,c=t;a<s.length;a++,c+=4){var u;u="big"===i?e[c]<<24|e[c+1]<<16|e[c+2]<<8|e[c+3]:e[c+3]<<24|e[c+2]<<16|e[c+1]<<8|e[c],s[a]=u>>>0}return s},t.split32=function(e,t){for(var r=new Array(4*e.length),n=0,i=0;n<e.length;n++,i+=4){var o=e[n];"big"===t?(r[i]=o>>>24,r[i+1]=o>>>16&255,r[i+2]=o>>>8&255,r[i+3]=255&o):(r[i+3]=o>>>24,r[i+2]=o>>>16&255,r[i+1]=o>>>8&255,r[i]=255&o)}return r},t.rotr32=function(e,t){return e>>>t|e<<32-t},t.rotl32=function(e,t){return e<<t|e>>>32-t},t.sum32=function(e,t){return e+t>>>0},t.sum32_3=function(e,t,r){return e+t+r>>>0},t.sum32_4=function(e,t,r,n){return e+t+r+n>>>0},t.sum32_5=function(e,t,r,n,i){return e+t+r+n+i>>>0},t.sum64=function(e,t,r,n){var i=e[t],o=n+e[t+1]>>>0,s=(o<n?1:0)+r+i;e[t]=s>>>0,e[t+1]=o},t.sum64_hi=function(e,t,r,n){return(t+n>>>0<t?1:0)+e+r>>>0},t.sum64_lo=function(e,t,r,n){return t+n>>>0},t.sum64_4_hi=function(e,t,r,n,i,o,s,a){var c=0,u=t;return c+=(u=u+n>>>0)<t?1:0,c+=(u=u+o>>>0)<o?1:0,e+r+i+s+(c+=(u=u+a>>>0)<a?1:0)>>>0},t.sum64_4_lo=function(e,t,r,n,i,o,s,a){return t+n+o+a>>>0},t.sum64_5_hi=function(e,t,r,n,i,o,s,a,c,u){var l=0,h=t;return l+=(h=h+n>>>0)<t?1:0,l+=(h=h+o>>>0)<o?1:0,l+=(h=h+a>>>0)<a?1:0,e+r+i+s+c+(l+=(h=h+u>>>0)<u?1:0)>>>0},t.sum64_5_lo=function(e,t,r,n,i,o,s,a,c,u){return t+n+o+a+u>>>0},t.rotr64_hi=function(e,t,r){return(t<<32-r|e>>>r)>>>0},t.rotr64_lo=function(e,t,r){return(e<<32-r|t>>>r)>>>0},t.shr64_hi=function(e,t,r){return e>>>r},t.shr64_lo=function(e,t,r){return(e<<32-r|t>>>r)>>>0}},7526:(e,t)=>{"use strict";t.byteLength=function(e){var t=a(e),r=t[0],n=t[1];return 3*(r+n)/4-n},t.toByteArray=function(e){var t,r,o=a(e),s=o[0],c=o[1],u=new i(function(e,t,r){return 3*(t+r)/4-r}(0,s,c)),l=0,h=c>0?s-4:s;for(r=0;r<h;r+=4)t=n[e.charCodeAt(r)]<<18|n[e.charCodeAt(r+1)]<<12|n[e.charCodeAt(r+2)]<<6|n[e.charCodeAt(r+3)],u[l++]=t>>16&255,u[l++]=t>>8&255,u[l++]=255&t;return 2===c&&(t=n[e.charCodeAt(r)]<<2|n[e.charCodeAt(r+1)]>>4,u[l++]=255&t),1===c&&(t=n[e.charCodeAt(r)]<<10|n[e.charCodeAt(r+1)]<<4|n[e.charCodeAt(r+2)]>>2,u[l++]=t>>8&255,u[l++]=255&t),u},t.fromByteArray=function(e){for(var t,n=e.length,i=n%3,o=[],s=16383,a=0,u=n-i;a<u;a+=s)o.push(c(e,a,a+s>u?u:a+s));return 1===i?(t=e[n-1],o.push(r[t>>2]+r[t<<4&63]+"==")):2===i&&(t=(e[n-2]<<8)+e[n-1],o.push(r[t>>10]+r[t>>4&63]+r[t<<2&63]+"=")),o.join("")};for(var r=[],n=[],i="undefined"!=typeof Uint8Array?Uint8Array:Array,o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",s=0;s<64;++s)r[s]=o[s],n[o.charCodeAt(s)]=s;function a(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var r=e.indexOf("=");return-1===r&&(r=t),[r,r===t?0:4-r%4]}function c(e,t,n){for(var i,o,s=[],a=t;a<n;a+=3)i=(e[a]<<16&16711680)+(e[a+1]<<8&65280)+(255&e[a+2]),s.push(r[(o=i)>>18&63]+r[o>>12&63]+r[o>>6&63]+r[63&o]);return s.join("")}n["-".charCodeAt(0)]=62,n["_".charCodeAt(0)]=63},7714:(e,t,r)=>{"use strict";var n=r(7426),i=r(2287);function o(){if(!(this instanceof o))return new o;i.call(this),this.h=[3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428]}n.inherits(o,i),e.exports=o,o.blockSize=512,o.outSize=224,o.hmacStrength=192,o.padLength=64,o.prototype._digest=function(e){return"hex"===e?n.toHex32(this.h.slice(0,7),"big"):n.split32(this.h.slice(0,7),"big")}},7766:(e,t,r)=>{"use strict";var n=r(7426),i=r(6166),o=r(3349),s=n.rotr64_hi,a=n.rotr64_lo,c=n.shr64_hi,u=n.shr64_lo,l=n.sum64,h=n.sum64_hi,f=n.sum64_lo,d=n.sum64_4_hi,p=n.sum64_4_lo,g=n.sum64_5_hi,m=n.sum64_5_lo,y=i.BlockHash,v=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591];function b(){if(!(this instanceof b))return new b;y.call(this),this.h=[1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209],this.k=v,this.W=new Array(160)}function w(e,t,r,n,i){var o=e&r^~e&i;return o<0&&(o+=4294967296),o}function E(e,t,r,n,i,o){var s=t&n^~t&o;return s<0&&(s+=4294967296),s}function A(e,t,r,n,i){var o=e&r^e&i^r&i;return o<0&&(o+=4294967296),o}function _(e,t,r,n,i,o){var s=t&n^t&o^n&o;return s<0&&(s+=4294967296),s}function x(e,t){var r=s(e,t,28)^s(t,e,2)^s(t,e,7);return r<0&&(r+=4294967296),r}function S(e,t){var r=a(e,t,28)^a(t,e,2)^a(t,e,7);return r<0&&(r+=4294967296),r}function k(e,t){var r=a(e,t,14)^a(e,t,18)^a(t,e,9);return r<0&&(r+=4294967296),r}function I(e,t){var r=s(e,t,1)^s(e,t,8)^c(e,t,7);return r<0&&(r+=4294967296),r}function O(e,t){var r=a(e,t,1)^a(e,t,8)^u(e,t,7);return r<0&&(r+=4294967296),r}function T(e,t){var r=a(e,t,19)^a(t,e,29)^u(e,t,6);return r<0&&(r+=4294967296),r}n.inherits(b,y),e.exports=b,b.blockSize=1024,b.outSize=512,b.hmacStrength=192,b.padLength=128,b.prototype._prepareBlock=function(e,t){for(var r=this.W,n=0;n<32;n++)r[n]=e[t+n];for(;n<r.length;n+=2){var i=(m=r[n-4],y=r[n-3],v=void 0,(v=s(m,y,19)^s(y,m,29)^c(m,y,6))<0&&(v+=4294967296),v),o=T(r[n-4],r[n-3]),a=r[n-14],u=r[n-13],l=I(r[n-30],r[n-29]),h=O(r[n-30],r[n-29]),f=r[n-32],g=r[n-31];r[n]=d(i,o,a,u,l,h,f,g),r[n+1]=p(i,o,a,u,l,h,f,g)}var m,y,v},b.prototype._update=function(e,t){this._prepareBlock(e,t);var r,n,i,a=this.W,c=this.h[0],u=this.h[1],d=this.h[2],p=this.h[3],y=this.h[4],v=this.h[5],b=this.h[6],I=this.h[7],O=this.h[8],T=this.h[9],P=this.h[10],R=this.h[11],N=this.h[12],C=this.h[13],M=this.h[14],L=this.h[15];o(this.k.length===a.length);for(var B=0;B<a.length;B+=2){var U=M,D=L,j=(i=void 0,(i=s(r=O,n=T,14)^s(r,n,18)^s(n,r,9))<0&&(i+=4294967296),i),F=k(O,T),z=w(O,0,P,0,N),q=E(0,T,0,R,0,C),G=this.k[B],H=this.k[B+1],K=a[B],V=a[B+1],W=g(U,D,j,F,z,q,G,H,K,V),$=m(U,D,j,F,z,q,G,H,K,V);U=x(c,u),D=S(c,u),j=A(c,0,d,0,y),F=_(0,u,0,p,0,v);var J=h(U,D,j,F),Y=f(U,D,j,F);M=N,L=C,N=P,C=R,P=O,R=T,O=h(b,I,W,$),T=f(I,I,W,$),b=y,I=v,y=d,v=p,d=c,p=u,c=h(W,$,J,Y),u=f(W,$,J,Y)}l(this.h,0,c,u),l(this.h,2,d,p),l(this.h,4,y,v),l(this.h,6,b,I),l(this.h,8,O,T),l(this.h,10,P,R),l(this.h,12,N,C),l(this.h,14,M,L)},b.prototype._digest=function(e){return"hex"===e?n.toHex32(this.h,"big"):n.split32(this.h,"big")}},7790:()=>{},7952:(e,t,r)=>{var n=t;n.utils=r(7426),n.common=r(6166),n.sha=r(6229),n.ripemd=r(6784),n.hmac=r(8948),n.sha1=n.sha.sha1,n.sha256=n.sha.sha256,n.sha224=n.sha.sha224,n.sha384=n.sha.sha384,n.sha512=n.sha.sha512,n.ripemd160=n.ripemd.ripemd160},8096:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=a(r(6317)),i=a(r(3126)),o=a(r(2700)),s=a(r(3671));function a(e){return e&&e.__esModule?e:{default:e}}t.default=function(){var e=new Uint32Array(10),t=new Uint32Array(10),r=new Uint32Array(2);return function(a){for(var c=0;c<24;c++)(0,s.default)({A:a,C:e,D:t,W:r}),(0,o.default)({A:a,C:e,W:r}),(0,n.default)({A:a,C:e}),(0,i.default)({A:a,roundIndex:c});e.fill(0),t.fill(0),r.fill(0)}}},8118:(e,t,r)=>{"use strict";r.r(t),r.d(t,{BaseContract:()=>Cn,BigNumber:()=>$,Contract:()=>Mn,ContractFactory:()=>Ln,FixedNumber:()=>Vn,Signer:()=>ur,VoidSigner:()=>lr,Wallet:()=>Eo,Wordlist:()=>_i,constants:()=>i,errors:()=>m,ethers:()=>c,getDefaultProvider:()=>gc,logger:()=>Vc,providers:()=>o,utils:()=>a,version:()=>Kc,wordlists:()=>Ii});var n={};r.r(n),r.d(n,{decode:()=>Ie,encode:()=>xe});var i={};r.r(i),r.d(i,{AddressZero:()=>xo,EtherSymbol:()=>ko,HashZero:()=>So,MaxInt256:()=>mt,MaxUint256:()=>pt,MinInt256:()=>gt,NegativeOne:()=>ut,One:()=>ht,Two:()=>ft,WeiPerEther:()=>dt,Zero:()=>lt});var o={};r.r(o),r.d(o,{AlchemyProvider:()=>Ea,AlchemyWebSocketProvider:()=>wa,AnkrProvider:()=>Sa,BaseProvider:()=>Ys,CloudflareProvider:()=>Ia,EtherscanProvider:()=>La,FallbackProvider:()=>Ya,Formatter:()=>As,InfuraProvider:()=>tc,InfuraWebSocketProvider:()=>ec,IpcProvider:()=>Qa,JsonRpcBatchProvider:()=>rc,JsonRpcProvider:()=>ua,JsonRpcSigner:()=>sa,NodesmithProvider:()=>ic,PocketProvider:()=>ac,Provider:()=>ir,QuickNodeProvider:()=>uc,Resolver:()=>Ws,StaticJsonRpcProvider:()=>ma,UrlJsonRpcProvider:()=>ya,Web3Provider:()=>dc,WebSocketProvider:()=>pa,getDefaultProvider:()=>gc,getNetwork:()=>Mo,isCommunityResourcable:()=>_s,isCommunityResource:()=>xs,showThrottleMessage:()=>ks});var s={};r.r(s),r.d(s,{decode:()=>Lo,encode:()=>Bo});var a={};r.r(a),r.d(a,{AbiCoder:()=>Vt,ConstructorFragment:()=>Lt,ErrorFragment:()=>Dt,EventFragment:()=>Rt,FormatTypes:()=>kt,Fragment:()=>Pt,FunctionFragment:()=>Bt,HDNode:()=>Di,Indexed:()=>Xt,Interface:()=>tr,LogDescription:()=>Jt,Logger:()=>v,ParamType:()=>Ot,RLP:()=>n,SigningKey:()=>Xr,SupportedAlgorithm:()=>gi,TransactionDescription:()=>Yt,TransactionTypes:()=>rn,UnicodeNormalizationForm:()=>Fe,Utf8ErrorFuncs:()=>Ge,Utf8ErrorReason:()=>ze,_TypedDataEncoder:()=>fi,_fetchData:()=>gs,_toEscapedUtf8String:()=>We,accessListify:()=>fn,arrayify:()=>S,base58:()=>pi,base64:()=>s,checkProperties:()=>ie,checkResultErrors:()=>de,commify:()=>Fc,computeAddress:()=>cn,computeHmac:()=>wi,computePublicKey:()=>en,concat:()=>k,deepCopy:()=>ue,defaultAbiCoder:()=>Wt,defaultPath:()=>Ui,defineReadOnly:()=>te,dnsEncode:()=>cs,entropyToMnemonic:()=>zi,fetchJson:()=>ms,formatBytes32String:()=>Bc,formatEther:()=>Gc,formatUnits:()=>zc,getAccountPath:()=>Gi,getAddress:()=>Me,getContractAddress:()=>Ue,getCreate2Address:()=>De,getIcapAddress:()=>Be,getJsonWalletAddress:()=>yo,getStatic:()=>re,hashMessage:()=>Yn,hexConcat:()=>M,hexDataLength:()=>N,hexDataSlice:()=>C,hexStripZeros:()=>B,hexValue:()=>L,hexZeroPad:()=>U,hexlify:()=>R,id:()=>Qe,isAddress:()=>Le,isBytes:()=>x,isBytesLike:()=>A,isHexString:()=>T,isValidMnemonic:()=>qi,isValidName:()=>ss,joinSignature:()=>j,keccak256:()=>be,mnemonicToEntropy:()=>Fi,mnemonicToSeed:()=>ji,namehash:()=>as,nameprep:()=>Lc,parseBytes32String:()=>Uc,parseEther:()=>Hc,parseTransaction:()=>vn,parseUnits:()=>qc,poll:()=>ys,randomBytes:()=>Wi,recoverAddress:()=>un,recoverPublicKey:()=>Zr,resolveProperties:()=>ne,ripemd160:()=>yi,serializeTransaction:()=>mn,sha256:()=>vi,sha512:()=>bi,shallowCopy:()=>oe,shuffled:()=>Ba,solidityKeccak256:()=>_c,solidityPack:()=>Ac,soliditySha256:()=>xc,splitSignature:()=>D,stripZeros:()=>I,toUtf8Bytes:()=>Ke,toUtf8CodePoints:()=>Ye,toUtf8String:()=>Je,verifyMessage:()=>Ao,verifyTypedData:()=>_o,zeroPad:()=>O});var c={};r.r(c),r.d(c,{BaseContract:()=>Cn,BigNumber:()=>$,Contract:()=>Mn,ContractFactory:()=>Ln,FixedNumber:()=>Vn,Signer:()=>ur,VoidSigner:()=>lr,Wallet:()=>Eo,Wordlist:()=>_i,constants:()=>i,errors:()=>m,getDefaultProvider:()=>gc,logger:()=>Vc,providers:()=>o,utils:()=>a,version:()=>Kc,wordlists:()=>Ii});let u=!1,l=!1;const h={debug:1,default:2,info:2,warning:3,error:4,off:5};let f=h.default,d=null;const p=function(){try{const e=[];if(["NFD","NFC","NFKD","NFKC"].forEach((t=>{try{if("test"!=="test".normalize(t))throw new Error("bad normalize")}catch(r){e.push(t)}})),e.length)throw new Error("missing "+e.join(", "));if(String.fromCharCode(233).normalize("NFD")!==String.fromCharCode(101,769))throw new Error("broken implementation")}catch(e){return e.message}return null}();var g,m;!function(e){e.DEBUG="DEBUG",e.INFO="INFO",e.WARNING="WARNING",e.ERROR="ERROR",e.OFF="OFF"}(g||(g={})),function(e){e.UNKNOWN_ERROR="UNKNOWN_ERROR",e.NOT_IMPLEMENTED="NOT_IMPLEMENTED",e.UNSUPPORTED_OPERATION="UNSUPPORTED_OPERATION",e.NETWORK_ERROR="NETWORK_ERROR",e.SERVER_ERROR="SERVER_ERROR",e.TIMEOUT="TIMEOUT",e.BUFFER_OVERRUN="BUFFER_OVERRUN",e.NUMERIC_FAULT="NUMERIC_FAULT",e.MISSING_NEW="MISSING_NEW",e.INVALID_ARGUMENT="INVALID_ARGUMENT",e.MISSING_ARGUMENT="MISSING_ARGUMENT",e.UNEXPECTED_ARGUMENT="UNEXPECTED_ARGUMENT",e.CALL_EXCEPTION="CALL_EXCEPTION",e.INSUFFICIENT_FUNDS="INSUFFICIENT_FUNDS",e.NONCE_EXPIRED="NONCE_EXPIRED",e.REPLACEMENT_UNDERPRICED="REPLACEMENT_UNDERPRICED",e.UNPREDICTABLE_GAS_LIMIT="UNPREDICTABLE_GAS_LIMIT",e.TRANSACTION_REPLACED="TRANSACTION_REPLACED",e.ACTION_REJECTED="ACTION_REJECTED"}(m||(m={}));const y="0123456789abcdef";class v{constructor(e){Object.defineProperty(this,"version",{enumerable:!0,value:e,writable:!1})}_log(e,t){const r=e.toLowerCase();null==h[r]&&this.throwArgumentError("invalid log level name","logLevel",e),f>h[r]||console.log.apply(console,t)}debug(...e){this._log(v.levels.DEBUG,e)}info(...e){this._log(v.levels.INFO,e)}warn(...e){this._log(v.levels.WARNING,e)}makeError(e,t,r){if(l)return this.makeError("censored error",t,{});t||(t=v.errors.UNKNOWN_ERROR),r||(r={});const n=[];Object.keys(r).forEach((e=>{const t=r[e];try{if(t instanceof Uint8Array){let r="";for(let e=0;e<t.length;e++)r+=y[t[e]>>4],r+=y[15&t[e]];n.push(e+"=Uint8Array(0x"+r+")")}else n.push(e+"="+JSON.stringify(t))}catch(t){n.push(e+"="+JSON.stringify(r[e].toString()))}})),n.push(`code=${t}`),n.push(`version=${this.version}`);const i=e;let o="";switch(t){case m.NUMERIC_FAULT:{o="NUMERIC_FAULT";const t=e;switch(t){case"overflow":case"underflow":case"division-by-zero":o+="-"+t;break;case"negative-power":case"negative-width":o+="-unsupported";break;case"unbound-bitwise-result":o+="-unbound-result"}break}case m.CALL_EXCEPTION:case m.INSUFFICIENT_FUNDS:case m.MISSING_NEW:case m.NONCE_EXPIRED:case m.REPLACEMENT_UNDERPRICED:case m.TRANSACTION_REPLACED:case m.UNPREDICTABLE_GAS_LIMIT:o=t}o&&(e+=" [ See: https://links.ethers.org/v5-errors-"+o+" ]"),n.length&&(e+=" ("+n.join(", ")+")");const s=new Error(e);return s.reason=i,s.code=t,Object.keys(r).forEach((function(e){s[e]=r[e]})),s}throwError(e,t,r){throw this.makeError(e,t,r)}throwArgumentError(e,t,r){return this.throwError(e,v.errors.INVALID_ARGUMENT,{argument:t,value:r})}assert(e,t,r,n){e||this.throwError(t,r,n)}assertArgument(e,t,r,n){e||this.throwArgumentError(t,r,n)}checkNormalize(e){null==e&&(e="platform missing String.prototype.normalize"),p&&this.throwError("platform missing String.prototype.normalize",v.errors.UNSUPPORTED_OPERATION,{operation:"String.prototype.normalize",form:p})}checkSafeUint53(e,t){"number"==typeof e&&(null==t&&(t="value not safe"),(e<0||e>=9007199254740991)&&this.throwError(t,v.errors.NUMERIC_FAULT,{operation:"checkSafeInteger",fault:"out-of-safe-range",value:e}),e%1&&this.throwError(t,v.errors.NUMERIC_FAULT,{operation:"checkSafeInteger",fault:"non-integer",value:e}))}checkArgumentCount(e,t,r){r=r?": "+r:"",e<t&&this.throwError("missing argument"+r,v.errors.MISSING_ARGUMENT,{count:e,expectedCount:t}),e>t&&this.throwError("too many arguments"+r,v.errors.UNEXPECTED_ARGUMENT,{count:e,expectedCount:t})}checkNew(e,t){e!==Object&&null!=e||this.throwError("missing new",v.errors.MISSING_NEW,{name:t.name})}checkAbstract(e,t){e===t?this.throwError("cannot instantiate abstract class "+JSON.stringify(t.name)+" directly; use a sub-class",v.errors.UNSUPPORTED_OPERATION,{name:e.name,operation:"new"}):e!==Object&&null!=e||this.throwError("missing new",v.errors.MISSING_NEW,{name:t.name})}static globalLogger(){return d||(d=new v("logger/5.8.0")),d}static setCensorship(e,t){if(!e&&t&&this.globalLogger().throwError("cannot permanently disable censorship",v.errors.UNSUPPORTED_OPERATION,{operation:"setCensorship"}),u){if(!e)return;this.globalLogger().throwError("error censorship permanent",v.errors.UNSUPPORTED_OPERATION,{operation:"setCensorship"})}l=!!e,u=!!t}static setLogLevel(e){const t=h[e.toLowerCase()];null!=t?f=t:v.globalLogger().warn("invalid log level - "+e)}static from(e){return new v(e)}}v.errors=m,v.levels=g;const b=new v("bytes/5.8.0");function w(e){return!!e.toHexString}function E(e){return e.slice||(e.slice=function(){const t=Array.prototype.slice.call(arguments);return E(new Uint8Array(Array.prototype.slice.apply(e,t)))}),e}function A(e){return T(e)&&!(e.length%2)||x(e)}function _(e){return"number"==typeof e&&e==e&&e%1==0}function x(e){if(null==e)return!1;if(e.constructor===Uint8Array)return!0;if("string"==typeof e)return!1;if(!_(e.length)||e.length<0)return!1;for(let t=0;t<e.length;t++){const r=e[t];if(!_(r)||r<0||r>=256)return!1}return!0}function S(e,t){if(t||(t={}),"number"==typeof e){b.checkSafeUint53(e,"invalid arrayify value");const t=[];for(;e;)t.unshift(255&e),e=parseInt(String(e/256));return 0===t.length&&t.push(0),E(new Uint8Array(t))}if(t.allowMissingPrefix&&"string"==typeof e&&"0x"!==e.substring(0,2)&&(e="0x"+e),w(e)&&(e=e.toHexString()),T(e)){let r=e.substring(2);r.length%2&&("left"===t.hexPad?r="0"+r:"right"===t.hexPad?r+="0":b.throwArgumentError("hex data is odd-length","value",e));const n=[];for(let e=0;e<r.length;e+=2)n.push(parseInt(r.substring(e,e+2),16));return E(new Uint8Array(n))}return x(e)?E(new Uint8Array(e)):b.throwArgumentError("invalid arrayify value","value",e)}function k(e){const t=e.map((e=>S(e))),r=t.reduce(((e,t)=>e+t.length),0),n=new Uint8Array(r);return t.reduce(((e,t)=>(n.set(t,e),e+t.length)),0),E(n)}function I(e){let t=S(e);if(0===t.length)return t;let r=0;for(;r<t.length&&0===t[r];)r++;return r&&(t=t.slice(r)),t}function O(e,t){(e=S(e)).length>t&&b.throwArgumentError("value out of range","value",arguments[0]);const r=new Uint8Array(t);return r.set(e,t-e.length),E(r)}function T(e,t){return!("string"!=typeof e||!e.match(/^0x[0-9A-Fa-f]*$/)||t&&e.length!==2+2*t)}const P="0123456789abcdef";function R(e,t){if(t||(t={}),"number"==typeof e){b.checkSafeUint53(e,"invalid hexlify value");let t="";for(;e;)t=P[15&e]+t,e=Math.floor(e/16);return t.length?(t.length%2&&(t="0"+t),"0x"+t):"0x00"}if("bigint"==typeof e)return(e=e.toString(16)).length%2?"0x0"+e:"0x"+e;if(t.allowMissingPrefix&&"string"==typeof e&&"0x"!==e.substring(0,2)&&(e="0x"+e),w(e))return e.toHexString();if(T(e))return e.length%2&&("left"===t.hexPad?e="0x0"+e.substring(2):"right"===t.hexPad?e+="0":b.throwArgumentError("hex data is odd-length","value",e)),e.toLowerCase();if(x(e)){let t="0x";for(let r=0;r<e.length;r++){let n=e[r];t+=P[(240&n)>>4]+P[15&n]}return t}return b.throwArgumentError("invalid hexlify value","value",e)}function N(e){if("string"!=typeof e)e=R(e);else if(!T(e)||e.length%2)return null;return(e.length-2)/2}function C(e,t,r){return"string"!=typeof e?e=R(e):(!T(e)||e.length%2)&&b.throwArgumentError("invalid hexData","value",e),t=2+2*t,null!=r?"0x"+e.substring(t,2+2*r):"0x"+e.substring(t)}function M(e){let t="0x";return e.forEach((e=>{t+=R(e).substring(2)})),t}function L(e){const t=B(R(e,{hexPad:"left"}));return"0x"===t?"0x0":t}function B(e){"string"!=typeof e&&(e=R(e)),T(e)||b.throwArgumentError("invalid hex string","value",e),e=e.substring(2);let t=0;for(;t<e.length&&"0"===e[t];)t++;return"0x"+e.substring(t)}function U(e,t){for("string"!=typeof e?e=R(e):T(e)||b.throwArgumentError("invalid hex string","value",e),e.length>2*t+2&&b.throwArgumentError("value out of range","value",arguments[1]);e.length<2*t+2;)e="0x0"+e.substring(2);return e}function D(e){const t={r:"0x",s:"0x",_vs:"0x",recoveryParam:0,v:0,yParityAndS:"0x",compact:"0x"};if(A(e)){let r=S(e);64===r.length?(t.v=27+(r[32]>>7),r[32]&=127,t.r=R(r.slice(0,32)),t.s=R(r.slice(32,64))):65===r.length?(t.r=R(r.slice(0,32)),t.s=R(r.slice(32,64)),t.v=r[64]):b.throwArgumentError("invalid signature string","signature",e),t.v<27&&(0===t.v||1===t.v?t.v+=27:b.throwArgumentError("signature invalid v byte","signature",e)),t.recoveryParam=1-t.v%2,t.recoveryParam&&(r[32]|=128),t._vs=R(r.slice(32,64))}else{if(t.r=e.r,t.s=e.s,t.v=e.v,t.recoveryParam=e.recoveryParam,t._vs=e._vs,null!=t._vs){const r=O(S(t._vs),32);t._vs=R(r);const n=r[0]>=128?1:0;null==t.recoveryParam?t.recoveryParam=n:t.recoveryParam!==n&&b.throwArgumentError("signature recoveryParam mismatch _vs","signature",e),r[0]&=127;const i=R(r);null==t.s?t.s=i:t.s!==i&&b.throwArgumentError("signature v mismatch _vs","signature",e)}if(null==t.recoveryParam)null==t.v?b.throwArgumentError("signature missing v and recoveryParam","signature",e):0===t.v||1===t.v?t.recoveryParam=t.v:t.recoveryParam=1-t.v%2;else if(null==t.v)t.v=27+t.recoveryParam;else{const r=0===t.v||1===t.v?t.v:1-t.v%2;t.recoveryParam!==r&&b.throwArgumentError("signature recoveryParam mismatch v","signature",e)}null!=t.r&&T(t.r)?t.r=U(t.r,32):b.throwArgumentError("signature missing or invalid r","signature",e),null!=t.s&&T(t.s)?t.s=U(t.s,32):b.throwArgumentError("signature missing or invalid s","signature",e);const r=S(t.s);r[0]>=128&&b.throwArgumentError("signature s out of range","signature",e),t.recoveryParam&&(r[0]|=128);const n=R(r);t._vs&&(T(t._vs)||b.throwArgumentError("signature invalid _vs","signature",e),t._vs=U(t._vs,32)),null==t._vs?t._vs=n:t._vs!==n&&b.throwArgumentError("signature _vs mismatch v and s","signature",e)}return t.yParityAndS=t._vs,t.compact=t.r+t.yParityAndS.substring(2),t}function j(e){return R(k([(e=D(e)).r,e.s,e.recoveryParam?"0x1c":"0x1b"]))}var F=r(9404),z=r.n(F);const q="bignumber/5.8.0";var G=z().BN;const H=new v(q),K={},V=9007199254740991;let W=!1;class ${constructor(e,t){e!==K&&H.throwError("cannot call constructor directly; use BigNumber.from",v.errors.UNSUPPORTED_OPERATION,{operation:"new (BigNumber)"}),this._hex=t,this._isBigNumber=!0,Object.freeze(this)}fromTwos(e){return Y(Q(this).fromTwos(e))}toTwos(e){return Y(Q(this).toTwos(e))}abs(){return"-"===this._hex[0]?$.from(this._hex.substring(1)):this}add(e){return Y(Q(this).add(Q(e)))}sub(e){return Y(Q(this).sub(Q(e)))}div(e){return $.from(e).isZero()&&X("division-by-zero","div"),Y(Q(this).div(Q(e)))}mul(e){return Y(Q(this).mul(Q(e)))}mod(e){const t=Q(e);return t.isNeg()&&X("division-by-zero","mod"),Y(Q(this).umod(t))}pow(e){const t=Q(e);return t.isNeg()&&X("negative-power","pow"),Y(Q(this).pow(t))}and(e){const t=Q(e);return(this.isNegative()||t.isNeg())&&X("unbound-bitwise-result","and"),Y(Q(this).and(t))}or(e){const t=Q(e);return(this.isNegative()||t.isNeg())&&X("unbound-bitwise-result","or"),Y(Q(this).or(t))}xor(e){const t=Q(e);return(this.isNegative()||t.isNeg())&&X("unbound-bitwise-result","xor"),Y(Q(this).xor(t))}mask(e){return(this.isNegative()||e<0)&&X("negative-width","mask"),Y(Q(this).maskn(e))}shl(e){return(this.isNegative()||e<0)&&X("negative-width","shl"),Y(Q(this).shln(e))}shr(e){return(this.isNegative()||e<0)&&X("negative-width","shr"),Y(Q(this).shrn(e))}eq(e){return Q(this).eq(Q(e))}lt(e){return Q(this).lt(Q(e))}lte(e){return Q(this).lte(Q(e))}gt(e){return Q(this).gt(Q(e))}gte(e){return Q(this).gte(Q(e))}isNegative(){return"-"===this._hex[0]}isZero(){return Q(this).isZero()}toNumber(){try{return Q(this).toNumber()}catch(e){X("overflow","toNumber",this.toString())}return null}toBigInt(){try{return BigInt(this.toString())}catch(e){}return H.throwError("this platform does not support BigInt",v.errors.UNSUPPORTED_OPERATION,{value:this.toString()})}toString(){return arguments.length>0&&(10===arguments[0]?W||(W=!0,H.warn("BigNumber.toString does not accept any parameters; base-10 is assumed")):16===arguments[0]?H.throwError("BigNumber.toString does not accept any parameters; use bigNumber.toHexString()",v.errors.UNEXPECTED_ARGUMENT,{}):H.throwError("BigNumber.toString does not accept parameters",v.errors.UNEXPECTED_ARGUMENT,{})),Q(this).toString(10)}toHexString(){return this._hex}toJSON(e){return{type:"BigNumber",hex:this.toHexString()}}static from(e){if(e instanceof $)return e;if("string"==typeof e)return e.match(/^-?0x[0-9a-f]+$/i)?new $(K,J(e)):e.match(/^-?[0-9]+$/)?new $(K,J(new G(e))):H.throwArgumentError("invalid BigNumber string","value",e);if("number"==typeof e)return e%1&&X("underflow","BigNumber.from",e),(e>=V||e<=-V)&&X("overflow","BigNumber.from",e),$.from(String(e));const t=e;if("bigint"==typeof t)return $.from(t.toString());if(x(t))return $.from(R(t));if(t)if(t.toHexString){const e=t.toHexString();if("string"==typeof e)return $.from(e)}else{let e=t._hex;if(null==e&&"BigNumber"===t.type&&(e=t.hex),"string"==typeof e&&(T(e)||"-"===e[0]&&T(e.substring(1))))return $.from(e)}return H.throwArgumentError("invalid BigNumber value","value",e)}static isBigNumber(e){return!(!e||!e._isBigNumber)}}function J(e){if("string"!=typeof e)return J(e.toString(16));if("-"===e[0])return"-"===(e=e.substring(1))[0]&&H.throwArgumentError("invalid hex","value",e),"0x00"===(e=J(e))?e:"-"+e;if("0x"!==e.substring(0,2)&&(e="0x"+e),"0x"===e)return"0x00";for(e.length%2&&(e="0x0"+e.substring(2));e.length>4&&"0x00"===e.substring(0,4);)e="0x"+e.substring(4);return e}function Y(e){return $.from(J(e))}function Q(e){const t=$.from(e).toHexString();return"-"===t[0]?new G("-"+t.substring(3),16):new G(t.substring(2),16)}function X(e,t,r){const n={fault:e,operation:t};return null!=r&&(n.value=r),H.throwError(e,v.errors.NUMERIC_FAULT,n)}var Z=function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function s(e){try{c(n.next(e))}catch(e){o(e)}}function a(e){try{c(n.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))};const ee=new v("properties/5.8.0");function te(e,t,r){Object.defineProperty(e,t,{enumerable:!0,value:r,writable:!1})}function re(e,t){for(let r=0;r<32;r++){if(e[t])return e[t];if(!e.prototype||"object"!=typeof e.prototype)break;e=Object.getPrototypeOf(e.prototype).constructor}return null}function ne(e){return Z(this,void 0,void 0,(function*(){const t=Object.keys(e).map((t=>{const r=e[t];return Promise.resolve(r).then((e=>({key:t,value:e})))}));return(yield Promise.all(t)).reduce(((e,t)=>(e[t.key]=t.value,e)),{})}))}function ie(e,t){e&&"object"==typeof e||ee.throwArgumentError("invalid object","object",e),Object.keys(e).forEach((r=>{t[r]||ee.throwArgumentError("invalid object key - "+r,"transaction:"+r,e)}))}function oe(e){const t={};for(const r in e)t[r]=e[r];return t}const se={bigint:!0,boolean:!0,function:!0,number:!0,string:!0};function ae(e){if(null==e||se[typeof e])return!0;if(Array.isArray(e)||"object"==typeof e){if(!Object.isFrozen(e))return!1;const t=Object.keys(e);for(let r=0;r<t.length;r++){let n=null;try{n=e[t[r]]}catch(e){continue}if(!ae(n))return!1}return!0}return ee.throwArgumentError("Cannot deepCopy "+typeof e,"object",e)}function ce(e){if(ae(e))return e;if(Array.isArray(e))return Object.freeze(e.map((e=>ue(e))));if("object"==typeof e){const t={};for(const r in e){const n=e[r];void 0!==n&&te(t,r,ue(n))}return t}return ee.throwArgumentError("Cannot deepCopy "+typeof e,"object",e)}function ue(e){return ce(e)}class le{constructor(e){for(const t in e)this[t]=ue(e[t])}}const he="abi/5.8.0",fe=new v(he);function de(e){const t=[],r=function(e,n){if(Array.isArray(n))for(let i in n){const o=e.slice();o.push(i);try{r(o,n[i])}catch(e){t.push({path:o,error:e})}}};return r([],e),t}class pe{constructor(e,t,r,n){this.name=e,this.type=t,this.localName=r,this.dynamic=n}_throwError(e,t){fe.throwArgumentError(e,this.localName,t)}}class ge{constructor(e){te(this,"wordSize",e||32),this._data=[],this._dataLength=0,this._padding=new Uint8Array(e)}get data(){return M(this._data)}get length(){return this._dataLength}_writeData(e){return this._data.push(e),this._dataLength+=e.length,e.length}appendWriter(e){return this._writeData(k(e._data))}writeBytes(e){let t=S(e);const r=t.length%this.wordSize;return r&&(t=k([t,this._padding.slice(r)])),this._writeData(t)}_getValue(e){let t=S($.from(e));return t.length>this.wordSize&&fe.throwError("value out-of-bounds",v.errors.BUFFER_OVERRUN,{length:this.wordSize,offset:t.length}),t.length%this.wordSize&&(t=k([this._padding.slice(t.length%this.wordSize),t])),t}writeValue(e){return this._writeData(this._getValue(e))}writeUpdatableValue(){const e=this._data.length;return this._data.push(this._padding),this._dataLength+=this.wordSize,t=>{this._data[e]=this._getValue(t)}}}class me{constructor(e,t,r,n){te(this,"_data",S(e)),te(this,"wordSize",t||32),te(this,"_coerceFunc",r),te(this,"allowLoose",n),this._offset=0}get data(){return R(this._data)}get consumed(){return this._offset}static coerce(e,t){let r=e.match("^u?int([0-9]+)$");return r&&parseInt(r[1])<=48&&(t=t.toNumber()),t}coerce(e,t){return this._coerceFunc?this._coerceFunc(e,t):me.coerce(e,t)}_peekBytes(e,t,r){let n=Math.ceil(t/this.wordSize)*this.wordSize;return this._offset+n>this._data.length&&(this.allowLoose&&r&&this._offset+t<=this._data.length?n=t:fe.throwError("data out-of-bounds",v.errors.BUFFER_OVERRUN,{length:this._data.length,offset:this._offset+n})),this._data.slice(this._offset,this._offset+n)}subReader(e){return new me(this._data.slice(this._offset+e),this.wordSize,this._coerceFunc,this.allowLoose)}readBytes(e,t){let r=this._peekBytes(0,e,!!t);return this._offset+=r.length,r.slice(0,e)}readValue(){return $.from(this.readBytes(this.wordSize))}}var ye=r(1176),ve=r.n(ye);function be(e){return"0x"+ve().keccak_256(S(e))}const we=new v("rlp/5.8.0");function Ee(e){const t=[];for(;e;)t.unshift(255&e),e>>=8;return t}function Ae(e,t,r){let n=0;for(let i=0;i<r;i++)n=256*n+e[t+i];return n}function _e(e){if(Array.isArray(e)){let t=[];if(e.forEach((function(e){t=t.concat(_e(e))})),t.length<=55)return t.unshift(192+t.length),t;const r=Ee(t.length);return r.unshift(247+r.length),r.concat(t)}A(e)||we.throwArgumentError("RLP object must be BytesLike","object",e);const t=Array.prototype.slice.call(S(e));if(1===t.length&&t[0]<=127)return t;if(t.length<=55)return t.unshift(128+t.length),t;const r=Ee(t.length);return r.unshift(183+r.length),r.concat(t)}function xe(e){return R(_e(e))}function Se(e,t,r,n){const i=[];for(;r<t+1+n;){const o=ke(e,r);i.push(o.result),(r+=o.consumed)>t+1+n&&we.throwError("child data too short",v.errors.BUFFER_OVERRUN,{})}return{consumed:1+n,result:i}}function ke(e,t){if(0===e.length&&we.throwError("data too short",v.errors.BUFFER_OVERRUN,{}),e[t]>=248){const r=e[t]-247;t+1+r>e.length&&we.throwError("data short segment too short",v.errors.BUFFER_OVERRUN,{});const n=Ae(e,t+1,r);return t+1+r+n>e.length&&we.throwError("data long segment too short",v.errors.BUFFER_OVERRUN,{}),Se(e,t,t+1+r,r+n)}if(e[t]>=192){const r=e[t]-192;return t+1+r>e.length&&we.throwError("data array too short",v.errors.BUFFER_OVERRUN,{}),Se(e,t,t+1,r)}if(e[t]>=184){const r=e[t]-183;t+1+r>e.length&&we.throwError("data array too short",v.errors.BUFFER_OVERRUN,{});const n=Ae(e,t+1,r);return t+1+r+n>e.length&&we.throwError("data array too short",v.errors.BUFFER_OVERRUN,{}),{consumed:1+r+n,result:R(e.slice(t+1+r,t+1+r+n))}}if(e[t]>=128){const r=e[t]-128;return t+1+r>e.length&&we.throwError("data too short",v.errors.BUFFER_OVERRUN,{}),{consumed:1+r,result:R(e.slice(t+1,t+1+r))}}return{consumed:1,result:R(e[t])}}function Ie(e){const t=S(e),r=ke(t,0);return r.consumed!==t.length&&we.throwArgumentError("invalid rlp data","data",e),r.result}const Oe=new v("address/5.8.0");function Te(e){T(e,20)||Oe.throwArgumentError("invalid address","address",e);const t=(e=e.toLowerCase()).substring(2).split(""),r=new Uint8Array(40);for(let e=0;e<40;e++)r[e]=t[e].charCodeAt(0);const n=S(be(r));for(let e=0;e<40;e+=2)n[e>>1]>>4>=8&&(t[e]=t[e].toUpperCase()),(15&n[e>>1])>=8&&(t[e+1]=t[e+1].toUpperCase());return"0x"+t.join("")}const Pe={};for(let e=0;e<10;e++)Pe[String(e)]=String(e);for(let e=0;e<26;e++)Pe[String.fromCharCode(65+e)]=String(10+e);const Re=Math.floor((Ne=9007199254740991,Math.log10?Math.log10(Ne):Math.log(Ne)/Math.LN10));var Ne;function Ce(e){let t=(e=(e=e.toUpperCase()).substring(4)+e.substring(0,2)+"00").split("").map((e=>Pe[e])).join("");for(;t.length>=Re;){let e=t.substring(0,Re);t=parseInt(e,10)%97+t.substring(e.length)}let r=String(98-parseInt(t,10)%97);for(;r.length<2;)r="0"+r;return r}function Me(e){let t=null;if("string"!=typeof e&&Oe.throwArgumentError("invalid address","address",e),e.match(/^(0x)?[0-9a-fA-F]{40}$/))"0x"!==e.substring(0,2)&&(e="0x"+e),t=Te(e),e.match(/([A-F].*[a-f])|([a-f].*[A-F])/)&&t!==e&&Oe.throwArgumentError("bad address checksum","address",e);else if(e.match(/^XE[0-9]{2}[0-9A-Za-z]{30,31}$/)){for(e.substring(2,4)!==Ce(e)&&Oe.throwArgumentError("bad icap checksum","address",e),r=e.substring(4),t=new G(r,36).toString(16);t.length<40;)t="0"+t;t=Te("0x"+t)}else Oe.throwArgumentError("invalid address","address",e);var r;return t}function Le(e){try{return Me(e),!0}catch(e){}return!1}function Be(e){let t=(r=Me(e).substring(2),new G(r,16).toString(36)).toUpperCase();for(var r;t.length<30;)t="0"+t;return"XE"+Ce("XE00"+t)+t}function Ue(e){let t=null;try{t=Me(e.from)}catch(t){Oe.throwArgumentError("missing from address","transaction",e)}return Me(C(be(xe([t,I(S($.from(e.nonce).toHexString()))])),12))}function De(e,t,r){return 32!==N(t)&&Oe.throwArgumentError("salt must be 32 bytes","salt",t),32!==N(r)&&Oe.throwArgumentError("initCodeHash must be 32 bytes","initCodeHash",r),Me(C(be(k(["0xff",Me(e),t,r])),12))}const je=new v("strings/5.8.0");var Fe,ze;function qe(e,t,r,n,i){if(e===ze.BAD_PREFIX||e===ze.UNEXPECTED_CONTINUE){let e=0;for(let n=t+1;n<r.length&&r[n]>>6==2;n++)e++;return e}return e===ze.OVERRUN?r.length-t-1:0}!function(e){e.current="",e.NFC="NFC",e.NFD="NFD",e.NFKC="NFKC",e.NFKD="NFKD"}(Fe||(Fe={})),function(e){e.UNEXPECTED_CONTINUE="unexpected continuation byte",e.BAD_PREFIX="bad codepoint prefix",e.OVERRUN="string overrun",e.MISSING_CONTINUE="missing continuation byte",e.OUT_OF_RANGE="out of UTF-8 range",e.UTF16_SURROGATE="UTF-16 surrogate",e.OVERLONG="overlong representation"}(ze||(ze={}));const Ge=Object.freeze({error:function(e,t,r,n,i){return je.throwArgumentError(`invalid codepoint at offset ${t}; ${e}`,"bytes",r)},ignore:qe,replace:function(e,t,r,n,i){return e===ze.OVERLONG?(n.push(i),0):(n.push(65533),qe(e,t,r))}});function He(e,t){null==t&&(t=Ge.error),e=S(e);const r=[];let n=0;for(;n<e.length;){const i=e[n++];if(!(i>>7)){r.push(i);continue}let o=null,s=null;if(192==(224&i))o=1,s=127;else if(224==(240&i))o=2,s=2047;else{if(240!=(248&i)){n+=t(128==(192&i)?ze.UNEXPECTED_CONTINUE:ze.BAD_PREFIX,n-1,e,r);continue}o=3,s=65535}if(n-1+o>=e.length){n+=t(ze.OVERRUN,n-1,e,r);continue}let a=i&(1<<8-o-1)-1;for(let i=0;i<o;i++){let i=e[n];if(128!=(192&i)){n+=t(ze.MISSING_CONTINUE,n,e,r),a=null;break}a=a<<6|63&i,n++}null!==a&&(a>1114111?n+=t(ze.OUT_OF_RANGE,n-1-o,e,r,a):a>=55296&&a<=57343?n+=t(ze.UTF16_SURROGATE,n-1-o,e,r,a):a<=s?n+=t(ze.OVERLONG,n-1-o,e,r,a):r.push(a))}return r}function Ke(e,t=Fe.current){t!=Fe.current&&(je.checkNormalize(),e=e.normalize(t));let r=[];for(let t=0;t<e.length;t++){const n=e.charCodeAt(t);if(n<128)r.push(n);else if(n<2048)r.push(n>>6|192),r.push(63&n|128);else if(55296==(64512&n)){t++;const i=e.charCodeAt(t);if(t>=e.length||56320!=(64512&i))throw new Error("invalid utf-8 string");const o=65536+((1023&n)<<10)+(1023&i);r.push(o>>18|240),r.push(o>>12&63|128),r.push(o>>6&63|128),r.push(63&o|128)}else r.push(n>>12|224),r.push(n>>6&63|128),r.push(63&n|128)}return S(r)}function Ve(e){const t="0000"+e.toString(16);return"\\u"+t.substring(t.length-4)}function We(e,t){return'"'+He(e,t).map((e=>{if(e<256){switch(e){case 8:return"\\b";case 9:return"\\t";case 10:return"\\n";case 13:return"\\r";case 34:return'\\"';case 92:return"\\\\"}if(e>=32&&e<127)return String.fromCharCode(e)}return e<=65535?Ve(e):Ve(55296+((e-=65536)>>10&1023))+Ve(56320+(1023&e))})).join("")+'"'}function $e(e){return e.map((e=>e<=65535?String.fromCharCode(e):(e-=65536,String.fromCharCode(55296+(e>>10&1023),56320+(1023&e))))).join("")}function Je(e,t){return $e(He(e,t))}function Ye(e,t=Fe.current){return He(Ke(e,t))}function Qe(e){return be(Ke(e))}class Xe extends pe{constructor(e){super("address","address",e,!1)}defaultValue(){return"0x0000000000000000000000000000000000000000"}encode(e,t){try{t=Me(t)}catch(e){this._throwError(e.message,t)}return e.writeValue(t)}decode(e){return Me(U(e.readValue().toHexString(),20))}}class Ze extends pe{constructor(e){super(e.name,e.type,void 0,e.dynamic),this.coder=e}defaultValue(){return this.coder.defaultValue()}encode(e,t){return this.coder.encode(e,t)}decode(e){return this.coder.decode(e)}}const et=new v(he);function tt(e,t,r){let n=null;if(Array.isArray(r))n=r;else if(r&&"object"==typeof r){let e={};n=t.map((t=>{const n=t.localName;return n||et.throwError("cannot encode object for signature with missing names",v.errors.INVALID_ARGUMENT,{argument:"values",coder:t,value:r}),e[n]&&et.throwError("cannot encode object for signature with duplicate names",v.errors.INVALID_ARGUMENT,{argument:"values",coder:t,value:r}),e[n]=!0,r[n]}))}else et.throwArgumentError("invalid tuple value","tuple",r);t.length!==n.length&&et.throwArgumentError("types/value length mismatch","tuple",r);let i=new ge(e.wordSize),o=new ge(e.wordSize),s=[];t.forEach(((e,t)=>{let r=n[t];if(e.dynamic){let t=o.length;e.encode(o,r);let n=i.writeUpdatableValue();s.push((e=>{n(e+t)}))}else e.encode(i,r)})),s.forEach((e=>{e(i.length)}));let a=e.appendWriter(i);return a+=e.appendWriter(o),a}function rt(e,t){let r=[],n=e.subReader(0);t.forEach((t=>{let i=null;if(t.dynamic){let r=e.readValue(),o=n.subReader(r.toNumber());try{i=t.decode(o)}catch(e){if(e.code===v.errors.BUFFER_OVERRUN)throw e;i=e,i.baseType=t.name,i.name=t.localName,i.type=t.type}}else try{i=t.decode(e)}catch(e){if(e.code===v.errors.BUFFER_OVERRUN)throw e;i=e,i.baseType=t.name,i.name=t.localName,i.type=t.type}null!=i&&r.push(i)}));const i=t.reduce(((e,t)=>{const r=t.localName;return r&&(e[r]||(e[r]=0),e[r]++),e}),{});t.forEach(((e,t)=>{let n=e.localName;if(!n||1!==i[n])return;if("length"===n&&(n="_length"),null!=r[n])return;const o=r[t];o instanceof Error?Object.defineProperty(r,n,{enumerable:!0,get:()=>{throw o}}):r[n]=o}));for(let e=0;e<r.length;e++){const t=r[e];t instanceof Error&&Object.defineProperty(r,e,{enumerable:!0,get:()=>{throw t}})}return Object.freeze(r)}class nt extends pe{constructor(e,t,r){super("array",e.type+"["+(t>=0?t:"")+"]",r,-1===t||e.dynamic),this.coder=e,this.length=t}defaultValue(){const e=this.coder.defaultValue(),t=[];for(let r=0;r<this.length;r++)t.push(e);return t}encode(e,t){Array.isArray(t)||this._throwError("expected array value",t);let r=this.length;-1===r&&(r=t.length,e.writeValue(t.length)),et.checkArgumentCount(t.length,r,"coder array"+(this.localName?" "+this.localName:""));let n=[];for(let e=0;e<t.length;e++)n.push(this.coder);return tt(e,n,t)}decode(e){let t=this.length;-1===t&&(t=e.readValue().toNumber(),32*t>e._data.length&&et.throwError("insufficient data length",v.errors.BUFFER_OVERRUN,{length:e._data.length,count:t}));let r=[];for(let e=0;e<t;e++)r.push(new Ze(this.coder));return e.coerce(this.name,rt(e,r))}}class it extends pe{constructor(e){super("bool","bool",e,!1)}defaultValue(){return!1}encode(e,t){return e.writeValue(t?1:0)}decode(e){return e.coerce(this.type,!e.readValue().isZero())}}class ot extends pe{constructor(e,t){super(e,e,t,!0)}defaultValue(){return"0x"}encode(e,t){t=S(t);let r=e.writeValue(t.length);return r+=e.writeBytes(t),r}decode(e){return e.readBytes(e.readValue().toNumber(),!0)}}class st extends ot{constructor(e){super("bytes",e)}decode(e){return e.coerce(this.name,R(super.decode(e)))}}class at extends pe{constructor(e,t){let r="bytes"+String(e);super(r,r,t,!1),this.size=e}defaultValue(){return"0x0000000000000000000000000000000000000000000000000000000000000000".substring(0,2+2*this.size)}encode(e,t){let r=S(t);return r.length!==this.size&&this._throwError("incorrect data length",t),e.writeBytes(r)}decode(e){return e.coerce(this.name,R(e.readBytes(this.size)))}}class ct extends pe{constructor(e){super("null","",e,!1)}defaultValue(){return null}encode(e,t){return null!=t&&this._throwError("not null",t),e.writeBytes([])}decode(e){return e.readBytes(0),e.coerce(this.name,null)}}const ut=$.from(-1),lt=$.from(0),ht=$.from(1),ft=$.from(2),dt=$.from("1000000000000000000"),pt=$.from("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff"),gt=$.from("-0x8000000000000000000000000000000000000000000000000000000000000000"),mt=$.from("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");class yt extends pe{constructor(e,t,r){const n=(t?"int":"uint")+8*e;super(n,n,r,!1),this.size=e,this.signed=t}defaultValue(){return 0}encode(e,t){let r=$.from(t),n=pt.mask(8*e.wordSize);if(this.signed){let e=n.mask(8*this.size-1);(r.gt(e)||r.lt(e.add(ht).mul(ut)))&&this._throwError("value out-of-bounds",t)}else(r.lt(lt)||r.gt(n.mask(8*this.size)))&&this._throwError("value out-of-bounds",t);return r=r.toTwos(8*this.size).mask(8*this.size),this.signed&&(r=r.fromTwos(8*this.size).toTwos(8*e.wordSize)),e.writeValue(r)}decode(e){let t=e.readValue().mask(8*this.size);return this.signed&&(t=t.fromTwos(8*this.size)),e.coerce(this.name,t)}}class vt extends ot{constructor(e){super("string",e)}defaultValue(){return""}encode(e,t){return super.encode(e,Ke(t))}decode(e){return Je(super.decode(e))}}class bt extends pe{constructor(e,t){let r=!1;const n=[];e.forEach((e=>{e.dynamic&&(r=!0),n.push(e.type)})),super("tuple","tuple("+n.join(",")+")",t,r),this.coders=e}defaultValue(){const e=[];this.coders.forEach((t=>{e.push(t.defaultValue())}));const t=this.coders.reduce(((e,t)=>{const r=t.localName;return r&&(e[r]||(e[r]=0),e[r]++),e}),{});return this.coders.forEach(((r,n)=>{let i=r.localName;i&&1===t[i]&&("length"===i&&(i="_length"),null==e[i]&&(e[i]=e[n]))})),Object.freeze(e)}encode(e,t){return tt(e,this.coders,t)}decode(e){return e.coerce(this.name,rt(e,this.coders))}}const wt=new v(he),Et={};let At={calldata:!0,memory:!0,storage:!0},_t={calldata:!0,memory:!0};function xt(e,t){if("bytes"===e||"string"===e){if(At[t])return!0}else if("address"===e){if("payable"===t)return!0}else if((e.indexOf("[")>=0||"tuple"===e)&&_t[t])return!0;return(At[t]||"payable"===t)&&wt.throwArgumentError("invalid modifier","name",t),!1}function St(e,t){for(let r in t)te(e,r,t[r])}const kt=Object.freeze({sighash:"sighash",minimal:"minimal",full:"full",json:"json"}),It=new RegExp(/^(.*)\[([0-9]*)\]$/);class Ot{constructor(e,t){e!==Et&&wt.throwError("use fromString",v.errors.UNSUPPORTED_OPERATION,{operation:"new ParamType()"}),St(this,t);let r=this.type.match(It);St(this,r?{arrayLength:parseInt(r[2]||"-1"),arrayChildren:Ot.fromObject({type:r[1],components:this.components}),baseType:"array"}:{arrayLength:null,arrayChildren:null,baseType:null!=this.components?"tuple":this.type}),this._isParamType=!0,Object.freeze(this)}format(e){if(e||(e=kt.sighash),kt[e]||wt.throwArgumentError("invalid format type","format",e),e===kt.json){let t={type:"tuple"===this.baseType?"tuple":this.type,name:this.name||void 0};return"boolean"==typeof this.indexed&&(t.indexed=this.indexed),this.components&&(t.components=this.components.map((t=>JSON.parse(t.format(e))))),JSON.stringify(t)}let t="";return"array"===this.baseType?(t+=this.arrayChildren.format(e),t+="["+(this.arrayLength<0?"":String(this.arrayLength))+"]"):"tuple"===this.baseType?(e!==kt.sighash&&(t+=this.type),t+="("+this.components.map((t=>t.format(e))).join(e===kt.full?", ":",")+")"):t+=this.type,e!==kt.sighash&&(!0===this.indexed&&(t+=" indexed"),e===kt.full&&this.name&&(t+=" "+this.name)),t}static from(e,t){return"string"==typeof e?Ot.fromString(e,t):Ot.fromObject(e)}static fromObject(e){return Ot.isParamType(e)?e:new Ot(Et,{name:e.name||null,type:jt(e.type),indexed:null==e.indexed?null:!!e.indexed,components:e.components?e.components.map(Ot.fromObject):null})}static fromString(e,t){return r=function(e,t){let r=e;function n(t){wt.throwArgumentError(`unexpected character at position ${t}`,"param",e)}function i(e){let r={type:"",name:"",parent:e,state:{allowType:!0}};return t&&(r.indexed=!1),r}e=e.replace(/\s/g," ");let o={type:"",name:"",state:{allowType:!0}},s=o;for(let r=0;r<e.length;r++){let o=e[r];switch(o){case"(":s.state.allowType&&""===s.type?s.type="tuple":s.state.allowParams||n(r),s.state.allowType=!1,s.type=jt(s.type),s.components=[i(s)],s=s.components[0];break;case")":delete s.state,"indexed"===s.name&&(t||n(r),s.indexed=!0,s.name=""),xt(s.type,s.name)&&(s.name=""),s.type=jt(s.type);let e=s;s=s.parent,s||n(r),delete e.parent,s.state.allowParams=!1,s.state.allowName=!0,s.state.allowArray=!0;break;case",":delete s.state,"indexed"===s.name&&(t||n(r),s.indexed=!0,s.name=""),xt(s.type,s.name)&&(s.name=""),s.type=jt(s.type);let a=i(s.parent);s.parent.components.push(a),delete s.parent,s=a;break;case" ":s.state.allowType&&""!==s.type&&(s.type=jt(s.type),delete s.state.allowType,s.state.allowName=!0,s.state.allowParams=!0),s.state.allowName&&""!==s.name&&("indexed"===s.name?(t||n(r),s.indexed&&n(r),s.indexed=!0,s.name=""):xt(s.type,s.name)?s.name="":s.state.allowName=!1);break;case"[":s.state.allowArray||n(r),s.type+=o,s.state.allowArray=!1,s.state.allowName=!1,s.state.readArray=!0;break;case"]":s.state.readArray||n(r),s.type+=o,s.state.readArray=!1,s.state.allowArray=!0,s.state.allowName=!0;break;default:s.state.allowType?(s.type+=o,s.state.allowParams=!0,s.state.allowArray=!0):s.state.allowName?(s.name+=o,delete s.state.allowArray):s.state.readArray?s.type+=o:n(r)}}return s.parent&&wt.throwArgumentError("unexpected eof","param",e),delete o.state,"indexed"===s.name?(t||n(r.length-7),s.indexed&&n(r.length-7),s.indexed=!0,s.name=""):xt(s.type,s.name)&&(s.name=""),o.type=jt(o.type),o}(e,!!t),Ot.fromObject({name:r.name,type:r.type,indexed:r.indexed,components:r.components});var r}static isParamType(e){return!(null==e||!e._isParamType)}}function Tt(e,t){return function(e){e=e.trim();let t=[],r="",n=0;for(let i=0;i<e.length;i++){let o=e[i];","===o&&0===n?(t.push(r),r=""):(r+=o,"("===o?n++:")"===o&&(n--,-1===n&&wt.throwArgumentError("unbalanced parenthesis","value",e)))}return r&&t.push(r),t}(e).map((e=>Ot.fromString(e,t)))}class Pt{constructor(e,t){e!==Et&&wt.throwError("use a static from method",v.errors.UNSUPPORTED_OPERATION,{operation:"new Fragment()"}),St(this,t),this._isFragment=!0,Object.freeze(this)}static from(e){return Pt.isFragment(e)?e:"string"==typeof e?Pt.fromString(e):Pt.fromObject(e)}static fromObject(e){if(Pt.isFragment(e))return e;switch(e.type){case"function":return Bt.fromObject(e);case"event":return Rt.fromObject(e);case"constructor":return Lt.fromObject(e);case"error":return Dt.fromObject(e);case"fallback":case"receive":return null}return wt.throwArgumentError("invalid fragment object","value",e)}static fromString(e){return"event"===(e=(e=(e=e.replace(/\s/g," ")).replace(/\(/g," (").replace(/\)/g,") ").replace(/\s+/g," ")).trim()).split(" ")[0]?Rt.fromString(e.substring(5).trim()):"function"===e.split(" ")[0]?Bt.fromString(e.substring(8).trim()):"constructor"===e.split("(")[0].trim()?Lt.fromString(e.trim()):"error"===e.split(" ")[0]?Dt.fromString(e.substring(5).trim()):wt.throwArgumentError("unsupported fragment","value",e)}static isFragment(e){return!(!e||!e._isFragment)}}class Rt extends Pt{format(e){if(e||(e=kt.sighash),kt[e]||wt.throwArgumentError("invalid format type","format",e),e===kt.json)return JSON.stringify({type:"event",anonymous:this.anonymous,name:this.name,inputs:this.inputs.map((t=>JSON.parse(t.format(e))))});let t="";return e!==kt.sighash&&(t+="event "),t+=this.name+"("+this.inputs.map((t=>t.format(e))).join(e===kt.full?", ":",")+") ",e!==kt.sighash&&this.anonymous&&(t+="anonymous "),t.trim()}static from(e){return"string"==typeof e?Rt.fromString(e):Rt.fromObject(e)}static fromObject(e){if(Rt.isEventFragment(e))return e;"event"!==e.type&&wt.throwArgumentError("invalid event object","value",e);const t={name:zt(e.name),anonymous:e.anonymous,inputs:e.inputs?e.inputs.map(Ot.fromObject):[],type:"event"};return new Rt(Et,t)}static fromString(e){let t=e.match(qt);t||wt.throwArgumentError("invalid event string","value",e);let r=!1;return t[3].split(" ").forEach((e=>{switch(e.trim()){case"anonymous":r=!0;break;case"":break;default:wt.warn("unknown modifier: "+e)}})),Rt.fromObject({name:t[1].trim(),anonymous:r,inputs:Tt(t[2],!0),type:"event"})}static isEventFragment(e){return e&&e._isFragment&&"event"===e.type}}function Nt(e,t){t.gas=null;let r=e.split("@");return 1!==r.length?(r.length>2&&wt.throwArgumentError("invalid human-readable ABI signature","value",e),r[1].match(/^[0-9]+$/)||wt.throwArgumentError("invalid human-readable ABI signature gas","value",e),t.gas=$.from(r[1]),r[0]):e}function Ct(e,t){t.constant=!1,t.payable=!1,t.stateMutability="nonpayable",e.split(" ").forEach((e=>{switch(e.trim()){case"constant":t.constant=!0;break;case"payable":t.payable=!0,t.stateMutability="payable";break;case"nonpayable":t.payable=!1,t.stateMutability="nonpayable";break;case"pure":t.constant=!0,t.stateMutability="pure";break;case"view":t.constant=!0,t.stateMutability="view";break;case"external":case"public":case"":break;default:console.log("unknown modifier: "+e)}}))}function Mt(e){let t={constant:!1,payable:!0,stateMutability:"payable"};return null!=e.stateMutability?(t.stateMutability=e.stateMutability,t.constant="view"===t.stateMutability||"pure"===t.stateMutability,null!=e.constant&&!!e.constant!==t.constant&&wt.throwArgumentError("cannot have constant function with mutability "+t.stateMutability,"value",e),t.payable="payable"===t.stateMutability,null!=e.payable&&!!e.payable!==t.payable&&wt.throwArgumentError("cannot have payable function with mutability "+t.stateMutability,"value",e)):null!=e.payable?(t.payable=!!e.payable,null!=e.constant||t.payable||"constructor"===e.type||wt.throwArgumentError("unable to determine stateMutability","value",e),t.constant=!!e.constant,t.constant?t.stateMutability="view":t.stateMutability=t.payable?"payable":"nonpayable",t.payable&&t.constant&&wt.throwArgumentError("cannot have constant payable function","value",e)):null!=e.constant?(t.constant=!!e.constant,t.payable=!t.constant,t.stateMutability=t.constant?"view":"payable"):"constructor"!==e.type&&wt.throwArgumentError("unable to determine stateMutability","value",e),t}class Lt extends Pt{format(e){if(e||(e=kt.sighash),kt[e]||wt.throwArgumentError("invalid format type","format",e),e===kt.json)return JSON.stringify({type:"constructor",stateMutability:"nonpayable"!==this.stateMutability?this.stateMutability:void 0,payable:this.payable,gas:this.gas?this.gas.toNumber():void 0,inputs:this.inputs.map((t=>JSON.parse(t.format(e))))});e===kt.sighash&&wt.throwError("cannot format a constructor for sighash",v.errors.UNSUPPORTED_OPERATION,{operation:"format(sighash)"});let t="constructor("+this.inputs.map((t=>t.format(e))).join(e===kt.full?", ":",")+") ";return this.stateMutability&&"nonpayable"!==this.stateMutability&&(t+=this.stateMutability+" "),t.trim()}static from(e){return"string"==typeof e?Lt.fromString(e):Lt.fromObject(e)}static fromObject(e){if(Lt.isConstructorFragment(e))return e;"constructor"!==e.type&&wt.throwArgumentError("invalid constructor object","value",e);let t=Mt(e);t.constant&&wt.throwArgumentError("constructor cannot be constant","value",e);const r={name:null,type:e.type,inputs:e.inputs?e.inputs.map(Ot.fromObject):[],payable:t.payable,stateMutability:t.stateMutability,gas:e.gas?$.from(e.gas):null};return new Lt(Et,r)}static fromString(e){let t={type:"constructor"},r=(e=Nt(e,t)).match(qt);return r&&"constructor"===r[1].trim()||wt.throwArgumentError("invalid constructor string","value",e),t.inputs=Tt(r[2].trim(),!1),Ct(r[3].trim(),t),Lt.fromObject(t)}static isConstructorFragment(e){return e&&e._isFragment&&"constructor"===e.type}}class Bt extends Lt{format(e){if(e||(e=kt.sighash),kt[e]||wt.throwArgumentError("invalid format type","format",e),e===kt.json)return JSON.stringify({type:"function",name:this.name,constant:this.constant,stateMutability:"nonpayable"!==this.stateMutability?this.stateMutability:void 0,payable:this.payable,gas:this.gas?this.gas.toNumber():void 0,inputs:this.inputs.map((t=>JSON.parse(t.format(e)))),outputs:this.outputs.map((t=>JSON.parse(t.format(e))))});let t="";return e!==kt.sighash&&(t+="function "),t+=this.name+"("+this.inputs.map((t=>t.format(e))).join(e===kt.full?", ":",")+") ",e!==kt.sighash&&(this.stateMutability?"nonpayable"!==this.stateMutability&&(t+=this.stateMutability+" "):this.constant&&(t+="view "),this.outputs&&this.outputs.length&&(t+="returns ("+this.outputs.map((t=>t.format(e))).join(", ")+") "),null!=this.gas&&(t+="@"+this.gas.toString()+" ")),t.trim()}static from(e){return"string"==typeof e?Bt.fromString(e):Bt.fromObject(e)}static fromObject(e){if(Bt.isFunctionFragment(e))return e;"function"!==e.type&&wt.throwArgumentError("invalid function object","value",e);let t=Mt(e);const r={type:e.type,name:zt(e.name),constant:t.constant,inputs:e.inputs?e.inputs.map(Ot.fromObject):[],outputs:e.outputs?e.outputs.map(Ot.fromObject):[],payable:t.payable,stateMutability:t.stateMutability,gas:e.gas?$.from(e.gas):null};return new Bt(Et,r)}static fromString(e){let t={type:"function"},r=(e=Nt(e,t)).split(" returns ");r.length>2&&wt.throwArgumentError("invalid function string","value",e);let n=r[0].match(qt);if(n||wt.throwArgumentError("invalid function signature","value",e),t.name=n[1].trim(),t.name&&zt(t.name),t.inputs=Tt(n[2],!1),Ct(n[3].trim(),t),r.length>1){let n=r[1].match(qt);""==n[1].trim()&&""==n[3].trim()||wt.throwArgumentError("unexpected tokens","value",e),t.outputs=Tt(n[2],!1)}else t.outputs=[];return Bt.fromObject(t)}static isFunctionFragment(e){return e&&e._isFragment&&"function"===e.type}}function Ut(e){const t=e.format();return"Error(string)"!==t&&"Panic(uint256)"!==t||wt.throwArgumentError(`cannot specify user defined ${t} error`,"fragment",e),e}class Dt extends Pt{format(e){if(e||(e=kt.sighash),kt[e]||wt.throwArgumentError("invalid format type","format",e),e===kt.json)return JSON.stringify({type:"error",name:this.name,inputs:this.inputs.map((t=>JSON.parse(t.format(e))))});let t="";return e!==kt.sighash&&(t+="error "),t+=this.name+"("+this.inputs.map((t=>t.format(e))).join(e===kt.full?", ":",")+") ",t.trim()}static from(e){return"string"==typeof e?Dt.fromString(e):Dt.fromObject(e)}static fromObject(e){if(Dt.isErrorFragment(e))return e;"error"!==e.type&&wt.throwArgumentError("invalid error object","value",e);const t={type:e.type,name:zt(e.name),inputs:e.inputs?e.inputs.map(Ot.fromObject):[]};return Ut(new Dt(Et,t))}static fromString(e){let t={type:"error"},r=e.match(qt);return r||wt.throwArgumentError("invalid error signature","value",e),t.name=r[1].trim(),t.name&&zt(t.name),t.inputs=Tt(r[2],!1),Ut(Dt.fromObject(t))}static isErrorFragment(e){return e&&e._isFragment&&"error"===e.type}}function jt(e){return e.match(/^uint($|[^1-9])/)?e="uint256"+e.substring(4):e.match(/^int($|[^1-9])/)&&(e="int256"+e.substring(3)),e}const Ft=new RegExp("^[a-zA-Z$_][a-zA-Z0-9$_]*$");function zt(e){return e&&e.match(Ft)||wt.throwArgumentError(`invalid identifier "${e}"`,"value",e),e}const qt=new RegExp("^([^)(]*)\\((.*)\\)([^)(]*)$"),Gt=new v(he),Ht=new RegExp(/^bytes([0-9]*)$/),Kt=new RegExp(/^(u?int)([0-9]*)$/);class Vt{constructor(e){te(this,"coerceFunc",e||null)}_getCoder(e){switch(e.baseType){case"address":return new Xe(e.name);case"bool":return new it(e.name);case"string":return new vt(e.name);case"bytes":return new st(e.name);case"array":return new nt(this._getCoder(e.arrayChildren),e.arrayLength,e.name);case"tuple":return new bt((e.components||[]).map((e=>this._getCoder(e))),e.name);case"":return new ct(e.name)}let t=e.type.match(Kt);if(t){let r=parseInt(t[2]||"256");return(0===r||r>256||r%8!=0)&&Gt.throwArgumentError("invalid "+t[1]+" bit length","param",e),new yt(r/8,"int"===t[1],e.name)}if(t=e.type.match(Ht),t){let r=parseInt(t[1]);return(0===r||r>32)&&Gt.throwArgumentError("invalid bytes length","param",e),new at(r,e.name)}return Gt.throwArgumentError("invalid type","type",e.type)}_getWordSize(){return 32}_getReader(e,t){return new me(e,this._getWordSize(),this.coerceFunc,t)}_getWriter(){return new ge(this._getWordSize())}getDefaultValue(e){const t=e.map((e=>this._getCoder(Ot.from(e))));return new bt(t,"_").defaultValue()}encode(e,t){e.length!==t.length&&Gt.throwError("types/values length mismatch",v.errors.INVALID_ARGUMENT,{count:{types:e.length,values:t.length},value:{types:e,values:t}});const r=e.map((e=>this._getCoder(Ot.from(e)))),n=new bt(r,"_"),i=this._getWriter();return n.encode(i,t),i.data}decode(e,t,r){const n=e.map((e=>this._getCoder(Ot.from(e))));return new bt(n,"_").decode(this._getReader(S(t),r))}}const Wt=new Vt,$t=new v(he);class Jt extends le{}class Yt extends le{}class Qt extends le{}class Xt extends le{static isIndexed(e){return!(!e||!e._isIndexed)}}const Zt={"0x08c379a0":{signature:"Error(string)",name:"Error",inputs:["string"],reason:!0},"0x4e487b71":{signature:"Panic(uint256)",name:"Panic",inputs:["uint256"]}};function er(e,t){const r=new Error(`deferred error during ABI decoding triggered accessing ${e}`);return r.error=t,r}class tr{constructor(e){let t=[];t="string"==typeof e?JSON.parse(e):e,te(this,"fragments",t.map((e=>Pt.from(e))).filter((e=>null!=e))),te(this,"_abiCoder",re(new.target,"getAbiCoder")()),te(this,"functions",{}),te(this,"errors",{}),te(this,"events",{}),te(this,"structs",{}),this.fragments.forEach((e=>{let t=null;switch(e.type){case"constructor":return this.deploy?void $t.warn("duplicate definition - constructor"):void te(this,"deploy",e);case"function":t=this.functions;break;case"event":t=this.events;break;case"error":t=this.errors;break;default:return}let r=e.format();t[r]?$t.warn("duplicate definition - "+r):t[r]=e})),this.deploy||te(this,"deploy",Lt.from({payable:!1,type:"constructor"})),te(this,"_isInterface",!0)}format(e){e||(e=kt.full),e===kt.sighash&&$t.throwArgumentError("interface does not support formatting sighash","format",e);const t=this.fragments.map((t=>t.format(e)));return e===kt.json?JSON.stringify(t.map((e=>JSON.parse(e)))):t}static getAbiCoder(){return Wt}static getAddress(e){return Me(e)}static getSighash(e){return C(Qe(e.format()),0,4)}static getEventTopic(e){return Qe(e.format())}getFunction(e){if(T(e)){for(const t in this.functions)if(e===this.getSighash(t))return this.functions[t];$t.throwArgumentError("no matching function","sighash",e)}if(-1===e.indexOf("(")){const t=e.trim(),r=Object.keys(this.functions).filter((e=>e.split("(")[0]===t));return 0===r.length?$t.throwArgumentError("no matching function","name",t):r.length>1&&$t.throwArgumentError("multiple matching functions","name",t),this.functions[r[0]]}const t=this.functions[Bt.fromString(e).format()];return t||$t.throwArgumentError("no matching function","signature",e),t}getEvent(e){if(T(e)){const t=e.toLowerCase();for(const e in this.events)if(t===this.getEventTopic(e))return this.events[e];$t.throwArgumentError("no matching event","topichash",t)}if(-1===e.indexOf("(")){const t=e.trim(),r=Object.keys(this.events).filter((e=>e.split("(")[0]===t));return 0===r.length?$t.throwArgumentError("no matching event","name",t):r.length>1&&$t.throwArgumentError("multiple matching events","name",t),this.events[r[0]]}const t=this.events[Rt.fromString(e).format()];return t||$t.throwArgumentError("no matching event","signature",e),t}getError(e){if(T(e)){const t=re(this.constructor,"getSighash");for(const r in this.errors)if(e===t(this.errors[r]))return this.errors[r];$t.throwArgumentError("no matching error","sighash",e)}if(-1===e.indexOf("(")){const t=e.trim(),r=Object.keys(this.errors).filter((e=>e.split("(")[0]===t));return 0===r.length?$t.throwArgumentError("no matching error","name",t):r.length>1&&$t.throwArgumentError("multiple matching errors","name",t),this.errors[r[0]]}const t=this.errors[Bt.fromString(e).format()];return t||$t.throwArgumentError("no matching error","signature",e),t}getSighash(e){if("string"==typeof e)try{e=this.getFunction(e)}catch(t){try{e=this.getError(e)}catch(e){throw t}}return re(this.constructor,"getSighash")(e)}getEventTopic(e){return"string"==typeof e&&(e=this.getEvent(e)),re(this.constructor,"getEventTopic")(e)}_decodeParams(e,t){return this._abiCoder.decode(e,t)}_encodeParams(e,t){return this._abiCoder.encode(e,t)}encodeDeploy(e){return this._encodeParams(this.deploy.inputs,e||[])}decodeErrorResult(e,t){"string"==typeof e&&(e=this.getError(e));const r=S(t);return R(r.slice(0,4))!==this.getSighash(e)&&$t.throwArgumentError(`data signature does not match error ${e.name}.`,"data",R(r)),this._decodeParams(e.inputs,r.slice(4))}encodeErrorResult(e,t){return"string"==typeof e&&(e=this.getError(e)),R(k([this.getSighash(e),this._encodeParams(e.inputs,t||[])]))}decodeFunctionData(e,t){"string"==typeof e&&(e=this.getFunction(e));const r=S(t);return R(r.slice(0,4))!==this.getSighash(e)&&$t.throwArgumentError(`data signature does not match function ${e.name}.`,"data",R(r)),this._decodeParams(e.inputs,r.slice(4))}encodeFunctionData(e,t){return"string"==typeof e&&(e=this.getFunction(e)),R(k([this.getSighash(e),this._encodeParams(e.inputs,t||[])]))}decodeFunctionResult(e,t){"string"==typeof e&&(e=this.getFunction(e));let r=S(t),n=null,i="",o=null,s=null,a=null;switch(r.length%this._abiCoder._getWordSize()){case 0:try{return this._abiCoder.decode(e.outputs,r)}catch(e){}break;case 4:{const e=R(r.slice(0,4)),t=Zt[e];if(t)o=this._abiCoder.decode(t.inputs,r.slice(4)),s=t.name,a=t.signature,t.reason&&(n=o[0]),"Error"===s?i=`; VM Exception while processing transaction: reverted with reason string ${JSON.stringify(o[0])}`:"Panic"===s&&(i=`; VM Exception while processing transaction: reverted with panic code ${o[0]}`);else try{const t=this.getError(e);o=this._abiCoder.decode(t.inputs,r.slice(4)),s=t.name,a=t.format()}catch(e){}break}}return $t.throwError("call revert exception"+i,v.errors.CALL_EXCEPTION,{method:e.format(),data:R(t),errorArgs:o,errorName:s,errorSignature:a,reason:n})}encodeFunctionResult(e,t){return"string"==typeof e&&(e=this.getFunction(e)),R(this._abiCoder.encode(e.outputs,t||[]))}encodeFilterTopics(e,t){"string"==typeof e&&(e=this.getEvent(e)),t.length>e.inputs.length&&$t.throwError("too many arguments for "+e.format(),v.errors.UNEXPECTED_ARGUMENT,{argument:"values",value:t});let r=[];e.anonymous||r.push(this.getEventTopic(e));const n=(e,t)=>"string"===e.type?Qe(t):"bytes"===e.type?be(R(t)):("bool"===e.type&&"boolean"==typeof t&&(t=t?"0x01":"0x00"),e.type.match(/^u?int/)&&(t=$.from(t).toHexString()),"address"===e.type&&this._abiCoder.encode(["address"],[t]),U(R(t),32));for(t.forEach(((t,i)=>{let o=e.inputs[i];o.indexed?null==t?r.push(null):"array"===o.baseType||"tuple"===o.baseType?$t.throwArgumentError("filtering with tuples or arrays not supported","contract."+o.name,t):Array.isArray(t)?r.push(t.map((e=>n(o,e)))):r.push(n(o,t)):null!=t&&$t.throwArgumentError("cannot filter non-indexed parameters; must be null","contract."+o.name,t)}));r.length&&null===r[r.length-1];)r.pop();return r}encodeEventLog(e,t){"string"==typeof e&&(e=this.getEvent(e));const r=[],n=[],i=[];return e.anonymous||r.push(this.getEventTopic(e)),t.length!==e.inputs.length&&$t.throwArgumentError("event arguments/values mismatch","values",t),e.inputs.forEach(((e,o)=>{const s=t[o];if(e.indexed)if("string"===e.type)r.push(Qe(s));else if("bytes"===e.type)r.push(be(s));else{if("tuple"===e.baseType||"array"===e.baseType)throw new Error("not implemented");r.push(this._abiCoder.encode([e.type],[s]))}else n.push(e),i.push(s)})),{data:this._abiCoder.encode(n,i),topics:r}}decodeEventLog(e,t,r){if("string"==typeof e&&(e=this.getEvent(e)),null!=r&&!e.anonymous){let t=this.getEventTopic(e);T(r[0],32)&&r[0].toLowerCase()===t||$t.throwError("fragment/topic mismatch",v.errors.INVALID_ARGUMENT,{argument:"topics[0]",expected:t,value:r[0]}),r=r.slice(1)}let n=[],i=[],o=[];e.inputs.forEach(((e,t)=>{e.indexed?"string"===e.type||"bytes"===e.type||"tuple"===e.baseType||"array"===e.baseType?(n.push(Ot.fromObject({type:"bytes32",name:e.name})),o.push(!0)):(n.push(e),o.push(!1)):(i.push(e),o.push(!1))}));let s=null!=r?this._abiCoder.decode(n,k(r)):null,a=this._abiCoder.decode(i,t,!0),c=[],u=0,l=0;e.inputs.forEach(((e,t)=>{if(e.indexed)if(null==s)c[t]=new Xt({_isIndexed:!0,hash:null});else if(o[t])c[t]=new Xt({_isIndexed:!0,hash:s[l++]});else try{c[t]=s[l++]}catch(e){c[t]=e}else try{c[t]=a[u++]}catch(e){c[t]=e}if(e.name&&null==c[e.name]){const r=c[t];r instanceof Error?Object.defineProperty(c,e.name,{enumerable:!0,get:()=>{throw er(`property ${JSON.stringify(e.name)}`,r)}}):c[e.name]=r}}));for(let e=0;e<c.length;e++){const t=c[e];t instanceof Error&&Object.defineProperty(c,e,{enumerable:!0,get:()=>{throw er(`index ${e}`,t)}})}return Object.freeze(c)}parseTransaction(e){let t=this.getFunction(e.data.substring(0,10).toLowerCase());return t?new Yt({args:this._abiCoder.decode(t.inputs,"0x"+e.data.substring(10)),functionFragment:t,name:t.name,signature:t.format(),sighash:this.getSighash(t),value:$.from(e.value||"0")}):null}parseLog(e){let t=this.getEvent(e.topics[0]);return!t||t.anonymous?null:new Jt({eventFragment:t,name:t.name,signature:t.format(),topic:this.getEventTopic(t),args:this.decodeEventLog(t,e.data,e.topics)})}parseError(e){const t=R(e);let r=this.getError(t.substring(0,10).toLowerCase());return r?new Qt({args:this._abiCoder.decode(r.inputs,"0x"+t.substring(10)),errorFragment:r,name:r.name,signature:r.format(),sighash:this.getSighash(r)}):null}static isInterface(e){return!(!e||!e._isInterface)}}const rr=new v("abstract-provider/5.8.0");class nr extends le{static isForkEvent(e){return!(!e||!e._isForkEvent)}}class ir{constructor(){rr.checkAbstract(new.target,ir),te(this,"_isProvider",!0)}getFeeData(){return e=this,t=void 0,n=function*(){const{block:e,gasPrice:t}=yield ne({block:this.getBlock("latest"),gasPrice:this.getGasPrice().catch((e=>null))});let r=null,n=null,i=null;return e&&e.baseFeePerGas&&(r=e.baseFeePerGas,i=$.from("1500000000"),n=e.baseFeePerGas.mul(2).add(i)),{lastBaseFeePerGas:r,maxFeePerGas:n,maxPriorityFeePerGas:i,gasPrice:t}},new((r=void 0)||(r=Promise))((function(i,o){function s(e){try{c(n.next(e))}catch(e){o(e)}}function a(e){try{c(n.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}));var e,t,r,n}addListener(e,t){return this.on(e,t)}removeListener(e,t){return this.off(e,t)}static isProvider(e){return!(!e||!e._isProvider)}}var or=function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function s(e){try{c(n.next(e))}catch(e){o(e)}}function a(e){try{c(n.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))};const sr=new v("abstract-signer/5.8.0"),ar=["accessList","ccipReadEnabled","chainId","customData","data","from","gasLimit","gasPrice","maxFeePerGas","maxPriorityFeePerGas","nonce","to","type","value"],cr=[v.errors.INSUFFICIENT_FUNDS,v.errors.NONCE_EXPIRED,v.errors.REPLACEMENT_UNDERPRICED];class ur{constructor(){sr.checkAbstract(new.target,ur),te(this,"_isSigner",!0)}getBalance(e){return or(this,void 0,void 0,(function*(){return this._checkProvider("getBalance"),yield this.provider.getBalance(this.getAddress(),e)}))}getTransactionCount(e){return or(this,void 0,void 0,(function*(){return this._checkProvider("getTransactionCount"),yield this.provider.getTransactionCount(this.getAddress(),e)}))}estimateGas(e){return or(this,void 0,void 0,(function*(){this._checkProvider("estimateGas");const t=yield ne(this.checkTransaction(e));return yield this.provider.estimateGas(t)}))}call(e,t){return or(this,void 0,void 0,(function*(){this._checkProvider("call");const r=yield ne(this.checkTransaction(e));return yield this.provider.call(r,t)}))}sendTransaction(e){return or(this,void 0,void 0,(function*(){this._checkProvider("sendTransaction");const t=yield this.populateTransaction(e),r=yield this.signTransaction(t);return yield this.provider.sendTransaction(r)}))}getChainId(){return or(this,void 0,void 0,(function*(){return this._checkProvider("getChainId"),(yield this.provider.getNetwork()).chainId}))}getGasPrice(){return or(this,void 0,void 0,(function*(){return this._checkProvider("getGasPrice"),yield this.provider.getGasPrice()}))}getFeeData(){return or(this,void 0,void 0,(function*(){return this._checkProvider("getFeeData"),yield this.provider.getFeeData()}))}resolveName(e){return or(this,void 0,void 0,(function*(){return this._checkProvider("resolveName"),yield this.provider.resolveName(e)}))}checkTransaction(e){for(const t in e)-1===ar.indexOf(t)&&sr.throwArgumentError("invalid transaction key: "+t,"transaction",e);const t=oe(e);return null==t.from?t.from=this.getAddress():t.from=Promise.all([Promise.resolve(t.from),this.getAddress()]).then((t=>(t[0].toLowerCase()!==t[1].toLowerCase()&&sr.throwArgumentError("from address mismatch","transaction",e),t[0]))),t}populateTransaction(e){return or(this,void 0,void 0,(function*(){const t=yield ne(this.checkTransaction(e));null!=t.to&&(t.to=Promise.resolve(t.to).then((e=>or(this,void 0,void 0,(function*(){if(null==e)return null;const t=yield this.resolveName(e);return null==t&&sr.throwArgumentError("provided ENS name resolves to null","tx.to",e),t})))),t.to.catch((e=>{})));const r=null!=t.maxFeePerGas||null!=t.maxPriorityFeePerGas;if(null==t.gasPrice||2!==t.type&&!r?0!==t.type&&1!==t.type||!r||sr.throwArgumentError("pre-eip-1559 transaction do not support maxFeePerGas/maxPriorityFeePerGas","transaction",e):sr.throwArgumentError("eip-1559 transaction do not support gasPrice","transaction",e),2!==t.type&&null!=t.type||null==t.maxFeePerGas||null==t.maxPriorityFeePerGas)if(0===t.type||1===t.type)null==t.gasPrice&&(t.gasPrice=this.getGasPrice());else{const e=yield this.getFeeData();if(null==t.type)if(null!=e.maxFeePerGas&&null!=e.maxPriorityFeePerGas)if(t.type=2,null!=t.gasPrice){const e=t.gasPrice;delete t.gasPrice,t.maxFeePerGas=e,t.maxPriorityFeePerGas=e}else null==t.maxFeePerGas&&(t.maxFeePerGas=e.maxFeePerGas),null==t.maxPriorityFeePerGas&&(t.maxPriorityFeePerGas=e.maxPriorityFeePerGas);else null!=e.gasPrice?(r&&sr.throwError("network does not support EIP-1559",v.errors.UNSUPPORTED_OPERATION,{operation:"populateTransaction"}),null==t.gasPrice&&(t.gasPrice=e.gasPrice),t.type=0):sr.throwError("failed to get consistent fee data",v.errors.UNSUPPORTED_OPERATION,{operation:"signer.getFeeData"});else 2===t.type&&(null==t.maxFeePerGas&&(t.maxFeePerGas=e.maxFeePerGas),null==t.maxPriorityFeePerGas&&(t.maxPriorityFeePerGas=e.maxPriorityFeePerGas))}else t.type=2;return null==t.nonce&&(t.nonce=this.getTransactionCount("pending")),null==t.gasLimit&&(t.gasLimit=this.estimateGas(t).catch((e=>{if(cr.indexOf(e.code)>=0)throw e;return sr.throwError("cannot estimate gas; transaction may fail or may require manual gas limit",v.errors.UNPREDICTABLE_GAS_LIMIT,{error:e,tx:t})}))),null==t.chainId?t.chainId=this.getChainId():t.chainId=Promise.all([Promise.resolve(t.chainId),this.getChainId()]).then((t=>(0!==t[1]&&t[0]!==t[1]&&sr.throwArgumentError("chainId address mismatch","transaction",e),t[0]))),yield ne(t)}))}_checkProvider(e){this.provider||sr.throwError("missing provider",v.errors.UNSUPPORTED_OPERATION,{operation:e||"_checkProvider"})}static isSigner(e){return!(!e||!e._isSigner)}}class lr extends ur{constructor(e,t){super(),te(this,"address",e),te(this,"provider",t||null)}getAddress(){return Promise.resolve(this.address)}_fail(e,t){return Promise.resolve().then((()=>{sr.throwError(e,v.errors.UNSUPPORTED_OPERATION,{operation:t})}))}signMessage(e){return this._fail("VoidSigner cannot sign messages","signMessage")}signTransaction(e){return this._fail("VoidSigner cannot sign transactions","signTransaction")}_signTypedData(e,t,r){return this._fail("VoidSigner cannot sign typed data","signTypedData")}connect(e){return new lr(this.address,e)}}var hr=r(7952),fr=r.n(hr);function dr(e,t,r){return r={path:t,exports:{},require:function(e,t){return function(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}(null==t&&r.path)}},e(r,r.exports),r.exports}"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==r.g?r.g:"undefined"!=typeof self&&self;var pr=gr;function gr(e,t){if(!e)throw new Error(t||"Assertion failed")}gr.equal=function(e,t,r){if(e!=t)throw new Error(r||"Assertion failed: "+e+" != "+t)};var mr=dr((function(e,t){var r=t;function n(e){return 1===e.length?"0"+e:e}function i(e){for(var t="",r=0;r<e.length;r++)t+=n(e[r].toString(16));return t}r.toArray=function(e,t){if(Array.isArray(e))return e.slice();if(!e)return[];var r=[];if("string"!=typeof e){for(var n=0;n<e.length;n++)r[n]=0|e[n];return r}if("hex"===t)for((e=e.replace(/[^a-z0-9]+/gi,"")).length%2!=0&&(e="0"+e),n=0;n<e.length;n+=2)r.push(parseInt(e[n]+e[n+1],16));else for(n=0;n<e.length;n++){var i=e.charCodeAt(n),o=i>>8,s=255&i;o?r.push(o,s):r.push(s)}return r},r.zero2=n,r.toHex=i,r.encode=function(e,t){return"hex"===t?i(e):e}})),yr=dr((function(e,t){var r=t;r.assert=pr,r.toArray=mr.toArray,r.zero2=mr.zero2,r.toHex=mr.toHex,r.encode=mr.encode,r.getNAF=function(e,t,r){var n,i=new Array(Math.max(e.bitLength(),r)+1);for(n=0;n<i.length;n+=1)i[n]=0;var o=1<<t+1,s=e.clone();for(n=0;n<i.length;n++){var a,c=s.andln(o-1);s.isOdd()?(a=c>(o>>1)-1?(o>>1)-c:c,s.isubn(a)):a=0,i[n]=a,s.iushrn(1)}return i},r.getJSF=function(e,t){var r=[[],[]];e=e.clone(),t=t.clone();for(var n,i=0,o=0;e.cmpn(-i)>0||t.cmpn(-o)>0;){var s,a,c=e.andln(3)+i&3,u=t.andln(3)+o&3;3===c&&(c=-1),3===u&&(u=-1),s=1&c?3!=(n=e.andln(7)+i&7)&&5!==n||2!==u?c:-c:0,r[0].push(s),a=1&u?3!=(n=t.andln(7)+o&7)&&5!==n||2!==c?u:-u:0,r[1].push(a),2*i===s+1&&(i=1-i),2*o===a+1&&(o=1-o),e.iushrn(1),t.iushrn(1)}return r},r.cachedProperty=function(e,t,r){var n="_"+t;e.prototype[t]=function(){return void 0!==this[n]?this[n]:this[n]=r.call(this)}},r.parseBytes=function(e){return"string"==typeof e?r.toArray(e,"hex"):e},r.intFromLE=function(e){return new(z())(e,"hex","le")}})),vr=yr.getNAF,br=yr.getJSF,wr=yr.assert;function Er(e,t){this.type=e,this.p=new(z())(t.p,16),this.red=t.prime?z().red(t.prime):z().mont(this.p),this.zero=new(z())(0).toRed(this.red),this.one=new(z())(1).toRed(this.red),this.two=new(z())(2).toRed(this.red),this.n=t.n&&new(z())(t.n,16),this.g=t.g&&this.pointFromJSON(t.g,t.gRed),this._wnafT1=new Array(4),this._wnafT2=new Array(4),this._wnafT3=new Array(4),this._wnafT4=new Array(4),this._bitLength=this.n?this.n.bitLength():0;var r=this.n&&this.p.div(this.n);!r||r.cmpn(100)>0?this.redN=null:(this._maxwellTrick=!0,this.redN=this.n.toRed(this.red))}var Ar=Er;function _r(e,t){this.curve=e,this.type=t,this.precomputed=null}Er.prototype.point=function(){throw new Error("Not implemented")},Er.prototype.validate=function(){throw new Error("Not implemented")},Er.prototype._fixedNafMul=function(e,t){wr(e.precomputed);var r=e._getDoubles(),n=vr(t,1,this._bitLength),i=(1<<r.step+1)-(r.step%2==0?2:1);i/=3;var o,s,a=[];for(o=0;o<n.length;o+=r.step){s=0;for(var c=o+r.step-1;c>=o;c--)s=(s<<1)+n[c];a.push(s)}for(var u=this.jpoint(null,null,null),l=this.jpoint(null,null,null),h=i;h>0;h--){for(o=0;o<a.length;o++)(s=a[o])===h?l=l.mixedAdd(r.points[o]):s===-h&&(l=l.mixedAdd(r.points[o].neg()));u=u.add(l)}return u.toP()},Er.prototype._wnafMul=function(e,t){var r=4,n=e._getNAFPoints(r);r=n.wnd;for(var i=n.points,o=vr(t,r,this._bitLength),s=this.jpoint(null,null,null),a=o.length-1;a>=0;a--){for(var c=0;a>=0&&0===o[a];a--)c++;if(a>=0&&c++,s=s.dblp(c),a<0)break;var u=o[a];wr(0!==u),s="affine"===e.type?u>0?s.mixedAdd(i[u-1>>1]):s.mixedAdd(i[-u-1>>1].neg()):u>0?s.add(i[u-1>>1]):s.add(i[-u-1>>1].neg())}return"affine"===e.type?s.toP():s},Er.prototype._wnafMulAdd=function(e,t,r,n,i){var o,s,a,c=this._wnafT1,u=this._wnafT2,l=this._wnafT3,h=0;for(o=0;o<n;o++){var f=(a=t[o])._getNAFPoints(e);c[o]=f.wnd,u[o]=f.points}for(o=n-1;o>=1;o-=2){var d=o-1,p=o;if(1===c[d]&&1===c[p]){var g=[t[d],null,null,t[p]];0===t[d].y.cmp(t[p].y)?(g[1]=t[d].add(t[p]),g[2]=t[d].toJ().mixedAdd(t[p].neg())):0===t[d].y.cmp(t[p].y.redNeg())?(g[1]=t[d].toJ().mixedAdd(t[p]),g[2]=t[d].add(t[p].neg())):(g[1]=t[d].toJ().mixedAdd(t[p]),g[2]=t[d].toJ().mixedAdd(t[p].neg()));var m=[-3,-1,-5,-7,0,7,5,1,3],y=br(r[d],r[p]);for(h=Math.max(y[0].length,h),l[d]=new Array(h),l[p]=new Array(h),s=0;s<h;s++){var v=0|y[0][s],b=0|y[1][s];l[d][s]=m[3*(v+1)+(b+1)],l[p][s]=0,u[d]=g}}else l[d]=vr(r[d],c[d],this._bitLength),l[p]=vr(r[p],c[p],this._bitLength),h=Math.max(l[d].length,h),h=Math.max(l[p].length,h)}var w=this.jpoint(null,null,null),E=this._wnafT4;for(o=h;o>=0;o--){for(var A=0;o>=0;){var _=!0;for(s=0;s<n;s++)E[s]=0|l[s][o],0!==E[s]&&(_=!1);if(!_)break;A++,o--}if(o>=0&&A++,w=w.dblp(A),o<0)break;for(s=0;s<n;s++){var x=E[s];0!==x&&(x>0?a=u[s][x-1>>1]:x<0&&(a=u[s][-x-1>>1].neg()),w="affine"===a.type?w.mixedAdd(a):w.add(a))}}for(o=0;o<n;o++)u[o]=null;return i?w:w.toP()},Er.BasePoint=_r,_r.prototype.eq=function(){throw new Error("Not implemented")},_r.prototype.validate=function(){return this.curve.validate(this)},Er.prototype.decodePoint=function(e,t){e=yr.toArray(e,t);var r=this.p.byteLength();if((4===e[0]||6===e[0]||7===e[0])&&e.length-1==2*r)return 6===e[0]?wr(e[e.length-1]%2==0):7===e[0]&&wr(e[e.length-1]%2==1),this.point(e.slice(1,1+r),e.slice(1+r,1+2*r));if((2===e[0]||3===e[0])&&e.length-1===r)return this.pointFromX(e.slice(1,1+r),3===e[0]);throw new Error("Unknown point format")},_r.prototype.encodeCompressed=function(e){return this.encode(e,!0)},_r.prototype._encode=function(e){var t=this.curve.p.byteLength(),r=this.getX().toArray("be",t);return e?[this.getY().isEven()?2:3].concat(r):[4].concat(r,this.getY().toArray("be",t))},_r.prototype.encode=function(e,t){return yr.encode(this._encode(t),e)},_r.prototype.precompute=function(e){if(this.precomputed)return this;var t={doubles:null,naf:null,beta:null};return t.naf=this._getNAFPoints(8),t.doubles=this._getDoubles(4,e),t.beta=this._getBeta(),this.precomputed=t,this},_r.prototype._hasDoubles=function(e){if(!this.precomputed)return!1;var t=this.precomputed.doubles;return!!t&&t.points.length>=Math.ceil((e.bitLength()+1)/t.step)},_r.prototype._getDoubles=function(e,t){if(this.precomputed&&this.precomputed.doubles)return this.precomputed.doubles;for(var r=[this],n=this,i=0;i<t;i+=e){for(var o=0;o<e;o++)n=n.dbl();r.push(n)}return{step:e,points:r}},_r.prototype._getNAFPoints=function(e){if(this.precomputed&&this.precomputed.naf)return this.precomputed.naf;for(var t=[this],r=(1<<e)-1,n=1===r?null:this.dbl(),i=1;i<r;i++)t[i]=t[i-1].add(n);return{wnd:e,points:t}},_r.prototype._getBeta=function(){return null},_r.prototype.dblp=function(e){for(var t=this,r=0;r<e;r++)t=t.dbl();return t};var xr=dr((function(e){"function"==typeof Object.create?e.exports=function(e,t){t&&(e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:e.exports=function(e,t){if(t){e.super_=t;var r=function(){};r.prototype=t.prototype,e.prototype=new r,e.prototype.constructor=e}}})),Sr=yr.assert;function kr(e){Ar.call(this,"short",e),this.a=new(z())(e.a,16).toRed(this.red),this.b=new(z())(e.b,16).toRed(this.red),this.tinv=this.two.redInvm(),this.zeroA=0===this.a.fromRed().cmpn(0),this.threeA=0===this.a.fromRed().sub(this.p).cmpn(-3),this.endo=this._getEndomorphism(e),this._endoWnafT1=new Array(4),this._endoWnafT2=new Array(4)}xr(kr,Ar);var Ir=kr;function Or(e,t,r,n){Ar.BasePoint.call(this,e,"affine"),null===t&&null===r?(this.x=null,this.y=null,this.inf=!0):(this.x=new(z())(t,16),this.y=new(z())(r,16),n&&(this.x.forceRed(this.curve.red),this.y.forceRed(this.curve.red)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.inf=!1)}function Tr(e,t,r,n){Ar.BasePoint.call(this,e,"jacobian"),null===t&&null===r&&null===n?(this.x=this.curve.one,this.y=this.curve.one,this.z=new(z())(0)):(this.x=new(z())(t,16),this.y=new(z())(r,16),this.z=new(z())(n,16)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.zOne=this.z===this.curve.one}kr.prototype._getEndomorphism=function(e){if(this.zeroA&&this.g&&this.n&&1===this.p.modn(3)){var t,r;if(e.beta)t=new(z())(e.beta,16).toRed(this.red);else{var n=this._getEndoRoots(this.p);t=(t=n[0].cmp(n[1])<0?n[0]:n[1]).toRed(this.red)}if(e.lambda)r=new(z())(e.lambda,16);else{var i=this._getEndoRoots(this.n);0===this.g.mul(i[0]).x.cmp(this.g.x.redMul(t))?r=i[0]:(r=i[1],Sr(0===this.g.mul(r).x.cmp(this.g.x.redMul(t))))}return{beta:t,lambda:r,basis:e.basis?e.basis.map((function(e){return{a:new(z())(e.a,16),b:new(z())(e.b,16)}})):this._getEndoBasis(r)}}},kr.prototype._getEndoRoots=function(e){var t=e===this.p?this.red:z().mont(e),r=new(z())(2).toRed(t).redInvm(),n=r.redNeg(),i=new(z())(3).toRed(t).redNeg().redSqrt().redMul(r);return[n.redAdd(i).fromRed(),n.redSub(i).fromRed()]},kr.prototype._getEndoBasis=function(e){for(var t,r,n,i,o,s,a,c,u,l=this.n.ushrn(Math.floor(this.n.bitLength()/2)),h=e,f=this.n.clone(),d=new(z())(1),p=new(z())(0),g=new(z())(0),m=new(z())(1),y=0;0!==h.cmpn(0);){var v=f.div(h);c=f.sub(v.mul(h)),u=g.sub(v.mul(d));var b=m.sub(v.mul(p));if(!n&&c.cmp(l)<0)t=a.neg(),r=d,n=c.neg(),i=u;else if(n&&2==++y)break;a=c,f=h,h=c,g=d,d=u,m=p,p=b}o=c.neg(),s=u;var w=n.sqr().add(i.sqr());return o.sqr().add(s.sqr()).cmp(w)>=0&&(o=t,s=r),n.negative&&(n=n.neg(),i=i.neg()),o.negative&&(o=o.neg(),s=s.neg()),[{a:n,b:i},{a:o,b:s}]},kr.prototype._endoSplit=function(e){var t=this.endo.basis,r=t[0],n=t[1],i=n.b.mul(e).divRound(this.n),o=r.b.neg().mul(e).divRound(this.n),s=i.mul(r.a),a=o.mul(n.a),c=i.mul(r.b),u=o.mul(n.b);return{k1:e.sub(s).sub(a),k2:c.add(u).neg()}},kr.prototype.pointFromX=function(e,t){(e=new(z())(e,16)).red||(e=e.toRed(this.red));var r=e.redSqr().redMul(e).redIAdd(e.redMul(this.a)).redIAdd(this.b),n=r.redSqrt();if(0!==n.redSqr().redSub(r).cmp(this.zero))throw new Error("invalid point");var i=n.fromRed().isOdd();return(t&&!i||!t&&i)&&(n=n.redNeg()),this.point(e,n)},kr.prototype.validate=function(e){if(e.inf)return!0;var t=e.x,r=e.y,n=this.a.redMul(t),i=t.redSqr().redMul(t).redIAdd(n).redIAdd(this.b);return 0===r.redSqr().redISub(i).cmpn(0)},kr.prototype._endoWnafMulAdd=function(e,t,r){for(var n=this._endoWnafT1,i=this._endoWnafT2,o=0;o<e.length;o++){var s=this._endoSplit(t[o]),a=e[o],c=a._getBeta();s.k1.negative&&(s.k1.ineg(),a=a.neg(!0)),s.k2.negative&&(s.k2.ineg(),c=c.neg(!0)),n[2*o]=a,n[2*o+1]=c,i[2*o]=s.k1,i[2*o+1]=s.k2}for(var u=this._wnafMulAdd(1,n,i,2*o,r),l=0;l<2*o;l++)n[l]=null,i[l]=null;return u},xr(Or,Ar.BasePoint),kr.prototype.point=function(e,t,r){return new Or(this,e,t,r)},kr.prototype.pointFromJSON=function(e,t){return Or.fromJSON(this,e,t)},Or.prototype._getBeta=function(){if(this.curve.endo){var e=this.precomputed;if(e&&e.beta)return e.beta;var t=this.curve.point(this.x.redMul(this.curve.endo.beta),this.y);if(e){var r=this.curve,n=function(e){return r.point(e.x.redMul(r.endo.beta),e.y)};e.beta=t,t.precomputed={beta:null,naf:e.naf&&{wnd:e.naf.wnd,points:e.naf.points.map(n)},doubles:e.doubles&&{step:e.doubles.step,points:e.doubles.points.map(n)}}}return t}},Or.prototype.toJSON=function(){return this.precomputed?[this.x,this.y,this.precomputed&&{doubles:this.precomputed.doubles&&{step:this.precomputed.doubles.step,points:this.precomputed.doubles.points.slice(1)},naf:this.precomputed.naf&&{wnd:this.precomputed.naf.wnd,points:this.precomputed.naf.points.slice(1)}}]:[this.x,this.y]},Or.fromJSON=function(e,t,r){"string"==typeof t&&(t=JSON.parse(t));var n=e.point(t[0],t[1],r);if(!t[2])return n;function i(t){return e.point(t[0],t[1],r)}var o=t[2];return n.precomputed={beta:null,doubles:o.doubles&&{step:o.doubles.step,points:[n].concat(o.doubles.points.map(i))},naf:o.naf&&{wnd:o.naf.wnd,points:[n].concat(o.naf.points.map(i))}},n},Or.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+">"},Or.prototype.isInfinity=function(){return this.inf},Or.prototype.add=function(e){if(this.inf)return e;if(e.inf)return this;if(this.eq(e))return this.dbl();if(this.neg().eq(e))return this.curve.point(null,null);if(0===this.x.cmp(e.x))return this.curve.point(null,null);var t=this.y.redSub(e.y);0!==t.cmpn(0)&&(t=t.redMul(this.x.redSub(e.x).redInvm()));var r=t.redSqr().redISub(this.x).redISub(e.x),n=t.redMul(this.x.redSub(r)).redISub(this.y);return this.curve.point(r,n)},Or.prototype.dbl=function(){if(this.inf)return this;var e=this.y.redAdd(this.y);if(0===e.cmpn(0))return this.curve.point(null,null);var t=this.curve.a,r=this.x.redSqr(),n=e.redInvm(),i=r.redAdd(r).redIAdd(r).redIAdd(t).redMul(n),o=i.redSqr().redISub(this.x.redAdd(this.x)),s=i.redMul(this.x.redSub(o)).redISub(this.y);return this.curve.point(o,s)},Or.prototype.getX=function(){return this.x.fromRed()},Or.prototype.getY=function(){return this.y.fromRed()},Or.prototype.mul=function(e){return e=new(z())(e,16),this.isInfinity()?this:this._hasDoubles(e)?this.curve._fixedNafMul(this,e):this.curve.endo?this.curve._endoWnafMulAdd([this],[e]):this.curve._wnafMul(this,e)},Or.prototype.mulAdd=function(e,t,r){var n=[this,t],i=[e,r];return this.curve.endo?this.curve._endoWnafMulAdd(n,i):this.curve._wnafMulAdd(1,n,i,2)},Or.prototype.jmulAdd=function(e,t,r){var n=[this,t],i=[e,r];return this.curve.endo?this.curve._endoWnafMulAdd(n,i,!0):this.curve._wnafMulAdd(1,n,i,2,!0)},Or.prototype.eq=function(e){return this===e||this.inf===e.inf&&(this.inf||0===this.x.cmp(e.x)&&0===this.y.cmp(e.y))},Or.prototype.neg=function(e){if(this.inf)return this;var t=this.curve.point(this.x,this.y.redNeg());if(e&&this.precomputed){var r=this.precomputed,n=function(e){return e.neg()};t.precomputed={naf:r.naf&&{wnd:r.naf.wnd,points:r.naf.points.map(n)},doubles:r.doubles&&{step:r.doubles.step,points:r.doubles.points.map(n)}}}return t},Or.prototype.toJ=function(){return this.inf?this.curve.jpoint(null,null,null):this.curve.jpoint(this.x,this.y,this.curve.one)},xr(Tr,Ar.BasePoint),kr.prototype.jpoint=function(e,t,r){return new Tr(this,e,t,r)},Tr.prototype.toP=function(){if(this.isInfinity())return this.curve.point(null,null);var e=this.z.redInvm(),t=e.redSqr(),r=this.x.redMul(t),n=this.y.redMul(t).redMul(e);return this.curve.point(r,n)},Tr.prototype.neg=function(){return this.curve.jpoint(this.x,this.y.redNeg(),this.z)},Tr.prototype.add=function(e){if(this.isInfinity())return e;if(e.isInfinity())return this;var t=e.z.redSqr(),r=this.z.redSqr(),n=this.x.redMul(t),i=e.x.redMul(r),o=this.y.redMul(t.redMul(e.z)),s=e.y.redMul(r.redMul(this.z)),a=n.redSub(i),c=o.redSub(s);if(0===a.cmpn(0))return 0!==c.cmpn(0)?this.curve.jpoint(null,null,null):this.dbl();var u=a.redSqr(),l=u.redMul(a),h=n.redMul(u),f=c.redSqr().redIAdd(l).redISub(h).redISub(h),d=c.redMul(h.redISub(f)).redISub(o.redMul(l)),p=this.z.redMul(e.z).redMul(a);return this.curve.jpoint(f,d,p)},Tr.prototype.mixedAdd=function(e){if(this.isInfinity())return e.toJ();if(e.isInfinity())return this;var t=this.z.redSqr(),r=this.x,n=e.x.redMul(t),i=this.y,o=e.y.redMul(t).redMul(this.z),s=r.redSub(n),a=i.redSub(o);if(0===s.cmpn(0))return 0!==a.cmpn(0)?this.curve.jpoint(null,null,null):this.dbl();var c=s.redSqr(),u=c.redMul(s),l=r.redMul(c),h=a.redSqr().redIAdd(u).redISub(l).redISub(l),f=a.redMul(l.redISub(h)).redISub(i.redMul(u)),d=this.z.redMul(s);return this.curve.jpoint(h,f,d)},Tr.prototype.dblp=function(e){if(0===e)return this;if(this.isInfinity())return this;if(!e)return this.dbl();var t;if(this.curve.zeroA||this.curve.threeA){var r=this;for(t=0;t<e;t++)r=r.dbl();return r}var n=this.curve.a,i=this.curve.tinv,o=this.x,s=this.y,a=this.z,c=a.redSqr().redSqr(),u=s.redAdd(s);for(t=0;t<e;t++){var l=o.redSqr(),h=u.redSqr(),f=h.redSqr(),d=l.redAdd(l).redIAdd(l).redIAdd(n.redMul(c)),p=o.redMul(h),g=d.redSqr().redISub(p.redAdd(p)),m=p.redISub(g),y=d.redMul(m);y=y.redIAdd(y).redISub(f);var v=u.redMul(a);t+1<e&&(c=c.redMul(f)),o=g,a=v,u=y}return this.curve.jpoint(o,u.redMul(i),a)},Tr.prototype.dbl=function(){return this.isInfinity()?this:this.curve.zeroA?this._zeroDbl():this.curve.threeA?this._threeDbl():this._dbl()},Tr.prototype._zeroDbl=function(){var e,t,r;if(this.zOne){var n=this.x.redSqr(),i=this.y.redSqr(),o=i.redSqr(),s=this.x.redAdd(i).redSqr().redISub(n).redISub(o);s=s.redIAdd(s);var a=n.redAdd(n).redIAdd(n),c=a.redSqr().redISub(s).redISub(s),u=o.redIAdd(o);u=(u=u.redIAdd(u)).redIAdd(u),e=c,t=a.redMul(s.redISub(c)).redISub(u),r=this.y.redAdd(this.y)}else{var l=this.x.redSqr(),h=this.y.redSqr(),f=h.redSqr(),d=this.x.redAdd(h).redSqr().redISub(l).redISub(f);d=d.redIAdd(d);var p=l.redAdd(l).redIAdd(l),g=p.redSqr(),m=f.redIAdd(f);m=(m=m.redIAdd(m)).redIAdd(m),e=g.redISub(d).redISub(d),t=p.redMul(d.redISub(e)).redISub(m),r=(r=this.y.redMul(this.z)).redIAdd(r)}return this.curve.jpoint(e,t,r)},Tr.prototype._threeDbl=function(){var e,t,r;if(this.zOne){var n=this.x.redSqr(),i=this.y.redSqr(),o=i.redSqr(),s=this.x.redAdd(i).redSqr().redISub(n).redISub(o);s=s.redIAdd(s);var a=n.redAdd(n).redIAdd(n).redIAdd(this.curve.a),c=a.redSqr().redISub(s).redISub(s);e=c;var u=o.redIAdd(o);u=(u=u.redIAdd(u)).redIAdd(u),t=a.redMul(s.redISub(c)).redISub(u),r=this.y.redAdd(this.y)}else{var l=this.z.redSqr(),h=this.y.redSqr(),f=this.x.redMul(h),d=this.x.redSub(l).redMul(this.x.redAdd(l));d=d.redAdd(d).redIAdd(d);var p=f.redIAdd(f),g=(p=p.redIAdd(p)).redAdd(p);e=d.redSqr().redISub(g),r=this.y.redAdd(this.z).redSqr().redISub(h).redISub(l);var m=h.redSqr();m=(m=(m=m.redIAdd(m)).redIAdd(m)).redIAdd(m),t=d.redMul(p.redISub(e)).redISub(m)}return this.curve.jpoint(e,t,r)},Tr.prototype._dbl=function(){var e=this.curve.a,t=this.x,r=this.y,n=this.z,i=n.redSqr().redSqr(),o=t.redSqr(),s=r.redSqr(),a=o.redAdd(o).redIAdd(o).redIAdd(e.redMul(i)),c=t.redAdd(t),u=(c=c.redIAdd(c)).redMul(s),l=a.redSqr().redISub(u.redAdd(u)),h=u.redISub(l),f=s.redSqr();f=(f=(f=f.redIAdd(f)).redIAdd(f)).redIAdd(f);var d=a.redMul(h).redISub(f),p=r.redAdd(r).redMul(n);return this.curve.jpoint(l,d,p)},Tr.prototype.trpl=function(){if(!this.curve.zeroA)return this.dbl().add(this);var e=this.x.redSqr(),t=this.y.redSqr(),r=this.z.redSqr(),n=t.redSqr(),i=e.redAdd(e).redIAdd(e),o=i.redSqr(),s=this.x.redAdd(t).redSqr().redISub(e).redISub(n),a=(s=(s=(s=s.redIAdd(s)).redAdd(s).redIAdd(s)).redISub(o)).redSqr(),c=n.redIAdd(n);c=(c=(c=c.redIAdd(c)).redIAdd(c)).redIAdd(c);var u=i.redIAdd(s).redSqr().redISub(o).redISub(a).redISub(c),l=t.redMul(u);l=(l=l.redIAdd(l)).redIAdd(l);var h=this.x.redMul(a).redISub(l);h=(h=h.redIAdd(h)).redIAdd(h);var f=this.y.redMul(u.redMul(c.redISub(u)).redISub(s.redMul(a)));f=(f=(f=f.redIAdd(f)).redIAdd(f)).redIAdd(f);var d=this.z.redAdd(s).redSqr().redISub(r).redISub(a);return this.curve.jpoint(h,f,d)},Tr.prototype.mul=function(e,t){return e=new(z())(e,t),this.curve._wnafMul(this,e)},Tr.prototype.eq=function(e){if("affine"===e.type)return this.eq(e.toJ());if(this===e)return!0;var t=this.z.redSqr(),r=e.z.redSqr();if(0!==this.x.redMul(r).redISub(e.x.redMul(t)).cmpn(0))return!1;var n=t.redMul(this.z),i=r.redMul(e.z);return 0===this.y.redMul(i).redISub(e.y.redMul(n)).cmpn(0)},Tr.prototype.eqXToP=function(e){var t=this.z.redSqr(),r=e.toRed(this.curve.red).redMul(t);if(0===this.x.cmp(r))return!0;for(var n=e.clone(),i=this.curve.redN.redMul(t);;){if(n.iadd(this.curve.n),n.cmp(this.curve.p)>=0)return!1;if(r.redIAdd(i),0===this.x.cmp(r))return!0}},Tr.prototype.inspect=function(){return this.isInfinity()?"<EC JPoint Infinity>":"<EC JPoint x: "+this.x.toString(16,2)+" y: "+this.y.toString(16,2)+" z: "+this.z.toString(16,2)+">"},Tr.prototype.isInfinity=function(){return 0===this.z.cmpn(0)};var Pr=dr((function(e,t){var r=t;r.base=Ar,r.short=Ir,r.mont=null,r.edwards=null})),Rr=dr((function(e,t){var r,n=t,i=yr.assert;function o(e){"short"===e.type?this.curve=new Pr.short(e):"edwards"===e.type?this.curve=new Pr.edwards(e):this.curve=new Pr.mont(e),this.g=this.curve.g,this.n=this.curve.n,this.hash=e.hash,i(this.g.validate(),"Invalid curve"),i(this.g.mul(this.n).isInfinity(),"Invalid curve, G*N != O")}function s(e,t){Object.defineProperty(n,e,{configurable:!0,enumerable:!0,get:function(){var r=new o(t);return Object.defineProperty(n,e,{configurable:!0,enumerable:!0,value:r}),r}})}n.PresetCurve=o,s("p192",{type:"short",prime:"p192",p:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff",a:"ffffffff ffffffff ffffffff fffffffe ffffffff fffffffc",b:"64210519 e59c80e7 0fa7e9ab 72243049 feb8deec c146b9b1",n:"ffffffff ffffffff ffffffff 99def836 146bc9b1 b4d22831",hash:fr().sha256,gRed:!1,g:["188da80e b03090f6 7cbf20eb 43a18800 f4ff0afd 82ff1012","07192b95 ffc8da78 631011ed 6b24cdd5 73f977a1 1e794811"]}),s("p224",{type:"short",prime:"p224",p:"ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001",a:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff fffffffe",b:"b4050a85 0c04b3ab f5413256 5044b0b7 d7bfd8ba 270b3943 2355ffb4",n:"ffffffff ffffffff ffffffff ffff16a2 e0b8f03e 13dd2945 5c5c2a3d",hash:fr().sha256,gRed:!1,g:["b70e0cbd 6bb4bf7f 321390b9 4a03c1d3 56c21122 343280d6 115c1d21","bd376388 b5f723fb 4c22dfe6 cd4375a0 5a074764 44d58199 85007e34"]}),s("p256",{type:"short",prime:null,p:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff ffffffff",a:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff fffffffc",b:"5ac635d8 aa3a93e7 b3ebbd55 769886bc 651d06b0 cc53b0f6 3bce3c3e 27d2604b",n:"ffffffff 00000000 ffffffff ffffffff bce6faad a7179e84 f3b9cac2 fc632551",hash:fr().sha256,gRed:!1,g:["6b17d1f2 e12c4247 f8bce6e5 63a440f2 77037d81 2deb33a0 f4a13945 d898c296","4fe342e2 fe1a7f9b 8ee7eb4a 7c0f9e16 2bce3357 6b315ece cbb64068 37bf51f5"]}),s("p384",{type:"short",prime:null,p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 ffffffff",a:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 fffffffc",b:"b3312fa7 e23ee7e4 988e056b e3f82d19 181d9c6e fe814112 0314088f 5013875a c656398d 8a2ed19d 2a85c8ed d3ec2aef",n:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff c7634d81 f4372ddf 581a0db2 48b0a77a ecec196a ccc52973",hash:fr().sha384,gRed:!1,g:["aa87ca22 be8b0537 8eb1c71e f320ad74 6e1d3b62 8ba79b98 59f741e0 82542a38 5502f25d bf55296c 3a545e38 72760ab7","3617de4a 96262c6f 5d9e98bf 9292dc29 f8f41dbd 289a147c e9da3113 b5f0b8c0 0a60b1ce 1d7e819d 7a431d7c 90ea0e5f"]}),s("p521",{type:"short",prime:null,p:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff",a:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffc",b:"00000051 953eb961 8e1c9a1f 929a21a0 b68540ee a2da725b 99b315f3 b8b48991 8ef109e1 56193951 ec7e937b 1652c0bd 3bb1bf07 3573df88 3d2c34f1 ef451fd4 6b503f00",n:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffa 51868783 bf2f966b 7fcc0148 f709a5d0 3bb5c9b8 899c47ae bb6fb71e 91386409",hash:fr().sha512,gRed:!1,g:["000000c6 858e06b7 0404e9cd 9e3ecb66 2395b442 9c648139 053fb521 f828af60 6b4d3dba a14b5e77 efe75928 fe1dc127 a2ffa8de 3348b3c1 856a429b f97e7e31 c2e5bd66","00000118 39296a78 9a3bc004 5c8a5fb4 2c7d1bd9 98f54449 579b4468 17afbd17 273e662c 97ee7299 5ef42640 c550b901 3fad0761 353c7086 a272c240 88be9476 9fd16650"]}),s("curve25519",{type:"mont",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"76d06",b:"1",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:fr().sha256,gRed:!1,g:["9"]}),s("ed25519",{type:"edwards",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"-1",c:"1",d:"52036cee2b6ffe73 8cc740797779e898 00700a4d4141d8ab 75eb4dca135978a3",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:fr().sha256,gRed:!1,g:["216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a","6666666666666666666666666666666666666666666666666666666666666658"]});try{r=null.crash()}catch(e){r=void 0}s("secp256k1",{type:"short",prime:"k256",p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f",a:"0",b:"7",n:"ffffffff ffffffff ffffffff fffffffe baaedce6 af48a03b bfd25e8c d0364141",h:"1",hash:fr().sha256,beta:"7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee",lambda:"5363ad4cc05c30e0a5261c028812645a122e22ea20816678df02967c1b23bd72",basis:[{a:"3086d221a7d46bcde86c90e49284eb15",b:"-e4437ed6010e88286f547fa90abfe4c3"},{a:"114ca50f7a8e2f3f657c1108d9d44cfd8",b:"3086d221a7d46bcde86c90e49284eb15"}],gRed:!1,g:["79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798","483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8",r]})}));function Nr(e){if(!(this instanceof Nr))return new Nr(e);this.hash=e.hash,this.predResist=!!e.predResist,this.outLen=this.hash.outSize,this.minEntropy=e.minEntropy||this.hash.hmacStrength,this._reseed=null,this.reseedInterval=null,this.K=null,this.V=null;var t=mr.toArray(e.entropy,e.entropyEnc||"hex"),r=mr.toArray(e.nonce,e.nonceEnc||"hex"),n=mr.toArray(e.pers,e.persEnc||"hex");pr(t.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._init(t,r,n)}var Cr=Nr;Nr.prototype._init=function(e,t,r){var n=e.concat(t).concat(r);this.K=new Array(this.outLen/8),this.V=new Array(this.outLen/8);for(var i=0;i<this.V.length;i++)this.K[i]=0,this.V[i]=1;this._update(n),this._reseed=1,this.reseedInterval=281474976710656},Nr.prototype._hmac=function(){return new(fr().hmac)(this.hash,this.K)},Nr.prototype._update=function(e){var t=this._hmac().update(this.V).update([0]);e&&(t=t.update(e)),this.K=t.digest(),this.V=this._hmac().update(this.V).digest(),e&&(this.K=this._hmac().update(this.V).update([1]).update(e).digest(),this.V=this._hmac().update(this.V).digest())},Nr.prototype.reseed=function(e,t,r,n){"string"!=typeof t&&(n=r,r=t,t=null),e=mr.toArray(e,t),r=mr.toArray(r,n),pr(e.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._update(e.concat(r||[])),this._reseed=1},Nr.prototype.generate=function(e,t,r,n){if(this._reseed>this.reseedInterval)throw new Error("Reseed is required");"string"!=typeof t&&(n=r,r=t,t=null),r&&(r=mr.toArray(r,n||"hex"),this._update(r));for(var i=[];i.length<e;)this.V=this._hmac().update(this.V).digest(),i=i.concat(this.V);var o=i.slice(0,e);return this._update(r),this._reseed++,mr.encode(o,t)};var Mr=yr.assert;function Lr(e,t){this.ec=e,this.priv=null,this.pub=null,t.priv&&this._importPrivate(t.priv,t.privEnc),t.pub&&this._importPublic(t.pub,t.pubEnc)}var Br=Lr;Lr.fromPublic=function(e,t,r){return t instanceof Lr?t:new Lr(e,{pub:t,pubEnc:r})},Lr.fromPrivate=function(e,t,r){return t instanceof Lr?t:new Lr(e,{priv:t,privEnc:r})},Lr.prototype.validate=function(){var e=this.getPublic();return e.isInfinity()?{result:!1,reason:"Invalid public key"}:e.validate()?e.mul(this.ec.curve.n).isInfinity()?{result:!0,reason:null}:{result:!1,reason:"Public key * N != O"}:{result:!1,reason:"Public key is not a point"}},Lr.prototype.getPublic=function(e,t){return"string"==typeof e&&(t=e,e=null),this.pub||(this.pub=this.ec.g.mul(this.priv)),t?this.pub.encode(t,e):this.pub},Lr.prototype.getPrivate=function(e){return"hex"===e?this.priv.toString(16,2):this.priv},Lr.prototype._importPrivate=function(e,t){this.priv=new(z())(e,t||16),this.priv=this.priv.umod(this.ec.curve.n)},Lr.prototype._importPublic=function(e,t){if(e.x||e.y)return"mont"===this.ec.curve.type?Mr(e.x,"Need x coordinate"):"short"!==this.ec.curve.type&&"edwards"!==this.ec.curve.type||Mr(e.x&&e.y,"Need both x and y coordinate"),void(this.pub=this.ec.curve.point(e.x,e.y));this.pub=this.ec.curve.decodePoint(e,t)},Lr.prototype.derive=function(e){return e.validate()||Mr(e.validate(),"public point not validated"),e.mul(this.priv).getX()},Lr.prototype.sign=function(e,t,r){return this.ec.sign(e,this,t,r)},Lr.prototype.verify=function(e,t,r){return this.ec.verify(e,t,this,void 0,r)},Lr.prototype.inspect=function(){return"<Key priv: "+(this.priv&&this.priv.toString(16,2))+" pub: "+(this.pub&&this.pub.inspect())+" >"};var Ur=yr.assert;function Dr(e,t){if(e instanceof Dr)return e;this._importDER(e,t)||(Ur(e.r&&e.s,"Signature without r or s"),this.r=new(z())(e.r,16),this.s=new(z())(e.s,16),void 0===e.recoveryParam?this.recoveryParam=null:this.recoveryParam=e.recoveryParam)}var jr=Dr;function Fr(){this.place=0}function zr(e,t){var r=e[t.place++];if(!(128&r))return r;var n=15&r;if(0===n||n>4)return!1;if(0===e[t.place])return!1;for(var i=0,o=0,s=t.place;o<n;o++,s++)i<<=8,i|=e[s],i>>>=0;return!(i<=127)&&(t.place=s,i)}function qr(e){for(var t=0,r=e.length-1;!e[t]&&!(128&e[t+1])&&t<r;)t++;return 0===t?e:e.slice(t)}function Gr(e,t){if(t<128)e.push(t);else{var r=1+(Math.log(t)/Math.LN2>>>3);for(e.push(128|r);--r;)e.push(t>>>(r<<3)&255);e.push(t)}}Dr.prototype._importDER=function(e,t){e=yr.toArray(e,t);var r=new Fr;if(48!==e[r.place++])return!1;var n=zr(e,r);if(!1===n)return!1;if(n+r.place!==e.length)return!1;if(2!==e[r.place++])return!1;var i=zr(e,r);if(!1===i)return!1;if(128&e[r.place])return!1;var o=e.slice(r.place,i+r.place);if(r.place+=i,2!==e[r.place++])return!1;var s=zr(e,r);if(!1===s)return!1;if(e.length!==s+r.place)return!1;if(128&e[r.place])return!1;var a=e.slice(r.place,s+r.place);if(0===o[0]){if(!(128&o[1]))return!1;o=o.slice(1)}if(0===a[0]){if(!(128&a[1]))return!1;a=a.slice(1)}return this.r=new(z())(o),this.s=new(z())(a),this.recoveryParam=null,!0},Dr.prototype.toDER=function(e){var t=this.r.toArray(),r=this.s.toArray();for(128&t[0]&&(t=[0].concat(t)),128&r[0]&&(r=[0].concat(r)),t=qr(t),r=qr(r);!(r[0]||128&r[1]);)r=r.slice(1);var n=[2];Gr(n,t.length),(n=n.concat(t)).push(2),Gr(n,r.length);var i=n.concat(r),o=[48];return Gr(o,i.length),o=o.concat(i),yr.encode(o,e)};var Hr=function(){throw new Error("unsupported")},Kr=yr.assert;function Vr(e){if(!(this instanceof Vr))return new Vr(e);"string"==typeof e&&(Kr(Object.prototype.hasOwnProperty.call(Rr,e),"Unknown curve "+e),e=Rr[e]),e instanceof Rr.PresetCurve&&(e={curve:e}),this.curve=e.curve.curve,this.n=this.curve.n,this.nh=this.n.ushrn(1),this.g=this.curve.g,this.g=e.curve.g,this.g.precompute(e.curve.n.bitLength()+1),this.hash=e.hash||e.curve.hash}var Wr=Vr;Vr.prototype.keyPair=function(e){return new Br(this,e)},Vr.prototype.keyFromPrivate=function(e,t){return Br.fromPrivate(this,e,t)},Vr.prototype.keyFromPublic=function(e,t){return Br.fromPublic(this,e,t)},Vr.prototype.genKeyPair=function(e){e||(e={});for(var t=new Cr({hash:this.hash,pers:e.pers,persEnc:e.persEnc||"utf8",entropy:e.entropy||Hr(this.hash.hmacStrength),entropyEnc:e.entropy&&e.entropyEnc||"utf8",nonce:this.n.toArray()}),r=this.n.byteLength(),n=this.n.sub(new(z())(2));;){var i=new(z())(t.generate(r));if(!(i.cmp(n)>0))return i.iaddn(1),this.keyFromPrivate(i)}},Vr.prototype._truncateToN=function(e,t,r){var n;if(z().isBN(e)||"number"==typeof e)n=(e=new(z())(e,16)).byteLength();else if("object"==typeof e)n=e.length,e=new(z())(e,16);else{var i=e.toString();n=i.length+1>>>1,e=new(z())(i,16)}"number"!=typeof r&&(r=8*n);var o=r-this.n.bitLength();return o>0&&(e=e.ushrn(o)),!t&&e.cmp(this.n)>=0?e.sub(this.n):e},Vr.prototype.sign=function(e,t,r,n){if("object"==typeof r&&(n=r,r=null),n||(n={}),"string"!=typeof e&&"number"!=typeof e&&!z().isBN(e)){Kr("object"==typeof e&&e&&"number"==typeof e.length,"Expected message to be an array-like, a hex string, or a BN instance"),Kr(e.length>>>0===e.length);for(var i=0;i<e.length;i++)Kr((255&e[i])===e[i])}t=this.keyFromPrivate(t,r),e=this._truncateToN(e,!1,n.msgBitLength),Kr(!e.isNeg(),"Can not sign a negative message");var o=this.n.byteLength(),s=t.getPrivate().toArray("be",o),a=e.toArray("be",o);Kr(new(z())(a).eq(e),"Can not sign message");for(var c=new Cr({hash:this.hash,entropy:s,nonce:a,pers:n.pers,persEnc:n.persEnc||"utf8"}),u=this.n.sub(new(z())(1)),l=0;;l++){var h=n.k?n.k(l):new(z())(c.generate(this.n.byteLength()));if(!((h=this._truncateToN(h,!0)).cmpn(1)<=0||h.cmp(u)>=0)){var f=this.g.mul(h);if(!f.isInfinity()){var d=f.getX(),p=d.umod(this.n);if(0!==p.cmpn(0)){var g=h.invm(this.n).mul(p.mul(t.getPrivate()).iadd(e));if(0!==(g=g.umod(this.n)).cmpn(0)){var m=(f.getY().isOdd()?1:0)|(0!==d.cmp(p)?2:0);return n.canonical&&g.cmp(this.nh)>0&&(g=this.n.sub(g),m^=1),new jr({r:p,s:g,recoveryParam:m})}}}}}},Vr.prototype.verify=function(e,t,r,n,i){i||(i={}),e=this._truncateToN(e,!1,i.msgBitLength),r=this.keyFromPublic(r,n);var o=(t=new jr(t,"hex")).r,s=t.s;if(o.cmpn(1)<0||o.cmp(this.n)>=0)return!1;if(s.cmpn(1)<0||s.cmp(this.n)>=0)return!1;var a,c=s.invm(this.n),u=c.mul(e).umod(this.n),l=c.mul(o).umod(this.n);return this.curve._maxwellTrick?!(a=this.g.jmulAdd(u,r.getPublic(),l)).isInfinity()&&a.eqXToP(o):!(a=this.g.mulAdd(u,r.getPublic(),l)).isInfinity()&&0===a.getX().umod(this.n).cmp(o)},Vr.prototype.recoverPubKey=function(e,t,r,n){Kr((3&r)===r,"The recovery param is more than two bits"),t=new jr(t,n);var i=this.n,o=new(z())(e),s=t.r,a=t.s,c=1&r,u=r>>1;if(s.cmp(this.curve.p.umod(this.curve.n))>=0&&u)throw new Error("Unable to find sencond key candinate");s=u?this.curve.pointFromX(s.add(this.curve.n),c):this.curve.pointFromX(s,c);var l=t.r.invm(i),h=i.sub(o).mul(l).umod(i),f=a.mul(l).umod(i);return this.g.mulAdd(h,s,f)},Vr.prototype.getKeyRecoveryParam=function(e,t,r,n){if(null!==(t=new jr(t,n)).recoveryParam)return t.recoveryParam;for(var i=0;i<4;i++){var o;try{o=this.recoverPubKey(e,t,i)}catch(e){continue}if(o.eq(r))return i}throw new Error("Unable to find valid recovery factor")};var $r=dr((function(e,t){var r=t;r.version="6.6.1",r.utils=yr,r.rand=function(){throw new Error("unsupported")},r.curve=Pr,r.curves=Rr,r.ec=Wr,r.eddsa=null})).ec;const Jr=new v("signing-key/5.8.0");let Yr=null;function Qr(){return Yr||(Yr=new $r("secp256k1")),Yr}class Xr{constructor(e){te(this,"curve","secp256k1"),te(this,"privateKey",R(e)),32!==N(this.privateKey)&&Jr.throwArgumentError("invalid private key","privateKey","[[ REDACTED ]]");const t=Qr().keyFromPrivate(S(this.privateKey));te(this,"publicKey","0x"+t.getPublic(!1,"hex")),te(this,"compressedPublicKey","0x"+t.getPublic(!0,"hex")),te(this,"_isSigningKey",!0)}_addPoint(e){const t=Qr().keyFromPublic(S(this.publicKey)),r=Qr().keyFromPublic(S(e));return"0x"+t.pub.add(r.pub).encodeCompressed("hex")}signDigest(e){const t=Qr().keyFromPrivate(S(this.privateKey)),r=S(e);32!==r.length&&Jr.throwArgumentError("bad digest length","digest",e);const n=t.sign(r,{canonical:!0});return D({recoveryParam:n.recoveryParam,r:U("0x"+n.r.toString(16),32),s:U("0x"+n.s.toString(16),32)})}computeSharedSecret(e){const t=Qr().keyFromPrivate(S(this.privateKey)),r=Qr().keyFromPublic(S(en(e)));return U("0x"+t.derive(r.getPublic()).toString(16),32)}static isSigningKey(e){return!(!e||!e._isSigningKey)}}function Zr(e,t){const r=D(t),n={r:S(r.r),s:S(r.s)};return"0x"+Qr().recoverPubKey(S(e),n,r.recoveryParam).encode("hex",!1)}function en(e,t){const r=S(e);if(32===r.length){const e=new Xr(r);return t?"0x"+Qr().keyFromPrivate(r).getPublic(!0,"hex"):e.publicKey}return 33===r.length?t?R(r):"0x"+Qr().keyFromPublic(r).getPublic(!1,"hex"):65===r.length?t?"0x"+Qr().keyFromPublic(r).getPublic(!0,"hex"):R(r):Jr.throwArgumentError("invalid public or private key","key","[REDACTED]")}const tn=new v("transactions/5.8.0");var rn;function nn(e){return"0x"===e?null:Me(e)}function on(e){return"0x"===e?lt:$.from(e)}!function(e){e[e.legacy=0]="legacy",e[e.eip2930=1]="eip2930",e[e.eip1559=2]="eip1559"}(rn||(rn={}));const sn=[{name:"nonce",maxLength:32,numeric:!0},{name:"gasPrice",maxLength:32,numeric:!0},{name:"gasLimit",maxLength:32,numeric:!0},{name:"to",length:20},{name:"value",maxLength:32,numeric:!0},{name:"data"}],an={chainId:!0,data:!0,gasLimit:!0,gasPrice:!0,nonce:!0,to:!0,type:!0,value:!0};function cn(e){return Me(C(be(C(en(e),1)),12))}function un(e,t){return cn(Zr(S(e),t))}function ln(e,t){const r=I($.from(e).toHexString());return r.length>32&&tn.throwArgumentError("invalid length for "+t,"transaction:"+t,e),r}function hn(e,t){return{address:Me(e),storageKeys:(t||[]).map(((t,r)=>(32!==N(t)&&tn.throwArgumentError("invalid access list storageKey",`accessList[${e}:${r}]`,t),t.toLowerCase())))}}function fn(e){if(Array.isArray(e))return e.map(((e,t)=>Array.isArray(e)?(e.length>2&&tn.throwArgumentError("access list expected to be [ address, storageKeys[] ]",`value[${t}]`,e),hn(e[0],e[1])):hn(e.address,e.storageKeys)));const t=Object.keys(e).map((t=>{const r=e[t].reduce(((e,t)=>(e[t]=!0,e)),{});return hn(t,Object.keys(r).sort())}));return t.sort(((e,t)=>e.address.localeCompare(t.address))),t}function dn(e){return fn(e).map((e=>[e.address,e.storageKeys]))}function pn(e,t){if(null!=e.gasPrice){const t=$.from(e.gasPrice),r=$.from(e.maxFeePerGas||0);t.eq(r)||tn.throwArgumentError("mismatch EIP-1559 gasPrice != maxFeePerGas","tx",{gasPrice:t,maxFeePerGas:r})}const r=[ln(e.chainId||0,"chainId"),ln(e.nonce||0,"nonce"),ln(e.maxPriorityFeePerGas||0,"maxPriorityFeePerGas"),ln(e.maxFeePerGas||0,"maxFeePerGas"),ln(e.gasLimit||0,"gasLimit"),null!=e.to?Me(e.to):"0x",ln(e.value||0,"value"),e.data||"0x",dn(e.accessList||[])];if(t){const e=D(t);r.push(ln(e.recoveryParam,"recoveryParam")),r.push(I(e.r)),r.push(I(e.s))}return M(["0x02",xe(r)])}function gn(e,t){const r=[ln(e.chainId||0,"chainId"),ln(e.nonce||0,"nonce"),ln(e.gasPrice||0,"gasPrice"),ln(e.gasLimit||0,"gasLimit"),null!=e.to?Me(e.to):"0x",ln(e.value||0,"value"),e.data||"0x",dn(e.accessList||[])];if(t){const e=D(t);r.push(ln(e.recoveryParam,"recoveryParam")),r.push(I(e.r)),r.push(I(e.s))}return M(["0x01",xe(r)])}function mn(e,t){if(null==e.type||0===e.type)return null!=e.accessList&&tn.throwArgumentError("untyped transactions do not support accessList; include type: 1","transaction",e),function(e,t){ie(e,an);const r=[];sn.forEach((function(t){let n=e[t.name]||[];const i={};t.numeric&&(i.hexPad="left"),n=S(R(n,i)),t.length&&n.length!==t.length&&n.length>0&&tn.throwArgumentError("invalid length for "+t.name,"transaction:"+t.name,n),t.maxLength&&(n=I(n),n.length>t.maxLength&&tn.throwArgumentError("invalid length for "+t.name,"transaction:"+t.name,n)),r.push(R(n))}));let n=0;if(null!=e.chainId?(n=e.chainId,"number"!=typeof n&&tn.throwArgumentError("invalid transaction.chainId","transaction",e)):t&&!A(t)&&t.v>28&&(n=Math.floor((t.v-35)/2)),0!==n&&(r.push(R(n)),r.push("0x"),r.push("0x")),!t)return xe(r);const i=D(t);let o=27+i.recoveryParam;return 0!==n?(r.pop(),r.pop(),r.pop(),o+=2*n+8,i.v>28&&i.v!==o&&tn.throwArgumentError("transaction.chainId/signature.v mismatch","signature",t)):i.v!==o&&tn.throwArgumentError("transaction.chainId/signature.v mismatch","signature",t),r.push(R(o)),r.push(I(S(i.r))),r.push(I(S(i.s))),xe(r)}(e,t);switch(e.type){case 1:return gn(e,t);case 2:return pn(e,t)}return tn.throwError(`unsupported transaction type: ${e.type}`,v.errors.UNSUPPORTED_OPERATION,{operation:"serializeTransaction",transactionType:e.type})}function yn(e,t,r){try{const r=on(t[0]).toNumber();if(0!==r&&1!==r)throw new Error("bad recid");e.v=r}catch(e){tn.throwArgumentError("invalid v for transaction type: 1","v",t[0])}e.r=U(t[1],32),e.s=U(t[2],32);try{const t=be(r(e));e.from=un(t,{r:e.r,s:e.s,recoveryParam:e.v})}catch(e){}}function vn(e){const t=S(e);if(t[0]>127)return function(e){const t=Ie(e);9!==t.length&&6!==t.length&&tn.throwArgumentError("invalid raw transaction","rawTransaction",e);const r={nonce:on(t[0]).toNumber(),gasPrice:on(t[1]),gasLimit:on(t[2]),to:nn(t[3]),value:on(t[4]),data:t[5],chainId:0};if(6===t.length)return r;try{r.v=$.from(t[6]).toNumber()}catch(e){return r}if(r.r=U(t[7],32),r.s=U(t[8],32),$.from(r.r).isZero()&&$.from(r.s).isZero())r.chainId=r.v,r.v=0;else{r.chainId=Math.floor((r.v-35)/2),r.chainId<0&&(r.chainId=0);let n=r.v-27;const i=t.slice(0,6);0!==r.chainId&&(i.push(R(r.chainId)),i.push("0x"),i.push("0x"),n-=2*r.chainId+8);const o=be(xe(i));try{r.from=un(o,{r:R(r.r),s:R(r.s),recoveryParam:n})}catch(e){}r.hash=be(e)}return r.type=null,r}(t);switch(t[0]){case 1:return function(e){const t=Ie(e.slice(1));8!==t.length&&11!==t.length&&tn.throwArgumentError("invalid component count for transaction type: 1","payload",R(e));const r={type:1,chainId:on(t[0]).toNumber(),nonce:on(t[1]).toNumber(),gasPrice:on(t[2]),gasLimit:on(t[3]),to:nn(t[4]),value:on(t[5]),data:t[6],accessList:fn(t[7])};return 8===t.length||(r.hash=be(e),yn(r,t.slice(8),gn)),r}(t);case 2:return function(e){const t=Ie(e.slice(1));9!==t.length&&12!==t.length&&tn.throwArgumentError("invalid component count for transaction type: 2","payload",R(e));const r=on(t[2]),n=on(t[3]),i={type:2,chainId:on(t[0]).toNumber(),nonce:on(t[1]).toNumber(),maxPriorityFeePerGas:r,maxFeePerGas:n,gasPrice:null,gasLimit:on(t[4]),to:nn(t[5]),value:on(t[6]),data:t[7],accessList:fn(t[8])};return 9===t.length||(i.hash=be(e),yn(i,t.slice(9),pn)),i}(t)}return tn.throwError(`unsupported transaction type: ${t[0]}`,v.errors.UNSUPPORTED_OPERATION,{operation:"parseTransaction",transactionType:t[0]})}var bn=function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function s(e){try{c(n.next(e))}catch(e){o(e)}}function a(e){try{c(n.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))};const wn=new v("contracts/5.8.0"),En={chainId:!0,data:!0,from:!0,gasLimit:!0,gasPrice:!0,nonce:!0,to:!0,value:!0,type:!0,accessList:!0,maxFeePerGas:!0,maxPriorityFeePerGas:!0,customData:!0,ccipReadEnabled:!0};function An(e,t){return bn(this,void 0,void 0,(function*(){const r=yield t;"string"!=typeof r&&wn.throwArgumentError("invalid address or ENS name","name",r);try{return Me(r)}catch(e){}e||wn.throwError("a provider or signer is needed to resolve ENS names",v.errors.UNSUPPORTED_OPERATION,{operation:"resolveName"});const n=yield e.resolveName(r);return null==n&&wn.throwArgumentError("resolver or addr is not configured for ENS name","name",r),n}))}function _n(e,t,r){return bn(this,void 0,void 0,(function*(){return Array.isArray(r)?yield Promise.all(r.map(((r,n)=>_n(e,Array.isArray(t)?t[n]:t[r.name],r)))):"address"===r.type?yield An(e,t):"tuple"===r.type?yield _n(e,t,r.components):"array"===r.baseType?Array.isArray(t)?yield Promise.all(t.map((t=>_n(e,t,r.arrayChildren)))):Promise.reject(wn.makeError("invalid value for array",v.errors.INVALID_ARGUMENT,{argument:"value",value:t})):t}))}function xn(e,t,r){return bn(this,void 0,void 0,(function*(){let n={};r.length===t.inputs.length+1&&"object"==typeof r[r.length-1]&&(n=oe(r.pop())),wn.checkArgumentCount(r.length,t.inputs.length,"passed to contract"),e.signer?n.from?n.from=ne({override:An(e.signer,n.from),signer:e.signer.getAddress()}).then((e=>bn(this,void 0,void 0,(function*(){return Me(e.signer)!==e.override&&wn.throwError("Contract with a Signer cannot override from",v.errors.UNSUPPORTED_OPERATION,{operation:"overrides.from"}),e.override})))):n.from=e.signer.getAddress():n.from&&(n.from=An(e.provider,n.from));const i=yield ne({args:_n(e.signer||e.provider,r,t.inputs),address:e.resolvedAddress,overrides:ne(n)||{}}),o=e.interface.encodeFunctionData(t,i.args),s={data:o,to:i.address},a=i.overrides;if(null!=a.nonce&&(s.nonce=$.from(a.nonce).toNumber()),null!=a.gasLimit&&(s.gasLimit=$.from(a.gasLimit)),null!=a.gasPrice&&(s.gasPrice=$.from(a.gasPrice)),null!=a.maxFeePerGas&&(s.maxFeePerGas=$.from(a.maxFeePerGas)),null!=a.maxPriorityFeePerGas&&(s.maxPriorityFeePerGas=$.from(a.maxPriorityFeePerGas)),null!=a.from&&(s.from=a.from),null!=a.type&&(s.type=a.type),null!=a.accessList&&(s.accessList=fn(a.accessList)),null==s.gasLimit&&null!=t.gas){let e=21e3;const r=S(o);for(let t=0;t<r.length;t++)e+=4,r[t]&&(e+=64);s.gasLimit=$.from(t.gas).add(e)}if(a.value){const e=$.from(a.value);e.isZero()||t.payable||wn.throwError("non-payable method cannot override value",v.errors.UNSUPPORTED_OPERATION,{operation:"overrides.value",value:n.value}),s.value=e}a.customData&&(s.customData=oe(a.customData)),a.ccipReadEnabled&&(s.ccipReadEnabled=!!a.ccipReadEnabled),delete n.nonce,delete n.gasLimit,delete n.gasPrice,delete n.from,delete n.value,delete n.type,delete n.accessList,delete n.maxFeePerGas,delete n.maxPriorityFeePerGas,delete n.customData,delete n.ccipReadEnabled;const c=Object.keys(n).filter((e=>null!=n[e]));return c.length&&wn.throwError(`cannot override ${c.map((e=>JSON.stringify(e))).join(",")}`,v.errors.UNSUPPORTED_OPERATION,{operation:"overrides",overrides:c}),s}))}function Sn(e,t){const r=t.wait.bind(t);t.wait=t=>r(t).then((t=>(t.events=t.logs.map((r=>{let n=ue(r),i=null;try{i=e.interface.parseLog(r)}catch(e){}return i&&(n.args=i.args,n.decode=(t,r)=>e.interface.decodeEventLog(i.eventFragment,t,r),n.event=i.name,n.eventSignature=i.signature),n.removeListener=()=>e.provider,n.getBlock=()=>e.provider.getBlock(t.blockHash),n.getTransaction=()=>e.provider.getTransaction(t.transactionHash),n.getTransactionReceipt=()=>Promise.resolve(t),n})),t)))}function kn(e,t,r){const n=e.signer||e.provider;return function(...i){return bn(this,void 0,void 0,(function*(){let o;if(i.length===t.inputs.length+1&&"object"==typeof i[i.length-1]){const e=oe(i.pop());null!=e.blockTag&&(o=yield e.blockTag),delete e.blockTag,i.push(e)}null!=e.deployTransaction&&(yield e._deployed(o));const s=yield xn(e,t,i),a=yield n.call(s,o);try{let n=e.interface.decodeFunctionResult(t,a);return r&&1===t.outputs.length&&(n=n[0]),n}catch(t){throw t.code===v.errors.CALL_EXCEPTION&&(t.address=e.address,t.args=i,t.transaction=s),t}}))}}function In(e,t,r){return t.constant?kn(e,t,r):function(e,t){return function(...r){return bn(this,void 0,void 0,(function*(){e.signer||wn.throwError("sending a transaction requires a signer",v.errors.UNSUPPORTED_OPERATION,{operation:"sendTransaction"}),null!=e.deployTransaction&&(yield e._deployed());const n=yield xn(e,t,r),i=yield e.signer.sendTransaction(n);return Sn(e,i),i}))}}(e,t)}function On(e){return!e.address||null!=e.topics&&0!==e.topics.length?(e.address||"*")+"@"+(e.topics?e.topics.map((e=>Array.isArray(e)?e.join("|"):e)).join(":"):""):"*"}class Tn{constructor(e,t){te(this,"tag",e),te(this,"filter",t),this._listeners=[]}addListener(e,t){this._listeners.push({listener:e,once:t})}removeListener(e){let t=!1;this._listeners=this._listeners.filter((r=>!(!t&&r.listener===e&&(t=!0,1))))}removeAllListeners(){this._listeners=[]}listeners(){return this._listeners.map((e=>e.listener))}listenerCount(){return this._listeners.length}run(e){const t=this.listenerCount();return this._listeners=this._listeners.filter((t=>{const r=e.slice();return setTimeout((()=>{t.listener.apply(this,r)}),0),!t.once})),t}prepareEvent(e){}getEmit(e){return[e]}}class Pn extends Tn{constructor(){super("error",null)}}class Rn extends Tn{constructor(e,t,r,n){const i={address:e};let o=t.getEventTopic(r);n?(o!==n[0]&&wn.throwArgumentError("topic mismatch","topics",n),i.topics=n.slice()):i.topics=[o],super(On(i),i),te(this,"address",e),te(this,"interface",t),te(this,"fragment",r)}prepareEvent(e){super.prepareEvent(e),e.event=this.fragment.name,e.eventSignature=this.fragment.format(),e.decode=(e,t)=>this.interface.decodeEventLog(this.fragment,e,t);try{e.args=this.interface.decodeEventLog(this.fragment,e.data,e.topics)}catch(t){e.args=null,e.decodeError=t}}getEmit(e){const t=de(e.args);if(t.length)throw t[0].error;const r=(e.args||[]).slice();return r.push(e),r}}class Nn extends Tn{constructor(e,t){super("*",{address:e}),te(this,"address",e),te(this,"interface",t)}prepareEvent(e){super.prepareEvent(e);try{const t=this.interface.parseLog(e);e.event=t.name,e.eventSignature=t.signature,e.decode=(e,r)=>this.interface.decodeEventLog(t.eventFragment,e,r),e.args=t.args}catch(e){}}}class Cn{constructor(e,t,r){te(this,"interface",re(new.target,"getInterface")(t)),null==r?(te(this,"provider",null),te(this,"signer",null)):ur.isSigner(r)?(te(this,"provider",r.provider||null),te(this,"signer",r)):ir.isProvider(r)?(te(this,"provider",r),te(this,"signer",null)):wn.throwArgumentError("invalid signer or provider","signerOrProvider",r),te(this,"callStatic",{}),te(this,"estimateGas",{}),te(this,"functions",{}),te(this,"populateTransaction",{}),te(this,"filters",{});{const e={};Object.keys(this.interface.events).forEach((t=>{const r=this.interface.events[t];te(this.filters,t,((...e)=>({address:this.address,topics:this.interface.encodeFilterTopics(r,e)}))),e[r.name]||(e[r.name]=[]),e[r.name].push(t)})),Object.keys(e).forEach((t=>{const r=e[t];1===r.length?te(this.filters,t,this.filters[r[0]]):wn.warn(`Duplicate definition of ${t} (${r.join(", ")})`)}))}if(te(this,"_runningEvents",{}),te(this,"_wrappedEmits",{}),null==e&&wn.throwArgumentError("invalid contract address or ENS name","addressOrName",e),te(this,"address",e),this.provider)te(this,"resolvedAddress",An(this.provider,e));else try{te(this,"resolvedAddress",Promise.resolve(Me(e)))}catch(e){wn.throwError("provider is required to use ENS name as contract address",v.errors.UNSUPPORTED_OPERATION,{operation:"new Contract"})}this.resolvedAddress.catch((e=>{}));const n={},i={};Object.keys(this.interface.functions).forEach((e=>{const t=this.interface.functions[e];if(i[e])wn.warn(`Duplicate ABI entry for ${JSON.stringify(e)}`);else{i[e]=!0;{const r=t.name;n[`%${r}`]||(n[`%${r}`]=[]),n[`%${r}`].push(e)}null==this[e]&&te(this,e,In(this,t,!0)),null==this.functions[e]&&te(this.functions,e,In(this,t,!1)),null==this.callStatic[e]&&te(this.callStatic,e,kn(this,t,!0)),null==this.populateTransaction[e]&&te(this.populateTransaction,e,function(e,t){return function(...r){return xn(e,t,r)}}(this,t)),null==this.estimateGas[e]&&te(this.estimateGas,e,function(e,t){const r=e.signer||e.provider;return function(...n){return bn(this,void 0,void 0,(function*(){r||wn.throwError("estimate require a provider or signer",v.errors.UNSUPPORTED_OPERATION,{operation:"estimateGas"});const i=yield xn(e,t,n);return yield r.estimateGas(i)}))}}(this,t))}})),Object.keys(n).forEach((e=>{const t=n[e];if(t.length>1)return;e=e.substring(1);const r=t[0];try{null==this[e]&&te(this,e,this[r])}catch(e){}null==this.functions[e]&&te(this.functions,e,this.functions[r]),null==this.callStatic[e]&&te(this.callStatic,e,this.callStatic[r]),null==this.populateTransaction[e]&&te(this.populateTransaction,e,this.populateTransaction[r]),null==this.estimateGas[e]&&te(this.estimateGas,e,this.estimateGas[r])}))}static getContractAddress(e){return Ue(e)}static getInterface(e){return tr.isInterface(e)?e:new tr(e)}deployed(){return this._deployed()}_deployed(e){return this._deployedPromise||(this.deployTransaction?this._deployedPromise=this.deployTransaction.wait().then((()=>this)):this._deployedPromise=this.provider.getCode(this.address,e).then((e=>("0x"===e&&wn.throwError("contract not deployed",v.errors.UNSUPPORTED_OPERATION,{contractAddress:this.address,operation:"getDeployed"}),this)))),this._deployedPromise}fallback(e){this.signer||wn.throwError("sending a transactions require a signer",v.errors.UNSUPPORTED_OPERATION,{operation:"sendTransaction(fallback)"});const t=oe(e||{});return["from","to"].forEach((function(e){null!=t[e]&&wn.throwError("cannot override "+e,v.errors.UNSUPPORTED_OPERATION,{operation:e})})),t.to=this.resolvedAddress,this.deployed().then((()=>this.signer.sendTransaction(t)))}connect(e){"string"==typeof e&&(e=new lr(e,this.provider));const t=new this.constructor(this.address,this.interface,e);return this.deployTransaction&&te(t,"deployTransaction",this.deployTransaction),t}attach(e){return new this.constructor(e,this.interface,this.signer||this.provider)}static isIndexed(e){return Xt.isIndexed(e)}_normalizeRunningEvent(e){return this._runningEvents[e.tag]?this._runningEvents[e.tag]:e}_getRunningEvent(e){if("string"==typeof e){if("error"===e)return this._normalizeRunningEvent(new Pn);if("event"===e)return this._normalizeRunningEvent(new Tn("event",null));if("*"===e)return this._normalizeRunningEvent(new Nn(this.address,this.interface));const t=this.interface.getEvent(e);return this._normalizeRunningEvent(new Rn(this.address,this.interface,t))}if(e.topics&&e.topics.length>0){try{const t=e.topics[0];if("string"!=typeof t)throw new Error("invalid topic");const r=this.interface.getEvent(t);return this._normalizeRunningEvent(new Rn(this.address,this.interface,r,e.topics))}catch(e){}const t={address:this.address,topics:e.topics};return this._normalizeRunningEvent(new Tn(On(t),t))}return this._normalizeRunningEvent(new Nn(this.address,this.interface))}_checkRunningEvents(e){if(0===e.listenerCount()){delete this._runningEvents[e.tag];const t=this._wrappedEmits[e.tag];t&&e.filter&&(this.provider.off(e.filter,t),delete this._wrappedEmits[e.tag])}}_wrapEvent(e,t,r){const n=ue(t);return n.removeListener=()=>{r&&(e.removeListener(r),this._checkRunningEvents(e))},n.getBlock=()=>this.provider.getBlock(t.blockHash),n.getTransaction=()=>this.provider.getTransaction(t.transactionHash),n.getTransactionReceipt=()=>this.provider.getTransactionReceipt(t.transactionHash),e.prepareEvent(n),n}_addEventListener(e,t,r){if(this.provider||wn.throwError("events require a provider or a signer with a provider",v.errors.UNSUPPORTED_OPERATION,{operation:"once"}),e.addListener(t,r),this._runningEvents[e.tag]=e,!this._wrappedEmits[e.tag]){const r=r=>{let n=this._wrapEvent(e,r,t);if(null==n.decodeError)try{const t=e.getEmit(n);this.emit(e.filter,...t)}catch(e){n.decodeError=e.error}null!=e.filter&&this.emit("event",n),null!=n.decodeError&&this.emit("error",n.decodeError,n)};this._wrappedEmits[e.tag]=r,null!=e.filter&&this.provider.on(e.filter,r)}}queryFilter(e,t,r){const n=this._getRunningEvent(e),i=oe(n.filter);return"string"==typeof t&&T(t,32)?(null!=r&&wn.throwArgumentError("cannot specify toBlock with blockhash","toBlock",r),i.blockHash=t):(i.fromBlock=null!=t?t:0,i.toBlock=null!=r?r:"latest"),this.provider.getLogs(i).then((e=>e.map((e=>this._wrapEvent(n,e,null)))))}on(e,t){return this._addEventListener(this._getRunningEvent(e),t,!1),this}once(e,t){return this._addEventListener(this._getRunningEvent(e),t,!0),this}emit(e,...t){if(!this.provider)return!1;const r=this._getRunningEvent(e),n=r.run(t)>0;return this._checkRunningEvents(r),n}listenerCount(e){return this.provider?null==e?Object.keys(this._runningEvents).reduce(((e,t)=>e+this._runningEvents[t].listenerCount()),0):this._getRunningEvent(e).listenerCount():0}listeners(e){if(!this.provider)return[];if(null==e){const e=[];for(let t in this._runningEvents)this._runningEvents[t].listeners().forEach((t=>{e.push(t)}));return e}return this._getRunningEvent(e).listeners()}removeAllListeners(e){if(!this.provider)return this;if(null==e){for(const e in this._runningEvents){const t=this._runningEvents[e];t.removeAllListeners(),this._checkRunningEvents(t)}return this}const t=this._getRunningEvent(e);return t.removeAllListeners(),this._checkRunningEvents(t),this}off(e,t){if(!this.provider)return this;const r=this._getRunningEvent(e);return r.removeListener(t),this._checkRunningEvents(r),this}removeListener(e,t){return this.off(e,t)}}class Mn extends Cn{}class Ln{constructor(e,t,r){let n=null;n="string"==typeof t?t:x(t)?R(t):t&&"string"==typeof t.object?t.object:"!","0x"!==n.substring(0,2)&&(n="0x"+n),(!T(n)||n.length%2)&&wn.throwArgumentError("invalid bytecode","bytecode",t),r&&!ur.isSigner(r)&&wn.throwArgumentError("invalid signer","signer",r),te(this,"bytecode",n),te(this,"interface",re(new.target,"getInterface")(e)),te(this,"signer",r||null)}getDeployTransaction(...e){let t={};if(e.length===this.interface.deploy.inputs.length+1&&"object"==typeof e[e.length-1]){t=oe(e.pop());for(const e in t)if(!En[e])throw new Error("unknown transaction override "+e)}return["data","from","to"].forEach((e=>{null!=t[e]&&wn.throwError("cannot override "+e,v.errors.UNSUPPORTED_OPERATION,{operation:e})})),t.value&&($.from(t.value).isZero()||this.interface.deploy.payable||wn.throwError("non-payable constructor cannot override value",v.errors.UNSUPPORTED_OPERATION,{operation:"overrides.value",value:t.value})),wn.checkArgumentCount(e.length,this.interface.deploy.inputs.length," in Contract constructor"),t.data=R(k([this.bytecode,this.interface.encodeDeploy(e)])),t}deploy(...e){return bn(this,void 0,void 0,(function*(){let t={};e.length===this.interface.deploy.inputs.length+1&&(t=e.pop()),wn.checkArgumentCount(e.length,this.interface.deploy.inputs.length," in Contract constructor");const r=yield _n(this.signer,e,this.interface.deploy.inputs);r.push(t);const n=this.getDeployTransaction(...r),i=yield this.signer.sendTransaction(n),o=re(this.constructor,"getContractAddress")(i),s=re(this.constructor,"getContract")(o,this.interface,this.signer);return Sn(s,i),te(s,"deployTransaction",i),s}))}attach(e){return this.constructor.getContract(e,this.interface,this.signer)}connect(e){return new this.constructor(this.interface,this.bytecode,e)}static fromSolidity(e,t){null==e&&wn.throwError("missing compiler output",v.errors.MISSING_ARGUMENT,{argument:"compilerOutput"}),"string"==typeof e&&(e=JSON.parse(e));const r=e.abi;let n=null;return e.bytecode?n=e.bytecode:e.evm&&e.evm.bytecode&&(n=e.evm.bytecode),new this(r,n,t)}static getInterface(e){return Mn.getInterface(e)}static getContractAddress(e){return Ue(e)}static getContract(e,t,r){return new Mn(e,t,r)}}const Bn=new v(q),Un={},Dn=$.from(0),jn=$.from(-1);function Fn(e,t,r,n){const i={fault:t,operation:r};return void 0!==n&&(i.value=n),Bn.throwError(e,v.errors.NUMERIC_FAULT,i)}let zn="0";for(;zn.length<256;)zn+=zn;function qn(e){if("number"!=typeof e)try{e=$.from(e).toNumber()}catch(e){}return"number"==typeof e&&e>=0&&e<=256&&!(e%1)?"1"+zn.substring(0,e):Bn.throwArgumentError("invalid decimal size","decimals",e)}function Gn(e,t){null==t&&(t=0);const r=qn(t),n=(e=$.from(e)).lt(Dn);n&&(e=e.mul(jn));let i=e.mod(r).toString();for(;i.length<r.length-1;)i="0"+i;i=i.match(/^([0-9]*[1-9]|0)(0*)/)[1];const o=e.div(r).toString();return e=1===r.length?o:o+"."+i,n&&(e="-"+e),e}function Hn(e,t){null==t&&(t=0);const r=qn(t);"string"==typeof e&&e.match(/^-?[0-9.]+$/)||Bn.throwArgumentError("invalid decimal value","value",e);const n="-"===e.substring(0,1);n&&(e=e.substring(1)),"."===e&&Bn.throwArgumentError("missing value","value",e);const i=e.split(".");i.length>2&&Bn.throwArgumentError("too many decimal points","value",e);let o=i[0],s=i[1];for(o||(o="0"),s||(s="0");"0"===s[s.length-1];)s=s.substring(0,s.length-1);for(s.length>r.length-1&&Fn("fractional component exceeds decimals","underflow","parseFixed"),""===s&&(s="0");s.length<r.length-1;)s+="0";const a=$.from(o),c=$.from(s);let u=a.mul(r).add(c);return n&&(u=u.mul(jn)),u}class Kn{constructor(e,t,r,n){e!==Un&&Bn.throwError("cannot use FixedFormat constructor; use FixedFormat.from",v.errors.UNSUPPORTED_OPERATION,{operation:"new FixedFormat"}),this.signed=t,this.width=r,this.decimals=n,this.name=(t?"":"u")+"fixed"+String(r)+"x"+String(n),this._multiplier=qn(n),Object.freeze(this)}static from(e){if(e instanceof Kn)return e;"number"==typeof e&&(e=`fixed128x${e}`);let t=!0,r=128,n=18;if("string"==typeof e)if("fixed"===e);else if("ufixed"===e)t=!1;else{const i=e.match(/^(u?)fixed([0-9]+)x([0-9]+)$/);i||Bn.throwArgumentError("invalid fixed format","format",e),t="u"!==i[1],r=parseInt(i[2]),n=parseInt(i[3])}else if(e){const i=(t,r,n)=>null==e[t]?n:(typeof e[t]!==r&&Bn.throwArgumentError("invalid fixed format ("+t+" not "+r+")","format."+t,e[t]),e[t]);t=i("signed","boolean",t),r=i("width","number",r),n=i("decimals","number",n)}return r%8&&Bn.throwArgumentError("invalid fixed format width (not byte aligned)","format.width",r),n>80&&Bn.throwArgumentError("invalid fixed format (decimals too large)","format.decimals",n),new Kn(Un,t,r,n)}}class Vn{constructor(e,t,r,n){e!==Un&&Bn.throwError("cannot use FixedNumber constructor; use FixedNumber.from",v.errors.UNSUPPORTED_OPERATION,{operation:"new FixedFormat"}),this.format=n,this._hex=t,this._value=r,this._isFixedNumber=!0,Object.freeze(this)}_checkFormat(e){this.format.name!==e.format.name&&Bn.throwArgumentError("incompatible format; use fixedNumber.toFormat","other",e)}addUnsafe(e){this._checkFormat(e);const t=Hn(this._value,this.format.decimals),r=Hn(e._value,e.format.decimals);return Vn.fromValue(t.add(r),this.format.decimals,this.format)}subUnsafe(e){this._checkFormat(e);const t=Hn(this._value,this.format.decimals),r=Hn(e._value,e.format.decimals);return Vn.fromValue(t.sub(r),this.format.decimals,this.format)}mulUnsafe(e){this._checkFormat(e);const t=Hn(this._value,this.format.decimals),r=Hn(e._value,e.format.decimals);return Vn.fromValue(t.mul(r).div(this.format._multiplier),this.format.decimals,this.format)}divUnsafe(e){this._checkFormat(e);const t=Hn(this._value,this.format.decimals),r=Hn(e._value,e.format.decimals);return Vn.fromValue(t.mul(this.format._multiplier).div(r),this.format.decimals,this.format)}floor(){const e=this.toString().split(".");1===e.length&&e.push("0");let t=Vn.from(e[0],this.format);const r=!e[1].match(/^(0*)$/);return this.isNegative()&&r&&(t=t.subUnsafe(Wn.toFormat(t.format))),t}ceiling(){const e=this.toString().split(".");1===e.length&&e.push("0");let t=Vn.from(e[0],this.format);const r=!e[1].match(/^(0*)$/);return!this.isNegative()&&r&&(t=t.addUnsafe(Wn.toFormat(t.format))),t}round(e){null==e&&(e=0);const t=this.toString().split(".");if(1===t.length&&t.push("0"),(e<0||e>80||e%1)&&Bn.throwArgumentError("invalid decimal count","decimals",e),t[1].length<=e)return this;const r=Vn.from("1"+zn.substring(0,e),this.format),n=$n.toFormat(this.format);return this.mulUnsafe(r).addUnsafe(n).floor().divUnsafe(r)}isZero(){return"0.0"===this._value||"0"===this._value}isNegative(){return"-"===this._value[0]}toString(){return this._value}toHexString(e){return null==e?this._hex:(e%8&&Bn.throwArgumentError("invalid byte width","width",e),U($.from(this._hex).fromTwos(this.format.width).toTwos(e).toHexString(),e/8))}toUnsafeFloat(){return parseFloat(this.toString())}toFormat(e){return Vn.fromString(this._value,e)}static fromValue(e,t,r){return null!=r||null==t||function(e){return null!=e&&($.isBigNumber(e)||"number"==typeof e&&e%1==0||"string"==typeof e&&!!e.match(/^-?[0-9]+$/)||T(e)||"bigint"==typeof e||x(e))}(t)||(r=t,t=null),null==t&&(t=0),null==r&&(r="fixed"),Vn.fromString(Gn(e,t),Kn.from(r))}static fromString(e,t){null==t&&(t="fixed");const r=Kn.from(t),n=Hn(e,r.decimals);!r.signed&&n.lt(Dn)&&Fn("unsigned value cannot be negative","overflow","value",e);let i=null;r.signed?i=n.toTwos(r.width).toHexString():(i=n.toHexString(),i=U(i,r.width/8));const o=Gn(n,r.decimals);return new Vn(Un,i,o,r)}static fromBytes(e,t){null==t&&(t="fixed");const r=Kn.from(t);if(S(e).length>r.width/8)throw new Error("overflow");let n=$.from(e);r.signed&&(n=n.fromTwos(r.width));const i=n.toTwos((r.signed?0:1)+r.width).toHexString(),o=Gn(n,r.decimals);return new Vn(Un,i,o,r)}static from(e,t){if("string"==typeof e)return Vn.fromString(e,t);if(x(e))return Vn.fromBytes(e,t);try{return Vn.fromValue(e,0,t)}catch(e){if(e.code!==v.errors.INVALID_ARGUMENT)throw e}return Bn.throwArgumentError("invalid FixedNumber value","value",e)}static isFixedNumber(e){return!(!e||!e._isFixedNumber)}}const Wn=Vn.from(1),$n=Vn.from("0.5"),Jn="Ethereum Signed Message:\n";function Yn(e){return"string"==typeof e&&(e=Ke(e)),be(k([Ke(Jn),Ke(String(e.length)),e]))}const Qn="hash/5.8.0";const Xn=new v(Qn),Zn=new Uint8Array(32);Zn.fill(0);const ei=$.from(-1),ti=$.from(0),ri=$.from(1),ni=$.from("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff"),ii=U(ri.toHexString(),32),oi=U(ti.toHexString(),32),si={name:"string",version:"string",chainId:"uint256",verifyingContract:"address",salt:"bytes32"},ai=["name","version","chainId","verifyingContract","salt"];function ci(e){return function(t){return"string"!=typeof t&&Xn.throwArgumentError(`invalid domain value for ${JSON.stringify(e)}`,`domain.${e}`,t),t}}const ui={name:ci("name"),version:ci("version"),chainId:function(e){try{return $.from(e).toString()}catch(e){}return Xn.throwArgumentError('invalid domain value for "chainId"',"domain.chainId",e)},verifyingContract:function(e){try{return Me(e).toLowerCase()}catch(e){}return Xn.throwArgumentError('invalid domain value "verifyingContract"',"domain.verifyingContract",e)},salt:function(e){try{const t=S(e);if(32!==t.length)throw new Error("bad length");return R(t)}catch(e){}return Xn.throwArgumentError('invalid domain value "salt"',"domain.salt",e)}};function li(e){{const t=e.match(/^(u?)int(\d*)$/);if(t){const r=""===t[1],n=parseInt(t[2]||"256");(n%8!=0||n>256||t[2]&&t[2]!==String(n))&&Xn.throwArgumentError("invalid numeric width","type",e);const i=ni.mask(r?n-1:n),o=r?i.add(ri).mul(ei):ti;return function(t){const r=$.from(t);return(r.lt(o)||r.gt(i))&&Xn.throwArgumentError(`value out-of-bounds for ${e}`,"value",t),U(r.toTwos(256).toHexString(),32)}}}{const t=e.match(/^bytes(\d+)$/);if(t){const r=parseInt(t[1]);return(0===r||r>32||t[1]!==String(r))&&Xn.throwArgumentError("invalid bytes width","type",e),function(t){return S(t).length!==r&&Xn.throwArgumentError(`invalid length for ${e}`,"value",t),function(e){const t=S(e),r=t.length%32;return r?M([t,Zn.slice(r)]):R(t)}(t)}}}switch(e){case"address":return function(e){return U(Me(e),32)};case"bool":return function(e){return e?ii:oi};case"bytes":return function(e){return be(e)};case"string":return function(e){return Qe(e)}}return null}function hi(e,t){return`${e}(${t.map((({name:e,type:t})=>t+" "+e)).join(",")})`}class fi{constructor(e){te(this,"types",Object.freeze(ue(e))),te(this,"_encoderCache",{}),te(this,"_types",{});const t={},r={},n={};Object.keys(e).forEach((e=>{t[e]={},r[e]=[],n[e]={}}));for(const n in e){const i={};e[n].forEach((o=>{i[o.name]&&Xn.throwArgumentError(`duplicate variable name ${JSON.stringify(o.name)} in ${JSON.stringify(n)}`,"types",e),i[o.name]=!0;const s=o.type.match(/^([^\x5b]*)(\x5b|$)/)[1];s===n&&Xn.throwArgumentError(`circular type reference to ${JSON.stringify(s)}`,"types",e),li(s)||(r[s]||Xn.throwArgumentError(`unknown type ${JSON.stringify(s)}`,"types",e),r[s].push(n),t[n][s]=!0)}))}const i=Object.keys(r).filter((e=>0===r[e].length));0===i.length?Xn.throwArgumentError("missing primary type","types",e):i.length>1&&Xn.throwArgumentError(`ambiguous primary types or unused types: ${i.map((e=>JSON.stringify(e))).join(", ")}`,"types",e),te(this,"primaryType",i[0]),function i(o,s){s[o]&&Xn.throwArgumentError(`circular type reference to ${JSON.stringify(o)}`,"types",e),s[o]=!0,Object.keys(t[o]).forEach((e=>{r[e]&&(i(e,s),Object.keys(s).forEach((t=>{n[t][e]=!0})))})),delete s[o]}(this.primaryType,{});for(const t in n){const r=Object.keys(n[t]);r.sort(),this._types[t]=hi(t,e[t])+r.map((t=>hi(t,e[t]))).join("")}}getEncoder(e){let t=this._encoderCache[e];return t||(t=this._encoderCache[e]=this._getEncoder(e)),t}_getEncoder(e){{const t=li(e);if(t)return t}const t=e.match(/^(.*)(\x5b(\d*)\x5d)$/);if(t){const e=t[1],r=this.getEncoder(e),n=parseInt(t[3]);return t=>{n>=0&&t.length!==n&&Xn.throwArgumentError("array length mismatch; expected length ${ arrayLength }","value",t);let i=t.map(r);return this._types[e]&&(i=i.map(be)),be(M(i))}}const r=this.types[e];if(r){const t=Qe(this._types[e]);return e=>{const n=r.map((({name:t,type:r})=>{const n=this.getEncoder(r)(e[t]);return this._types[r]?be(n):n}));return n.unshift(t),M(n)}}return Xn.throwArgumentError(`unknown type: ${e}`,"type",e)}encodeType(e){const t=this._types[e];return t||Xn.throwArgumentError(`unknown type: ${JSON.stringify(e)}`,"name",e),t}encodeData(e,t){return this.getEncoder(e)(t)}hashStruct(e,t){return be(this.encodeData(e,t))}encode(e){return this.encodeData(this.primaryType,e)}hash(e){return this.hashStruct(this.primaryType,e)}_visit(e,t,r){if(li(e))return r(e,t);const n=e.match(/^(.*)(\x5b(\d*)\x5d)$/);if(n){const e=n[1],i=parseInt(n[3]);return i>=0&&t.length!==i&&Xn.throwArgumentError("array length mismatch; expected length ${ arrayLength }","value",t),t.map((t=>this._visit(e,t,r)))}const i=this.types[e];return i?i.reduce(((e,{name:n,type:i})=>(e[n]=this._visit(i,t[n],r),e)),{}):Xn.throwArgumentError(`unknown type: ${e}`,"type",e)}visit(e,t){return this._visit(this.primaryType,e,t)}static from(e){return new fi(e)}static getPrimaryType(e){return fi.from(e).primaryType}static hashStruct(e,t,r){return fi.from(t).hashStruct(e,r)}static hashDomain(e){const t=[];for(const r in e){const n=si[r];n||Xn.throwArgumentError(`invalid typed-data domain key: ${JSON.stringify(r)}`,"domain",e),t.push({name:r,type:n})}return t.sort(((e,t)=>ai.indexOf(e.name)-ai.indexOf(t.name))),fi.hashStruct("EIP712Domain",{EIP712Domain:t},e)}static encode(e,t,r){return M(["0x1901",fi.hashDomain(e),fi.from(t).hash(r)])}static hash(e,t,r){return be(fi.encode(e,t,r))}static resolveNames(e,t,r,n){return i=this,o=void 0,a=function*(){e=oe(e);const i={};e.verifyingContract&&!T(e.verifyingContract,20)&&(i[e.verifyingContract]="0x");const o=fi.from(t);o.visit(r,((e,t)=>("address"!==e||T(t,20)||(i[t]="0x"),t)));for(const e in i)i[e]=yield n(e);return e.verifyingContract&&i[e.verifyingContract]&&(e.verifyingContract=i[e.verifyingContract]),r=o.visit(r,((e,t)=>"address"===e&&i[t]?i[t]:t)),{domain:e,value:r}},new((s=void 0)||(s=Promise))((function(e,t){function r(e){try{c(a.next(e))}catch(e){t(e)}}function n(e){try{c(a.throw(e))}catch(e){t(e)}}function c(t){var i;t.done?e(t.value):(i=t.value,i instanceof s?i:new s((function(e){e(i)}))).then(r,n)}c((a=a.apply(i,o||[])).next())}));var i,o,s,a}static getPayload(e,t,r){fi.hashDomain(e);const n={},i=[];ai.forEach((t=>{const r=e[t];null!=r&&(n[t]=ui[t](r),i.push({name:t,type:si[t]}))}));const o=fi.from(t),s=oe(t);return s.EIP712Domain?Xn.throwArgumentError("types must not contain EIP712Domain type","types.EIP712Domain",t):s.EIP712Domain=i,o.encode(r),{types:s,domain:n,primaryType:o.primaryType,message:o.visit(r,((e,t)=>{if(e.match(/^bytes(\d*)/))return R(S(t));if(e.match(/^u?int/))return $.from(t).toString();switch(e){case"address":return t.toLowerCase();case"bool":return!!t;case"string":return"string"!=typeof t&&Xn.throwArgumentError("invalid string","value",t),t}return Xn.throwArgumentError("unsupported type","type",e)}))}}}class di{constructor(e){te(this,"alphabet",e),te(this,"base",e.length),te(this,"_alphabetMap",{}),te(this,"_leader",e.charAt(0));for(let t=0;t<e.length;t++)this._alphabetMap[e.charAt(t)]=t}encode(e){let t=S(e);if(0===t.length)return"";let r=[0];for(let e=0;e<t.length;++e){let n=t[e];for(let e=0;e<r.length;++e)n+=r[e]<<8,r[e]=n%this.base,n=n/this.base|0;for(;n>0;)r.push(n%this.base),n=n/this.base|0}let n="";for(let e=0;0===t[e]&&e<t.length-1;++e)n+=this._leader;for(let e=r.length-1;e>=0;--e)n+=this.alphabet[r[e]];return n}decode(e){if("string"!=typeof e)throw new TypeError("Expected String");let t=[];if(0===e.length)return new Uint8Array(t);t.push(0);for(let r=0;r<e.length;r++){let n=this._alphabetMap[e[r]];if(void 0===n)throw new Error("Non-base"+this.base+" character");let i=n;for(let e=0;e<t.length;++e)i+=t[e]*this.base,t[e]=255&i,i>>=8;for(;i>0;)t.push(255&i),i>>=8}for(let r=0;e[r]===this._leader&&r<e.length-1;++r)t.push(0);return S(new Uint8Array(t.reverse()))}}new di("abcdefghijklmnopqrstuvwxyz234567");const pi=new di("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz");var gi;!function(e){e.sha256="sha256",e.sha512="sha512"}(gi||(gi={}));const mi=new v("sha2/5.8.0");function yi(e){return"0x"+fr().ripemd160().update(S(e)).digest("hex")}function vi(e){return"0x"+fr().sha256().update(S(e)).digest("hex")}function bi(e){return"0x"+fr().sha512().update(S(e)).digest("hex")}function wi(e,t,r){return gi[e]||mi.throwError("unsupported algorithm "+e,v.errors.UNSUPPORTED_OPERATION,{operation:"hmac",algorithm:e}),"0x"+fr().hmac(fr()[e],S(t)).update(S(r)).digest("hex")}function Ei(e,t,r,n,i){let o;e=S(e),t=S(t);let s=1;const a=new Uint8Array(n),c=new Uint8Array(t.length+4);let u,l;c.set(t);for(let h=1;h<=s;h++){c[t.length]=h>>24&255,c[t.length+1]=h>>16&255,c[t.length+2]=h>>8&255,c[t.length+3]=255&h;let f=S(wi(i,e,c));o||(o=f.length,l=new Uint8Array(o),s=Math.ceil(n/o),u=n-(s-1)*o),l.set(f);for(let t=1;t<r;t++){f=S(wi(i,e,f));for(let e=0;e<o;e++)l[e]^=f[e]}const d=(h-1)*o,p=h===s?u:o;a.set(S(l).slice(0,p),d)}return R(a)}const Ai=new v("wordlists/5.8.0");class _i{constructor(e){Ai.checkAbstract(new.target,_i),te(this,"locale",e)}split(e){return e.toLowerCase().split(/ +/g)}join(e){return e.join(" ")}static check(e){const t=[];for(let r=0;r<2048;r++){const n=e.getWord(r);if(r!==e.getWordIndex(n))return"0x";t.push(n)}return Qe(t.join("\n")+"\n")}static register(e,t){t||(t=e.locale)}}let xi=null;function Si(e){if(null==xi&&(xi="AbandonAbilityAbleAboutAboveAbsentAbsorbAbstractAbsurdAbuseAccessAccidentAccountAccuseAchieveAcidAcousticAcquireAcrossActActionActorActressActualAdaptAddAddictAddressAdjustAdmitAdultAdvanceAdviceAerobicAffairAffordAfraidAgainAgeAgentAgreeAheadAimAirAirportAisleAlarmAlbumAlcoholAlertAlienAllAlleyAllowAlmostAloneAlphaAlreadyAlsoAlterAlwaysAmateurAmazingAmongAmountAmusedAnalystAnchorAncientAngerAngleAngryAnimalAnkleAnnounceAnnualAnotherAnswerAntennaAntiqueAnxietyAnyApartApologyAppearAppleApproveAprilArchArcticAreaArenaArgueArmArmedArmorArmyAroundArrangeArrestArriveArrowArtArtefactArtistArtworkAskAspectAssaultAssetAssistAssumeAsthmaAthleteAtomAttackAttendAttitudeAttractAuctionAuditAugustAuntAuthorAutoAutumnAverageAvocadoAvoidAwakeAwareAwayAwesomeAwfulAwkwardAxisBabyBachelorBaconBadgeBagBalanceBalconyBallBambooBananaBannerBarBarelyBargainBarrelBaseBasicBasketBattleBeachBeanBeautyBecauseBecomeBeefBeforeBeginBehaveBehindBelieveBelowBeltBenchBenefitBestBetrayBetterBetweenBeyondBicycleBidBikeBindBiologyBirdBirthBitterBlackBladeBlameBlanketBlastBleakBlessBlindBloodBlossomBlouseBlueBlurBlushBoardBoatBodyBoilBombBoneBonusBookBoostBorderBoringBorrowBossBottomBounceBoxBoyBracketBrainBrandBrassBraveBreadBreezeBrickBridgeBriefBrightBringBriskBroccoliBrokenBronzeBroomBrotherBrownBrushBubbleBuddyBudgetBuffaloBuildBulbBulkBulletBundleBunkerBurdenBurgerBurstBusBusinessBusyButterBuyerBuzzCabbageCabinCableCactusCageCakeCallCalmCameraCampCanCanalCancelCandyCannonCanoeCanvasCanyonCapableCapitalCaptainCarCarbonCardCargoCarpetCarryCartCaseCashCasinoCastleCasualCatCatalogCatchCategoryCattleCaughtCauseCautionCaveCeilingCeleryCementCensusCenturyCerealCertainChairChalkChampionChangeChaosChapterChargeChaseChatCheapCheckCheeseChefCherryChestChickenChiefChildChimneyChoiceChooseChronicChuckleChunkChurnCigarCinnamonCircleCitizenCityCivilClaimClapClarifyClawClayCleanClerkCleverClickClientCliffClimbClinicClipClockClogCloseClothCloudClownClubClumpClusterClutchCoachCoastCoconutCodeCoffeeCoilCoinCollectColorColumnCombineComeComfortComicCommonCompanyConcertConductConfirmCongressConnectConsiderControlConvinceCookCoolCopperCopyCoralCoreCornCorrectCostCottonCouchCountryCoupleCourseCousinCoverCoyoteCrackCradleCraftCramCraneCrashCraterCrawlCrazyCreamCreditCreekCrewCricketCrimeCrispCriticCropCrossCrouchCrowdCrucialCruelCruiseCrumbleCrunchCrushCryCrystalCubeCultureCupCupboardCuriousCurrentCurtainCurveCushionCustomCuteCycleDadDamageDampDanceDangerDaringDashDaughterDawnDayDealDebateDebrisDecadeDecemberDecideDeclineDecorateDecreaseDeerDefenseDefineDefyDegreeDelayDeliverDemandDemiseDenialDentistDenyDepartDependDepositDepthDeputyDeriveDescribeDesertDesignDeskDespairDestroyDetailDetectDevelopDeviceDevoteDiagramDialDiamondDiaryDiceDieselDietDifferDigitalDignityDilemmaDinnerDinosaurDirectDirtDisagreeDiscoverDiseaseDishDismissDisorderDisplayDistanceDivertDivideDivorceDizzyDoctorDocumentDogDollDolphinDomainDonateDonkeyDonorDoorDoseDoubleDoveDraftDragonDramaDrasticDrawDreamDressDriftDrillDrinkDripDriveDropDrumDryDuckDumbDuneDuringDustDutchDutyDwarfDynamicEagerEagleEarlyEarnEarthEasilyEastEasyEchoEcologyEconomyEdgeEditEducateEffortEggEightEitherElbowElderElectricElegantElementElephantElevatorEliteElseEmbarkEmbodyEmbraceEmergeEmotionEmployEmpowerEmptyEnableEnactEndEndlessEndorseEnemyEnergyEnforceEngageEngineEnhanceEnjoyEnlistEnoughEnrichEnrollEnsureEnterEntireEntryEnvelopeEpisodeEqualEquipEraEraseErodeErosionErrorEruptEscapeEssayEssenceEstateEternalEthicsEvidenceEvilEvokeEvolveExactExampleExcessExchangeExciteExcludeExcuseExecuteExerciseExhaustExhibitExileExistExitExoticExpandExpectExpireExplainExposeExpressExtendExtraEyeEyebrowFabricFaceFacultyFadeFaintFaithFallFalseFameFamilyFamousFanFancyFantasyFarmFashionFatFatalFatherFatigueFaultFavoriteFeatureFebruaryFederalFeeFeedFeelFemaleFenceFestivalFetchFeverFewFiberFictionFieldFigureFileFilmFilterFinalFindFineFingerFinishFireFirmFirstFiscalFishFitFitnessFixFlagFlameFlashFlatFlavorFleeFlightFlipFloatFlockFloorFlowerFluidFlushFlyFoamFocusFogFoilFoldFollowFoodFootForceForestForgetForkFortuneForumForwardFossilFosterFoundFoxFragileFrameFrequentFreshFriendFringeFrogFrontFrostFrownFrozenFruitFuelFunFunnyFurnaceFuryFutureGadgetGainGalaxyGalleryGameGapGarageGarbageGardenGarlicGarmentGasGaspGateGatherGaugeGazeGeneralGeniusGenreGentleGenuineGestureGhostGiantGiftGiggleGingerGiraffeGirlGiveGladGlanceGlareGlassGlideGlimpseGlobeGloomGloryGloveGlowGlueGoatGoddessGoldGoodGooseGorillaGospelGossipGovernGownGrabGraceGrainGrantGrapeGrassGravityGreatGreenGridGriefGritGroceryGroupGrowGruntGuardGuessGuideGuiltGuitarGunGymHabitHairHalfHammerHamsterHandHappyHarborHardHarshHarvestHatHaveHawkHazardHeadHealthHeartHeavyHedgehogHeightHelloHelmetHelpHenHeroHiddenHighHillHintHipHireHistoryHobbyHockeyHoldHoleHolidayHollowHomeHoneyHoodHopeHornHorrorHorseHospitalHostHotelHourHoverHubHugeHumanHumbleHumorHundredHungryHuntHurdleHurryHurtHusbandHybridIceIconIdeaIdentifyIdleIgnoreIllIllegalIllnessImageImitateImmenseImmuneImpactImposeImproveImpulseInchIncludeIncomeIncreaseIndexIndicateIndoorIndustryInfantInflictInformInhaleInheritInitialInjectInjuryInmateInnerInnocentInputInquiryInsaneInsectInsideInspireInstallIntactInterestIntoInvestInviteInvolveIronIslandIsolateIssueItemIvoryJacketJaguarJarJazzJealousJeansJellyJewelJobJoinJokeJourneyJoyJudgeJuiceJumpJungleJuniorJunkJustKangarooKeenKeepKetchupKeyKickKidKidneyKindKingdomKissKitKitchenKiteKittenKiwiKneeKnifeKnockKnowLabLabelLaborLadderLadyLakeLampLanguageLaptopLargeLaterLatinLaughLaundryLavaLawLawnLawsuitLayerLazyLeaderLeafLearnLeaveLectureLeftLegLegalLegendLeisureLemonLendLengthLensLeopardLessonLetterLevelLiarLibertyLibraryLicenseLifeLiftLightLikeLimbLimitLinkLionLiquidListLittleLiveLizardLoadLoanLobsterLocalLockLogicLonelyLongLoopLotteryLoudLoungeLoveLoyalLuckyLuggageLumberLunarLunchLuxuryLyricsMachineMadMagicMagnetMaidMailMainMajorMakeMammalManManageMandateMangoMansionManualMapleMarbleMarchMarginMarineMarketMarriageMaskMassMasterMatchMaterialMathMatrixMatterMaximumMazeMeadowMeanMeasureMeatMechanicMedalMediaMelodyMeltMemberMemoryMentionMenuMercyMergeMeritMerryMeshMessageMetalMethodMiddleMidnightMilkMillionMimicMindMinimumMinorMinuteMiracleMirrorMiseryMissMistakeMixMixedMixtureMobileModelModifyMomMomentMonitorMonkeyMonsterMonthMoonMoralMoreMorningMosquitoMotherMotionMotorMountainMouseMoveMovieMuchMuffinMuleMultiplyMuscleMuseumMushroomMusicMustMutualMyselfMysteryMythNaiveNameNapkinNarrowNastyNationNatureNearNeckNeedNegativeNeglectNeitherNephewNerveNestNetNetworkNeutralNeverNewsNextNiceNightNobleNoiseNomineeNoodleNormalNorthNoseNotableNoteNothingNoticeNovelNowNuclearNumberNurseNutOakObeyObjectObligeObscureObserveObtainObviousOccurOceanOctoberOdorOffOfferOfficeOftenOilOkayOldOliveOlympicOmitOnceOneOnionOnlineOnlyOpenOperaOpinionOpposeOptionOrangeOrbitOrchardOrderOrdinaryOrganOrientOriginalOrphanOstrichOtherOutdoorOuterOutputOutsideOvalOvenOverOwnOwnerOxygenOysterOzonePactPaddlePagePairPalacePalmPandaPanelPanicPantherPaperParadeParentParkParrotPartyPassPatchPathPatientPatrolPatternPausePavePaymentPeacePeanutPearPeasantPelicanPenPenaltyPencilPeoplePepperPerfectPermitPersonPetPhonePhotoPhrasePhysicalPianoPicnicPicturePiecePigPigeonPillPilotPinkPioneerPipePistolPitchPizzaPlacePlanetPlasticPlatePlayPleasePledgePluckPlugPlungePoemPoetPointPolarPolePolicePondPonyPoolPopularPortionPositionPossiblePostPotatoPotteryPovertyPowderPowerPracticePraisePredictPreferPreparePresentPrettyPreventPricePridePrimaryPrintPriorityPrisonPrivatePrizeProblemProcessProduceProfitProgramProjectPromoteProofPropertyProsperProtectProudProvidePublicPuddingPullPulpPulsePumpkinPunchPupilPuppyPurchasePurityPurposePursePushPutPuzzlePyramidQualityQuantumQuarterQuestionQuickQuitQuizQuoteRabbitRaccoonRaceRackRadarRadioRailRainRaiseRallyRampRanchRandomRangeRapidRareRateRatherRavenRawRazorReadyRealReasonRebelRebuildRecallReceiveRecipeRecordRecycleReduceReflectReformRefuseRegionRegretRegularRejectRelaxReleaseReliefRelyRemainRememberRemindRemoveRenderRenewRentReopenRepairRepeatReplaceReportRequireRescueResembleResistResourceResponseResultRetireRetreatReturnReunionRevealReviewRewardRhythmRibRibbonRiceRichRideRidgeRifleRightRigidRingRiotRippleRiskRitualRivalRiverRoadRoastRobotRobustRocketRomanceRoofRookieRoomRoseRotateRoughRoundRouteRoyalRubberRudeRugRuleRunRunwayRuralSadSaddleSadnessSafeSailSaladSalmonSalonSaltSaluteSameSampleSandSatisfySatoshiSauceSausageSaveSayScaleScanScareScatterSceneSchemeSchoolScienceScissorsScorpionScoutScrapScreenScriptScrubSeaSearchSeasonSeatSecondSecretSectionSecuritySeedSeekSegmentSelectSellSeminarSeniorSenseSentenceSeriesServiceSessionSettleSetupSevenShadowShaftShallowShareShedShellSheriffShieldShiftShineShipShiverShockShoeShootShopShortShoulderShoveShrimpShrugShuffleShySiblingSickSideSiegeSightSignSilentSilkSillySilverSimilarSimpleSinceSingSirenSisterSituateSixSizeSkateSketchSkiSkillSkinSkirtSkullSlabSlamSleepSlenderSliceSlideSlightSlimSloganSlotSlowSlushSmallSmartSmileSmokeSmoothSnackSnakeSnapSniffSnowSoapSoccerSocialSockSodaSoftSolarSoldierSolidSolutionSolveSomeoneSongSoonSorrySortSoulSoundSoupSourceSouthSpaceSpareSpatialSpawnSpeakSpecialSpeedSpellSpendSphereSpiceSpiderSpikeSpinSpiritSplitSpoilSponsorSpoonSportSpotSpraySpreadSpringSpySquareSqueezeSquirrelStableStadiumStaffStageStairsStampStandStartStateStaySteakSteelStemStepStereoStickStillStingStockStomachStoneStoolStoryStoveStrategyStreetStrikeStrongStruggleStudentStuffStumbleStyleSubjectSubmitSubwaySuccessSuchSuddenSufferSugarSuggestSuitSummerSunSunnySunsetSuperSupplySupremeSureSurfaceSurgeSurpriseSurroundSurveySuspectSustainSwallowSwampSwapSwarmSwearSweetSwiftSwimSwingSwitchSwordSymbolSymptomSyrupSystemTableTackleTagTailTalentTalkTankTapeTargetTaskTasteTattooTaxiTeachTeamTellTenTenantTennisTentTermTestTextThankThatThemeThenTheoryThereTheyThingThisThoughtThreeThriveThrowThumbThunderTicketTideTigerTiltTimberTimeTinyTipTiredTissueTitleToastTobaccoTodayToddlerToeTogetherToiletTokenTomatoTomorrowToneTongueTonightToolToothTopTopicToppleTorchTornadoTortoiseTossTotalTouristTowardTowerTownToyTrackTradeTrafficTragicTrainTransferTrapTrashTravelTrayTreatTreeTrendTrialTribeTrickTriggerTrimTripTrophyTroubleTruckTrueTrulyTrumpetTrustTruthTryTubeTuitionTumbleTunaTunnelTurkeyTurnTurtleTwelveTwentyTwiceTwinTwistTwoTypeTypicalUglyUmbrellaUnableUnawareUncleUncoverUnderUndoUnfairUnfoldUnhappyUniformUniqueUnitUniverseUnknownUnlockUntilUnusualUnveilUpdateUpgradeUpholdUponUpperUpsetUrbanUrgeUsageUseUsedUsefulUselessUsualUtilityVacantVacuumVagueValidValleyValveVanVanishVaporVariousVastVaultVehicleVelvetVendorVentureVenueVerbVerifyVersionVeryVesselVeteranViableVibrantViciousVictoryVideoViewVillageVintageViolinVirtualVirusVisaVisitVisualVitalVividVocalVoiceVoidVolcanoVolumeVoteVoyageWageWagonWaitWalkWallWalnutWantWarfareWarmWarriorWashWaspWasteWaterWaveWayWealthWeaponWearWeaselWeatherWebWeddingWeekendWeirdWelcomeWestWetWhaleWhatWheatWheelWhenWhereWhipWhisperWideWidthWifeWildWillWinWindowWineWingWinkWinnerWinterWireWisdomWiseWishWitnessWolfWomanWonderWoodWoolWordWorkWorldWorryWorthWrapWreckWrestleWristWriteWrongYardYearYellowYouYoungYouthZebraZeroZoneZoo".replace(/([A-Z])/g," $1").toLowerCase().substring(1).split(" "),"0x3c8acc1e7b08d8e76f9fda015ef48dc8c710a73cb7e0f77b2c18a9b5a7adde60"!==_i.check(e)))throw xi=null,new Error("BIP39 Wordlist for en (English) FAILED")}const ki=new class extends _i{constructor(){super("en")}getWord(e){return Si(this),xi[e]}getWordIndex(e){return Si(this),xi.indexOf(e)}};_i.register(ki);const Ii={en:ki},Oi=new v("hdnode/5.8.0"),Ti=$.from("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),Pi=Ke("Bitcoin seed"),Ri=2147483648;function Ni(e){return(1<<e)-1<<8-e}function Ci(e){return U(R(e),32)}function Mi(e){return pi.encode(k([e,C(vi(vi(e)),0,4)]))}function Li(e){if(null==e)return Ii.en;if("string"==typeof e){const t=Ii[e];return null==t&&Oi.throwArgumentError("unknown locale","wordlist",e),t}return e}const Bi={},Ui="m/44'/60'/0'/0/0";class Di{constructor(e,t,r,n,i,o,s,a){if(e!==Bi)throw new Error("HDNode constructor cannot be called directly");if(t){const e=new Xr(t);te(this,"privateKey",e.privateKey),te(this,"publicKey",e.compressedPublicKey)}else te(this,"privateKey",null),te(this,"publicKey",R(r));te(this,"parentFingerprint",n),te(this,"fingerprint",C(yi(vi(this.publicKey)),0,4)),te(this,"address",cn(this.publicKey)),te(this,"chainCode",i),te(this,"index",o),te(this,"depth",s),null==a?(te(this,"mnemonic",null),te(this,"path",null)):"string"==typeof a?(te(this,"mnemonic",null),te(this,"path",a)):(te(this,"mnemonic",a),te(this,"path",a.path))}get extendedKey(){if(this.depth>=256)throw new Error("Depth too large!");return Mi(k([null!=this.privateKey?"0x0488ADE4":"0x0488B21E",R(this.depth),this.parentFingerprint,U(R(this.index),4),this.chainCode,null!=this.privateKey?k(["0x00",this.privateKey]):this.publicKey]))}neuter(){return new Di(Bi,null,this.publicKey,this.parentFingerprint,this.chainCode,this.index,this.depth,this.path)}_derive(e){if(e>4294967295)throw new Error("invalid index - "+String(e));let t=this.path;t&&(t+="/"+(e&~Ri));const r=new Uint8Array(37);if(e&Ri){if(!this.privateKey)throw new Error("cannot derive child of neutered node");r.set(S(this.privateKey),1),t&&(t+="'")}else r.set(S(this.publicKey));for(let t=24;t>=0;t-=8)r[33+(t>>3)]=e>>24-t&255;const n=S(wi(gi.sha512,this.chainCode,r)),i=n.slice(0,32),o=n.slice(32);let s=null,a=null;this.privateKey?s=Ci($.from(i).add(this.privateKey).mod(Ti)):a=new Xr(R(i))._addPoint(this.publicKey);let c=t;const u=this.mnemonic;return u&&(c=Object.freeze({phrase:u.phrase,path:t,locale:u.locale||"en"})),new Di(Bi,s,a,this.fingerprint,Ci(o),e,this.depth+1,c)}derivePath(e){const t=e.split("/");if(0===t.length||"m"===t[0]&&0!==this.depth)throw new Error("invalid path - "+e);"m"===t[0]&&t.shift();let r=this;for(let e=0;e<t.length;e++){const n=t[e];if(n.match(/^[0-9]+'$/)){const e=parseInt(n.substring(0,n.length-1));if(e>=Ri)throw new Error("invalid path index - "+n);r=r._derive(Ri+e)}else{if(!n.match(/^[0-9]+$/))throw new Error("invalid path component - "+n);{const e=parseInt(n);if(e>=Ri)throw new Error("invalid path index - "+n);r=r._derive(e)}}}return r}static _fromSeed(e,t){const r=S(e);if(r.length<16||r.length>64)throw new Error("invalid seed");const n=S(wi(gi.sha512,Pi,r));return new Di(Bi,Ci(n.slice(0,32)),null,"0x00000000",Ci(n.slice(32)),0,0,t)}static fromMnemonic(e,t,r){return e=zi(Fi(e,r=Li(r)),r),Di._fromSeed(ji(e,t),{phrase:e,path:"m",locale:r.locale})}static fromSeed(e){return Di._fromSeed(e,null)}static fromExtendedKey(e){const t=pi.decode(e);82===t.length&&Mi(t.slice(0,78))===e||Oi.throwArgumentError("invalid extended key","extendedKey","[REDACTED]");const r=t[4],n=R(t.slice(5,9)),i=parseInt(R(t.slice(9,13)).substring(2),16),o=R(t.slice(13,45)),s=t.slice(45,78);switch(R(t.slice(0,4))){case"0x0488b21e":case"0x043587cf":return new Di(Bi,null,R(s),n,o,i,r,null);case"0x0488ade4":case"0x04358394 ":if(0!==s[0])break;return new Di(Bi,R(s.slice(1)),null,n,o,i,r,null)}return Oi.throwArgumentError("invalid extended key","extendedKey","[REDACTED]")}}function ji(e,t){t||(t="");const r=Ke("mnemonic"+t,Fe.NFKD);return Ei(Ke(e,Fe.NFKD),r,2048,64,"sha512")}function Fi(e,t){t=Li(t),Oi.checkNormalize();const r=t.split(e);if(r.length%3!=0)throw new Error("invalid mnemonic");const n=S(new Uint8Array(Math.ceil(11*r.length/8)));let i=0;for(let e=0;e<r.length;e++){let o=t.getWordIndex(r[e].normalize("NFKD"));if(-1===o)throw new Error("invalid mnemonic");for(let e=0;e<11;e++)o&1<<10-e&&(n[i>>3]|=1<<7-i%8),i++}const o=32*r.length/3,s=Ni(r.length/3);if((S(vi(n.slice(0,o/8)))[0]&s)!=(n[n.length-1]&s))throw new Error("invalid checksum");return R(n.slice(0,o/8))}function zi(e,t){if(t=Li(t),(e=S(e)).length%4!=0||e.length<16||e.length>32)throw new Error("invalid entropy");const r=[0];let n=11;for(let t=0;t<e.length;t++)n>8?(r[r.length-1]<<=8,r[r.length-1]|=e[t],n-=8):(r[r.length-1]<<=n,r[r.length-1]|=e[t]>>8-n,r.push(e[t]&(1<<8-n)-1),n+=3);const i=e.length/4,o=S(vi(e))[0]&Ni(i);return r[r.length-1]<<=i,r[r.length-1]|=o>>8-i,t.join(r.map((e=>t.getWord(e))))}function qi(e,t){try{return Fi(e,t),!0}catch(e){}return!1}function Gi(e){return("number"!=typeof e||e<0||e>=Ri||e%1)&&Oi.throwArgumentError("invalid account index","index",e),`m/44'/60'/${e}'/0/0`}const Hi=new v("random/5.8.0"),Ki=function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if(void 0!==r.g)return r.g;throw new Error("unable to locate global object")}();let Vi=Ki.crypto||Ki.msCrypto;function Wi(e){(e<=0||e>1024||e%1||e!=e)&&Hi.throwArgumentError("invalid length","length",e);const t=new Uint8Array(e);return Vi.getRandomValues(t),S(t)}Vi&&Vi.getRandomValues||(Hi.warn("WARNING: Missing strong random number source"),Vi={getRandomValues:function(e){return Hi.throwError("no secure random source avaialble",v.errors.UNSUPPORTED_OPERATION,{operation:"crypto.getRandomValues"})}});var $i=r(3836),Ji=r.n($i),Yi=r(9983),Qi=r.n(Yi);function Xi(e){return"string"==typeof e&&"0x"!==e.substring(0,2)&&(e="0x"+e),S(e)}function Zi(e,t){for(e=String(e);e.length<t;)e="0"+e;return e}function eo(e){return"string"==typeof e?Ke(e,Fe.NFKC):S(e)}function to(e,t){let r=e;const n=t.toLowerCase().split("/");for(let e=0;e<n.length;e++){let t=null;for(const i in r)if(i.toLowerCase()===n[e]){t=r[i];break}if(null===t)return null;r=t}return r}function ro(e){const t=S(e);t[6]=15&t[6]|64,t[8]=63&t[8]|128;const r=R(t);return[r.substring(2,10),r.substring(10,14),r.substring(14,18),r.substring(18,22),r.substring(22,34)].join("-")}const no="json-wallets/5.8.0";const io=new v(no);function oo(e){return null!=e&&e.mnemonic&&e.mnemonic.phrase}class so extends le{isKeystoreAccount(e){return!(!e||!e._isKeystoreAccount)}}function ao(e,t){const r=Xi(to(e,"crypto/ciphertext"));if(R(be(k([t.slice(16,32),r]))).substring(2)!==to(e,"crypto/mac").toLowerCase())throw new Error("invalid password");const n=function(e,t,r){if("aes-128-ctr"===to(e,"crypto/cipher")){const n=Xi(to(e,"crypto/cipherparams/iv")),i=new(Ji().Counter)(n);return S(new(Ji().ModeOfOperation.ctr)(t,i).decrypt(r))}return null}(e,t.slice(0,16),r);n||io.throwError("unsupported cipher",v.errors.UNSUPPORTED_OPERATION,{operation:"decrypt"});const i=t.slice(32,64),o=cn(n);if(e.address){let t=e.address.toLowerCase();if("0x"!==t.substring(0,2)&&(t="0x"+t),Me(t)!==o)throw new Error("address mismatch")}const s={_isKeystoreAccount:!0,address:o,privateKey:R(n)};if("0.1"===to(e,"x-ethers/version")){const t=Xi(to(e,"x-ethers/mnemonicCiphertext")),r=Xi(to(e,"x-ethers/mnemonicCounter")),n=new(Ji().Counter)(r),o=new(Ji().ModeOfOperation.ctr)(i,n),a=to(e,"x-ethers/path")||Ui,c=to(e,"x-ethers/locale")||"en",u=S(o.decrypt(t));try{const e=zi(u,c),t=Di.fromMnemonic(e,null,c).derivePath(a);if(t.privateKey!=s.privateKey)throw new Error("mnemonic mismatch");s.mnemonic=t.mnemonic}catch(e){if(e.code!==v.errors.INVALID_ARGUMENT||"wordlist"!==e.argument)throw e}}return new so(s)}function co(e,t,r,n,i){return S(Ei(e,t,r,n,i))}function uo(e,t,r,n,i){return Promise.resolve(co(e,t,r,n,i))}function lo(e,t,r,n,i){const o=eo(t),s=to(e,"crypto/kdf");if(s&&"string"==typeof s){const t=function(e,t){return io.throwArgumentError("invalid key-derivation function parameters",e,t)};if("scrypt"===s.toLowerCase()){const r=Xi(to(e,"crypto/kdfparams/salt")),a=parseInt(to(e,"crypto/kdfparams/n")),c=parseInt(to(e,"crypto/kdfparams/r")),u=parseInt(to(e,"crypto/kdfparams/p"));a&&c&&u||t("kdf",s),a&a-1&&t("N",a);const l=parseInt(to(e,"crypto/kdfparams/dklen"));return 32!==l&&t("dklen",l),n(o,r,a,c,u,64,i)}if("pbkdf2"===s.toLowerCase()){const n=Xi(to(e,"crypto/kdfparams/salt"));let i=null;const s=to(e,"crypto/kdfparams/prf");"hmac-sha256"===s?i="sha256":"hmac-sha512"===s?i="sha512":t("prf",s);const a=parseInt(to(e,"crypto/kdfparams/c")),c=parseInt(to(e,"crypto/kdfparams/dklen"));return 32!==c&&t("dklen",c),r(o,n,a,c,i)}}return io.throwArgumentError("unsupported key-derivation function","kdf",s)}const ho=new v(no);class fo extends le{isCrowdsaleAccount(e){return!(!e||!e._isCrowdsaleAccount)}}function po(e,t){const r=JSON.parse(e);t=eo(t);const n=Me(to(r,"ethaddr")),i=Xi(to(r,"encseed"));i&&i.length%16==0||ho.throwArgumentError("invalid encseed","json",e);const o=S(Ei(t,t,2e3,32,"sha256")).slice(0,16),s=i.slice(0,16),a=i.slice(16),c=new(Ji().ModeOfOperation.cbc)(o,s),u=Ji().padding.pkcs7.strip(S(c.decrypt(a)));let l="";for(let e=0;e<u.length;e++)l+=String.fromCharCode(u[e]);const h=be(Ke(l));return new fo({_isCrowdsaleAccount:!0,address:n,privateKey:h})}function go(e){let t=null;try{t=JSON.parse(e)}catch(e){return!1}return t.encseed&&t.ethaddr}function mo(e){let t=null;try{t=JSON.parse(e)}catch(e){return!1}return!(!t.version||parseInt(t.version)!==t.version||3!==parseInt(t.version))}function yo(e){if(go(e))try{return Me(JSON.parse(e).ethaddr)}catch(e){return null}if(mo(e))try{return Me(JSON.parse(e).address)}catch(e){return null}return null}function vo(e,t,r){if(go(e)){r&&r(0);const n=po(e,t);return r&&r(1),Promise.resolve(n)}return mo(e)?function(e,t,r){return n=this,i=void 0,s=function*(){const n=JSON.parse(e);return ao(n,yield lo(n,t,uo,Qi().scrypt,r))},new((o=void 0)||(o=Promise))((function(e,t){function r(e){try{c(s.next(e))}catch(e){t(e)}}function a(e){try{c(s.throw(e))}catch(e){t(e)}}function c(t){var n;t.done?e(t.value):(n=t.value,n instanceof o?n:new o((function(e){e(n)}))).then(r,a)}c((s=s.apply(n,i||[])).next())}));var n,i,o,s}(e,t,r):Promise.reject(new Error("invalid JSON wallet"))}var bo=function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function s(e){try{c(n.next(e))}catch(e){o(e)}}function a(e){try{c(n.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))};const wo=new v("wallet/5.8.0");class Eo extends ur{constructor(e,t){if(super(),null!=(r=e)&&T(r.privateKey,32)&&null!=r.address){const t=new Xr(e.privateKey);if(te(this,"_signingKey",(()=>t)),te(this,"address",cn(this.publicKey)),this.address!==Me(e.address)&&wo.throwArgumentError("privateKey/address mismatch","privateKey","[REDACTED]"),function(e){const t=e.mnemonic;return t&&t.phrase}(e)){const t=e.mnemonic;te(this,"_mnemonic",(()=>({phrase:t.phrase,path:t.path||Ui,locale:t.locale||"en"})));const r=this.mnemonic;cn(Di.fromMnemonic(r.phrase,null,r.locale).derivePath(r.path).privateKey)!==this.address&&wo.throwArgumentError("mnemonic/address mismatch","privateKey","[REDACTED]")}else te(this,"_mnemonic",(()=>null))}else{if(Xr.isSigningKey(e))"secp256k1"!==e.curve&&wo.throwArgumentError("unsupported curve; must be secp256k1","privateKey","[REDACTED]"),te(this,"_signingKey",(()=>e));else{"string"==typeof e&&e.match(/^[0-9a-f]*$/i)&&64===e.length&&(e="0x"+e);const t=new Xr(e);te(this,"_signingKey",(()=>t))}te(this,"_mnemonic",(()=>null)),te(this,"address",cn(this.publicKey))}var r;t&&!ir.isProvider(t)&&wo.throwArgumentError("invalid provider","provider",t),te(this,"provider",t||null)}get mnemonic(){return this._mnemonic()}get privateKey(){return this._signingKey().privateKey}get publicKey(){return this._signingKey().publicKey}getAddress(){return Promise.resolve(this.address)}connect(e){return new Eo(this,e)}signTransaction(e){return ne(e).then((t=>{null!=t.from&&(Me(t.from)!==this.address&&wo.throwArgumentError("transaction from address mismatch","transaction.from",e.from),delete t.from);const r=this._signingKey().signDigest(be(mn(t)));return mn(t,r)}))}signMessage(e){return bo(this,void 0,void 0,(function*(){return j(this._signingKey().signDigest(Yn(e)))}))}_signTypedData(e,t,r){return bo(this,void 0,void 0,(function*(){const n=yield fi.resolveNames(e,t,r,(e=>(null==this.provider&&wo.throwError("cannot resolve ENS names without a provider",v.errors.UNSUPPORTED_OPERATION,{operation:"resolveName",value:e}),this.provider.resolveName(e))));return j(this._signingKey().signDigest(fi.hash(n.domain,t,n.value)))}))}encrypt(e,t,r){if("function"!=typeof t||r||(r=t,t={}),r&&"function"!=typeof r)throw new Error("invalid callback");return t||(t={}),function(e,t,r,n){try{if(Me(e.address)!==cn(e.privateKey))throw new Error("address/privateKey mismatch");if(oo(e)){const t=e.mnemonic;if(Di.fromMnemonic(t.phrase,null,t.locale).derivePath(t.path||Ui).privateKey!=e.privateKey)throw new Error("mnemonic mismatch")}}catch(e){return Promise.reject(e)}"function"!=typeof r||n||(n=r,r={}),r||(r={});const i=S(e.privateKey),o=eo(t);let s=null,a=null,c=null;if(oo(e)){const t=e.mnemonic;s=S(Fi(t.phrase,t.locale||"en")),a=t.path||Ui,c=t.locale||"en"}let u=r.client;u||(u="ethers.js");let l=null;l=r.salt?S(r.salt):Wi(32);let h=null;if(r.iv){if(h=S(r.iv),16!==h.length)throw new Error("invalid iv")}else h=Wi(16);let f=null;if(r.uuid){if(f=S(r.uuid),16!==f.length)throw new Error("invalid uuid")}else f=Wi(16);let d=1<<17,p=8,g=1;return r.scrypt&&(r.scrypt.N&&(d=r.scrypt.N),r.scrypt.r&&(p=r.scrypt.r),r.scrypt.p&&(g=r.scrypt.p)),Qi().scrypt(o,l,d,p,g,64,n).then((t=>{const r=(t=S(t)).slice(0,16),n=t.slice(16,32),o=t.slice(32,64),m=new(Ji().Counter)(h),y=S(new(Ji().ModeOfOperation.ctr)(r,m).encrypt(i)),v=be(k([n,y])),b={address:e.address.substring(2).toLowerCase(),id:ro(f),version:3,crypto:{cipher:"aes-128-ctr",cipherparams:{iv:R(h).substring(2)},ciphertext:R(y).substring(2),kdf:"scrypt",kdfparams:{salt:R(l).substring(2),n:d,dklen:32,p:g,r:p},mac:v.substring(2)}};if(s){const e=Wi(16),t=new(Ji().Counter)(e),r=S(new(Ji().ModeOfOperation.ctr)(o,t).encrypt(s)),n=new Date,i=n.getUTCFullYear()+"-"+Zi(n.getUTCMonth()+1,2)+"-"+Zi(n.getUTCDate(),2)+"T"+Zi(n.getUTCHours(),2)+"-"+Zi(n.getUTCMinutes(),2)+"-"+Zi(n.getUTCSeconds(),2)+".0Z";b["x-ethers"]={client:u,gethFilename:"UTC--"+i+"--"+b.address,mnemonicCounter:R(e).substring(2),mnemonicCiphertext:R(r).substring(2),path:a,locale:c,version:"0.1"}}return JSON.stringify(b)}))}(this,e,t,r)}static createRandom(e){let t=Wi(16);e||(e={}),e.extraEntropy&&(t=S(C(be(k([t,e.extraEntropy])),0,16)));const r=zi(t,e.locale);return Eo.fromMnemonic(r,e.path,e.locale)}static fromEncryptedJson(e,t,r){return vo(e,t,r).then((e=>new Eo(e)))}static fromEncryptedJsonSync(e,t){return new Eo(function(e,t){if(go(e))return po(e,t);if(mo(e))return function(e,t){const r=JSON.parse(e);return ao(r,lo(r,t,co,Qi().syncScrypt))}(e,t);throw new Error("invalid JSON wallet")}(e,t))}static fromMnemonic(e,t,r){return t||(t=Ui),new Eo(Di.fromMnemonic(e,null,r).derivePath(t))}}function Ao(e,t){return un(Yn(e),t)}function _o(e,t,r,n){return un(fi.hash(e,t,r),n)}const xo="0x0000000000000000000000000000000000000000",So="0x0000000000000000000000000000000000000000000000000000000000000000",ko="",Io=new v("networks/5.8.0");function Oo(e){const t=function(t,r){null==r&&(r={});const n=[];if(t.InfuraProvider&&"-"!==r.infura)try{n.push(new t.InfuraProvider(e,r.infura))}catch(e){}if(t.EtherscanProvider&&"-"!==r.etherscan)try{n.push(new t.EtherscanProvider(e,r.etherscan))}catch(e){}if(t.AlchemyProvider&&"-"!==r.alchemy)try{n.push(new t.AlchemyProvider(e,r.alchemy))}catch(e){}if(t.PocketProvider&&"-"!==r.pocket){const i=["goerli","ropsten","rinkeby","sepolia"];try{const o=new t.PocketProvider(e,r.pocket);o.network&&-1===i.indexOf(o.network.name)&&n.push(o)}catch(e){}}if(t.CloudflareProvider&&"-"!==r.cloudflare)try{n.push(new t.CloudflareProvider(e))}catch(e){}if(t.AnkrProvider&&"-"!==r.ankr)try{const i=["ropsten"],o=new t.AnkrProvider(e,r.ankr);o.network&&-1===i.indexOf(o.network.name)&&n.push(o)}catch(e){}if(t.QuickNodeProvider&&"-"!==r.quicknode)try{n.push(new t.QuickNodeProvider(e,r.quicknode))}catch(e){}if(0===n.length)return null;if(t.FallbackProvider){let i=1;return null!=r.quorum?i=r.quorum:"homestead"===e&&(i=2),new t.FallbackProvider(n,i)}return n[0]};return t.renetwork=function(e){return Oo(e)},t}function To(e,t){const r=function(r,n){return r.JsonRpcProvider?new r.JsonRpcProvider(e,t):null};return r.renetwork=function(t){return To(e,t)},r}const Po={chainId:1,ensAddress:"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e",name:"homestead",_defaultProvider:Oo("homestead")},Ro={chainId:3,ensAddress:"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e",name:"ropsten",_defaultProvider:Oo("ropsten")},No={chainId:63,name:"classicMordor",_defaultProvider:To("https://www.ethercluster.com/mordor","classicMordor")},Co={unspecified:{chainId:0,name:"unspecified"},homestead:Po,mainnet:Po,morden:{chainId:2,name:"morden"},ropsten:Ro,testnet:Ro,rinkeby:{chainId:4,ensAddress:"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e",name:"rinkeby",_defaultProvider:Oo("rinkeby")},kovan:{chainId:42,name:"kovan",_defaultProvider:Oo("kovan")},goerli:{chainId:5,ensAddress:"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e",name:"goerli",_defaultProvider:Oo("goerli")},kintsugi:{chainId:1337702,name:"kintsugi"},sepolia:{chainId:11155111,ensAddress:"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e",name:"sepolia",_defaultProvider:Oo("sepolia")},holesky:{chainId:17e3,name:"holesky",_defaultProvider:Oo("holesky")},classic:{chainId:61,name:"classic",_defaultProvider:To("https://www.ethercluster.com/etc","classic")},classicMorden:{chainId:62,name:"classicMorden"},classicMordor:No,classicTestnet:No,classicKotti:{chainId:6,name:"classicKotti",_defaultProvider:To("https://www.ethercluster.com/kotti","classicKotti")},xdai:{chainId:100,name:"xdai"},matic:{chainId:137,name:"matic",_defaultProvider:Oo("matic")},maticmum:{chainId:80001,name:"maticmum",_defaultProvider:Oo("maticmum")},optimism:{chainId:10,name:"optimism",_defaultProvider:Oo("optimism")},"optimism-kovan":{chainId:69,name:"optimism-kovan"},"optimism-goerli":{chainId:420,name:"optimism-goerli"},"optimism-sepolia":{chainId:11155420,name:"optimism-sepolia"},arbitrum:{chainId:42161,name:"arbitrum"},"arbitrum-rinkeby":{chainId:421611,name:"arbitrum-rinkeby"},"arbitrum-goerli":{chainId:421613,name:"arbitrum-goerli"},"arbitrum-sepolia":{chainId:421614,name:"arbitrum-sepolia"},bnb:{chainId:56,name:"bnb"},bnbt:{chainId:97,name:"bnbt"}};function Mo(e){if(null==e)return null;if("number"==typeof e){for(const t in Co){const r=Co[t];if(r.chainId===e)return{name:r.name,chainId:r.chainId,ensAddress:r.ensAddress||null,_defaultProvider:r._defaultProvider||null}}return{chainId:e,name:"unknown"}}if("string"==typeof e){const t=Co[e];return null==t?null:{name:t.name,chainId:t.chainId,ensAddress:t.ensAddress,_defaultProvider:t._defaultProvider||null}}const t=Co[e.name];if(!t)return"number"!=typeof e.chainId&&Io.throwArgumentError("invalid network chainId","network",e),e;0!==e.chainId&&e.chainId!==t.chainId&&Io.throwArgumentError("network chainId mismatch","network",e);let r=e._defaultProvider||null;var n;return null==r&&t._defaultProvider&&(r=(n=t._defaultProvider)&&"function"==typeof n.renetwork?t._defaultProvider.renetwork(e):t._defaultProvider),{name:e.name,chainId:t.chainId,ensAddress:e.ensAddress||t.ensAddress||null,_defaultProvider:r}}function Lo(e){e=atob(e);const t=[];for(let r=0;r<e.length;r++)t.push(e.charCodeAt(r));return S(t)}function Bo(e){e=S(e);let t="";for(let r=0;r<e.length;r++)t+=String.fromCharCode(e[r]);return btoa(t)}function Uo(e,t){null==t&&(t=1);const r=[],n=r.forEach,i=function(e,t){n.call(e,(function(e){t>0&&Array.isArray(e)?i(e,t-1):r.push(e)}))};return i(e,t),r}function Do(e){return 1&e?~e>>1:e>>1}function jo(e,t){let r=Array(e);for(let n=0,i=-1;n<e;n++)r[n]=i+=1+t();return r}function Fo(e,t){let r=Array(e);for(let n=0,i=0;n<e;n++)r[n]=i+=Do(t());return r}function zo(e,t){let r=jo(e(),e),n=e(),i=jo(n,e),o=function(e,t){let r=Array(e);for(let n=0;n<e;n++)r[n]=1+t();return r}(n,e);for(let e=0;e<n;e++)for(let t=0;t<o[e];t++)r.push(i[e]+t);return t?r.map((e=>t[e])):r}function qo(e,t,r){let n=Array(e).fill(void 0).map((()=>[]));for(let i=0;i<t;i++)Fo(e,r).forEach(((e,t)=>n[t].push(e)));return n}function Go(e,t){let r=1+t(),n=t(),i=function(e){let t=[];for(;;){let r=e();if(0==r)break;t.push(r)}return t}(t);return Uo(qo(i.length,1+e,t).map(((e,t)=>{const o=e[0],s=e.slice(1);return Array(i[t]).fill(void 0).map(((e,t)=>{let i=t*n;return[o+t*r,s.map((e=>e+i))]}))})))}function Ho(e,t){return qo(1+t(),1+e,t).map((e=>[e[0],e.slice(1)]))}const Ko=function(e){let t=0;return()=>e[t++]}(function(e){let t=0;function r(){return e[t++]<<8|e[t++]}let n=r(),i=1,o=[0,1];for(let e=1;e<n;e++)o.push(i+=r());let s=r(),a=t;t+=s;let c=0,u=0;function l(){return 0==c&&(u=u<<8|e[t++],c=8),u>>--c&1}const h=Math.pow(2,31),f=h>>>1,d=f>>1,p=h-1;let g=0;for(let e=0;e<31;e++)g=g<<1|l();let m=[],y=0,v=h;for(;;){let e=Math.floor(((g-y+1)*i-1)/v),t=0,r=n;for(;r-t>1;){let n=t+r>>>1;e<o[n]?r=n:t=n}if(0==t)break;m.push(t);let s=y+Math.floor(v*o[t]/i),a=y+Math.floor(v*o[t+1]/i)-1;for(;!((s^a)&f);)g=g<<1&p|l(),s=s<<1&p,a=a<<1&p|1;for(;s&~a&d;)g=g&f|g<<1&p>>>1|l(),s=s<<1^f,a=(a^f)<<1|f|1;y=s,v=1+a-s}let b=n-4;return m.map((t=>{switch(t-b){case 3:return b+65792+(e[a++]<<16|e[a++]<<8|e[a++]);case 2:return b+256+(e[a++]<<8|e[a++]);case 1:return b+e[a++];default:return t-1}}))}(Lo("AEQF2AO2DEsA2wIrAGsBRABxAN8AZwCcAEwAqgA0AGwAUgByADcATAAVAFYAIQAyACEAKAAYAFgAGwAjABQAMAAmADIAFAAfABQAKwATACoADgAbAA8AHQAYABoAGQAxADgALAAoADwAEwA9ABMAGgARAA4ADwAWABMAFgAIAA8AHgQXBYMA5BHJAS8JtAYoAe4AExozi0UAH21tAaMnBT8CrnIyhrMDhRgDygIBUAEHcoFHUPe8AXBjAewCjgDQR8IICIcEcQLwATXCDgzvHwBmBoHNAqsBdBcUAykgDhAMShskMgo8AY8jqAQfAUAfHw8BDw87MioGlCIPBwZCa4ELatMAAMspJVgsDl8AIhckSg8XAHdvTwBcIQEiDT4OPhUqbyECAEoAS34Aej8Ybx83JgT/Xw8gHxZ/7w8RICxPHA9vBw+Pfw8PHwAPFv+fAsAvCc8vEr8ivwD/EQ8Bol8OEBa/A78hrwAPCU8vESNvvwWfHwNfAVoDHr+ZAAED34YaAdJPAK7PLwSEgDLHAGo1Pz8Pvx9fUwMrpb8O/58VTzAPIBoXIyQJNF8hpwIVAT8YGAUADDNBaX3RAMomJCg9EhUeA29MABsZBTMNJipjOhc19gcIDR8bBwQHEggCWi6DIgLuAQYA+BAFCha3A5XiAEsqM7UFFgFLhAMjFTMYE1Klnw74nRVBG/ASCm0BYRN/BrsU3VoWy+S0vV8LQx+vN8gF2AC2AK5EAWwApgYDKmAAroQ0NDQ0AT+OCg7wAAIHRAbpNgVcBV0APTA5BfbPFgMLzcYL/QqqA82eBALKCjQCjqYCht0/k2+OAsXQAoP3ASTKDgDw6ACKAUYCMpIKJpRaAE4A5womABzZvs0REEKiACIQAd5QdAECAj4Ywg/wGqY2AVgAYADYvAoCGAEubA0gvAY2ALAAbpbvqpyEAGAEpgQAJgAG7gAgAEACmghUFwCqAMpAINQIwC4DthRAAPcycKgApoIdABwBfCisABoATwBqASIAvhnSBP8aH/ECeAKXAq40NjgDBTwFYQU6AXs3oABgAD4XNgmcCY1eCl5tIFZeUqGgyoNHABgAEQAaABNwWQAmABMATPMa3T34ADldyprmM1M2XociUQgLzvwAXT3xABgAEQAaABNwIGFAnADD8AAgAD4BBJWzaCcIAIEBFMAWwKoAAdq9BWAF5wLQpALEtQAKUSGkahR4GnJM+gsAwCgeFAiUAECQ0BQuL8AAIAAAADKeIheclvFqQAAETr4iAMxIARMgAMIoHhQIAn0E0pDQFC4HhznoAAAAIAI2C0/4lvFqQAAETgBJJwYCAy4ABgYAFAA8MBKYEH4eRhTkAjYeFcgACAYAeABsOqyQ5gRwDayqugEgaIIAtgoACgDmEABmBAWGme5OBJJA2m4cDeoAmITWAXwrMgOgAGwBCh6CBXYF1Tzg1wKAAFdiuABRAFwAXQBsAG8AdgBrAHYAbwCEAHEwfxQBVE5TEQADVFhTBwBDANILAqcCzgLTApQCrQL6vAAMAL8APLhNBKkE6glGKTAU4Dr4N2EYEwBCkABKk8rHAbYBmwIoAiU4Ajf/Aq4CowCAANIChzgaNBsCsTgeODcFXrgClQKdAqQBiQGYAqsCsjTsNHsfNPA0ixsAWTWiOAMFPDQSNCk2BDZHNow2TTZUNhk28Jk9VzI3QkEoAoICoQKwAqcAQAAxBV4FXbS9BW47YkIXP1ciUqs05DS/FwABUwJW11e6nHuYZmSh/RAYA8oMKvZ8KASoUAJYWAJ6ILAsAZSoqjpgA0ocBIhmDgDWAAawRDQoAAcuAj5iAHABZiR2AIgiHgCaAU68ACxuHAG0ygM8MiZIAlgBdF4GagJqAPZOHAMuBgoATkYAsABiAHgAMLoGDPj0HpKEBAAOJgAuALggTAHWAeAMEDbd20Uege0ADwAWADkAQgA9OHd+2MUQZBBhBgNNDkxxPxUQArEPqwvqERoM1irQ090ANK4H8ANYB/ADWANYB/AH8ANYB/ADWANYA1gDWBwP8B/YxRBkD00EcgWTBZAE2wiIJk4RhgctCNdUEnQjHEwDSgEBIypJITuYMxAlR0wRTQgIATZHbKx9PQNMMbBU+pCnA9AyVDlxBgMedhKlAC8PeCE1uk6DekxxpQpQT7NX9wBFBgASqwAS5gBJDSgAUCwGPQBI4zTYABNGAE2bAE3KAExdGABKaAbgAFBXAFCOAFBJABI2SWdObALDOq0//QomCZhvwHdTBkIQHCemEPgMNAG2ATwN7kvZBPIGPATKH34ZGg/OlZ0Ipi3eDO4m5C6igFsj9iqEBe5L9TzeC05RaQ9aC2YJ5DpkgU8DIgEOIowK3g06CG4Q9ArKbA3mEUYHOgPWSZsApgcCCxIdNhW2JhFirQsKOXgG/Br3C5AmsBMqev0F1BoiBk4BKhsAANAu6IWxWjJcHU9gBgQLJiPIFKlQIQ0mQLh4SRocBxYlqgKSQ3FKiFE3HpQh9zw+DWcuFFF9B/Y8BhlQC4I8n0asRQ8R0z6OPUkiSkwtBDaALDAnjAnQD4YMunxzAVoJIgmyDHITMhEYN8YIOgcaLpclJxYIIkaWYJsE+KAD9BPSAwwFQAlCBxQDthwuEy8VKgUOgSXYAvQ21i60ApBWgQEYBcwPJh/gEFFH4Q7qCJwCZgOEJewALhUiABginAhEZABgj9lTBi7MCMhqbSN1A2gU6GIRdAeSDlgHqBw0FcAc4nDJXgyGCSiksAlcAXYJmgFgBOQICjVcjKEgQmdUi1kYnCBiQUBd/QIyDGYVoES+h3kCjA9sEhwBNgF0BzoNAgJ4Ee4RbBCWCOyGBTW2M/k6JgRQIYQgEgooA1BszwsoJvoM+WoBpBJjAw00PnfvZ6xgtyUX/gcaMsZBYSHyC5NPzgydGsIYQ1QvGeUHwAP0GvQn60FYBgADpAQUOk4z7wS+C2oIjAlAAEoOpBgH2BhrCnKM0QEyjAG4mgNYkoQCcJAGOAcMAGgMiAV65gAeAqgIpAAGANADWAA6Aq4HngAaAIZCAT4DKDABIuYCkAOUCDLMAZYwAfQqBBzEDBYA+DhuSwLDsgKAa2ajBd5ZAo8CSjYBTiYEBk9IUgOwcuIA3ABMBhTgSAEWrEvMG+REAeBwLADIAPwABjYHBkIBzgH0bgC4AWALMgmjtLYBTuoqAIQAFmwB2AKKAN4ANgCA8gFUAE4FWvoF1AJQSgESMhksWGIBvAMgATQBDgB6BsyOpsoIIARuB9QCEBwV4gLvLwe2AgMi4BPOQsYCvd9WADIXUu5eZwqoCqdeaAC0YTQHMnM9UQAPH6k+yAdy/BZIiQImSwBQ5gBQQzSaNTFWSTYBpwGqKQK38AFtqwBI/wK37gK3rQK3sAK6280C0gK33AK3zxAAUEIAUD9SklKDArekArw5AEQAzAHCO147WTteO1k7XjtZO147WTteO1kDmChYI03AVU0oJqkKbV9GYewMpw3VRMk6ShPcYFJgMxPJLbgUwhXPJVcZPhq9JwYl5VUKDwUt1GYxCC00dhe9AEApaYNCY4ceMQpMHOhTklT5LRwAskujM7ANrRsWREEFSHXuYisWDwojAmSCAmJDXE6wXDchAqH4AmiZAmYKAp+FOBwMAmY8AmYnBG8EgAN/FAN+kzkHOXgYOYM6JCQCbB4CMjc4CwJtyAJtr/CLADRoRiwBaADfAOIASwYHmQyOAP8MwwAOtgJ3MAJ2o0ACeUxEAni7Hl3cRa9G9AJ8QAJ6yQJ9CgJ88UgBSH5kJQAsFklZSlwWGErNAtECAtDNSygDiFADh+dExpEzAvKiXQQDA69Lz0wuJgTQTU1NsAKLQAKK2cIcCB5EaAa4Ao44Ao5dQZiCAo7aAo5deVG1UzYLUtVUhgKT/AKTDQDqAB1VH1WwVdEHLBwplocy4nhnRTw6ApegAu+zWCKpAFomApaQApZ9nQCqWa1aCoJOADwClrYClk9cRVzSApnMApllXMtdCBoCnJw5wzqeApwXAp+cAp65iwAeEDIrEAKd8gKekwC2PmE1YfACntQCoG8BqgKeoCACnk+mY8lkKCYsAiewAiZ/AqD8AqBN2AKmMAKlzwKoAAB+AqfzaH1osgAESmodatICrOQCrK8CrWgCrQMCVx4CVd0CseLYAx9PbJgCsr4OArLpGGzhbWRtSWADJc4Ctl08QG6RAylGArhfArlIFgK5K3hwN3DiAr0aAy2zAzISAr6JcgMDM3ICvhtzI3NQAsPMAsMFc4N0TDZGdOEDPKgDPJsDPcACxX0CxkgCxhGKAshqUgLIRQLJUALJLwJkngLd03h6YniveSZL0QMYpGcDAmH1GfSVJXsMXpNevBICz2wCz20wTFTT9BSgAMeuAs90ASrrA04TfkwGAtwoAtuLAtJQA1JdA1NgAQIDVY2AikABzBfuYUZ2AILPg44C2sgC2d+EEYRKpz0DhqYAMANkD4ZyWvoAVgLfZgLeuXR4AuIw7RUB8zEoAfScAfLTiALr9ALpcXoAAur6AurlAPpIAboC7ooC652Wq5cEAu5AA4XhmHpw4XGiAvMEAGoDjheZlAL3FAORbwOSiAL3mQL52gL4Z5odmqy8OJsfA52EAv77ARwAOp8dn7QDBY4DpmsDptoA0sYDBmuhiaIGCgMMSgFgASACtgNGAJwEgLpoBgC8BGzAEowcggCEDC6kdjoAJAM0C5IKRoABZCgiAIzw3AYBLACkfng9ogigkgNmWAN6AEQCvrkEVqTGAwCsBRbAA+4iQkMCHR072jI2PTbUNsk2RjY5NvA23TZKNiU3EDcZN5I+RTxDRTBCJkK5VBYKFhZfwQCWygU3AJBRHpu+OytgNxa61A40GMsYjsn7BVwFXQVcBV0FaAVdBVwFXQVcBV0FXAVdBVwFXUsaCNyKAK4AAQUHBwKU7oICoW1e7jAEzgPxA+YDwgCkBFDAwADABKzAAOxFLhitA1UFTDeyPkM+bj51QkRCuwTQWWQ8X+0AWBYzsACNA8xwzAGm7EZ/QisoCTAbLDs6fnLfb8H2GccsbgFw13M1HAVkBW/Jxsm9CNRO8E8FDD0FBQw9FkcClOYCoMFegpDfADgcMiA2AJQACB8AsigKAIzIEAJKeBIApY5yPZQIAKQiHb4fvj5BKSRPQrZCOz0oXyxgOywfKAnGbgMClQaCAkILXgdeCD9IIGUgQj5fPoY+dT52Ao5CM0dAX9BTVG9SDzFwWTQAbxBzJF/lOEIQQglCCkKJIAls5AcClQICoKPMODEFxhi6KSAbiyfIRrMjtCgdWCAkPlFBIitCsEJRzAbMAV/OEyQzDg0OAQQEJ36i328/Mk9AybDJsQlq3tDRApUKAkFzXf1d/j9uALYP6hCoFgCTGD8kPsFKQiobrm0+zj0KSD8kPnVCRBwMDyJRTHFgMTJa5rwXQiQ2YfI/JD7BMEJEHGINTw4TOFlIRzwJO0icMQpyPyQ+wzJCRBv6DVgnKB01NgUKj2bwYzMqCoBkznBgEF+zYDIocwRIX+NgHj4HICNfh2C4CwdwFWpTG/lgUhYGAwRfv2Ts8mAaXzVgml/XYIJfuWC4HI1gUF9pYJZgMR6ilQHMAOwLAlDRefC0in4AXAEJA6PjCwc0IamOANMMCAECRQDFNRTZBgd+CwQlRA+r6+gLBDEFBnwUBXgKATIArwAGRAAHA3cDdAN2A3kDdwN9A3oDdQN7A30DfAN4A3oDfQAYEAAlAtYASwMAUAFsAHcKAHcAmgB3AHUAdQB2AHVu8UgAygDAAHcAdQB1AHYAdQALCgB3AAsAmgB3AAsCOwB3AAtu8UgAygDAAHgKAJoAdwB3AHUAdQB2AHUAeAB1AHUAdgB1bvFIAMoAwAALCgCaAHcACwB3AAsCOwB3AAtu8UgAygDAAH4ACwGgALcBpwC6AahdAu0COwLtbvFIAMoAwAALCgCaAu0ACwLtAAsCOwLtAAtu8UgAygDAA24ACwNvAAu0VsQAAzsAABCkjUIpAAsAUIusOggWcgMeBxVsGwL67U/2HlzmWOEeOgALASvuAAseAfpKUpnpGgYJDCIZM6YyARUE9ThqAD5iXQgnAJYJPnOzw0ZAEZxEKsIAkA4DhAHnTAIDxxUDK0lxCQlPYgIvIQVYJQBVqE1GakUAKGYiDToSBA1EtAYAXQJYAIF8GgMHRyAAIAjOe9YncekRAA0KACUrjwE7Ayc6AAYWAqaiKG4McEcqANoN3+Mg9TwCBhIkuCny+JwUQ29L008JluRxu3K+oAdqiHOqFH0AG5SUIfUJ5SxCGfxdipRzqTmT4V5Zb+r1Uo4Vm+NqSSEl2mNvR2JhIa8SpYO6ntdwFXHCWTCK8f2+Hxo7uiG3drDycAuKIMP5bhi06ACnqArH1rz4Rqg//lm6SgJGEVbF9xJHISaR6HxqxSnkw6shDnelHKNEfGUXSJRJ1GcsmtJw25xrZMDK9gXSm1/YMkdX4/6NKYOdtk/NQ3/NnDASjTc3fPjIjW/5sVfVObX2oTDWkr1dF9f3kxBsD3/3aQO8hPfRz+e0uEiJqt1161griu7gz8hDDwtpy+F+BWtefnKHZPAxcZoWbnznhJpy0e842j36bcNzGnIEusgGX0a8ZxsnjcSsPDZ09yZ36fCQbriHeQ72JRMILNl6ePPf2HWoVwgWAm1fb3V2sAY0+B6rAXqSwPBgseVmoqsBTSrm91+XasMYYySI8eeRxH3ZvHkMz3BQ5aJ3iUVbYPNM3/7emRtjlsMgv/9VyTsyt/mK+8fgWeT6SoFaclXqn42dAIsvAarF5vNNWHzKSkKQ/8Hfk5ZWK7r9yliOsooyBjRhfkHP4Q2DkWXQi6FG/9r/IwbmkV5T7JSopHKn1pJwm9tb5Ot0oyN1Z2mPpKXHTxx2nlK08fKk1hEYA8WgVVWL5lgx0iTv+KdojJeU23ZDjmiubXOxVXJKKi2Wjuh2HLZOFLiSC7Tls5SMh4f+Pj6xUSrNjFqLGehRNB8lC0QSLNmkJJx/wSG3MnjE9T1CkPwJI0wH2lfzwETIiVqUxg0dfu5q39Gt+hwdcxkhhNvQ4TyrBceof3Mhs/IxFci1HmHr4FMZgXEEczPiGCx0HRwzAqDq2j9AVm1kwN0mRVLWLylgtoPNapF5cY4Y1wJh/e0BBwZj44YgZrDNqvD/9Hv7GFYdUQeDJuQ3EWI4HaKqavU1XjC/n41kT4L79kqGq0kLhdTZvgP3TA3fS0ozVz+5piZsoOtIvBUFoMKbNcmBL6YxxaUAusHB38XrS8dQMnQwJfUUkpRoGr5AUeWicvBTzyK9g77+yCkf5PAysL7r/JjcZgrbvRpMW9iyaxZvKO6ceZN2EwIxKwVFPuvFuiEPGCoagbMo+SpydLrXqBzNCDGFCrO/rkcwa2xhokQZ5CdZ0AsU3JfSqJ6n5I14YA+P/uAgfhPU84Tlw7cEFfp7AEE8ey4sP12PTt4Cods1GRgDOB5xvyiR5m+Bx8O5nBCNctU8BevfV5A08x6RHd5jcwPTMDSZJOedIZ1cGQ704lxbAzqZOP05ZxaOghzSdvFBHYqomATARyAADK4elP8Ly3IrUZKfWh23Xy20uBUmLS4Pfagu9+oyVa2iPgqRP3F2CTUsvJ7+RYnN8fFZbU/HVvxvcFFDKkiTqV5UBZ3Gz54JAKByi9hkKMZJvuGgcSYXFmw08UyoQyVdfTD1/dMkCHXcTGAKeROgArsvmRrQTLUOXioOHGK2QkjHuoYFgXciZoTJd6Fs5q1QX1G+p/e26hYsEf7QZD1nnIyl/SFkNtYYmmBhpBrxl9WbY0YpHWRuw2Ll/tj9mD8P4snVzJl4F9J+1arVeTb9E5r2ILH04qStjxQNwn3m4YNqxmaNbLAqW2TN6LidwuJRqS+NXbtqxoeDXpxeGWmxzSkWxjkyCkX4NQRme6q5SAcC+M7+9ETfA/EwrzQajKakCwYyeunP6ZFlxU2oMEn1Pz31zeStW74G406ZJFCl1wAXIoUKkWotYEpOuXB1uVNxJ63dpJEqfxBeptwIHNrPz8BllZoIcBoXwgfJ+8VAUnVPvRvexnw0Ma/WiGYuJO5y8QTvEYBigFmhUxY5RqzE8OcywN/8m4UYrlaniJO75XQ6KSo9+tWHlu+hMi0UVdiKQp7NelnoZUzNaIyBPVeOwK6GNp+FfHuPOoyhaWuNvTYFkvxscMQWDh+zeFCFkgwbXftiV23ywJ4+uwRqmg9k3KzwIQpzppt8DBBOMbrqwQM5Gb05sEwdKzMiAqOloaA/lr0KA+1pr0/+HiWoiIjHA/wir2nIuS3PeU/ji3O6ZwoxcR1SZ9FhtLC5S0FIzFhbBWcGVP/KpxOPSiUoAdWUpqKH++6Scz507iCcxYI6rdMBICPJZea7OcmeFw5mObJSiqpjg2UoWNIs+cFhyDSt6geV5qgi3FunmwwDoGSMgerFOZGX1m0dMCYo5XOruxO063dwENK9DbnVM9wYFREzh4vyU1WYYJ/LRRp6oxgjqP/X5a8/4Af6p6NWkQferzBmXme0zY/4nwMJm/wd1tIqSwGz+E3xPEAOoZlJit3XddD7/BT1pllzOx+8bmQtANQ/S6fZexc6qi3W+Q2xcmXTUhuS5mpHQRvcxZUN0S5+PL9lXWUAaRZhEH8hTdAcuNMMCuVNKTEGtSUKNi3O6KhSaTzck8csZ2vWRZ+d7mW8c4IKwXIYd25S/zIftPkwPzufjEvOHWVD1m+FjpDVUTV0DGDuHj6QnaEwLu/dEgdLQOg9E1Sro9XHJ8ykLAwtPu+pxqKDuFexqON1sKQm7rwbE1E68UCfA/erovrTCG+DBSNg0l4goDQvZN6uNlbyLpcZAwj2UclycvLpIZMgv4yRlpb3YuMftozorbcGVHt/VeDV3+Fdf1TP0iuaCsPi2G4XeGhsyF1ubVDxkoJhmniQ0/jSg/eYML9KLfnCFgISWkp91eauR3IQvED0nAPXK+6hPCYs+n3+hCZbiskmVMG2da+0EsZPonUeIY8EbfusQXjsK/eFDaosbPjEfQS0RKG7yj5GG69M7MeO1HmiUYocgygJHL6M1qzUDDwUSmr99V7Sdr2F3JjQAJY+F0yH33Iv3+C9M38eML7gTgmNu/r2bUMiPvpYbZ6v1/IaESirBHNa7mPKn4dEmYg7v/+HQgPN1G79jBQ1+soydfDC2r+h2Bl/KIc5KjMK7OH6nb1jLsNf0EHVe2KBiE51ox636uyG6Lho0t3J34L5QY/ilE3mikaF4HKXG1mG1rCevT1Vv6GavltxoQe/bMrpZvRggnBxSEPEeEzkEdOxTnPXHVjUYdw8JYvjB/o7Eegc3Ma+NUxLLnsK0kJlinPmUHzHGtrk5+CAbVzFOBqpyy3QVUnzTDfC/0XD94/okH+OB+i7g9lolhWIjSnfIb+Eq43ZXOWmwvjyV/qqD+t0e+7mTEM74qP/Ozt8nmC7mRpyu63OB4KnUzFc074SqoyPUAgM+/TJGFo6T44EHnQU4X4z6qannVqgw/U7zCpwcmXV1AubIrvOmkKHazJAR55ePjp5tLBsN8vAqs3NAHdcEHOR2xQ0lsNAFzSUuxFQCFYvXLZJdOj9p4fNq6p0HBGUik2YzaI4xySy91KzhQ0+q1hjxvImRwPRf76tChlRkhRCi74NXZ9qUNeIwP+s5p+3m5nwPdNOHgSLD79n7O9m1n1uDHiMntq4nkYwV5OZ1ENbXxFd4PgrlvavZsyUO4MqYlqqn1O8W/I1dEZq5dXhrbETLaZIbC2Kj/Aa/QM+fqUOHdf0tXAQ1huZ3cmWECWSXy/43j35+Mvq9xws7JKseriZ1pEWKc8qlzNrGPUGcVgOa9cPJYIJsGnJTAUsEcDOEVULO5x0rXBijc1lgXEzQQKhROf8zIV82w8eswc78YX11KYLWQRcgHNJElBxfXr72lS2RBSl07qTKorO2uUDZr3sFhYsvnhLZn0A94KRzJ/7DEGIAhW5ZWFpL8gEwu1aLA9MuWZzNwl8Oze9Y+bX+v9gywRVnoB5I/8kXTXU3141yRLYrIOOz6SOnyHNy4SieqzkBXharjfjqq1q6tklaEbA8Qfm2DaIPs7OTq/nvJBjKfO2H9bH2cCMh1+5gspfycu8f/cuuRmtDjyqZ7uCIMyjdV3a+p3fqmXsRx4C8lujezIFHnQiVTXLXuI1XrwN3+siYYj2HHTvESUx8DlOTXpak9qFRK+L3mgJ1WsD7F4cu1aJoFoYQnu+wGDMOjJM3kiBQWHCcvhJ/HRdxodOQp45YZaOTA22Nb4XKCVxqkbwMYFhzYQYIAnCW8FW14uf98jhUG2zrKhQQ0q0CEq0t5nXyvUyvR8DvD69LU+g3i+HFWQMQ8PqZuHD+sNKAV0+M6EJC0szq7rEr7B5bQ8BcNHzvDMc9eqB5ZCQdTf80Obn4uzjwpYU7SISdtV0QGa9D3Wrh2BDQtpBKxaNFV+/Cy2P/Sv+8s7Ud0Fd74X4+o/TNztWgETUapy+majNQ68Lq3ee0ZO48VEbTZYiH1Co4OlfWef82RWeyUXo7woM03PyapGfikTnQinoNq5z5veLpeMV3HCAMTaZmA1oGLAn7XS3XYsz+XK7VMQsc4XKrmDXOLU/pSXVNUq8dIqTba///3x6LiLS6xs1xuCAYSfcQ3+rQgmu7uvf3THKt5Ooo97TqcbRqxx7EASizaQCBQllG/rYxVapMLgtLbZS64w1MDBMXX+PQpBKNwqUKOf2DDRDUXQf9EhOS0Qj4nTmlA8dzSLz/G1d+Ud8MTy/6ghhdiLpeerGY/UlDOfiuqFsMUU5/UYlP+BAmgRLuNpvrUaLlVkrqDievNVEAwF+4CoM1MZTmjxjJMsKJq+u8Zd7tNCUFy6LiyYXRJQ4VyvEQFFaCGKsxIwQkk7EzZ6LTJq2hUuPhvAW+gQnSG6J+MszC+7QCRHcnqDdyNRJ6T9xyS87A6MDutbzKGvGktpbXqtzWtXb9HsfK2cBMomjN9a4y+TaJLnXxAeX/HWzmf4cR4vALt/P4w4qgKY04ml4ZdLOinFYS6cup3G/1ie4+t1eOnpBNlqGqs75ilzkT4+DsZQxNvaSKJ//6zIbbk/M7LOhFmRc/1R+kBtz7JFGdZm/COotIdvQoXpTqP/1uqEUmCb/QWoGLMwO5ANcHzxdY48IGP5+J+zKOTBFZ4Pid+GTM+Wq12MV/H86xEJptBa6T+p3kgpwLedManBHC2GgNrFpoN2xnrMz9WFWX/8/ygSBkavq2Uv7FdCsLEYLu9LLIvAU0bNRDtzYl+/vXmjpIvuJFYjmI0im6QEYqnIeMsNjXG4vIutIGHijeAG/9EDBozKV5cldkHbLxHh25vT+ZEzbhXlqvpzKJwcEgfNwLAKFeo0/pvEE10XDB+EXRTXtSzJozQKFFAJhMxYkVaCW+E9AL7tMeU8acxidHqzb6lX4691UsDpy/LLRmT+epgW56+5Cw8tB4kMUv6s9lh3eRKbyGs+H/4mQMaYzPTf2OOdokEn+zzgvoD3FqNKk8QqGAXVsqcGdXrT62fSPkR2vROFi68A6se86UxRUk4cajfPyCC4G5wDhD+zNq4jodQ4u4n/m37Lr36n4LIAAsVr02dFi9AiwA81MYs2rm4eDlDNmdMRvEKRHfBwW5DdMNp0jPFZMeARqF/wL4XBfd+EMLBfMzpH5GH6NaW+1vrvMdg+VxDzatk3MXgO3ro3P/DpcC6+Mo4MySJhKJhSR01SGGGp5hPWmrrUgrv3lDnP+HhcI3nt3YqBoVAVTBAQT5iuhTg8nvPtd8ZeYj6w1x6RqGUBrSku7+N1+BaasZvjTk64RoIDlL8brpEcJx3OmY7jLoZsswdtmhfC/G21llXhITOwmvRDDeTTPbyASOa16cF5/A1fZAidJpqju3wYAy9avPR1ya6eNp9K8XYrrtuxlqi+bDKwlfrYdR0RRiKRVTLOH85+ZY7XSmzRpfZBJjaTa81VDcJHpZnZnSQLASGYW9l51ZV/h7eVzTi3Hv6hUsgc/51AqJRTkpbFVLXXszoBL8nBX0u/0jBLT8nH+fJePbrwURT58OY+UieRjd1vs04w0VG5VN2U6MoGZkQzKN/ptz0Q366dxoTGmj7i1NQGHi9GgnquXFYdrCfZBmeb7s0T6yrdlZH5cZuwHFyIJ/kAtGsTg0xH5taAAq44BAk1CPk9KVVbqQzrCUiFdF/6gtlPQ8bHHc1G1W92MXGZ5HEHftyLYs8mbD/9xYRUWkHmlM0zC2ilJlnNgV4bfALpQghxOUoZL7VTqtCHIaQSXm+YUMnpkXybnV+A6xlm2CVy8fn0Xlm2XRa0+zzOa21JWWmixfiPMSCZ7qA4rS93VN3pkpF1s5TonQjisHf7iU9ZGvUPOAKZcR1pbeVf/Ul7OhepGCaId9wOtqo7pJ7yLcBZ0pFkOF28y4zEI/kcUNmutBHaQpBdNM8vjCS6HZRokkeo88TBAjGyG7SR+6vUgTcyK9Imalj0kuxz0wmK+byQU11AiJFk/ya5dNduRClcnU64yGu/ieWSeOos1t3ep+RPIWQ2pyTYVbZltTbsb7NiwSi3AV+8KLWk7LxCnfZUetEM8ThnsSoGH38/nyAwFguJp8FjvlHtcWZuU4hPva0rHfr0UhOOJ/F6vS62FW7KzkmRll2HEc7oUq4fyi5T70Vl7YVIfsPHUCdHesf9Lk7WNVWO75JDkYbMI8TOW8JKVtLY9d6UJRITO8oKo0xS+o99Yy04iniGHAaGj88kEWgwv0OrHdY/nr76DOGNS59hXCGXzTKUvDl9iKpLSWYN1lxIeyywdNpTkhay74w2jFT6NS8qkjo5CxA1yfSYwp6AJIZNKIeEK5PJAW7ORgWgwp0VgzYpqovMrWxbu+DGZ6Lhie1RAqpzm8VUzKJOH3mCzWuTOLsN3VT/dv2eeYe9UjbR8YTBsLz7q60VN1sU51k+um1f8JxD5pPhbhSC8rRaB454tmh6YUWrJI3+GWY0qeWioj/tbkYITOkJaeuGt4JrJvHA+l0Gu7kY7XOaa05alMnRWVCXqFgLIwSY4uF59Ue5SU4QKuc/HamDxbr0x6csCetXGoP7Qn1Bk/J9DsynO/UD6iZ1Hyrz+jit0hDCwi/E9OjgKTbB3ZQKQ/0ZOvevfNHG0NK4Aj3Cp7NpRk07RT1i/S0EL93Ag8GRgKI9CfpajKyK6+Jj/PI1KO5/85VAwz2AwzP8FTBb075IxCXv6T9RVvWT2tUaqxDS92zrGUbWzUYk9mSs82pECH+fkqsDt93VW++4YsR/dHCYcQSYTO/KaBMDj9LSD/J/+z20Kq8XvZUAIHtm9hRPP3ItbuAu2Hm5lkPs92pd7kCxgRs0xOVBnZ13ccdA0aunrwv9SdqElJRC3g+oCu+nXyCgmXUs9yMjTMAIHfxZV+aPKcZeUBWt057Xo85Ks1Ir5gzEHCWqZEhrLZMuF11ziGtFQUds/EESajhagzcKsxamcSZxGth4UII+adPhQkUnx2WyN+4YWR+r3f8MnkyGFuR4zjzxJS8WsQYR5PTyRaD9ixa6Mh741nBHbzfjXHskGDq179xaRNrCIB1z1xRfWfjqw2pHc1zk9xlPpL8sQWAIuETZZhbnmL54rceXVNRvUiKrrqIkeogsl0XXb17ylNb0f4GA9Wd44vffEG8FSZGHEL2fbaTGRcSiCeA8PmA/f6Hz8HCS76fXUHwgwkzSwlI71ekZ7Fapmlk/KC+Hs8hUcw3N2LN5LhkVYyizYFl/uPeVP5lsoJHhhfWvvSWruCUW1ZcJOeuTbrDgywJ/qG07gZJplnTvLcYdNaH0KMYOYMGX+rB4NGPFmQsNaIwlWrfCezxre8zXBrsMT+edVLbLqN1BqB76JH4BvZTqUIMfGwPGEn+EnmTV86fPBaYbFL3DFEhjB45CewkXEAtJxk4/Ms2pPXnaRqdky0HOYdcUcE2zcXq4vaIvW2/v0nHFJH2XXe22ueDmq/18XGtELSq85j9X8q0tcNSSKJIX8FTuJF/Pf8j5PhqG2u+osvsLxYrvvfeVJL+4tkcXcr9JV7v0ERmj/X6fM3NC4j6dS1+9Umr2oPavqiAydTZPLMNRGY23LO9zAVDly7jD+70G5TPPLdhRIl4WxcYjLnM+SNcJ26FOrkrISUtPObIz5Zb3AG612krnpy15RMW+1cQjlnWFI6538qky9axd2oJmHIHP08KyP0ubGO+TQNOYuv2uh17yCIvR8VcStw7o1g0NM60sk+8Tq7YfIBJrtp53GkvzXH7OA0p8/n/u1satf/VJhtR1l8Wa6Gmaug7haSpaCaYQax6ta0mkutlb+eAOSG1aobM81D9A4iS1RRlzBBoVX6tU1S6WE2N9ORY6DfeLRC4l9Rvr5h95XDWB2mR1d4WFudpsgVYwiTwT31ljskD8ZyDOlm5DkGh9N/UB/0AI5Xvb8ZBmai2hQ4BWMqFwYnzxwB26YHSOv9WgY3JXnvoN+2R4rqGVh/LLDMtpFP+SpMGJNWvbIl5SOodbCczW2RKleksPoUeGEzrjtKHVdtZA+kfqO+rVx/iclCqwoopepvJpSTDjT+b9GWylGRF8EDbGlw6eUzmJM95Ovoz+kwLX3c2fTjFeYEsE7vUZm3mqdGJuKh2w9/QGSaqRHs99aScGOdDqkFcACoqdbBoQqqjamhH6Q9ng39JCg3lrGJwd50Qk9ovnqBTr8MME7Ps2wiVfygUmPoUBJJfJWX5Nda0nuncbFkA=="))),Vo=new Set(zo(Ko)),Wo=new Set(zo(Ko)),$o=function(e){let t=[];for(;;){let r=e();if(0==r)break;t.push(Go(r,e))}for(;;){let r=e()-1;if(r<0)break;t.push(Ho(r,e))}return function(e){const t={};for(let r=0;r<e.length;r++){const n=e[r];t[n[0]]=n[1]}return t}(Uo(t))}(Ko),Jo=function(e){let t=zo(e).sort(((e,t)=>e-t));return function r(){let n=[];for(;;){let i=zo(e,t);if(0==i.length)break;n.push({set:new Set(i),node:r()})}n.sort(((e,t)=>t.set.size-e.set.size));let i=e(),o=i%3;i=i/3|0;let s=!!(1&i);return i>>=1,{branches:n,valid:o,fe0f:s,save:1==i,check:2==i}}()}(Ko),Yo=45,Qo=95;function Xo(e){return Ye(e)}function Zo(e){return e.filter((e=>65039!=e))}function es(e){for(let t of e.split(".")){let e=Xo(t);try{for(let t=e.lastIndexOf(Qo)-1;t>=0;t--)if(e[t]!==Qo)throw new Error("underscore only allowed at start");if(e.length>=4&&e.every((e=>e<128))&&e[2]===Yo&&e[3]===Yo)throw new Error("invalid label extension")}catch(e){throw new Error(`Invalid label "${t}": ${e.message}`)}}return e}function ts(e,t){var r;let n,i,o=Jo,s=[],a=e.length;for(t&&(t.length=0);a;){let c=e[--a];if(o=null===(r=o.branches.find((e=>e.set.has(c))))||void 0===r?void 0:r.node,!o)break;if(o.save)i=c;else if(o.check&&c===i)break;s.push(c),o.fe0f&&(s.push(65039),a>0&&65039==e[a-1]&&a--),o.valid&&(n=s.slice(),2==o.valid&&n.splice(1,1),t&&t.push(...e.slice(a).reverse()),e.length=a)}return n}const rs=new v(Qn),ns=new Uint8Array(32);function is(e){if(0===e.length)throw new Error("invalid ENS name; empty component");return e}function os(e){const t=Ke(function(e){return es(function(e,t){let r=Xo(e).reverse(),n=[];for(;r.length;){let e=ts(r);if(e){n.push(...t(e));continue}let i=r.pop();if(Vo.has(i)){n.push(i);continue}if(Wo.has(i))continue;let o=$o[i];if(!o)throw new Error(`Disallowed codepoint: 0x${i.toString(16).toUpperCase()}`);n.push(...o)}return es(String.fromCodePoint(...n).normalize("NFC"))}(e,Zo))}(e)),r=[];if(0===e.length)return r;let n=0;for(let e=0;e<t.length;e++)46===t[e]&&(r.push(is(t.slice(n,e))),n=e+1);if(n>=t.length)throw new Error("invalid ENS name; empty component");return r.push(is(t.slice(n))),r}function ss(e){try{return 0!==os(e).length}catch(e){}return!1}function as(e){"string"!=typeof e&&rs.throwArgumentError("invalid ENS name; not a string","name",e);let t=ns;const r=os(e);for(;r.length;)t=be(k([t,be(r.pop())]));return R(t)}function cs(e){return R(k(os(e).map((e=>{if(e.length>63)throw new Error("invalid DNS encoded entry; length exceeds 63 bytes");const t=new Uint8Array(e.length+1);return t.set(e,1),t[0]=t.length-1,t}))))+"00"}ns.fill(0);var us=function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function s(e){try{c(n.next(e))}catch(e){o(e)}}function a(e){try{c(n.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))};function ls(e,t){return us(this,void 0,void 0,(function*(){null==t&&(t={});const r={method:t.method||"GET",headers:t.headers||{},body:t.body||void 0};if(!0!==t.skipFetchSetup&&(r.mode="cors",r.cache="no-cache",r.credentials="same-origin",r.redirect="follow",r.referrer="client"),null!=t.fetchOptions){const e=t.fetchOptions;e.mode&&(r.mode=e.mode),e.cache&&(r.cache=e.cache),e.credentials&&(r.credentials=e.credentials),e.redirect&&(r.redirect=e.redirect),e.referrer&&(r.referrer=e.referrer)}const n=yield fetch(e,r),i=yield n.arrayBuffer(),o={};return n.headers.forEach?n.headers.forEach(((e,t)=>{o[t.toLowerCase()]=e})):n.headers.keys().forEach((e=>{o[e.toLowerCase()]=n.headers.get(e)})),{headers:o,statusCode:n.status,statusMessage:n.statusText,body:S(new Uint8Array(i))}}))}var hs=function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function s(e){try{c(n.next(e))}catch(e){o(e)}}function a(e){try{c(n.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))};const fs=new v("web/5.8.0");function ds(e){return new Promise((t=>{setTimeout(t,e)}))}function ps(e,t){if(null==e)return null;if("string"==typeof e)return e;if(A(e)){if(t&&("text"===t.split("/")[0]||"application/json"===t.split(";")[0].trim()))try{return Je(e)}catch(e){}return R(e)}return e}function gs(e,t,r){const n="object"==typeof e&&null!=e.throttleLimit?e.throttleLimit:12;fs.assertArgument(n>0&&n%1==0,"invalid connection throttle limit","connection.throttleLimit",n);const i="object"==typeof e?e.throttleCallback:null,o="object"==typeof e&&"number"==typeof e.throttleSlotInterval?e.throttleSlotInterval:100;fs.assertArgument(o>0&&o%1==0,"invalid connection throttle slot interval","connection.throttleSlotInterval",o);const s="object"==typeof e&&!!e.errorPassThrough,a={};let c=null;const u={method:"GET"};let l=!1,h=12e4;if("string"==typeof e)c=e;else if("object"==typeof e){if(null!=e&&null!=e.url||fs.throwArgumentError("missing URL","connection.url",e),c=e.url,"number"==typeof e.timeout&&e.timeout>0&&(h=e.timeout),e.headers)for(const t in e.headers)a[t.toLowerCase()]={key:t,value:String(e.headers[t])},["if-none-match","if-modified-since"].indexOf(t.toLowerCase())>=0&&(l=!0);if(u.allowGzip=!!e.allowGzip,null!=e.user&&null!=e.password){"https:"!==c.substring(0,6)&&!0!==e.allowInsecureAuthentication&&fs.throwError("basic authentication requires a secure https url",v.errors.INVALID_ARGUMENT,{argument:"url",url:c,user:e.user,password:"[REDACTED]"});const t=e.user+":"+e.password;a.authorization={key:"Authorization",value:"Basic "+Bo(Ke(t))}}null!=e.skipFetchSetup&&(u.skipFetchSetup=!!e.skipFetchSetup),null!=e.fetchOptions&&(u.fetchOptions=oe(e.fetchOptions))}const f=new RegExp("^data:([^;:]*)?(;base64)?,(.*)$","i"),d=c?c.match(f):null;if(d)try{const e={statusCode:200,statusMessage:"OK",headers:{"content-type":d[1]||"text/plain"},body:d[2]?Lo(d[3]):(p=d[3],Ke(p.replace(/%([0-9a-f][0-9a-f])/gi,((e,t)=>String.fromCharCode(parseInt(t,16))))))};let t=e.body;return r&&(t=r(e.body,e)),Promise.resolve(t)}catch(e){fs.throwError("processing response error",v.errors.SERVER_ERROR,{body:ps(d[1],d[2]),error:e,requestBody:null,requestMethod:"GET",url:c})}var p;t&&(u.method="POST",u.body=t,null==a["content-type"]&&(a["content-type"]={key:"Content-Type",value:"application/octet-stream"}),null==a["content-length"]&&(a["content-length"]={key:"Content-Length",value:String(t.length)}));const g={};Object.keys(a).forEach((e=>{const t=a[e];g[t.key]=t.value})),u.headers=g;const m=function(){let e=null;return{promise:new Promise((function(t,r){h&&(e=setTimeout((()=>{null!=e&&(e=null,r(fs.makeError("timeout",v.errors.TIMEOUT,{requestBody:ps(u.body,g["content-type"]),requestMethod:u.method,timeout:h,url:c})))}),h))})),cancel:function(){null!=e&&(clearTimeout(e),e=null)}}}(),y=function(){return hs(this,void 0,void 0,(function*(){for(let e=0;e<n;e++){let t=null;try{if(t=yield ls(c,u),e<n)if(301===t.statusCode||302===t.statusCode){const e=t.headers.location||"";if("GET"===u.method&&e.match(/^https:/)){c=t.headers.location;continue}}else if(429===t.statusCode){let r=!0;if(i&&(r=yield i(e,c)),r){let r=0;const n=t.headers["retry-after"];r="string"==typeof n&&n.match(/^[1-9][0-9]*$/)?1e3*parseInt(n):o*parseInt(String(Math.random()*Math.pow(2,e))),yield ds(r);continue}}}catch(e){t=e.response,null==t&&(m.cancel(),fs.throwError("missing response",v.errors.SERVER_ERROR,{requestBody:ps(u.body,g["content-type"]),requestMethod:u.method,serverError:e,url:c}))}let a=t.body;if(l&&304===t.statusCode?a=null:!s&&(t.statusCode<200||t.statusCode>=300)&&(m.cancel(),fs.throwError("bad response",v.errors.SERVER_ERROR,{status:t.statusCode,headers:t.headers,body:ps(a,t.headers?t.headers["content-type"]:null),requestBody:ps(u.body,g["content-type"]),requestMethod:u.method,url:c})),r)try{const e=yield r(a,t);return m.cancel(),e}catch(r){if(r.throttleRetry&&e<n){let t=!0;if(i&&(t=yield i(e,c)),t){const t=o*parseInt(String(Math.random()*Math.pow(2,e)));yield ds(t);continue}}m.cancel(),fs.throwError("processing response error",v.errors.SERVER_ERROR,{body:ps(a,t.headers?t.headers["content-type"]:null),error:r,requestBody:ps(u.body,g["content-type"]),requestMethod:u.method,url:c})}return m.cancel(),a}return fs.throwError("failed response",v.errors.SERVER_ERROR,{requestBody:ps(u.body,g["content-type"]),requestMethod:u.method,url:c})}))}();return Promise.race([m.promise,y])}function ms(e,t,r){let n=null;if(null!=t){n=Ke(t);const r="string"==typeof e?{url:e}:oe(e);r.headers?0!==Object.keys(r.headers).filter((e=>"content-type"===e.toLowerCase())).length||(r.headers=oe(r.headers),r.headers["content-type"]="application/json"):r.headers={"content-type":"application/json"},e=r}return gs(e,n,((e,t)=>{let n=null;if(null!=e)try{n=JSON.parse(Je(e))}catch(t){fs.throwError("invalid JSON",v.errors.SERVER_ERROR,{body:e,error:t})}return r&&(n=r(n,t)),n}))}function ys(e,t){return t||(t={}),null==(t=oe(t)).floor&&(t.floor=0),null==t.ceiling&&(t.ceiling=1e4),null==t.interval&&(t.interval=250),new Promise((function(r,n){let i=null,o=!1;const s=()=>!o&&(o=!0,i&&clearTimeout(i),!0);t.timeout&&(i=setTimeout((()=>{s()&&n(new Error("timeout"))}),t.timeout));const a=t.retryLimit;let c=0;!function i(){return e().then((function(e){if(void 0!==e)s()&&r(e);else if(t.oncePoll)t.oncePoll.once("poll",i);else if(t.onceBlock)t.onceBlock.once("block",i);else if(!o){if(c++,c>a)return void(s()&&n(new Error("retry limit reached")));let e=t.interval*parseInt(String(Math.random()*Math.pow(2,c)));e<t.floor&&(e=t.floor),e>t.ceiling&&(e=t.ceiling),setTimeout(i,e)}return null}),(function(e){s()&&n(e)}))}()}))}var vs=r(9674),bs=r.n(vs);const ws="providers/5.8.0",Es=new v(ws);class As{constructor(){this.formats=this.getDefaultFormats()}getDefaultFormats(){const e={},t=this.address.bind(this),r=this.bigNumber.bind(this),n=this.blockTag.bind(this),i=this.data.bind(this),o=this.hash.bind(this),s=this.hex.bind(this),a=this.number.bind(this),c=this.type.bind(this);return e.transaction={hash:o,type:c,accessList:As.allowNull(this.accessList.bind(this),null),blockHash:As.allowNull(o,null),blockNumber:As.allowNull(a,null),transactionIndex:As.allowNull(a,null),confirmations:As.allowNull(a,null),from:t,gasPrice:As.allowNull(r),maxPriorityFeePerGas:As.allowNull(r),maxFeePerGas:As.allowNull(r),gasLimit:r,to:As.allowNull(t,null),value:r,nonce:a,data:i,r:As.allowNull(this.uint256),s:As.allowNull(this.uint256),v:As.allowNull(a),creates:As.allowNull(t,null),raw:As.allowNull(i)},e.transactionRequest={from:As.allowNull(t),nonce:As.allowNull(a),gasLimit:As.allowNull(r),gasPrice:As.allowNull(r),maxPriorityFeePerGas:As.allowNull(r),maxFeePerGas:As.allowNull(r),to:As.allowNull(t),value:As.allowNull(r),data:As.allowNull((e=>this.data(e,!0))),type:As.allowNull(a),accessList:As.allowNull(this.accessList.bind(this),null)},e.receiptLog={transactionIndex:a,blockNumber:a,transactionHash:o,address:t,topics:As.arrayOf(o),data:i,logIndex:a,blockHash:o},e.receipt={to:As.allowNull(this.address,null),from:As.allowNull(this.address,null),contractAddress:As.allowNull(t,null),transactionIndex:a,root:As.allowNull(s),gasUsed:r,logsBloom:As.allowNull(i),blockHash:o,transactionHash:o,logs:As.arrayOf(this.receiptLog.bind(this)),blockNumber:a,confirmations:As.allowNull(a,null),cumulativeGasUsed:r,effectiveGasPrice:As.allowNull(r),status:As.allowNull(a),type:c},e.block={hash:As.allowNull(o),parentHash:o,number:a,timestamp:a,nonce:As.allowNull(s),difficulty:this.difficulty.bind(this),gasLimit:r,gasUsed:r,miner:As.allowNull(t),extraData:i,transactions:As.allowNull(As.arrayOf(o)),baseFeePerGas:As.allowNull(r)},e.blockWithTransactions=oe(e.block),e.blockWithTransactions.transactions=As.allowNull(As.arrayOf(this.transactionResponse.bind(this))),e.filter={fromBlock:As.allowNull(n,void 0),toBlock:As.allowNull(n,void 0),blockHash:As.allowNull(o,void 0),address:As.allowNull(t,void 0),topics:As.allowNull(this.topics.bind(this),void 0)},e.filterLog={blockNumber:As.allowNull(a),blockHash:As.allowNull(o),transactionIndex:a,removed:As.allowNull(this.boolean.bind(this)),address:t,data:As.allowFalsish(i,"0x"),topics:As.arrayOf(o),transactionHash:o,logIndex:a},e}accessList(e){return fn(e||[])}number(e){return"0x"===e?0:$.from(e).toNumber()}type(e){return"0x"===e||null==e?0:$.from(e).toNumber()}bigNumber(e){return $.from(e)}boolean(e){if("boolean"==typeof e)return e;if("string"==typeof e){if("true"===(e=e.toLowerCase()))return!0;if("false"===e)return!1}throw new Error("invalid boolean - "+e)}hex(e,t){return"string"==typeof e&&(t||"0x"===e.substring(0,2)||(e="0x"+e),T(e))?e.toLowerCase():Es.throwArgumentError("invalid hash","value",e)}data(e,t){const r=this.hex(e,t);if(r.length%2!=0)throw new Error("invalid data; odd-length - "+e);return r}address(e){return Me(e)}callAddress(e){if(!T(e,32))return null;const t=Me(C(e,12));return t===xo?null:t}contractAddress(e){return Ue(e)}blockTag(e){if(null==e)return"latest";if("earliest"===e)return"0x0";switch(e){case"earliest":return"0x0";case"latest":case"pending":case"safe":case"finalized":return e}if("number"==typeof e||T(e))return L(e);throw new Error("invalid blockTag")}hash(e,t){const r=this.hex(e,t);return 32!==N(r)?Es.throwArgumentError("invalid hash","value",e):r}difficulty(e){if(null==e)return null;const t=$.from(e);try{return t.toNumber()}catch(e){}return null}uint256(e){if(!T(e))throw new Error("invalid uint256");return U(e,32)}_block(e,t){null!=e.author&&null==e.miner&&(e.miner=e.author);const r=null!=e._difficulty?e._difficulty:e.difficulty,n=As.check(t,e);return n._difficulty=null==r?null:$.from(r),n}block(e){return this._block(e,this.formats.block)}blockWithTransactions(e){return this._block(e,this.formats.blockWithTransactions)}transactionRequest(e){return As.check(this.formats.transactionRequest,e)}transactionResponse(e){null!=e.gas&&null==e.gasLimit&&(e.gasLimit=e.gas),e.to&&$.from(e.to).isZero()&&(e.to="0x0000000000000000000000000000000000000000"),null!=e.input&&null==e.data&&(e.data=e.input),null==e.to&&null==e.creates&&(e.creates=this.contractAddress(e)),1!==e.type&&2!==e.type||null!=e.accessList||(e.accessList=[]);const t=As.check(this.formats.transaction,e);if(null!=e.chainId){let r=e.chainId;T(r)&&(r=$.from(r).toNumber()),t.chainId=r}else{let r=e.networkId;null==r&&null==t.v&&(r=e.chainId),T(r)&&(r=$.from(r).toNumber()),"number"!=typeof r&&null!=t.v&&(r=(t.v-35)/2,r<0&&(r=0),r=parseInt(r)),"number"!=typeof r&&(r=0),t.chainId=r}return t.blockHash&&"x"===t.blockHash.replace(/0/g,"")&&(t.blockHash=null),t}transaction(e){return vn(e)}receiptLog(e){return As.check(this.formats.receiptLog,e)}receipt(e){const t=As.check(this.formats.receipt,e);if(null!=t.root)if(t.root.length<=4){const e=$.from(t.root).toNumber();0===e||1===e?(null!=t.status&&t.status!==e&&Es.throwArgumentError("alt-root-status/status mismatch","value",{root:t.root,status:t.status}),t.status=e,delete t.root):Es.throwArgumentError("invalid alt-root-status","value.root",t.root)}else 66!==t.root.length&&Es.throwArgumentError("invalid root hash","value.root",t.root);return null!=t.status&&(t.byzantium=!0),t}topics(e){return Array.isArray(e)?e.map((e=>this.topics(e))):null!=e?this.hash(e,!0):null}filter(e){return As.check(this.formats.filter,e)}filterLog(e){return As.check(this.formats.filterLog,e)}static check(e,t){const r={};for(const n in e)try{const i=e[n](t[n]);void 0!==i&&(r[n]=i)}catch(e){throw e.checkKey=n,e.checkValue=t[n],e}return r}static allowNull(e,t){return function(r){return null==r?t:e(r)}}static allowFalsish(e,t){return function(r){return r?e(r):t}}static arrayOf(e){return function(t){if(!Array.isArray(t))throw new Error("not an array");const r=[];return t.forEach((function(t){r.push(e(t))})),r}}}function _s(e){return e&&"function"==typeof e.isCommunityResource}function xs(e){return _s(e)&&e.isCommunityResource()}let Ss=!1;function ks(){Ss||(Ss=!0,console.log("========= NOTICE ========="),console.log("Request-Rate Exceeded  (this message will not be repeated)"),console.log(""),console.log("The default API keys for each service are provided as a highly-throttled,"),console.log("community resource for low-traffic projects and early prototyping."),console.log(""),console.log("While your application will continue to function, we highly recommended"),console.log("signing up for your own API keys to improve performance, increase your"),console.log("request rate/limit and enable other perks, such as metrics and advanced APIs."),console.log(""),console.log("For more details: https://docs.ethers.io/api-keys/"),console.log("=========================="))}var Is=function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function s(e){try{c(n.next(e))}catch(e){o(e)}}function a(e){try{c(n.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))};const Os=new v(ws);function Ts(e){return null==e?"null":(32!==N(e)&&Os.throwArgumentError("invalid topic","topic",e),e.toLowerCase())}function Ps(e){for(e=e.slice();e.length>0&&null==e[e.length-1];)e.pop();return e.map((e=>{if(Array.isArray(e)){const t={};e.forEach((e=>{t[Ts(e)]=!0}));const r=Object.keys(t);return r.sort(),r.join("|")}return Ts(e)})).join("&")}function Rs(e){if("string"==typeof e){if(32===N(e=e.toLowerCase()))return"tx:"+e;if(-1===e.indexOf(":"))return e}else{if(Array.isArray(e))return"filter:*:"+Ps(e);if(nr.isForkEvent(e))throw Os.warn("not implemented"),new Error("not implemented");if(e&&"object"==typeof e)return"filter:"+(e.address||"*")+":"+Ps(e.topics||[])}throw new Error("invalid event - "+e)}function Ns(){return(new Date).getTime()}function Cs(e){return new Promise((t=>{setTimeout(t,e)}))}const Ms=["block","network","pending","poll"];class Ls{constructor(e,t,r){te(this,"tag",e),te(this,"listener",t),te(this,"once",r),this._lastBlockNumber=-2,this._inflight=!1}get event(){switch(this.type){case"tx":return this.hash;case"filter":return this.filter}return this.tag}get type(){return this.tag.split(":")[0]}get hash(){const e=this.tag.split(":");return"tx"!==e[0]?null:e[1]}get filter(){const e=this.tag.split(":");if("filter"!==e[0])return null;const t=e[1],r=""===(n=e[2])?[]:n.split(/&/g).map((e=>{if(""===e)return[];const t=e.split("|").map((e=>"null"===e?null:e));return 1===t.length?t[0]:t}));var n;const i={};return r.length>0&&(i.topics=r),t&&"*"!==t&&(i.address=t),i}pollable(){return this.tag.indexOf(":")>=0||Ms.indexOf(this.tag)>=0}}const Bs={0:{symbol:"btc",p2pkh:0,p2sh:5,prefix:"bc"},2:{symbol:"ltc",p2pkh:48,p2sh:50,prefix:"ltc"},3:{symbol:"doge",p2pkh:30,p2sh:22},60:{symbol:"eth",ilk:"eth"},61:{symbol:"etc",ilk:"eth"},700:{symbol:"xdai",ilk:"eth"}};function Us(e){return U($.from(e).toHexString(),32)}function Ds(e){return pi.encode(k([e,C(vi(vi(e)),0,4)]))}const js=new RegExp("^(ipfs)://(.*)$","i"),Fs=[new RegExp("^(https)://(.*)$","i"),new RegExp("^(data):(.*)$","i"),js,new RegExp("^eip155:[0-9]+/(erc[0-9]+):(.*)$","i")];function zs(e,t){try{return Je(qs(e,t))}catch(e){}return null}function qs(e,t){if("0x"===e)return null;const r=$.from(C(e,t,t+32)).toNumber(),n=$.from(C(e,r,r+32)).toNumber();return C(e,r+32,r+32+n)}function Gs(e){return e.match(/^ipfs:\/\/ipfs\//i)?e=e.substring(12):e.match(/^ipfs:\/\//i)?e=e.substring(7):Os.throwArgumentError("unsupported IPFS format","link",e),`https://gateway.ipfs.io/ipfs/${e}`}function Hs(e){const t=S(e);if(t.length>32)throw new Error("internal; should not happen");const r=new Uint8Array(32);return r.set(t,32-t.length),r}function Ks(e){if(e.length%32==0)return e;const t=new Uint8Array(32*Math.ceil(e.length/32));return t.set(e),t}function Vs(e){const t=[];let r=0;for(let n=0;n<e.length;n++)t.push(null),r+=32;for(let n=0;n<e.length;n++){const i=S(e[n]);t[n]=Hs(r),t.push(Hs(i.length)),t.push(Ks(i)),r+=32+32*Math.ceil(i.length/32)}return M(t)}class Ws{constructor(e,t,r,n){te(this,"provider",e),te(this,"name",r),te(this,"address",e.formatter.address(t)),te(this,"_resolvedAddress",n)}supportsWildcard(){return this._supportsEip2544||(this._supportsEip2544=this.provider.call({to:this.address,data:"0x01ffc9a79061b92300000000000000000000000000000000000000000000000000000000"}).then((e=>$.from(e).eq(1))).catch((e=>{if(e.code===v.errors.CALL_EXCEPTION)return!1;throw this._supportsEip2544=null,e}))),this._supportsEip2544}_fetch(e,t){return Is(this,void 0,void 0,(function*(){const r={to:this.address,ccipReadEnabled:!0,data:M([e,as(this.name),t||"0x"])};let n=!1;(yield this.supportsWildcard())&&(n=!0,r.data=M(["0x9061b923",Vs([cs(this.name),r.data])]));try{let e=yield this.provider.call(r);return S(e).length%32==4&&Os.throwError("resolver threw error",v.errors.CALL_EXCEPTION,{transaction:r,data:e}),n&&(e=qs(e,0)),e}catch(e){if(e.code===v.errors.CALL_EXCEPTION)return null;throw e}}))}_fetchBytes(e,t){return Is(this,void 0,void 0,(function*(){const r=yield this._fetch(e,t);return null!=r?qs(r,0):null}))}_getAddress(e,t){const r=Bs[String(e)];if(null==r&&Os.throwError(`unsupported coin type: ${e}`,v.errors.UNSUPPORTED_OPERATION,{operation:`getAddress(${e})`}),"eth"===r.ilk)return this.provider.formatter.address(t);const n=S(t);if(null!=r.p2pkh){const e=t.match(/^0x76a9([0-9a-f][0-9a-f])([0-9a-f]*)88ac$/);if(e){const t=parseInt(e[1],16);if(e[2].length===2*t&&t>=1&&t<=75)return Ds(k([[r.p2pkh],"0x"+e[2]]))}}if(null!=r.p2sh){const e=t.match(/^0xa9([0-9a-f][0-9a-f])([0-9a-f]*)87$/);if(e){const t=parseInt(e[1],16);if(e[2].length===2*t&&t>=1&&t<=75)return Ds(k([[r.p2sh],"0x"+e[2]]))}}if(null!=r.prefix){const e=n[1];let t=n[0];if(0===t?20!==e&&32!==e&&(t=-1):t=-1,t>=0&&n.length===2+e&&e>=1&&e<=75){const e=bs().toWords(n.slice(2));return e.unshift(t),bs().encode(r.prefix,e)}}return null}getAddress(e){return Is(this,void 0,void 0,(function*(){if(null==e&&(e=60),60===e)try{const e=yield this._fetch("0x3b3b57de");return"0x"===e||e===So?null:this.provider.formatter.callAddress(e)}catch(e){if(e.code===v.errors.CALL_EXCEPTION)return null;throw e}const t=yield this._fetchBytes("0xf1cb7e06",Us(e));if(null==t||"0x"===t)return null;const r=this._getAddress(e,t);return null==r&&Os.throwError("invalid or unsupported coin data",v.errors.UNSUPPORTED_OPERATION,{operation:`getAddress(${e})`,coinType:e,data:t}),r}))}getAvatar(){return Is(this,void 0,void 0,(function*(){const e=[{type:"name",content:this.name}];try{const t=yield this.getText("avatar");if(null==t)return null;for(let r=0;r<Fs.length;r++){const n=t.match(Fs[r]);if(null==n)continue;const i=n[1].toLowerCase();switch(i){case"https":return e.push({type:"url",content:t}),{linkage:e,url:t};case"data":return e.push({type:"data",content:t}),{linkage:e,url:t};case"ipfs":return e.push({type:"ipfs",content:t}),{linkage:e,url:Gs(t)};case"erc721":case"erc1155":{const r="erc721"===i?"0xc87b56dd":"0x0e89341c";e.push({type:i,content:t});const o=this._resolvedAddress||(yield this.getAddress()),s=(n[2]||"").split("/");if(2!==s.length)return null;const a=yield this.provider.formatter.address(s[0]),c=U($.from(s[1]).toHexString(),32);if("erc721"===i){const t=this.provider.formatter.callAddress(yield this.provider.call({to:a,data:M(["0x6352211e",c])}));if(o!==t)return null;e.push({type:"owner",content:t})}else if("erc1155"===i){const t=$.from(yield this.provider.call({to:a,data:M(["0x00fdd58e",U(o,32),c])}));if(t.isZero())return null;e.push({type:"balance",content:t.toString()})}const u={to:this.provider.formatter.address(s[0]),data:M([r,c])};let l=zs(yield this.provider.call(u),0);if(null==l)return null;e.push({type:"metadata-url-base",content:l}),"erc1155"===i&&(l=l.replace("{id}",c.substring(2)),e.push({type:"metadata-url-expanded",content:l})),l.match(/^ipfs:/i)&&(l=Gs(l)),e.push({type:"metadata-url",content:l});const h=yield ms(l);if(!h)return null;e.push({type:"metadata",content:JSON.stringify(h)});let f=h.image;if("string"!=typeof f)return null;if(f.match(/^(https:\/\/|data:)/i));else{if(null==f.match(js))return null;e.push({type:"url-ipfs",content:f}),f=Gs(f)}return e.push({type:"url",content:f}),{linkage:e,url:f}}}}}catch(e){}return null}))}getContentHash(){return Is(this,void 0,void 0,(function*(){const e=yield this._fetchBytes("0xbc1c58d1");if(null==e||"0x"===e)return null;const t=e.match(/^0xe3010170(([0-9a-f][0-9a-f])([0-9a-f][0-9a-f])([0-9a-f]*))$/);if(t){const e=parseInt(t[3],16);if(t[4].length===2*e)return"ipfs://"+pi.encode("0x"+t[1])}const r=e.match(/^0xe5010172(([0-9a-f][0-9a-f])([0-9a-f][0-9a-f])([0-9a-f]*))$/);if(r){const e=parseInt(r[3],16);if(r[4].length===2*e)return"ipns://"+pi.encode("0x"+r[1])}const n=e.match(/^0xe40101fa011b20([0-9a-f]*)$/);if(n&&64===n[1].length)return"bzz://"+n[1];const i=e.match(/^0x90b2c605([0-9a-f]*)$/);if(i&&68===i[1].length){const e={"=":"","+":"-","/":"_"};return"sia://"+Bo("0x"+i[1]).replace(/[=+\/]/g,(t=>e[t]))}return Os.throwError("invalid or unsupported content hash data",v.errors.UNSUPPORTED_OPERATION,{operation:"getContentHash()",data:e})}))}getText(e){return Is(this,void 0,void 0,(function*(){let t=Ke(e);t=k([Us(64),Us(t.length),t]),t.length%32!=0&&(t=k([t,U("0x",32-e.length%32)]));const r=yield this._fetchBytes("0x59d1d43c",R(t));return null==r||"0x"===r?null:Je(r)}))}}let $s=null,Js=1;class Ys extends ir{constructor(e){if(super(),this._events=[],this._emitted={block:-2},this.disableCcipRead=!1,this.formatter=new.target.getFormatter(),te(this,"anyNetwork","any"===e),this.anyNetwork&&(e=this.detectNetwork()),e instanceof Promise)this._networkPromise=e,e.catch((e=>{})),this._ready().catch((e=>{}));else{const t=re(new.target,"getNetwork")(e);t?(te(this,"_network",t),this.emit("network",t,null)):Os.throwArgumentError("invalid network","network",e)}this._maxInternalBlockNumber=-1024,this._lastBlockNumber=-2,this._maxFilterBlockRange=10,this._pollingInterval=4e3,this._fastQueryDate=0}_ready(){return Is(this,void 0,void 0,(function*(){if(null==this._network){let e=null;if(this._networkPromise)try{e=yield this._networkPromise}catch(e){}null==e&&(e=yield this.detectNetwork()),e||Os.throwError("no network detected",v.errors.UNKNOWN_ERROR,{}),null==this._network&&(this.anyNetwork?this._network=e:te(this,"_network",e),this.emit("network",e,null))}return this._network}))}get ready(){return ys((()=>this._ready().then((e=>e),(e=>{if(e.code!==v.errors.NETWORK_ERROR||"noNetwork"!==e.event)throw e}))))}static getFormatter(){return null==$s&&($s=new As),$s}static getNetwork(e){return Mo(null==e?"homestead":e)}ccipReadFetch(e,t,r){return Is(this,void 0,void 0,(function*(){if(this.disableCcipRead||0===r.length)return null;const n=e.to.toLowerCase(),i=t.toLowerCase(),o=[];for(let e=0;e<r.length;e++){const t=r[e],s=t.replace("{sender}",n).replace("{data}",i),a=t.indexOf("{data}")>=0?null:JSON.stringify({data:i,sender:n}),c=yield ms({url:s,errorPassThrough:!0},a,((e,t)=>(e.status=t.statusCode,e)));if(c.data)return c.data;const u=c.message||"unknown error";if(c.status>=400&&c.status<500)return Os.throwError(`response not found during CCIP fetch: ${u}`,v.errors.SERVER_ERROR,{url:t,errorMessage:u});o.push(u)}return Os.throwError(`error encountered during CCIP fetch: ${o.map((e=>JSON.stringify(e))).join(", ")}`,v.errors.SERVER_ERROR,{urls:r,errorMessages:o})}))}_getInternalBlockNumber(e){return Is(this,void 0,void 0,(function*(){if(yield this._ready(),e>0)for(;this._internalBlockNumber;){const t=this._internalBlockNumber;try{const r=yield t;if(Ns()-r.respTime<=e)return r.blockNumber;break}catch(e){if(this._internalBlockNumber===t)break}}const t=Ns(),r=ne({blockNumber:this.perform("getBlockNumber",{}),networkError:this.getNetwork().then((e=>null),(e=>e))}).then((({blockNumber:e,networkError:n})=>{if(n)throw this._internalBlockNumber===r&&(this._internalBlockNumber=null),n;const i=Ns();return(e=$.from(e).toNumber())<this._maxInternalBlockNumber&&(e=this._maxInternalBlockNumber),this._maxInternalBlockNumber=e,this._setFastBlockNumber(e),{blockNumber:e,reqTime:t,respTime:i}}));return this._internalBlockNumber=r,r.catch((e=>{this._internalBlockNumber===r&&(this._internalBlockNumber=null)})),(yield r).blockNumber}))}poll(){return Is(this,void 0,void 0,(function*(){const e=Js++,t=[];let r=null;try{r=yield this._getInternalBlockNumber(100+this.pollingInterval/2)}catch(e){return void this.emit("error",e)}if(this._setFastBlockNumber(r),this.emit("poll",e,r),r!==this._lastBlockNumber){if(-2===this._emitted.block&&(this._emitted.block=r-1),Math.abs(this._emitted.block-r)>1e3)Os.warn(`network block skew detected; skipping block events (emitted=${this._emitted.block} blockNumber${r})`),this.emit("error",Os.makeError("network block skew detected",v.errors.NETWORK_ERROR,{blockNumber:r,event:"blockSkew",previousBlockNumber:this._emitted.block})),this.emit("block",r);else for(let e=this._emitted.block+1;e<=r;e++)this.emit("block",e);this._emitted.block!==r&&(this._emitted.block=r,Object.keys(this._emitted).forEach((e=>{if("block"===e)return;const t=this._emitted[e];"pending"!==t&&r-t>12&&delete this._emitted[e]}))),-2===this._lastBlockNumber&&(this._lastBlockNumber=r-1),this._events.forEach((e=>{switch(e.type){case"tx":{const r=e.hash;let n=this.getTransactionReceipt(r).then((e=>e&&null!=e.blockNumber?(this._emitted["t:"+r]=e.blockNumber,this.emit(r,e),null):null)).catch((e=>{this.emit("error",e)}));t.push(n);break}case"filter":if(!e._inflight){e._inflight=!0,-2===e._lastBlockNumber&&(e._lastBlockNumber=r-1);const n=e.filter;n.fromBlock=e._lastBlockNumber+1,n.toBlock=r;const i=n.toBlock-this._maxFilterBlockRange;i>n.fromBlock&&(n.fromBlock=i),n.fromBlock<0&&(n.fromBlock=0);const o=this.getLogs(n).then((t=>{e._inflight=!1,0!==t.length&&t.forEach((t=>{t.blockNumber>e._lastBlockNumber&&(e._lastBlockNumber=t.blockNumber),this._emitted["b:"+t.blockHash]=t.blockNumber,this._emitted["t:"+t.transactionHash]=t.blockNumber,this.emit(n,t)}))})).catch((t=>{this.emit("error",t),e._inflight=!1}));t.push(o)}}})),this._lastBlockNumber=r,Promise.all(t).then((()=>{this.emit("didPoll",e)})).catch((e=>{this.emit("error",e)}))}else this.emit("didPoll",e)}))}resetEventsBlock(e){this._lastBlockNumber=e-1,this.polling&&this.poll()}get network(){return this._network}detectNetwork(){return Is(this,void 0,void 0,(function*(){return Os.throwError("provider does not support network detection",v.errors.UNSUPPORTED_OPERATION,{operation:"provider.detectNetwork"})}))}getNetwork(){return Is(this,void 0,void 0,(function*(){const e=yield this._ready(),t=yield this.detectNetwork();if(e.chainId!==t.chainId){if(this.anyNetwork)return this._network=t,this._lastBlockNumber=-2,this._fastBlockNumber=null,this._fastBlockNumberPromise=null,this._fastQueryDate=0,this._emitted.block=-2,this._maxInternalBlockNumber=-1024,this._internalBlockNumber=null,this.emit("network",t,e),yield Cs(0),this._network;const r=Os.makeError("underlying network changed",v.errors.NETWORK_ERROR,{event:"changed",network:e,detectedNetwork:t});throw this.emit("error",r),r}return e}))}get blockNumber(){return this._getInternalBlockNumber(100+this.pollingInterval/2).then((e=>{this._setFastBlockNumber(e)}),(e=>{})),null!=this._fastBlockNumber?this._fastBlockNumber:-1}get polling(){return null!=this._poller}set polling(e){e&&!this._poller?(this._poller=setInterval((()=>{this.poll()}),this.pollingInterval),this._bootstrapPoll||(this._bootstrapPoll=setTimeout((()=>{this.poll(),this._bootstrapPoll=setTimeout((()=>{this._poller||this.poll(),this._bootstrapPoll=null}),this.pollingInterval)}),0))):!e&&this._poller&&(clearInterval(this._poller),this._poller=null)}get pollingInterval(){return this._pollingInterval}set pollingInterval(e){if("number"!=typeof e||e<=0||parseInt(String(e))!=e)throw new Error("invalid polling interval");this._pollingInterval=e,this._poller&&(clearInterval(this._poller),this._poller=setInterval((()=>{this.poll()}),this._pollingInterval))}_getFastBlockNumber(){const e=Ns();return e-this._fastQueryDate>2*this._pollingInterval&&(this._fastQueryDate=e,this._fastBlockNumberPromise=this.getBlockNumber().then((e=>((null==this._fastBlockNumber||e>this._fastBlockNumber)&&(this._fastBlockNumber=e),this._fastBlockNumber)))),this._fastBlockNumberPromise}_setFastBlockNumber(e){null!=this._fastBlockNumber&&e<this._fastBlockNumber||(this._fastQueryDate=Ns(),(null==this._fastBlockNumber||e>this._fastBlockNumber)&&(this._fastBlockNumber=e,this._fastBlockNumberPromise=Promise.resolve(e)))}waitForTransaction(e,t,r){return Is(this,void 0,void 0,(function*(){return this._waitForTransaction(e,null==t?1:t,r||0,null)}))}_waitForTransaction(e,t,r,n){return Is(this,void 0,void 0,(function*(){const i=yield this.getTransactionReceipt(e);return(i?i.confirmations:0)>=t?i:new Promise(((i,o)=>{const s=[];let a=!1;const c=function(){return!!a||(a=!0,s.forEach((e=>{e()})),!1)},u=e=>{e.confirmations<t||c()||i(e)};if(this.on(e,u),s.push((()=>{this.removeListener(e,u)})),n){let r=n.startBlock,i=null;const u=s=>Is(this,void 0,void 0,(function*(){a||(yield Cs(1e3),this.getTransactionCount(n.from).then((l=>Is(this,void 0,void 0,(function*(){if(!a){if(l<=n.nonce)r=s;else{{const t=yield this.getTransaction(e);if(t&&null!=t.blockNumber)return}for(null==i&&(i=r-3,i<n.startBlock&&(i=n.startBlock));i<=s;){if(a)return;const r=yield this.getBlockWithTransactions(i);for(let i=0;i<r.transactions.length;i++){const s=r.transactions[i];if(s.hash===e)return;if(s.from===n.from&&s.nonce===n.nonce){if(a)return;const r=yield this.waitForTransaction(s.hash,t);if(c())return;let i="replaced";return s.data===n.data&&s.to===n.to&&s.value.eq(n.value)?i="repriced":"0x"===s.data&&s.from===s.to&&s.value.isZero()&&(i="cancelled"),void o(Os.makeError("transaction was replaced",v.errors.TRANSACTION_REPLACED,{cancelled:"replaced"===i||"cancelled"===i,reason:i,replacement:this._wrapTransaction(s),hash:e,receipt:r}))}}i++}}a||this.once("block",u)}}))),(e=>{a||this.once("block",u)})))}));if(a)return;this.once("block",u),s.push((()=>{this.removeListener("block",u)}))}if("number"==typeof r&&r>0){const e=setTimeout((()=>{c()||o(Os.makeError("timeout exceeded",v.errors.TIMEOUT,{timeout:r}))}),r);e.unref&&e.unref(),s.push((()=>{clearTimeout(e)}))}}))}))}getBlockNumber(){return Is(this,void 0,void 0,(function*(){return this._getInternalBlockNumber(0)}))}getGasPrice(){return Is(this,void 0,void 0,(function*(){yield this.getNetwork();const e=yield this.perform("getGasPrice",{});try{return $.from(e)}catch(t){return Os.throwError("bad result from backend",v.errors.SERVER_ERROR,{method:"getGasPrice",result:e,error:t})}}))}getBalance(e,t){return Is(this,void 0,void 0,(function*(){yield this.getNetwork();const r=yield ne({address:this._getAddress(e),blockTag:this._getBlockTag(t)}),n=yield this.perform("getBalance",r);try{return $.from(n)}catch(e){return Os.throwError("bad result from backend",v.errors.SERVER_ERROR,{method:"getBalance",params:r,result:n,error:e})}}))}getTransactionCount(e,t){return Is(this,void 0,void 0,(function*(){yield this.getNetwork();const r=yield ne({address:this._getAddress(e),blockTag:this._getBlockTag(t)}),n=yield this.perform("getTransactionCount",r);try{return $.from(n).toNumber()}catch(e){return Os.throwError("bad result from backend",v.errors.SERVER_ERROR,{method:"getTransactionCount",params:r,result:n,error:e})}}))}getCode(e,t){return Is(this,void 0,void 0,(function*(){yield this.getNetwork();const r=yield ne({address:this._getAddress(e),blockTag:this._getBlockTag(t)}),n=yield this.perform("getCode",r);try{return R(n)}catch(e){return Os.throwError("bad result from backend",v.errors.SERVER_ERROR,{method:"getCode",params:r,result:n,error:e})}}))}getStorageAt(e,t,r){return Is(this,void 0,void 0,(function*(){yield this.getNetwork();const n=yield ne({address:this._getAddress(e),blockTag:this._getBlockTag(r),position:Promise.resolve(t).then((e=>L(e)))}),i=yield this.perform("getStorageAt",n);try{return R(i)}catch(e){return Os.throwError("bad result from backend",v.errors.SERVER_ERROR,{method:"getStorageAt",params:n,result:i,error:e})}}))}_wrapTransaction(e,t,r){if(null!=t&&32!==N(t))throw new Error("invalid response - sendTransaction");const n=e;return null!=t&&e.hash!==t&&Os.throwError("Transaction hash mismatch from Provider.sendTransaction.",v.errors.UNKNOWN_ERROR,{expectedHash:e.hash,returnedHash:t}),n.wait=(t,n)=>Is(this,void 0,void 0,(function*(){let i;null==t&&(t=1),null==n&&(n=0),0!==t&&null!=r&&(i={data:e.data,from:e.from,nonce:e.nonce,to:e.to,value:e.value,startBlock:r});const o=yield this._waitForTransaction(e.hash,t,n,i);return null==o&&0===t?null:(this._emitted["t:"+e.hash]=o.blockNumber,0===o.status&&Os.throwError("transaction failed",v.errors.CALL_EXCEPTION,{transactionHash:e.hash,transaction:e,receipt:o}),o)})),n}sendTransaction(e){return Is(this,void 0,void 0,(function*(){yield this.getNetwork();const t=yield Promise.resolve(e).then((e=>R(e))),r=this.formatter.transaction(e);null==r.confirmations&&(r.confirmations=0);const n=yield this._getInternalBlockNumber(100+2*this.pollingInterval);try{const e=yield this.perform("sendTransaction",{signedTransaction:t});return this._wrapTransaction(r,e,n)}catch(e){throw e.transaction=r,e.transactionHash=r.hash,e}}))}_getTransactionRequest(e){return Is(this,void 0,void 0,(function*(){const t=yield e,r={};return["from","to"].forEach((e=>{null!=t[e]&&(r[e]=Promise.resolve(t[e]).then((e=>e?this._getAddress(e):null)))})),["gasLimit","gasPrice","maxFeePerGas","maxPriorityFeePerGas","value"].forEach((e=>{null!=t[e]&&(r[e]=Promise.resolve(t[e]).then((e=>e?$.from(e):null)))})),["type"].forEach((e=>{null!=t[e]&&(r[e]=Promise.resolve(t[e]).then((e=>null!=e?e:null)))})),t.accessList&&(r.accessList=this.formatter.accessList(t.accessList)),["data"].forEach((e=>{null!=t[e]&&(r[e]=Promise.resolve(t[e]).then((e=>e?R(e):null)))})),this.formatter.transactionRequest(yield ne(r))}))}_getFilter(e){return Is(this,void 0,void 0,(function*(){e=yield e;const t={};return null!=e.address&&(t.address=this._getAddress(e.address)),["blockHash","topics"].forEach((r=>{null!=e[r]&&(t[r]=e[r])})),["fromBlock","toBlock"].forEach((r=>{null!=e[r]&&(t[r]=this._getBlockTag(e[r]))})),this.formatter.filter(yield ne(t))}))}_call(e,t,r){return Is(this,void 0,void 0,(function*(){r>=10&&Os.throwError("CCIP read exceeded maximum redirections",v.errors.SERVER_ERROR,{redirects:r,transaction:e});const n=e.to,i=yield this.perform("call",{transaction:e,blockTag:t});if(r>=0&&"latest"===t&&null!=n&&"0x556f1830"===i.substring(0,10)&&N(i)%32==4)try{const o=C(i,4),s=C(o,0,32);$.from(s).eq(n)||Os.throwError("CCIP Read sender did not match",v.errors.CALL_EXCEPTION,{name:"OffchainLookup",signature:"OffchainLookup(address,string[],bytes,bytes4,bytes)",transaction:e,data:i});const a=[],c=$.from(C(o,32,64)).toNumber(),u=$.from(C(o,c,c+32)).toNumber(),l=C(o,c+32);for(let t=0;t<u;t++){const r=zs(l,32*t);null==r&&Os.throwError("CCIP Read contained corrupt URL string",v.errors.CALL_EXCEPTION,{name:"OffchainLookup",signature:"OffchainLookup(address,string[],bytes,bytes4,bytes)",transaction:e,data:i}),a.push(r)}const h=qs(o,64);$.from(C(o,100,128)).isZero()||Os.throwError("CCIP Read callback selector included junk",v.errors.CALL_EXCEPTION,{name:"OffchainLookup",signature:"OffchainLookup(address,string[],bytes,bytes4,bytes)",transaction:e,data:i});const f=C(o,96,100),d=qs(o,128),p=yield this.ccipReadFetch(e,h,a);null==p&&Os.throwError("CCIP Read disabled or provided no URLs",v.errors.CALL_EXCEPTION,{name:"OffchainLookup",signature:"OffchainLookup(address,string[],bytes,bytes4,bytes)",transaction:e,data:i});const g={to:n,data:M([f,Vs([p,d])])};return this._call(g,t,r+1)}catch(e){if(e.code===v.errors.SERVER_ERROR)throw e}try{return R(i)}catch(r){return Os.throwError("bad result from backend",v.errors.SERVER_ERROR,{method:"call",params:{transaction:e,blockTag:t},result:i,error:r})}}))}call(e,t){return Is(this,void 0,void 0,(function*(){yield this.getNetwork();const r=yield ne({transaction:this._getTransactionRequest(e),blockTag:this._getBlockTag(t),ccipReadEnabled:Promise.resolve(e.ccipReadEnabled)});return this._call(r.transaction,r.blockTag,r.ccipReadEnabled?0:-1)}))}estimateGas(e){return Is(this,void 0,void 0,(function*(){yield this.getNetwork();const t=yield ne({transaction:this._getTransactionRequest(e)}),r=yield this.perform("estimateGas",t);try{return $.from(r)}catch(e){return Os.throwError("bad result from backend",v.errors.SERVER_ERROR,{method:"estimateGas",params:t,result:r,error:e})}}))}_getAddress(e){return Is(this,void 0,void 0,(function*(){"string"!=typeof(e=yield e)&&Os.throwArgumentError("invalid address or ENS name","name",e);const t=yield this.resolveName(e);return null==t&&Os.throwError("ENS name not configured",v.errors.UNSUPPORTED_OPERATION,{operation:`resolveName(${JSON.stringify(e)})`}),t}))}_getBlock(e,t){return Is(this,void 0,void 0,(function*(){yield this.getNetwork(),e=yield e;let r=-128;const n={includeTransactions:!!t};if(T(e,32))n.blockHash=e;else try{n.blockTag=yield this._getBlockTag(e),T(n.blockTag)&&(r=parseInt(n.blockTag.substring(2),16))}catch(t){Os.throwArgumentError("invalid block hash or block tag","blockHashOrBlockTag",e)}return ys((()=>Is(this,void 0,void 0,(function*(){const e=yield this.perform("getBlock",n);if(null==e)return null!=n.blockHash&&null==this._emitted["b:"+n.blockHash]||null!=n.blockTag&&r>this._emitted.block?null:void 0;if(t){let t=null;for(let r=0;r<e.transactions.length;r++){const n=e.transactions[r];if(null==n.blockNumber)n.confirmations=0;else if(null==n.confirmations){null==t&&(t=yield this._getInternalBlockNumber(100+2*this.pollingInterval));let e=t-n.blockNumber+1;e<=0&&(e=1),n.confirmations=e}}const r=this.formatter.blockWithTransactions(e);return r.transactions=r.transactions.map((e=>this._wrapTransaction(e))),r}return this.formatter.block(e)}))),{oncePoll:this})}))}getBlock(e){return this._getBlock(e,!1)}getBlockWithTransactions(e){return this._getBlock(e,!0)}getTransaction(e){return Is(this,void 0,void 0,(function*(){yield this.getNetwork(),e=yield e;const t={transactionHash:this.formatter.hash(e,!0)};return ys((()=>Is(this,void 0,void 0,(function*(){const r=yield this.perform("getTransaction",t);if(null==r)return null==this._emitted["t:"+e]?null:void 0;const n=this.formatter.transactionResponse(r);if(null==n.blockNumber)n.confirmations=0;else if(null==n.confirmations){let e=(yield this._getInternalBlockNumber(100+2*this.pollingInterval))-n.blockNumber+1;e<=0&&(e=1),n.confirmations=e}return this._wrapTransaction(n)}))),{oncePoll:this})}))}getTransactionReceipt(e){return Is(this,void 0,void 0,(function*(){yield this.getNetwork(),e=yield e;const t={transactionHash:this.formatter.hash(e,!0)};return ys((()=>Is(this,void 0,void 0,(function*(){const r=yield this.perform("getTransactionReceipt",t);if(null==r)return null==this._emitted["t:"+e]?null:void 0;if(null==r.blockHash)return;const n=this.formatter.receipt(r);if(null==n.blockNumber)n.confirmations=0;else if(null==n.confirmations){let e=(yield this._getInternalBlockNumber(100+2*this.pollingInterval))-n.blockNumber+1;e<=0&&(e=1),n.confirmations=e}return n}))),{oncePoll:this})}))}getLogs(e){return Is(this,void 0,void 0,(function*(){yield this.getNetwork();const t=yield ne({filter:this._getFilter(e)}),r=yield this.perform("getLogs",t);return r.forEach((e=>{null==e.removed&&(e.removed=!1)})),As.arrayOf(this.formatter.filterLog.bind(this.formatter))(r)}))}getEtherPrice(){return Is(this,void 0,void 0,(function*(){return yield this.getNetwork(),this.perform("getEtherPrice",{})}))}_getBlockTag(e){return Is(this,void 0,void 0,(function*(){if("number"==typeof(e=yield e)&&e<0){e%1&&Os.throwArgumentError("invalid BlockTag","blockTag",e);let t=yield this._getInternalBlockNumber(100+2*this.pollingInterval);return t+=e,t<0&&(t=0),this.formatter.blockTag(t)}return this.formatter.blockTag(e)}))}getResolver(e){return Is(this,void 0,void 0,(function*(){let t=e;for(;;){if(""===t||"."===t)return null;if("eth"!==e&&"eth"===t)return null;const r=yield this._getResolver(t,"getResolver");if(null!=r){const n=new Ws(this,r,e);return t===e||(yield n.supportsWildcard())?n:null}t=t.split(".").slice(1).join(".")}}))}_getResolver(e,t){return Is(this,void 0,void 0,(function*(){null==t&&(t="ENS");const r=yield this.getNetwork();r.ensAddress||Os.throwError("network does not support ENS",v.errors.UNSUPPORTED_OPERATION,{operation:t,network:r.name});try{const t=yield this.call({to:r.ensAddress,data:"0x0178b8bf"+as(e).substring(2)});return this.formatter.callAddress(t)}catch(e){}return null}))}resolveName(e){return Is(this,void 0,void 0,(function*(){e=yield e;try{return Promise.resolve(this.formatter.address(e))}catch(t){if(T(e))throw t}"string"!=typeof e&&Os.throwArgumentError("invalid ENS name","name",e);const t=yield this.getResolver(e);return t?yield t.getAddress():null}))}lookupAddress(e){return Is(this,void 0,void 0,(function*(){e=yield e;const t=(e=this.formatter.address(e)).substring(2).toLowerCase()+".addr.reverse",r=yield this._getResolver(t,"lookupAddress");if(null==r)return null;const n=zs(yield this.call({to:r,data:"0x691f3431"+as(t).substring(2)}),0);return(yield this.resolveName(n))!=e?null:n}))}getAvatar(e){return Is(this,void 0,void 0,(function*(){let t=null;if(T(e)){const r=this.formatter.address(e).substring(2).toLowerCase()+".addr.reverse",n=yield this._getResolver(r,"getAvatar");if(!n)return null;t=new Ws(this,n,r);try{const e=yield t.getAvatar();if(e)return e.url}catch(e){if(e.code!==v.errors.CALL_EXCEPTION)throw e}try{const e=zs(yield this.call({to:n,data:"0x691f3431"+as(r).substring(2)}),0);t=yield this.getResolver(e)}catch(e){if(e.code!==v.errors.CALL_EXCEPTION)throw e;return null}}else if(t=yield this.getResolver(e),!t)return null;const r=yield t.getAvatar();return null==r?null:r.url}))}perform(e,t){return Os.throwError(e+" not implemented",v.errors.NOT_IMPLEMENTED,{operation:e})}_startEvent(e){this.polling=this._events.filter((e=>e.pollable())).length>0}_stopEvent(e){this.polling=this._events.filter((e=>e.pollable())).length>0}_addEventListener(e,t,r){const n=new Ls(Rs(e),t,r);return this._events.push(n),this._startEvent(n),this}on(e,t){return this._addEventListener(e,t,!1)}once(e,t){return this._addEventListener(e,t,!0)}emit(e,...t){let r=!1,n=[],i=Rs(e);return this._events=this._events.filter((e=>e.tag!==i||(setTimeout((()=>{e.listener.apply(this,t)}),0),r=!0,!e.once||(n.push(e),!1)))),n.forEach((e=>{this._stopEvent(e)})),r}listenerCount(e){if(!e)return this._events.length;let t=Rs(e);return this._events.filter((e=>e.tag===t)).length}listeners(e){if(null==e)return this._events.map((e=>e.listener));let t=Rs(e);return this._events.filter((e=>e.tag===t)).map((e=>e.listener))}off(e,t){if(null==t)return this.removeAllListeners(e);const r=[];let n=!1,i=Rs(e);return this._events=this._events.filter((e=>e.tag!==i||e.listener!=t||!!n||(n=!0,r.push(e),!1))),r.forEach((e=>{this._stopEvent(e)})),this}removeAllListeners(e){let t=[];if(null==e)t=this._events,this._events=[];else{const r=Rs(e);this._events=this._events.filter((e=>e.tag!==r||(t.push(e),!1)))}return t.forEach((e=>{this._stopEvent(e)})),this}}var Qs=function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function s(e){try{c(n.next(e))}catch(e){o(e)}}function a(e){try{c(n.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))};const Xs=new v(ws),Zs=["call","estimateGas"];function ea(e,t){if(null==e)return null;if("string"==typeof e.message&&e.message.match("reverted")){const r=T(e.data)?e.data:null;if(!t||r)return{message:e.message,data:r}}if("object"==typeof e){for(const r in e){const n=ea(e[r],t);if(n)return n}return null}if("string"==typeof e)try{return ea(JSON.parse(e),t)}catch(e){}return null}function ta(e,t,r){const n=r.transaction||r.signedTransaction;if("call"===e){const e=ea(t,!0);if(e)return e.data;Xs.throwError("missing revert data in call exception; Transaction reverted without a reason string",v.errors.CALL_EXCEPTION,{data:"0x",transaction:n,error:t})}if("estimateGas"===e){let r=ea(t.body,!1);null==r&&(r=ea(t,!1)),r&&Xs.throwError("cannot estimate gas; transaction may fail or may require manual gas limit",v.errors.UNPREDICTABLE_GAS_LIMIT,{reason:r.message,method:e,transaction:n,error:t})}let i=t.message;throw t.code===v.errors.SERVER_ERROR&&t.error&&"string"==typeof t.error.message?i=t.error.message:"string"==typeof t.body?i=t.body:"string"==typeof t.responseText&&(i=t.responseText),i=(i||"").toLowerCase(),i.match(/insufficient funds|base fee exceeds gas limit|InsufficientFunds/i)&&Xs.throwError("insufficient funds for intrinsic transaction cost",v.errors.INSUFFICIENT_FUNDS,{error:t,method:e,transaction:n}),i.match(/nonce (is )?too low/i)&&Xs.throwError("nonce has already been used",v.errors.NONCE_EXPIRED,{error:t,method:e,transaction:n}),i.match(/replacement transaction underpriced|transaction gas price.*too low/i)&&Xs.throwError("replacement fee too low",v.errors.REPLACEMENT_UNDERPRICED,{error:t,method:e,transaction:n}),i.match(/only replay-protected/i)&&Xs.throwError("legacy pre-eip-155 transactions not supported",v.errors.UNSUPPORTED_OPERATION,{error:t,method:e,transaction:n}),Zs.indexOf(e)>=0&&i.match(/gas required exceeds allowance|always failing transaction|execution reverted|revert/)&&Xs.throwError("cannot estimate gas; transaction may fail or may require manual gas limit",v.errors.UNPREDICTABLE_GAS_LIMIT,{error:t,method:e,transaction:n}),t}function ra(e){return new Promise((function(t){setTimeout(t,e)}))}function na(e){if(e.error){const t=new Error(e.error.message);throw t.code=e.error.code,t.data=e.error.data,t}return e.result}function ia(e){return e?e.toLowerCase():e}const oa={};class sa extends ur{constructor(e,t,r){if(super(),e!==oa)throw new Error("do not call the JsonRpcSigner constructor directly; use provider.getSigner");te(this,"provider",t),null==r&&(r=0),"string"==typeof r?(te(this,"_address",this.provider.formatter.address(r)),te(this,"_index",null)):"number"==typeof r?(te(this,"_index",r),te(this,"_address",null)):Xs.throwArgumentError("invalid address or index","addressOrIndex",r)}connect(e){return Xs.throwError("cannot alter JSON-RPC Signer connection",v.errors.UNSUPPORTED_OPERATION,{operation:"connect"})}connectUnchecked(){return new aa(oa,this.provider,this._address||this._index)}getAddress(){return this._address?Promise.resolve(this._address):this.provider.send("eth_accounts",[]).then((e=>(e.length<=this._index&&Xs.throwError("unknown account #"+this._index,v.errors.UNSUPPORTED_OPERATION,{operation:"getAddress"}),this.provider.formatter.address(e[this._index]))))}sendUncheckedTransaction(e){e=oe(e);const t=this.getAddress().then((e=>(e&&(e=e.toLowerCase()),e)));if(null==e.gasLimit){const r=oe(e);r.from=t,e.gasLimit=this.provider.estimateGas(r)}return null!=e.to&&(e.to=Promise.resolve(e.to).then((e=>Qs(this,void 0,void 0,(function*(){if(null==e)return null;const t=yield this.provider.resolveName(e);return null==t&&Xs.throwArgumentError("provided ENS name resolves to null","tx.to",e),t}))))),ne({tx:ne(e),sender:t}).then((({tx:t,sender:r})=>{null!=t.from?t.from.toLowerCase()!==r&&Xs.throwArgumentError("from address mismatch","transaction",e):t.from=r;const n=this.provider.constructor.hexlifyTransaction(t,{from:!0});return this.provider.send("eth_sendTransaction",[n]).then((e=>e),(e=>("string"==typeof e.message&&e.message.match(/user denied/i)&&Xs.throwError("user rejected transaction",v.errors.ACTION_REJECTED,{action:"sendTransaction",transaction:t}),ta("sendTransaction",e,n))))}))}signTransaction(e){return Xs.throwError("signing transactions is unsupported",v.errors.UNSUPPORTED_OPERATION,{operation:"signTransaction"})}sendTransaction(e){return Qs(this,void 0,void 0,(function*(){const t=yield this.provider._getInternalBlockNumber(100+2*this.provider.pollingInterval),r=yield this.sendUncheckedTransaction(e);try{return yield ys((()=>Qs(this,void 0,void 0,(function*(){const e=yield this.provider.getTransaction(r);if(null!==e)return this.provider._wrapTransaction(e,r,t)}))),{oncePoll:this.provider})}catch(e){throw e.transactionHash=r,e}}))}signMessage(e){return Qs(this,void 0,void 0,(function*(){const t="string"==typeof e?Ke(e):e,r=yield this.getAddress();try{return yield this.provider.send("personal_sign",[R(t),r.toLowerCase()])}catch(t){throw"string"==typeof t.message&&t.message.match(/user denied/i)&&Xs.throwError("user rejected signing",v.errors.ACTION_REJECTED,{action:"signMessage",from:r,messageData:e}),t}}))}_legacySignMessage(e){return Qs(this,void 0,void 0,(function*(){const t="string"==typeof e?Ke(e):e,r=yield this.getAddress();try{return yield this.provider.send("eth_sign",[r.toLowerCase(),R(t)])}catch(t){throw"string"==typeof t.message&&t.message.match(/user denied/i)&&Xs.throwError("user rejected signing",v.errors.ACTION_REJECTED,{action:"_legacySignMessage",from:r,messageData:e}),t}}))}_signTypedData(e,t,r){return Qs(this,void 0,void 0,(function*(){const n=yield fi.resolveNames(e,t,r,(e=>this.provider.resolveName(e))),i=yield this.getAddress();try{return yield this.provider.send("eth_signTypedData_v4",[i.toLowerCase(),JSON.stringify(fi.getPayload(n.domain,t,n.value))])}catch(e){throw"string"==typeof e.message&&e.message.match(/user denied/i)&&Xs.throwError("user rejected signing",v.errors.ACTION_REJECTED,{action:"_signTypedData",from:i,messageData:{domain:n.domain,types:t,value:n.value}}),e}}))}unlock(e){return Qs(this,void 0,void 0,(function*(){const t=this.provider,r=yield this.getAddress();return t.send("personal_unlockAccount",[r.toLowerCase(),e,null])}))}}class aa extends sa{sendTransaction(e){return this.sendUncheckedTransaction(e).then((e=>({hash:e,nonce:null,gasLimit:null,gasPrice:null,data:null,value:null,chainId:null,confirmations:0,from:null,wait:t=>this.provider.waitForTransaction(e,t)})))}}const ca={chainId:!0,data:!0,gasLimit:!0,gasPrice:!0,nonce:!0,to:!0,value:!0,type:!0,accessList:!0,maxFeePerGas:!0,maxPriorityFeePerGas:!0};class ua extends Ys{constructor(e,t){let r=t;null==r&&(r=new Promise(((e,t)=>{setTimeout((()=>{this.detectNetwork().then((t=>{e(t)}),(e=>{t(e)}))}),0)}))),super(r),e||(e=re(this.constructor,"defaultUrl")()),te(this,"connection","string"==typeof e?Object.freeze({url:e}):Object.freeze(oe(e))),this._nextId=42}get _cache(){return null==this._eventLoopCache&&(this._eventLoopCache={}),this._eventLoopCache}static defaultUrl(){return"http://localhost:8545"}detectNetwork(){return this._cache.detectNetwork||(this._cache.detectNetwork=this._uncachedDetectNetwork(),setTimeout((()=>{this._cache.detectNetwork=null}),0)),this._cache.detectNetwork}_uncachedDetectNetwork(){return Qs(this,void 0,void 0,(function*(){yield ra(0);let e=null;try{e=yield this.send("eth_chainId",[])}catch(t){try{e=yield this.send("net_version",[])}catch(e){}}if(null!=e){const t=re(this.constructor,"getNetwork");try{return t($.from(e).toNumber())}catch(t){return Xs.throwError("could not detect network",v.errors.NETWORK_ERROR,{chainId:e,event:"invalidNetwork",serverError:t})}}return Xs.throwError("could not detect network",v.errors.NETWORK_ERROR,{event:"noNetwork"})}))}getSigner(e){return new sa(oa,this,e)}getUncheckedSigner(e){return this.getSigner(e).connectUnchecked()}listAccounts(){return this.send("eth_accounts",[]).then((e=>e.map((e=>this.formatter.address(e)))))}send(e,t){const r={method:e,params:t,id:this._nextId++,jsonrpc:"2.0"};this.emit("debug",{action:"request",request:ue(r),provider:this});const n=["eth_chainId","eth_blockNumber"].indexOf(e)>=0;if(n&&this._cache[e])return this._cache[e];const i=ms(this.connection,JSON.stringify(r),na).then((e=>(this.emit("debug",{action:"response",request:r,response:e,provider:this}),e)),(e=>{throw this.emit("debug",{action:"response",error:e,request:r,provider:this}),e}));return n&&(this._cache[e]=i,setTimeout((()=>{this._cache[e]=null}),0)),i}prepareRequest(e,t){switch(e){case"getBlockNumber":return["eth_blockNumber",[]];case"getGasPrice":return["eth_gasPrice",[]];case"getBalance":return["eth_getBalance",[ia(t.address),t.blockTag]];case"getTransactionCount":return["eth_getTransactionCount",[ia(t.address),t.blockTag]];case"getCode":return["eth_getCode",[ia(t.address),t.blockTag]];case"getStorageAt":return["eth_getStorageAt",[ia(t.address),U(t.position,32),t.blockTag]];case"sendTransaction":return["eth_sendRawTransaction",[t.signedTransaction]];case"getBlock":return t.blockTag?["eth_getBlockByNumber",[t.blockTag,!!t.includeTransactions]]:t.blockHash?["eth_getBlockByHash",[t.blockHash,!!t.includeTransactions]]:null;case"getTransaction":return["eth_getTransactionByHash",[t.transactionHash]];case"getTransactionReceipt":return["eth_getTransactionReceipt",[t.transactionHash]];case"call":return["eth_call",[re(this.constructor,"hexlifyTransaction")(t.transaction,{from:!0}),t.blockTag]];case"estimateGas":return["eth_estimateGas",[re(this.constructor,"hexlifyTransaction")(t.transaction,{from:!0})]];case"getLogs":return t.filter&&null!=t.filter.address&&(t.filter.address=ia(t.filter.address)),["eth_getLogs",[t.filter]]}return null}perform(e,t){return Qs(this,void 0,void 0,(function*(){if("call"===e||"estimateGas"===e){const e=t.transaction;if(e&&null!=e.type&&$.from(e.type).isZero()&&null==e.maxFeePerGas&&null==e.maxPriorityFeePerGas){const r=yield this.getFeeData();null==r.maxFeePerGas&&null==r.maxPriorityFeePerGas&&((t=oe(t)).transaction=oe(e),delete t.transaction.type)}}const r=this.prepareRequest(e,t);null==r&&Xs.throwError(e+" not implemented",v.errors.NOT_IMPLEMENTED,{operation:e});try{return yield this.send(r[0],r[1])}catch(r){return ta(e,r,t)}}))}_startEvent(e){"pending"===e.tag&&this._startPending(),super._startEvent(e)}_startPending(){if(null!=this._pendingFilter)return;const e=this,t=this.send("eth_newPendingTransactionFilter",[]);this._pendingFilter=t,t.then((function(r){return function n(){e.send("eth_getFilterChanges",[r]).then((function(r){if(e._pendingFilter!=t)return null;let n=Promise.resolve();return r.forEach((function(t){e._emitted["t:"+t.toLowerCase()]="pending",n=n.then((function(){return e.getTransaction(t).then((function(t){return e.emit("pending",t),null}))}))})),n.then((function(){return ra(1e3)}))})).then((function(){if(e._pendingFilter==t)return setTimeout((function(){n()}),0),null;e.send("eth_uninstallFilter",[r])})).catch((e=>{}))}(),r})).catch((e=>{}))}_stopEvent(e){"pending"===e.tag&&0===this.listenerCount("pending")&&(this._pendingFilter=null),super._stopEvent(e)}static hexlifyTransaction(e,t){const r=oe(ca);if(t)for(const e in t)t[e]&&(r[e]=!0);ie(e,r);const n={};return["chainId","gasLimit","gasPrice","type","maxFeePerGas","maxPriorityFeePerGas","nonce","value"].forEach((function(t){if(null==e[t])return;const r=L($.from(e[t]));"gasLimit"===t&&(t="gas"),n[t]=r})),["from","to","data"].forEach((function(t){null!=e[t]&&(n[t]=R(e[t]))})),e.accessList&&(n.accessList=fn(e.accessList)),n}}let la=null;try{if(la=WebSocket,null==la)throw new Error("inject please")}catch(e){const t=new v(ws);la=function(){t.throwError("WebSockets not supported in this environment",v.errors.UNSUPPORTED_OPERATION,{operation:"new WebSocket()"})}}var ha=function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function s(e){try{c(n.next(e))}catch(e){o(e)}}function a(e){try{c(n.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))};const fa=new v(ws);let da=1;class pa extends ua{constructor(e,t){"any"===t&&fa.throwError("WebSocketProvider does not support 'any' network yet",v.errors.UNSUPPORTED_OPERATION,{operation:"network:any"}),super("string"==typeof e?e:"_websocket",t),this._pollingInterval=-1,this._wsReady=!1,te(this,"_websocket","string"==typeof e?new la(this.connection.url):e),te(this,"_requests",{}),te(this,"_subs",{}),te(this,"_subIds",{}),te(this,"_detectNetwork",super.detectNetwork()),this.websocket.onopen=()=>{this._wsReady=!0,Object.keys(this._requests).forEach((e=>{this.websocket.send(this._requests[e].payload)}))},this.websocket.onmessage=e=>{const t=e.data,r=JSON.parse(t);if(null!=r.id){const e=String(r.id),n=this._requests[e];if(delete this._requests[e],void 0!==r.result)n.callback(null,r.result),this.emit("debug",{action:"response",request:JSON.parse(n.payload),response:r.result,provider:this});else{let e=null;r.error?(e=new Error(r.error.message||"unknown error"),te(e,"code",r.error.code||null),te(e,"response",t)):e=new Error("unknown error"),n.callback(e,void 0),this.emit("debug",{action:"response",error:e,request:JSON.parse(n.payload),provider:this})}}else if("eth_subscription"===r.method){const e=this._subs[r.params.subscription];e&&e.processFunc(r.params.result)}else console.warn("this should not happen")};const r=setInterval((()=>{this.emit("poll")}),1e3);r.unref&&r.unref()}get websocket(){return this._websocket}detectNetwork(){return this._detectNetwork}get pollingInterval(){return 0}resetEventsBlock(e){fa.throwError("cannot reset events block on WebSocketProvider",v.errors.UNSUPPORTED_OPERATION,{operation:"resetEventBlock"})}set pollingInterval(e){fa.throwError("cannot set polling interval on WebSocketProvider",v.errors.UNSUPPORTED_OPERATION,{operation:"setPollingInterval"})}poll(){return ha(this,void 0,void 0,(function*(){return null}))}set polling(e){e&&fa.throwError("cannot set polling on WebSocketProvider",v.errors.UNSUPPORTED_OPERATION,{operation:"setPolling"})}send(e,t){const r=da++;return new Promise(((n,i)=>{const o=JSON.stringify({method:e,params:t,id:r,jsonrpc:"2.0"});this.emit("debug",{action:"request",request:JSON.parse(o),provider:this}),this._requests[String(r)]={callback:function(e,t){return e?i(e):n(t)},payload:o},this._wsReady&&this.websocket.send(o)}))}static defaultUrl(){return"ws://localhost:8546"}_subscribe(e,t,r){return ha(this,void 0,void 0,(function*(){let n=this._subIds[e];null==n&&(n=Promise.all(t).then((e=>this.send("eth_subscribe",e))),this._subIds[e]=n);const i=yield n;this._subs[i]={tag:e,processFunc:r}}))}_startEvent(e){switch(e.type){case"block":this._subscribe("block",["newHeads"],(e=>{const t=$.from(e.number).toNumber();this._emitted.block=t,this.emit("block",t)}));break;case"pending":this._subscribe("pending",["newPendingTransactions"],(e=>{this.emit("pending",e)}));break;case"filter":this._subscribe(e.tag,["logs",this._getFilter(e.filter)],(t=>{null==t.removed&&(t.removed=!1),this.emit(e.filter,this.formatter.filterLog(t))}));break;case"tx":{const t=e=>{const t=e.hash;this.getTransactionReceipt(t).then((e=>{e&&this.emit(t,e)}))};t(e),this._subscribe("tx",["newHeads"],(e=>{this._events.filter((e=>"tx"===e.type)).forEach(t)}));break}case"debug":case"poll":case"willPoll":case"didPoll":case"error":break;default:console.log("unhandled:",e)}}_stopEvent(e){let t=e.tag;if("tx"===e.type){if(this._events.filter((e=>"tx"===e.type)).length)return;t="tx"}else if(this.listenerCount(e.event))return;const r=this._subIds[t];r&&(delete this._subIds[t],r.then((e=>{this._subs[e]&&(delete this._subs[e],this.send("eth_unsubscribe",[e]))})))}destroy(){return ha(this,void 0,void 0,(function*(){this.websocket.readyState===la.CONNECTING&&(yield new Promise((e=>{this.websocket.onopen=function(){e(!0)},this.websocket.onerror=function(){e(!1)}}))),this.websocket.close(1e3)}))}}const ga=new v(ws);class ma extends ua{detectNetwork(){const e=Object.create(null,{detectNetwork:{get:()=>super.detectNetwork}});return t=this,r=void 0,i=function*(){let t=this.network;return null==t&&(t=yield e.detectNetwork.call(this),t||ga.throwError("no network detected",v.errors.UNKNOWN_ERROR,{}),null==this._network&&(te(this,"_network",t),this.emit("network",t,null))),t},new((n=void 0)||(n=Promise))((function(e,o){function s(e){try{c(i.next(e))}catch(e){o(e)}}function a(e){try{c(i.throw(e))}catch(e){o(e)}}function c(t){var r;t.done?e(t.value):(r=t.value,r instanceof n?r:new n((function(e){e(r)}))).then(s,a)}c((i=i.apply(t,r||[])).next())}));var t,r,n,i}}class ya extends ma{constructor(e,t){ga.checkAbstract(new.target,ya),e=re(new.target,"getNetwork")(e),t=re(new.target,"getApiKey")(t),super(re(new.target,"getUrl")(e,t),e),"string"==typeof t?te(this,"apiKey",t):null!=t&&Object.keys(t).forEach((e=>{te(this,e,t[e])}))}_startPending(){ga.warn("WARNING: API provider does not support pending filters")}isCommunityResource(){return!1}getSigner(e){return ga.throwError("API provider does not support signing",v.errors.UNSUPPORTED_OPERATION,{operation:"getSigner"})}listAccounts(){return Promise.resolve([])}static getApiKey(e){return e}static getUrl(e,t){return ga.throwError("not implemented; sub-classes must override getUrl",v.errors.NOT_IMPLEMENTED,{operation:"getUrl"})}}const va=new v(ws),ba="_gg7wSSi0KMBsdKnGVfHDueq6xMB9EkC";class wa extends pa{constructor(e,t){const r=new Ea(e,t);super(r.connection.url.replace(/^http/i,"ws").replace(".alchemyapi.",".ws.alchemyapi."),r.network),te(this,"apiKey",r.apiKey)}isCommunityResource(){return this.apiKey===ba}}class Ea extends ya{static getWebSocketProvider(e,t){return new wa(e,t)}static getApiKey(e){return null==e?ba:(e&&"string"!=typeof e&&va.throwArgumentError("invalid apiKey","apiKey",e),e)}static getUrl(e,t){let r=null;switch(e.name){case"homestead":r="eth-mainnet.alchemyapi.io/v2/";break;case"goerli":r="eth-goerli.g.alchemy.com/v2/";break;case"sepolia":r="eth-sepolia.g.alchemy.com/v2/";break;case"matic":r="polygon-mainnet.g.alchemy.com/v2/";break;case"maticmum":r="polygon-mumbai.g.alchemy.com/v2/";break;case"arbitrum":r="arb-mainnet.g.alchemy.com/v2/";break;case"arbitrum-goerli":r="arb-goerli.g.alchemy.com/v2/";break;case"arbitrum-sepolia":r="arb-sepolia.g.alchemy.com/v2/";break;case"optimism":r="opt-mainnet.g.alchemy.com/v2/";break;case"optimism-goerli":r="opt-goerli.g.alchemy.com/v2/";break;case"optimism-sepolia":r="opt-sepolia.g.alchemy.com/v2/";break;default:va.throwArgumentError("unsupported network","network",arguments[0])}return{allowGzip:!0,url:"https://"+r+t,throttleCallback:(e,r)=>(t===ba&&ks(),Promise.resolve(!0))}}isCommunityResource(){return this.apiKey===ba}}const Aa=new v(ws),_a="9f7d929b018cdffb338517efa06f58359e86ff1ffd350bc889738523659e7972";function xa(e){switch(e){case"homestead":return"rpc.ankr.com/eth/";case"ropsten":return"rpc.ankr.com/eth_ropsten/";case"rinkeby":return"rpc.ankr.com/eth_rinkeby/";case"goerli":return"rpc.ankr.com/eth_goerli/";case"sepolia":return"rpc.ankr.com/eth_sepolia/";case"matic":return"rpc.ankr.com/polygon/";case"maticmum":return"rpc.ankr.com/polygon_mumbai/";case"optimism":return"rpc.ankr.com/optimism/";case"optimism-goerli":return"rpc.ankr.com/optimism_testnet/";case"optimism-sepolia":return"rpc.ankr.com/optimism_sepolia/";case"arbitrum":return"rpc.ankr.com/arbitrum/"}return Aa.throwArgumentError("unsupported network","name",e)}class Sa extends ya{isCommunityResource(){return this.apiKey===_a}static getApiKey(e){return null==e?_a:e}static getUrl(e,t){null==t&&(t=_a);const r={allowGzip:!0,url:"https://"+xa(e.name)+t,throttleCallback:(e,r)=>(t.apiKey===_a&&ks(),Promise.resolve(!0))};return null!=t.projectSecret&&(r.user="",r.password=t.projectSecret),r}}const ka=new v(ws);class Ia extends ya{static getApiKey(e){return null!=e&&ka.throwArgumentError("apiKey not supported for cloudflare","apiKey",e),null}static getUrl(e,t){let r=null;return"homestead"===e.name?r="https://cloudflare-eth.com/":ka.throwArgumentError("unsupported network","network",arguments[0]),r}perform(e,t){const r=Object.create(null,{perform:{get:()=>super.perform}});return n=this,i=void 0,s=function*(){return"getBlockNumber"===e?(yield r.perform.call(this,"getBlock",{blockTag:"latest"})).number:r.perform.call(this,e,t)},new((o=void 0)||(o=Promise))((function(e,t){function r(e){try{c(s.next(e))}catch(e){t(e)}}function a(e){try{c(s.throw(e))}catch(e){t(e)}}function c(t){var n;t.done?e(t.value):(n=t.value,n instanceof o?n:new o((function(e){e(n)}))).then(r,a)}c((s=s.apply(n,i||[])).next())}));var n,i,o,s}}var Oa=function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function s(e){try{c(n.next(e))}catch(e){o(e)}}function a(e){try{c(n.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))};const Ta=new v(ws);function Pa(e){const t={};for(let r in e){if(null==e[r])continue;let n=e[r];"type"===r&&0===n||(n={type:!0,gasLimit:!0,gasPrice:!0,maxFeePerGs:!0,maxPriorityFeePerGas:!0,nonce:!0,value:!0}[r]?L(R(n)):"accessList"===r?"["+fn(n).map((e=>`{address:"${e.address}",storageKeys:["${e.storageKeys.join('","')}"]}`)).join(",")+"]":R(n),t[r]=n)}return t}function Ra(e){if(0==e.status&&("No records found"===e.message||"No transactions found"===e.message))return e.result;if(1!=e.status||"string"!=typeof e.message||!e.message.match(/^OK/)){const t=new Error("invalid response");throw t.result=JSON.stringify(e),(e.result||"").toLowerCase().indexOf("rate limit")>=0&&(t.throttleRetry=!0),t}return e.result}function Na(e){if(e&&0==e.status&&"NOTOK"==e.message&&(e.result||"").toLowerCase().indexOf("rate limit")>=0){const t=new Error("throttled response");throw t.result=JSON.stringify(e),t.throttleRetry=!0,t}if("2.0"!=e.jsonrpc){const t=new Error("invalid response");throw t.result=JSON.stringify(e),t}if(e.error){const t=new Error(e.error.message||"unknown error");throw e.error.code&&(t.code=e.error.code),e.error.data&&(t.data=e.error.data),t}return e.result}function Ca(e){if("pending"===e)throw new Error("pending not supported");return"latest"===e?e:parseInt(e.substring(2),16)}function Ma(e,t,r){if("call"===e&&t.code===v.errors.SERVER_ERROR){const e=t.error;if(e&&(e.message.match(/reverted/i)||e.message.match(/VM execution error/i))){let r=e.data;if(r&&(r="0x"+r.replace(/^.*0x/i,"")),T(r))return r;Ta.throwError("missing revert data in call exception",v.errors.CALL_EXCEPTION,{error:t,data:"0x"})}}let n=t.message;throw t.code===v.errors.SERVER_ERROR&&(t.error&&"string"==typeof t.error.message?n=t.error.message:"string"==typeof t.body?n=t.body:"string"==typeof t.responseText&&(n=t.responseText)),n=(n||"").toLowerCase(),n.match(/insufficient funds/)&&Ta.throwError("insufficient funds for intrinsic transaction cost",v.errors.INSUFFICIENT_FUNDS,{error:t,method:e,transaction:r}),n.match(/same hash was already imported|transaction nonce is too low|nonce too low/)&&Ta.throwError("nonce has already been used",v.errors.NONCE_EXPIRED,{error:t,method:e,transaction:r}),n.match(/another transaction with same nonce/)&&Ta.throwError("replacement fee too low",v.errors.REPLACEMENT_UNDERPRICED,{error:t,method:e,transaction:r}),n.match(/execution failed due to an exception|execution reverted/)&&Ta.throwError("cannot estimate gas; transaction may fail or may require manual gas limit",v.errors.UNPREDICTABLE_GAS_LIMIT,{error:t,method:e,transaction:r}),t}class La extends Ys{constructor(e,t){super(e),te(this,"baseUrl",this.getBaseUrl()),te(this,"apiKey",t||null)}getBaseUrl(){switch(this.network?this.network.name:"invalid"){case"homestead":return"https://api.etherscan.io";case"goerli":return"https://api-goerli.etherscan.io";case"sepolia":return"https://api-sepolia.etherscan.io";case"matic":return"https://api.polygonscan.com";case"maticmum":return"https://api-testnet.polygonscan.com";case"arbitrum":return"https://api.arbiscan.io";case"arbitrum-goerli":return"https://api-goerli.arbiscan.io";case"optimism":return"https://api-optimistic.etherscan.io";case"optimism-goerli":return"https://api-goerli-optimistic.etherscan.io"}return Ta.throwArgumentError("unsupported network","network",this.network.name)}getUrl(e,t){const r=Object.keys(t).reduce(((e,r)=>{const n=t[r];return null!=n&&(e+=`&${r}=${n}`),e}),""),n=this.apiKey?`&apikey=${this.apiKey}`:"";return`${this.baseUrl}/api?module=${e}${r}${n}`}getPostUrl(){return`${this.baseUrl}/api`}getPostData(e,t){return t.module=e,t.apikey=this.apiKey,t}fetch(e,t,r){return Oa(this,void 0,void 0,(function*(){const n=r?this.getPostUrl():this.getUrl(e,t),i=r?this.getPostData(e,t):null,o="proxy"===e?Na:Ra;this.emit("debug",{action:"request",request:n,provider:this});const s={url:n,throttleSlotInterval:1e3,throttleCallback:(e,t)=>(this.isCommunityResource()&&ks(),Promise.resolve(!0))};let a=null;i&&(s.headers={"content-type":"application/x-www-form-urlencoded; charset=UTF-8"},a=Object.keys(i).map((e=>`${e}=${i[e]}`)).join("&"));const c=yield ms(s,a,o||Na);return this.emit("debug",{action:"response",request:n,response:ue(c),provider:this}),c}))}detectNetwork(){return Oa(this,void 0,void 0,(function*(){return this.network}))}perform(e,t){const r=Object.create(null,{perform:{get:()=>super.perform}});return Oa(this,void 0,void 0,(function*(){switch(e){case"getBlockNumber":return this.fetch("proxy",{action:"eth_blockNumber"});case"getGasPrice":return this.fetch("proxy",{action:"eth_gasPrice"});case"getBalance":return this.fetch("account",{action:"balance",address:t.address,tag:t.blockTag});case"getTransactionCount":return this.fetch("proxy",{action:"eth_getTransactionCount",address:t.address,tag:t.blockTag});case"getCode":return this.fetch("proxy",{action:"eth_getCode",address:t.address,tag:t.blockTag});case"getStorageAt":return this.fetch("proxy",{action:"eth_getStorageAt",address:t.address,position:t.position,tag:t.blockTag});case"sendTransaction":return this.fetch("proxy",{action:"eth_sendRawTransaction",hex:t.signedTransaction},!0).catch((e=>Ma("sendTransaction",e,t.signedTransaction)));case"getBlock":if(t.blockTag)return this.fetch("proxy",{action:"eth_getBlockByNumber",tag:t.blockTag,boolean:t.includeTransactions?"true":"false"});throw new Error("getBlock by blockHash not implemented");case"getTransaction":return this.fetch("proxy",{action:"eth_getTransactionByHash",txhash:t.transactionHash});case"getTransactionReceipt":return this.fetch("proxy",{action:"eth_getTransactionReceipt",txhash:t.transactionHash});case"call":{if("latest"!==t.blockTag)throw new Error("EtherscanProvider does not support blockTag for call");const e=Pa(t.transaction);e.module="proxy",e.action="eth_call";try{return yield this.fetch("proxy",e,!0)}catch(e){return Ma("call",e,t.transaction)}}case"estimateGas":{const e=Pa(t.transaction);e.module="proxy",e.action="eth_estimateGas";try{return yield this.fetch("proxy",e,!0)}catch(e){return Ma("estimateGas",e,t.transaction)}}case"getLogs":{const e={action:"getLogs"};if(t.filter.fromBlock&&(e.fromBlock=Ca(t.filter.fromBlock)),t.filter.toBlock&&(e.toBlock=Ca(t.filter.toBlock)),t.filter.address&&(e.address=t.filter.address),t.filter.topics&&t.filter.topics.length>0&&(t.filter.topics.length>1&&Ta.throwError("unsupported topic count",v.errors.UNSUPPORTED_OPERATION,{topics:t.filter.topics}),1===t.filter.topics.length)){const r=t.filter.topics[0];"string"==typeof r&&66===r.length||Ta.throwError("unsupported topic format",v.errors.UNSUPPORTED_OPERATION,{topic0:r}),e.topic0=r}const r=yield this.fetch("logs",e);let n={};for(let e=0;e<r.length;e++){const t=r[e];if(null==t.blockHash){if(null==n[t.blockNumber]){const e=yield this.getBlock(t.blockNumber);e&&(n[t.blockNumber]=e.hash)}t.blockHash=n[t.blockNumber]}}return r}case"getEtherPrice":return"homestead"!==this.network.name?0:parseFloat((yield this.fetch("stats",{action:"ethprice"})).ethusd)}return r.perform.call(this,e,t)}))}getHistory(e,t,r){return Oa(this,void 0,void 0,(function*(){const n={action:"txlist",address:yield this.resolveName(e),startblock:null==t?0:t,endblock:null==r?99999999:r,sort:"asc"};return(yield this.fetch("account",n)).map((e=>{["contractAddress","to"].forEach((function(t){""==e[t]&&delete e[t]})),null==e.creates&&null!=e.contractAddress&&(e.creates=e.contractAddress);const t=this.formatter.transactionResponse(e);return e.timeStamp&&(t.timestamp=parseInt(e.timeStamp)),t}))}))}isCommunityResource(){return null==this.apiKey}}function Ba(e){for(let t=(e=e.slice()).length-1;t>0;t--){const r=Math.floor(Math.random()*(t+1)),n=e[t];e[t]=e[r],e[r]=n}return e}var Ua=function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function s(e){try{c(n.next(e))}catch(e){o(e)}}function a(e){try{c(n.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))};const Da=new v(ws);function ja(){return(new Date).getTime()}function Fa(e){let t=null;for(let r=0;r<e.length;r++){const n=e[r];if(null==n)return null;t?t.name===n.name&&t.chainId===n.chainId&&(t.ensAddress===n.ensAddress||null==t.ensAddress&&null==n.ensAddress)||Da.throwArgumentError("provider mismatch","networks",e):t=n}return t}function za(e,t){e=e.slice().sort();const r=Math.floor(e.length/2);if(e.length%2)return e[r];const n=e[r-1],i=e[r];return null!=t&&Math.abs(n-i)>t?null:(n+i)/2}function qa(e){if(null===e)return"null";if("number"==typeof e||"boolean"==typeof e)return JSON.stringify(e);if("string"==typeof e)return e;if($.isBigNumber(e))return e.toString();if(Array.isArray(e))return JSON.stringify(e.map((e=>qa(e))));if("object"==typeof e){const t=Object.keys(e);return t.sort(),"{"+t.map((t=>{let r=e[t];return r="function"==typeof r?"[function]":qa(r),JSON.stringify(t)+":"+r})).join(",")+"}"}throw new Error("unknown value type: "+typeof e)}let Ga=1;function Ha(e){let t=null,r=null,n=new Promise((n=>{t=function(){r&&(clearTimeout(r),r=null),n()},r=setTimeout(t,e)}));return{cancel:t,getPromise:function(){return n},wait:e=>(n=n.then(e),n)}}const Ka=[v.errors.CALL_EXCEPTION,v.errors.INSUFFICIENT_FUNDS,v.errors.NONCE_EXPIRED,v.errors.REPLACEMENT_UNDERPRICED,v.errors.UNPREDICTABLE_GAS_LIMIT],Va=["address","args","errorArgs","errorSignature","method","transaction"];function Wa(e,t){const r={weight:e.weight};return Object.defineProperty(r,"provider",{get:()=>e.provider}),e.start&&(r.start=e.start),t&&(r.duration=t-e.start),e.done&&(e.error?r.error=e.error:r.result=e.result||null),r}function $a(e,t){return Ua(this,void 0,void 0,(function*(){const r=e.provider;return null!=r.blockNumber&&r.blockNumber>=t||-1===t?r:ys((()=>new Promise(((n,i)=>{setTimeout((function(){return r.blockNumber>=t?n(r):e.cancelled?n(null):n(void 0)}),0)}))),{oncePoll:r})}))}function Ja(e,t,r,n){return Ua(this,void 0,void 0,(function*(){let i=e.provider;switch(r){case"getBlockNumber":case"getGasPrice":return i[r]();case"getEtherPrice":if(i.getEtherPrice)return i.getEtherPrice();break;case"getBalance":case"getTransactionCount":case"getCode":return n.blockTag&&T(n.blockTag)&&(i=yield $a(e,t)),i[r](n.address,n.blockTag||"latest");case"getStorageAt":return n.blockTag&&T(n.blockTag)&&(i=yield $a(e,t)),i.getStorageAt(n.address,n.position,n.blockTag||"latest");case"getBlock":return n.blockTag&&T(n.blockTag)&&(i=yield $a(e,t)),i[n.includeTransactions?"getBlockWithTransactions":"getBlock"](n.blockTag||n.blockHash);case"call":case"estimateGas":return n.blockTag&&T(n.blockTag)&&(i=yield $a(e,t)),"call"===r&&n.blockTag?i[r](n.transaction,n.blockTag):i[r](n.transaction);case"getTransaction":case"getTransactionReceipt":return i[r](n.transactionHash);case"getLogs":{let r=n.filter;return(r.fromBlock&&T(r.fromBlock)||r.toBlock&&T(r.toBlock))&&(i=yield $a(e,t)),i.getLogs(r)}}return Da.throwError("unknown method error",v.errors.UNKNOWN_ERROR,{method:r,params:n})}))}class Ya extends Ys{constructor(e,t){0===e.length&&Da.throwArgumentError("missing providers","providers",e);const r=e.map(((e,t)=>{if(ir.isProvider(e)){const t=xs(e)?2e3:750,r=1;return Object.freeze({provider:e,weight:1,stallTimeout:t,priority:r})}const r=oe(e);null==r.priority&&(r.priority=1),null==r.stallTimeout&&(r.stallTimeout=xs(e)?2e3:750),null==r.weight&&(r.weight=1);const n=r.weight;return(n%1||n>512||n<1)&&Da.throwArgumentError("invalid weight; must be integer in [1, 512]",`providers[${t}].weight`,n),Object.freeze(r)})),n=r.reduce(((e,t)=>e+t.weight),0);null==t?t=n/2:t>n&&Da.throwArgumentError("quorum will always fail; larger than total weight","quorum",t);let i=Fa(r.map((e=>e.provider.network)));null==i&&(i=new Promise(((e,t)=>{setTimeout((()=>{this.detectNetwork().then(e,t)}),0)}))),super(i),te(this,"providerConfigs",Object.freeze(r)),te(this,"quorum",t),this._highestBlockNumber=-1}detectNetwork(){return Ua(this,void 0,void 0,(function*(){return Fa(yield Promise.all(this.providerConfigs.map((e=>e.provider.getNetwork()))))}))}perform(e,t){return Ua(this,void 0,void 0,(function*(){if("sendTransaction"===e){const e=yield Promise.all(this.providerConfigs.map((e=>e.provider.sendTransaction(t.signedTransaction).then((e=>e.hash),(e=>e)))));for(let t=0;t<e.length;t++){const r=e[t];if("string"==typeof r)return r}throw e[0]}-1===this._highestBlockNumber&&"getBlockNumber"!==e&&(yield this.getBlockNumber());const r=function(e,t,r){let n=qa;switch(t){case"getBlockNumber":return function(t){const r=t.map((e=>e.result));let n=za(t.map((e=>e.result)),2);if(null!=n)return n=Math.ceil(n),r.indexOf(n+1)>=0&&n++,n>=e._highestBlockNumber&&(e._highestBlockNumber=n),e._highestBlockNumber};case"getGasPrice":return function(e){const t=e.map((e=>e.result));return t.sort(),t[Math.floor(t.length/2)]};case"getEtherPrice":return function(e){return za(e.map((e=>e.result)))};case"getBalance":case"getTransactionCount":case"getCode":case"getStorageAt":case"call":case"estimateGas":case"getLogs":break;case"getTransaction":case"getTransactionReceipt":n=function(e){return null==e?null:((e=oe(e)).confirmations=-1,qa(e))};break;case"getBlock":n=r.includeTransactions?function(e){return null==e?null:((e=oe(e)).transactions=e.transactions.map((e=>((e=oe(e)).confirmations=-1,e))),qa(e))}:function(e){return null==e?null:qa(e)};break;default:throw new Error("unknown method: "+t)}return function(e,t){return function(r){const n={};r.forEach((t=>{const r=e(t.result);n[r]||(n[r]={count:0,result:t.result}),n[r].count++}));const i=Object.keys(n);for(let e=0;e<i.length;e++){const r=n[i[e]];if(r.count>=t)return r.result}}}(n,e.quorum)}(this,e,t),n=Ba(this.providerConfigs.map(oe));n.sort(((e,t)=>e.priority-t.priority));const i=this._highestBlockNumber;let o=0,s=!0;for(;;){const a=ja();let c=n.filter((e=>e.runner&&a-e.start<e.stallTimeout)).reduce(((e,t)=>e+t.weight),0);for(;c<this.quorum&&o<n.length;){const r=n[o++],s=Ga++;r.start=ja(),r.staller=Ha(r.stallTimeout),r.staller.wait((()=>{r.staller=null})),r.runner=Ja(r,i,e,t).then((n=>{r.done=!0,r.result=n,this.listenerCount("debug")&&this.emit("debug",{action:"request",rid:s,backend:Wa(r,ja()),request:{method:e,params:ue(t)},provider:this})}),(n=>{r.done=!0,r.error=n,this.listenerCount("debug")&&this.emit("debug",{action:"request",rid:s,backend:Wa(r,ja()),request:{method:e,params:ue(t)},provider:this})})),this.listenerCount("debug")&&this.emit("debug",{action:"request",rid:s,backend:Wa(r,null),request:{method:e,params:ue(t)},provider:this}),c+=r.weight}const u=[];n.forEach((e=>{!e.done&&e.runner&&(u.push(e.runner),e.staller&&u.push(e.staller.getPromise()))})),u.length&&(yield Promise.race(u));const l=n.filter((e=>e.done&&null==e.error));if(l.length>=this.quorum){const e=r(l);if(void 0!==e)return n.forEach((e=>{e.staller&&e.staller.cancel(),e.cancelled=!0})),e;s||(yield Ha(100).getPromise()),s=!1}const h=n.reduce(((e,t)=>{if(!t.done||null==t.error)return e;const r=t.error.code;return Ka.indexOf(r)>=0&&(e[r]||(e[r]={error:t.error,weight:0}),e[r].weight+=t.weight),e}),{});if(Object.keys(h).forEach((e=>{const t=h[e];if(t.weight<this.quorum)return;n.forEach((e=>{e.staller&&e.staller.cancel(),e.cancelled=!0}));const r=t.error,i={};Va.forEach((e=>{null!=r[e]&&(i[e]=r[e])})),Da.throwError(r.reason||r.message,e,i)})),0===n.filter((e=>!e.done)).length)break}return n.forEach((e=>{e.staller&&e.staller.cancel(),e.cancelled=!0})),Da.throwError("failed to meet quorum",v.errors.SERVER_ERROR,{method:e,params:t,results:n.map((e=>Wa(e))),provider:this})}))}}const Qa=null,Xa=new v(ws),Za="84842078b09946638c03157f83405213";class ec extends pa{constructor(e,t){const r=new tc(e,t),n=r.connection;n.password&&Xa.throwError("INFURA WebSocket project secrets unsupported",v.errors.UNSUPPORTED_OPERATION,{operation:"InfuraProvider.getWebSocketProvider()"}),super(n.url.replace(/^http/i,"ws").replace("/v3/","/ws/v3/"),e),te(this,"apiKey",r.projectId),te(this,"projectId",r.projectId),te(this,"projectSecret",r.projectSecret)}isCommunityResource(){return this.projectId===Za}}class tc extends ya{static getWebSocketProvider(e,t){return new ec(e,t)}static getApiKey(e){const t={apiKey:Za,projectId:Za,projectSecret:null};return null==e||("string"==typeof e?t.projectId=e:null!=e.projectSecret?(Xa.assertArgument("string"==typeof e.projectId,"projectSecret requires a projectId","projectId",e.projectId),Xa.assertArgument("string"==typeof e.projectSecret,"invalid projectSecret","projectSecret","[REDACTED]"),t.projectId=e.projectId,t.projectSecret=e.projectSecret):e.projectId&&(t.projectId=e.projectId),t.apiKey=t.projectId),t}static getUrl(e,t){let r=null;switch(e?e.name:"unknown"){case"homestead":r="mainnet.infura.io";break;case"goerli":r="goerli.infura.io";break;case"sepolia":r="sepolia.infura.io";break;case"matic":r="polygon-mainnet.infura.io";break;case"maticmum":r="polygon-mumbai.infura.io";break;case"optimism":r="optimism-mainnet.infura.io";break;case"optimism-goerli":r="optimism-goerli.infura.io";break;case"optimism-sepolia":r="optimism-sepolia.infura.io";break;case"arbitrum":r="arbitrum-mainnet.infura.io";break;case"arbitrum-goerli":r="arbitrum-goerli.infura.io";break;case"arbitrum-sepolia":r="arbitrum-sepolia.infura.io";break;default:Xa.throwError("unsupported network",v.errors.INVALID_ARGUMENT,{argument:"network",value:e})}const n={allowGzip:!0,url:"https://"+r+"/v3/"+t.projectId,throttleCallback:(e,r)=>(t.projectId===Za&&ks(),Promise.resolve(!0))};return null!=t.projectSecret&&(n.user="",n.password=t.projectSecret),n}isCommunityResource(){return this.projectId===Za}}class rc extends ua{send(e,t){const r={method:e,params:t,id:this._nextId++,jsonrpc:"2.0"};null==this._pendingBatch&&(this._pendingBatch=[]);const n={request:r,resolve:null,reject:null},i=new Promise(((e,t)=>{n.resolve=e,n.reject=t}));return this._pendingBatch.push(n),this._pendingBatchAggregator||(this._pendingBatchAggregator=setTimeout((()=>{const e=this._pendingBatch;this._pendingBatch=null,this._pendingBatchAggregator=null;const t=e.map((e=>e.request));return this.emit("debug",{action:"requestBatch",request:ue(t),provider:this}),ms(this.connection,JSON.stringify(t)).then((r=>{this.emit("debug",{action:"response",request:t,response:r,provider:this}),e.forEach(((e,t)=>{const n=r[t];if(n.error){const t=new Error(n.error.message);t.code=n.error.code,t.data=n.error.data,e.reject(t)}else e.resolve(n.result)}))}),(r=>{this.emit("debug",{action:"response",error:r,request:t,provider:this}),e.forEach((e=>{e.reject(r)}))}))}),10)),i}}const nc=new v(ws);class ic extends ya{static getApiKey(e){return e&&"string"!=typeof e&&nc.throwArgumentError("invalid apiKey","apiKey",e),e||"ETHERS_JS_SHARED"}static getUrl(e,t){nc.warn("NodeSmith will be discontinued on 2019-12-20; please migrate to another platform.");let r=null;switch(e.name){case"homestead":r="https://ethereum.api.nodesmith.io/v1/mainnet/jsonrpc";break;case"ropsten":r="https://ethereum.api.nodesmith.io/v1/ropsten/jsonrpc";break;case"rinkeby":r="https://ethereum.api.nodesmith.io/v1/rinkeby/jsonrpc";break;case"goerli":r="https://ethereum.api.nodesmith.io/v1/goerli/jsonrpc";break;case"kovan":r="https://ethereum.api.nodesmith.io/v1/kovan/jsonrpc";break;default:nc.throwArgumentError("unsupported network","network",arguments[0])}return r+"?apiKey="+t}}const oc=new v(ws),sc="62e1ad51b37b8e00394bda3b";class ac extends ya{static getApiKey(e){const t={applicationId:null,loadBalancer:!0,applicationSecretKey:null};return null==e?t.applicationId=sc:"string"==typeof e?t.applicationId=e:null!=e.applicationSecretKey?(t.applicationId=e.applicationId,t.applicationSecretKey=e.applicationSecretKey):e.applicationId?t.applicationId=e.applicationId:oc.throwArgumentError("unsupported PocketProvider apiKey","apiKey",e),t}static getUrl(e,t){let r=null;switch(e?e.name:"unknown"){case"goerli":r="eth-goerli.gateway.pokt.network";break;case"homestead":r="eth-mainnet.gateway.pokt.network";break;case"kovan":r="poa-kovan.gateway.pokt.network";break;case"matic":r="poly-mainnet.gateway.pokt.network";break;case"maticmum":r="polygon-mumbai-rpc.gateway.pokt.network";break;case"rinkeby":r="eth-rinkeby.gateway.pokt.network";break;case"ropsten":r="eth-ropsten.gateway.pokt.network";break;default:oc.throwError("unsupported network",v.errors.INVALID_ARGUMENT,{argument:"network",value:e})}const n={headers:{},url:`https://${r}/v1/lb/${t.applicationId}`};return null!=t.applicationSecretKey&&(n.user="",n.password=t.applicationSecretKey),n}isCommunityResource(){return this.applicationId===sc}}const cc=new v(ws);class uc extends ya{static getApiKey(e){return e&&"string"!=typeof e&&cc.throwArgumentError("invalid apiKey","apiKey",e),e||"919b412a057b5e9c9b6dce193c5a60242d6efadb"}static getUrl(e,t){let r=null;switch(e.name){case"homestead":r="ethers.quiknode.pro";break;case"goerli":r="ethers.ethereum-goerli.quiknode.pro";break;case"sepolia":r="ethers.ethereum-sepolia.quiknode.pro";break;case"holesky":r="ethers.ethereum-holesky.quiknode.pro";break;case"arbitrum":r="ethers.arbitrum-mainnet.quiknode.pro";break;case"arbitrum-goerli":r="ethers.arbitrum-goerli.quiknode.pro";break;case"arbitrum-sepolia":r="ethers.arbitrum-sepolia.quiknode.pro";break;case"base":r="ethers.base-mainnet.quiknode.pro";break;case"base-goerli":r="ethers.base-goerli.quiknode.pro";break;case"base-spolia":r="ethers.base-sepolia.quiknode.pro";break;case"bnb":r="ethers.bsc.quiknode.pro";break;case"bnbt":r="ethers.bsc-testnet.quiknode.pro";break;case"matic":r="ethers.matic.quiknode.pro";break;case"maticmum":r="ethers.matic-testnet.quiknode.pro";break;case"optimism":r="ethers.optimism.quiknode.pro";break;case"optimism-goerli":r="ethers.optimism-goerli.quiknode.pro";break;case"optimism-sepolia":r="ethers.optimism-sepolia.quiknode.pro";break;case"xdai":r="ethers.xdai.quiknode.pro";break;default:cc.throwArgumentError("unsupported network","network",arguments[0])}return"https://"+r+"/"+t}}const lc=new v(ws);let hc=1;function fc(e,t){const r="Web3LegacyFetcher";return function(e,n){const i={method:e,params:n,id:hc++,jsonrpc:"2.0"};return new Promise(((e,n)=>{this.emit("debug",{action:"request",fetcher:r,request:ue(i),provider:this}),t(i,((t,o)=>{if(t)return this.emit("debug",{action:"response",fetcher:r,error:t,request:i,provider:this}),n(t);if(this.emit("debug",{action:"response",fetcher:r,request:i,response:o,provider:this}),o.error){const e=new Error(o.error.message);return e.code=o.error.code,e.data=o.error.data,n(e)}e(o.result)}))}))}}class dc extends ua{constructor(e,t){null==e&&lc.throwArgumentError("missing provider","provider",e);let r=null,n=null,i=null;"function"==typeof e?(r="unknown:",n=e):(r=e.host||e.path||"",!r&&e.isMetaMask&&(r="metamask"),i=e,e.request?(""===r&&(r="eip-1193:"),n=function(e){return function(t,r){null==r&&(r=[]);const n={method:t,params:r};return this.emit("debug",{action:"request",fetcher:"Eip1193Fetcher",request:ue(n),provider:this}),e.request(n).then((e=>(this.emit("debug",{action:"response",fetcher:"Eip1193Fetcher",request:n,response:e,provider:this}),e)),(e=>{throw this.emit("debug",{action:"response",fetcher:"Eip1193Fetcher",request:n,error:e,provider:this}),e}))}}(e)):e.sendAsync?n=fc(0,e.sendAsync.bind(e)):e.send?n=fc(0,e.send.bind(e)):lc.throwArgumentError("unsupported provider","provider",e),r||(r="unknown:")),super(r,t),te(this,"jsonRpcFetchFunc",n),te(this,"provider",i)}send(e,t){return this.jsonRpcFetchFunc(e,t)}}const pc=new v(ws);function gc(e,t){if(null==e&&(e="homestead"),"string"==typeof e){const t=e.match(/^(ws|http)s?:/i);if(t)switch(t[1].toLowerCase()){case"http":case"https":return new ua(e);case"ws":case"wss":return new pa(e);default:pc.throwArgumentError("unsupported URL scheme","network",e)}}const r=Mo(e);return r&&r._defaultProvider||pc.throwError("unsupported getDefaultProvider network",v.errors.NETWORK_ERROR,{operation:"getDefaultProvider",network:e}),r._defaultProvider({FallbackProvider:Ya,AlchemyProvider:Ea,AnkrProvider:Sa,CloudflareProvider:Ia,EtherscanProvider:La,InfuraProvider:tc,JsonRpcProvider:ua,NodesmithProvider:ic,PocketProvider:ac,QuickNodeProvider:uc,Web3Provider:dc,IpcProvider:Qa},t)}const mc=new RegExp("^bytes([0-9]+)$"),yc=new RegExp("^(u?int)([0-9]*)$"),vc=new RegExp("^(.*)\\[([0-9]*)\\]$"),bc="0000000000000000000000000000000000000000000000000000000000000000",wc=new v("solidity/5.8.0");function Ec(e,t,r){switch(e){case"address":return r?O(t,32):S(t);case"string":return Ke(t);case"bytes":return S(t);case"bool":return t=t?"0x01":"0x00",r?O(t,32):S(t)}let n=e.match(yc);if(n){let i=parseInt(n[2]||"256");return(n[2]&&String(i)!==n[2]||i%8!=0||0===i||i>256)&&wc.throwArgumentError("invalid number type","type",e),r&&(i=256),O(t=$.from(t).toTwos(i),i/8)}if(n=e.match(mc),n){const i=parseInt(n[1]);return(String(i)!==n[1]||0===i||i>32)&&wc.throwArgumentError("invalid bytes type","type",e),S(t).byteLength!==i&&wc.throwArgumentError(`invalid value for ${e}`,"value",t),r?S((t+bc).substring(0,66)):t}if(n=e.match(vc),n&&Array.isArray(t)){const r=n[1];parseInt(n[2]||String(t.length))!=t.length&&wc.throwArgumentError(`invalid array length for ${e}`,"value",t);const i=[];return t.forEach((function(e){i.push(Ec(r,e,!0))})),k(i)}return wc.throwArgumentError("invalid type","type",e)}function Ac(e,t){e.length!=t.length&&wc.throwArgumentError("wrong number of values; expected ${ types.length }","values",t);const r=[];return e.forEach((function(e,n){r.push(Ec(e,t[n]))})),R(k(r))}function _c(e,t){return be(Ac(e,t))}function xc(e,t){return vi(Ac(e,t))}function Sc(e,t){t||(t=function(e){return[parseInt(e,16)]});let r=0,n={};return e.split(",").forEach((e=>{let i=e.split(":");r+=parseInt(i[0],16),n[r]=t(i[1])})),n}function kc(e){let t=0;return e.split(",").map((e=>{let r=e.split("-");1===r.length?r[1]="0":""===r[1]&&(r[1]="1");let n=t+parseInt(r[0],16);return t=parseInt(r[1],16),{l:n,h:t}}))}function Ic(e,t){let r=0;for(let n=0;n<t.length;n++){let i=t[n];if(r+=i.l,e>=r&&e<=r+i.h&&(e-r)%(i.d||1)==0){if(i.e&&-1!==i.e.indexOf(e-r))continue;return i}}return null}const Oc=kc("221,13-1b,5f-,40-10,51-f,11-3,3-3,2-2,2-4,8,2,15,2d,28-8,88,48,27-,3-5,11-20,27-,8,28,3-5,12,18,b-a,1c-4,6-16,2-d,2-2,2,1b-4,17-9,8f-,10,f,1f-2,1c-34,33-14e,4,36-,13-,6-2,1a-f,4,9-,3-,17,8,2-2,5-,2,8-,3-,4-8,2-3,3,6-,16-6,2-,7-3,3-,17,8,3,3,3-,2,6-3,3-,4-a,5,2-6,10-b,4,8,2,4,17,8,3,6-,b,4,4-,2-e,2-4,b-10,4,9-,3-,17,8,3-,5-,9-2,3-,4-7,3-3,3,4-3,c-10,3,7-2,4,5-2,3,2,3-2,3-2,4-2,9,4-3,6-2,4,5-8,2-e,d-d,4,9,4,18,b,6-3,8,4,5-6,3-8,3-3,b-11,3,9,4,18,b,6-3,8,4,5-6,3-6,2,3-3,b-11,3,9,4,18,11-3,7-,4,5-8,2-7,3-3,b-11,3,13-2,19,a,2-,8-2,2-3,7,2,9-11,4-b,3b-3,1e-24,3,2-,3,2-,2-5,5,8,4,2,2-,3,e,4-,6,2,7-,b-,3-21,49,23-5,1c-3,9,25,10-,2-2f,23,6,3,8-2,5-5,1b-45,27-9,2a-,2-3,5b-4,45-4,53-5,8,40,2,5-,8,2,5-,28,2,5-,20,2,5-,8,2,5-,8,8,18,20,2,5-,8,28,14-5,1d-22,56-b,277-8,1e-2,52-e,e,8-a,18-8,15-b,e,4,3-b,5e-2,b-15,10,b-5,59-7,2b-555,9d-3,5b-5,17-,7-,27-,7-,9,2,2,2,20-,36,10,f-,7,14-,4,a,54-3,2-6,6-5,9-,1c-10,13-1d,1c-14,3c-,10-6,32-b,240-30,28-18,c-14,a0,115-,3,66-,b-76,5,5-,1d,24,2,5-2,2,8-,35-2,19,f-10,1d-3,311-37f,1b,5a-b,d7-19,d-3,41,57-,68-4,29-3,5f,29-37,2e-2,25-c,2c-2,4e-3,30,78-3,64-,20,19b7-49,51a7-59,48e-2,38-738,2ba5-5b,222f-,3c-94,8-b,6-4,1b,6,2,3,3,6d-20,16e-f,41-,37-7,2e-2,11-f,5-b,18-,b,14,5-3,6,88-,2,bf-2,7-,7-,7-,4-2,8,8-9,8-2ff,20,5-b,1c-b4,27-,27-cbb1,f7-9,28-2,b5-221,56,48,3-,2-,3-,5,d,2,5,3,42,5-,9,8,1d,5,6,2-2,8,153-3,123-3,33-27fd,a6da-5128,21f-5df,3-fffd,3-fffd,3-fffd,3-fffd,3-fffd,3-fffd,3-fffd,3-fffd,3-fffd,3-fffd,3-fffd,3,2-1d,61-ff7d"),Tc="ad,34f,1806,180b,180c,180d,200b,200c,200d,2060,feff".split(",").map((e=>parseInt(e,16))),Pc=[{h:25,s:32,l:65},{h:30,s:32,e:[23],l:127},{h:54,s:1,e:[48],l:64,d:2},{h:14,s:1,l:57,d:2},{h:44,s:1,l:17,d:2},{h:10,s:1,e:[2,6,8],l:61,d:2},{h:16,s:1,l:68,d:2},{h:84,s:1,e:[18,24,66],l:19,d:2},{h:26,s:32,e:[17],l:435},{h:22,s:1,l:71,d:2},{h:15,s:80,l:40},{h:31,s:32,l:16},{h:32,s:1,l:80,d:2},{h:52,s:1,l:42,d:2},{h:12,s:1,l:55,d:2},{h:40,s:1,e:[38],l:15,d:2},{h:14,s:1,l:48,d:2},{h:37,s:48,l:49},{h:148,s:1,l:6351,d:2},{h:88,s:1,l:160,d:2},{h:15,s:16,l:704},{h:25,s:26,l:854},{h:25,s:32,l:55915},{h:37,s:40,l:1247},{h:25,s:-119711,l:53248},{h:25,s:-119763,l:52},{h:25,s:-119815,l:52},{h:25,s:-119867,e:[1,4,5,7,8,11,12,17],l:52},{h:25,s:-119919,l:52},{h:24,s:-119971,e:[2,7,8,17],l:52},{h:24,s:-120023,e:[2,7,13,15,16,17],l:52},{h:25,s:-120075,l:52},{h:25,s:-120127,l:52},{h:25,s:-120179,l:52},{h:25,s:-120231,l:52},{h:25,s:-120283,l:52},{h:25,s:-120335,l:52},{h:24,s:-119543,e:[17],l:56},{h:24,s:-119601,e:[17],l:58},{h:24,s:-119659,e:[17],l:58},{h:24,s:-119717,e:[17],l:58},{h:24,s:-119775,e:[17],l:58}],Rc=Sc("b5:3bc,c3:ff,7:73,2:253,5:254,3:256,1:257,5:259,1:25b,3:260,1:263,2:269,1:268,5:26f,1:272,2:275,7:280,3:283,5:288,3:28a,1:28b,5:292,3f:195,1:1bf,29:19e,125:3b9,8b:3b2,1:3b8,1:3c5,3:3c6,1:3c0,1a:3ba,1:3c1,1:3c3,2:3b8,1:3b5,1bc9:3b9,1c:1f76,1:1f77,f:1f7a,1:1f7b,d:1f78,1:1f79,1:1f7c,1:1f7d,107:63,5:25b,4:68,1:68,1:68,3:69,1:69,1:6c,3:6e,4:70,1:71,1:72,1:72,1:72,7:7a,2:3c9,2:7a,2:6b,1:e5,1:62,1:63,3:65,1:66,2:6d,b:3b3,1:3c0,6:64,1b574:3b8,1a:3c3,20:3b8,1a:3c3,20:3b8,1a:3c3,20:3b8,1a:3c3,20:3b8,1a:3c3"),Nc=Sc("179:1,2:1,2:1,5:1,2:1,a:4f,a:1,8:1,2:1,2:1,3:1,5:1,3:1,4:1,2:1,3:1,4:1,8:2,1:1,2:2,1:1,2:2,27:2,195:26,2:25,1:25,1:25,2:40,2:3f,1:3f,33:1,11:-6,1:-9,1ac7:-3a,6d:-8,1:-8,1:-8,1:-8,1:-8,1:-8,1:-8,1:-8,9:-8,1:-8,1:-8,1:-8,1:-8,1:-8,b:-8,1:-8,1:-8,1:-8,1:-8,1:-8,1:-8,1:-8,9:-8,1:-8,1:-8,1:-8,1:-8,1:-8,1:-8,1:-8,9:-8,1:-8,1:-8,1:-8,1:-8,1:-8,c:-8,2:-8,2:-8,2:-8,9:-8,1:-8,1:-8,1:-8,1:-8,1:-8,1:-8,1:-8,49:-8,1:-8,1:-4a,1:-4a,d:-56,1:-56,1:-56,1:-56,d:-8,1:-8,f:-8,1:-8,3:-7"),Cc=Sc("df:00730073,51:00690307,19:02BC006E,a7:006A030C,18a:002003B9,16:03B903080301,20:03C503080301,1d7:05650582,190f:00680331,1:00740308,1:0077030A,1:0079030A,1:006102BE,b6:03C50313,2:03C503130300,2:03C503130301,2:03C503130342,2a:1F0003B9,1:1F0103B9,1:1F0203B9,1:1F0303B9,1:1F0403B9,1:1F0503B9,1:1F0603B9,1:1F0703B9,1:1F0003B9,1:1F0103B9,1:1F0203B9,1:1F0303B9,1:1F0403B9,1:1F0503B9,1:1F0603B9,1:1F0703B9,1:1F2003B9,1:1F2103B9,1:1F2203B9,1:1F2303B9,1:1F2403B9,1:1F2503B9,1:1F2603B9,1:1F2703B9,1:1F2003B9,1:1F2103B9,1:1F2203B9,1:1F2303B9,1:1F2403B9,1:1F2503B9,1:1F2603B9,1:1F2703B9,1:1F6003B9,1:1F6103B9,1:1F6203B9,1:1F6303B9,1:1F6403B9,1:1F6503B9,1:1F6603B9,1:1F6703B9,1:1F6003B9,1:1F6103B9,1:1F6203B9,1:1F6303B9,1:1F6403B9,1:1F6503B9,1:1F6603B9,1:1F6703B9,3:1F7003B9,1:03B103B9,1:03AC03B9,2:03B10342,1:03B1034203B9,5:03B103B9,6:1F7403B9,1:03B703B9,1:03AE03B9,2:03B70342,1:03B7034203B9,5:03B703B9,6:03B903080300,1:03B903080301,3:03B90342,1:03B903080342,b:03C503080300,1:03C503080301,1:03C10313,2:03C50342,1:03C503080342,b:1F7C03B9,1:03C903B9,1:03CE03B9,2:03C90342,1:03C9034203B9,5:03C903B9,ac:00720073,5b:00B00063,6:00B00066,d:006E006F,a:0073006D,1:00740065006C,1:0074006D,124f:006800700061,2:00610075,2:006F0076,b:00700061,1:006E0061,1:03BC0061,1:006D0061,1:006B0061,1:006B0062,1:006D0062,1:00670062,3:00700066,1:006E0066,1:03BC0066,4:0068007A,1:006B0068007A,1:006D0068007A,1:00670068007A,1:00740068007A,15:00700061,1:006B00700061,1:006D00700061,1:006700700061,8:00700076,1:006E0076,1:03BC0076,1:006D0076,1:006B0076,1:006D0076,1:00700077,1:006E0077,1:03BC0077,1:006D0077,1:006B0077,1:006D0077,1:006B03C9,1:006D03C9,2:00620071,3:00632215006B0067,1:0063006F002E,1:00640062,1:00670079,2:00680070,2:006B006B,1:006B006D,9:00700068,2:00700070006D,1:00700072,2:00730076,1:00770062,c723:00660066,1:00660069,1:0066006C,1:006600660069,1:00660066006C,1:00730074,1:00730074,d:05740576,1:05740565,1:0574056B,1:057E0576,1:0574056D",(function(e){if(e.length%4!=0)throw new Error("bad data");let t=[];for(let r=0;r<e.length;r+=4)t.push(parseInt(e.substring(r,r+4),16));return t})),Mc=kc("80-20,2a0-,39c,32,f71,18e,7f2-f,19-7,30-4,7-5,f81-b,5,a800-20ff,4d1-1f,110,fa-6,d174-7,2e84-,ffff-,ffff-,ffff-,ffff-,ffff-,ffff-,ffff-,ffff-,ffff-,ffff-,ffff-,ffff-,2,1f-5f,ff7f-20001");function Lc(e){if(e.match(/^[a-z0-9-]*$/i)&&e.length<=59)return e.toLowerCase();let t=Ye(e);var r;r=t.map((e=>{if(Tc.indexOf(e)>=0)return[];if(e>=65024&&e<=65039)return[];let t=function(e){let t=Ic(e,Pc);if(t)return[e+t.s];let r=Rc[e];if(r)return r;let n=Nc[e];return n?[e+n[0]]:Cc[e]||null}(e);return t||[e]})),t=r.reduce(((e,t)=>(t.forEach((t=>{e.push(t)})),e)),[]),t=Ye($e(t),Fe.NFKC),t.forEach((e=>{if(Ic(e,Mc))throw new Error("STRINGPREP_CONTAINS_PROHIBITED")})),t.forEach((e=>{if(Ic(e,Oc))throw new Error("STRINGPREP_CONTAINS_UNASSIGNED")}));let n=$e(t);if("-"===n.substring(0,1)||"--"===n.substring(2,4)||"-"===n.substring(n.length-1))throw new Error("invalid hyphen");return n}function Bc(e){const t=Ke(e);if(t.length>31)throw new Error("bytes32 string must be less than 32 bytes");return R(k([t,So]).slice(0,32))}function Uc(e){const t=S(e);if(32!==t.length)throw new Error("invalid bytes32 - not 32 bytes long");if(0!==t[31])throw new Error("invalid bytes32 string - no null terminator");let r=31;for(;0===t[r-1];)r--;return Je(t.slice(0,r))}const Dc=new v("units/5.8.0"),jc=["wei","kwei","mwei","gwei","szabo","finney","ether"];function Fc(e){const t=String(e).split(".");(t.length>2||!t[0].match(/^-?[0-9]*$/)||t[1]&&!t[1].match(/^[0-9]*$/)||"."===e||"-."===e)&&Dc.throwArgumentError("invalid value","value",e);let r=t[0],n="";for("-"===r.substring(0,1)&&(n="-",r=r.substring(1));"0"===r.substring(0,1);)r=r.substring(1);""===r&&(r="0");let i="";for(2===t.length&&(i="."+(t[1]||"0"));i.length>2&&"0"===i[i.length-1];)i=i.substring(0,i.length-1);const o=[];for(;r.length;){if(r.length<=3){o.unshift(r);break}{const e=r.length-3;o.unshift(r.substring(e)),r=r.substring(0,e)}}return n+o.join(",")+i}function zc(e,t){if("string"==typeof t){const e=jc.indexOf(t);-1!==e&&(t=3*e)}return Gn(e,null!=t?t:18)}function qc(e,t){if("string"!=typeof e&&Dc.throwArgumentError("value must be a string","value",e),"string"==typeof t){const e=jc.indexOf(t);-1!==e&&(t=3*e)}return Hn(e,null!=t?t:18)}function Gc(e){return zc(e,18)}function Hc(e){return qc(e,18)}const Kc="ethers/5.8.0",Vc=new v(Kc);try{const e=window;null==e._ethers&&(e._ethers=c)}catch(e){}},8190:(e,t,r)=>{"use strict";t.KN=void 0;var n,i=r(8287),o=(n=r(3417))&&n.__esModule?n:{default:n},s=function(e){var t=e.allowedSizes,r=e.defaultSize,n=e.padding;return function e(){var s=this,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:r;if(!this||this.constructor!==e)return new e(a);if(t&&!t.includes(a))throw new Error("Unsupported hash length");var c=new o.default({capacity:a});return this.update=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"utf8";if(i.Buffer.isBuffer(e))return c.absorb(e),s;if("string"==typeof e)return s.update(i.Buffer.from(e,t));throw new TypeError("Not a string or buffer")},this.digest=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"binary",t="string"==typeof e?{format:e}:e,r=c.squeeze({buffer:t.buffer,padding:t.padding||n});return t.format&&"binary"!==t.format?r.toString(t.format):r},this.reset=function(){return c.reset(),s},this}},a=s({allowedSizes:[224,256,384,512],defaultSize:512,padding:1}),c=s({allowedSizes:[224,256,384,512],defaultSize:512,padding:6});t.KN=c,s({allowedSizes:[128,256],defaultSize:256,padding:31});var u=a;c.SHA3Hash=u},8196:(e,t)=>{"use strict";function r(e){let t;return"undefined"!=typeof window&&void 0!==window[e]&&(t=window[e]),t}function n(e){const t=r(e);if(!t)throw new Error(`${e} is not defined in Window`);return t}Object.defineProperty(t,"__esModule",{value:!0}),t.getLocalStorage=t.getLocalStorageOrThrow=t.getCrypto=t.getCryptoOrThrow=t.getLocation=t.getLocationOrThrow=t.getNavigator=t.getNavigatorOrThrow=t.getDocument=t.getDocumentOrThrow=t.getFromWindowOrThrow=t.getFromWindow=void 0,t.getFromWindow=r,t.getFromWindowOrThrow=n,t.getDocumentOrThrow=function(){return n("document")},t.getDocument=function(){return r("document")},t.getNavigatorOrThrow=function(){return n("navigator")},t.getNavigator=function(){return r("navigator")},t.getLocationOrThrow=function(){return n("location")},t.getLocation=function(){return r("location")},t.getCryptoOrThrow=function(){return n("crypto")},t.getCrypto=function(){return r("crypto")},t.getLocalStorageOrThrow=function(){return n("localStorage")},t.getLocalStorage=function(){return r("localStorage")}},8287:(e,t,r)=>{"use strict";const n=r(7526),i=r(251),o="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;t.Buffer=c,t.SlowBuffer=function(e){return+e!=e&&(e=0),c.alloc(+e)},t.INSPECT_MAX_BYTES=50;const s=2147483647;function a(e){if(e>s)throw new RangeError('The value "'+e+'" is invalid for option "size"');const t=new Uint8Array(e);return Object.setPrototypeOf(t,c.prototype),t}function c(e,t,r){if("number"==typeof e){if("string"==typeof t)throw new TypeError('The "string" argument must be of type string. Received type number');return h(e)}return u(e,t,r)}function u(e,t,r){if("string"==typeof e)return function(e,t){if("string"==typeof t&&""!==t||(t="utf8"),!c.isEncoding(t))throw new TypeError("Unknown encoding: "+t);const r=0|g(e,t);let n=a(r);const i=n.write(e,t);return i!==r&&(n=n.slice(0,i)),n}(e,t);if(ArrayBuffer.isView(e))return function(e){if(J(e,Uint8Array)){const t=new Uint8Array(e);return d(t.buffer,t.byteOffset,t.byteLength)}return f(e)}(e);if(null==e)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e);if(J(e,ArrayBuffer)||e&&J(e.buffer,ArrayBuffer))return d(e,t,r);if("undefined"!=typeof SharedArrayBuffer&&(J(e,SharedArrayBuffer)||e&&J(e.buffer,SharedArrayBuffer)))return d(e,t,r);if("number"==typeof e)throw new TypeError('The "value" argument must not be of type number. Received type number');const n=e.valueOf&&e.valueOf();if(null!=n&&n!==e)return c.from(n,t,r);const i=function(e){if(c.isBuffer(e)){const t=0|p(e.length),r=a(t);return 0===r.length||e.copy(r,0,0,t),r}return void 0!==e.length?"number"!=typeof e.length||Y(e.length)?a(0):f(e):"Buffer"===e.type&&Array.isArray(e.data)?f(e.data):void 0}(e);if(i)return i;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof e[Symbol.toPrimitive])return c.from(e[Symbol.toPrimitive]("string"),t,r);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e)}function l(e){if("number"!=typeof e)throw new TypeError('"size" argument must be of type number');if(e<0)throw new RangeError('The value "'+e+'" is invalid for option "size"')}function h(e){return l(e),a(e<0?0:0|p(e))}function f(e){const t=e.length<0?0:0|p(e.length),r=a(t);for(let n=0;n<t;n+=1)r[n]=255&e[n];return r}function d(e,t,r){if(t<0||e.byteLength<t)throw new RangeError('"offset" is outside of buffer bounds');if(e.byteLength<t+(r||0))throw new RangeError('"length" is outside of buffer bounds');let n;return n=void 0===t&&void 0===r?new Uint8Array(e):void 0===r?new Uint8Array(e,t):new Uint8Array(e,t,r),Object.setPrototypeOf(n,c.prototype),n}function p(e){if(e>=s)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+s.toString(16)+" bytes");return 0|e}function g(e,t){if(c.isBuffer(e))return e.length;if(ArrayBuffer.isView(e)||J(e,ArrayBuffer))return e.byteLength;if("string"!=typeof e)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof e);const r=e.length,n=arguments.length>2&&!0===arguments[2];if(!n&&0===r)return 0;let i=!1;for(;;)switch(t){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":return V(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return W(e).length;default:if(i)return n?-1:V(e).length;t=(""+t).toLowerCase(),i=!0}}function m(e,t,r){let n=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===r||r>this.length)&&(r=this.length),r<=0)return"";if((r>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return P(this,t,r);case"utf8":case"utf-8":return k(this,t,r);case"ascii":return O(this,t,r);case"latin1":case"binary":return T(this,t,r);case"base64":return S(this,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return R(this,t,r);default:if(n)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),n=!0}}function y(e,t,r){const n=e[t];e[t]=e[r],e[r]=n}function v(e,t,r,n,i){if(0===e.length)return-1;if("string"==typeof r?(n=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),Y(r=+r)&&(r=i?0:e.length-1),r<0&&(r=e.length+r),r>=e.length){if(i)return-1;r=e.length-1}else if(r<0){if(!i)return-1;r=0}if("string"==typeof t&&(t=c.from(t,n)),c.isBuffer(t))return 0===t.length?-1:b(e,t,r,n,i);if("number"==typeof t)return t&=255,"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(e,t,r):Uint8Array.prototype.lastIndexOf.call(e,t,r):b(e,[t],r,n,i);throw new TypeError("val must be string, number or Buffer")}function b(e,t,r,n,i){let o,s=1,a=e.length,c=t.length;if(void 0!==n&&("ucs2"===(n=String(n).toLowerCase())||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(e.length<2||t.length<2)return-1;s=2,a/=2,c/=2,r/=2}function u(e,t){return 1===s?e[t]:e.readUInt16BE(t*s)}if(i){let n=-1;for(o=r;o<a;o++)if(u(e,o)===u(t,-1===n?0:o-n)){if(-1===n&&(n=o),o-n+1===c)return n*s}else-1!==n&&(o-=o-n),n=-1}else for(r+c>a&&(r=a-c),o=r;o>=0;o--){let r=!0;for(let n=0;n<c;n++)if(u(e,o+n)!==u(t,n)){r=!1;break}if(r)return o}return-1}function w(e,t,r,n){r=Number(r)||0;const i=e.length-r;n?(n=Number(n))>i&&(n=i):n=i;const o=t.length;let s;for(n>o/2&&(n=o/2),s=0;s<n;++s){const n=parseInt(t.substr(2*s,2),16);if(Y(n))return s;e[r+s]=n}return s}function E(e,t,r,n){return $(V(t,e.length-r),e,r,n)}function A(e,t,r,n){return $(function(e){const t=[];for(let r=0;r<e.length;++r)t.push(255&e.charCodeAt(r));return t}(t),e,r,n)}function _(e,t,r,n){return $(W(t),e,r,n)}function x(e,t,r,n){return $(function(e,t){let r,n,i;const o=[];for(let s=0;s<e.length&&!((t-=2)<0);++s)r=e.charCodeAt(s),n=r>>8,i=r%256,o.push(i),o.push(n);return o}(t,e.length-r),e,r,n)}function S(e,t,r){return 0===t&&r===e.length?n.fromByteArray(e):n.fromByteArray(e.slice(t,r))}function k(e,t,r){r=Math.min(e.length,r);const n=[];let i=t;for(;i<r;){const t=e[i];let o=null,s=t>239?4:t>223?3:t>191?2:1;if(i+s<=r){let r,n,a,c;switch(s){case 1:t<128&&(o=t);break;case 2:r=e[i+1],128==(192&r)&&(c=(31&t)<<6|63&r,c>127&&(o=c));break;case 3:r=e[i+1],n=e[i+2],128==(192&r)&&128==(192&n)&&(c=(15&t)<<12|(63&r)<<6|63&n,c>2047&&(c<55296||c>57343)&&(o=c));break;case 4:r=e[i+1],n=e[i+2],a=e[i+3],128==(192&r)&&128==(192&n)&&128==(192&a)&&(c=(15&t)<<18|(63&r)<<12|(63&n)<<6|63&a,c>65535&&c<1114112&&(o=c))}}null===o?(o=65533,s=1):o>65535&&(o-=65536,n.push(o>>>10&1023|55296),o=56320|1023&o),n.push(o),i+=s}return function(e){const t=e.length;if(t<=I)return String.fromCharCode.apply(String,e);let r="",n=0;for(;n<t;)r+=String.fromCharCode.apply(String,e.slice(n,n+=I));return r}(n)}t.kMaxLength=s,c.TYPED_ARRAY_SUPPORT=function(){try{const e=new Uint8Array(1),t={foo:function(){return 42}};return Object.setPrototypeOf(t,Uint8Array.prototype),Object.setPrototypeOf(e,t),42===e.foo()}catch(e){return!1}}(),c.TYPED_ARRAY_SUPPORT||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(c.prototype,"parent",{enumerable:!0,get:function(){if(c.isBuffer(this))return this.buffer}}),Object.defineProperty(c.prototype,"offset",{enumerable:!0,get:function(){if(c.isBuffer(this))return this.byteOffset}}),c.poolSize=8192,c.from=function(e,t,r){return u(e,t,r)},Object.setPrototypeOf(c.prototype,Uint8Array.prototype),Object.setPrototypeOf(c,Uint8Array),c.alloc=function(e,t,r){return function(e,t,r){return l(e),e<=0?a(e):void 0!==t?"string"==typeof r?a(e).fill(t,r):a(e).fill(t):a(e)}(e,t,r)},c.allocUnsafe=function(e){return h(e)},c.allocUnsafeSlow=function(e){return h(e)},c.isBuffer=function(e){return null!=e&&!0===e._isBuffer&&e!==c.prototype},c.compare=function(e,t){if(J(e,Uint8Array)&&(e=c.from(e,e.offset,e.byteLength)),J(t,Uint8Array)&&(t=c.from(t,t.offset,t.byteLength)),!c.isBuffer(e)||!c.isBuffer(t))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===t)return 0;let r=e.length,n=t.length;for(let i=0,o=Math.min(r,n);i<o;++i)if(e[i]!==t[i]){r=e[i],n=t[i];break}return r<n?-1:n<r?1:0},c.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},c.concat=function(e,t){if(!Array.isArray(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return c.alloc(0);let r;if(void 0===t)for(t=0,r=0;r<e.length;++r)t+=e[r].length;const n=c.allocUnsafe(t);let i=0;for(r=0;r<e.length;++r){let t=e[r];if(J(t,Uint8Array))i+t.length>n.length?(c.isBuffer(t)||(t=c.from(t)),t.copy(n,i)):Uint8Array.prototype.set.call(n,t,i);else{if(!c.isBuffer(t))throw new TypeError('"list" argument must be an Array of Buffers');t.copy(n,i)}i+=t.length}return n},c.byteLength=g,c.prototype._isBuffer=!0,c.prototype.swap16=function(){const e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let t=0;t<e;t+=2)y(this,t,t+1);return this},c.prototype.swap32=function(){const e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let t=0;t<e;t+=4)y(this,t,t+3),y(this,t+1,t+2);return this},c.prototype.swap64=function(){const e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let t=0;t<e;t+=8)y(this,t,t+7),y(this,t+1,t+6),y(this,t+2,t+5),y(this,t+3,t+4);return this},c.prototype.toString=function(){const e=this.length;return 0===e?"":0===arguments.length?k(this,0,e):m.apply(this,arguments)},c.prototype.toLocaleString=c.prototype.toString,c.prototype.equals=function(e){if(!c.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===c.compare(this,e)},c.prototype.inspect=function(){let e="";const r=t.INSPECT_MAX_BYTES;return e=this.toString("hex",0,r).replace(/(.{2})/g,"$1 ").trim(),this.length>r&&(e+=" ... "),"<Buffer "+e+">"},o&&(c.prototype[o]=c.prototype.inspect),c.prototype.compare=function(e,t,r,n,i){if(J(e,Uint8Array)&&(e=c.from(e,e.offset,e.byteLength)),!c.isBuffer(e))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(void 0===t&&(t=0),void 0===r&&(r=e?e.length:0),void 0===n&&(n=0),void 0===i&&(i=this.length),t<0||r>e.length||n<0||i>this.length)throw new RangeError("out of range index");if(n>=i&&t>=r)return 0;if(n>=i)return-1;if(t>=r)return 1;if(this===e)return 0;let o=(i>>>=0)-(n>>>=0),s=(r>>>=0)-(t>>>=0);const a=Math.min(o,s),u=this.slice(n,i),l=e.slice(t,r);for(let e=0;e<a;++e)if(u[e]!==l[e]){o=u[e],s=l[e];break}return o<s?-1:s<o?1:0},c.prototype.includes=function(e,t,r){return-1!==this.indexOf(e,t,r)},c.prototype.indexOf=function(e,t,r){return v(this,e,t,r,!0)},c.prototype.lastIndexOf=function(e,t,r){return v(this,e,t,r,!1)},c.prototype.write=function(e,t,r,n){if(void 0===t)n="utf8",r=this.length,t=0;else if(void 0===r&&"string"==typeof t)n=t,r=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t>>>=0,isFinite(r)?(r>>>=0,void 0===n&&(n="utf8")):(n=r,r=void 0)}const i=this.length-t;if((void 0===r||r>i)&&(r=i),e.length>0&&(r<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");n||(n="utf8");let o=!1;for(;;)switch(n){case"hex":return w(this,e,t,r);case"utf8":case"utf-8":return E(this,e,t,r);case"ascii":case"latin1":case"binary":return A(this,e,t,r);case"base64":return _(this,e,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return x(this,e,t,r);default:if(o)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),o=!0}},c.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};const I=4096;function O(e,t,r){let n="";r=Math.min(e.length,r);for(let i=t;i<r;++i)n+=String.fromCharCode(127&e[i]);return n}function T(e,t,r){let n="";r=Math.min(e.length,r);for(let i=t;i<r;++i)n+=String.fromCharCode(e[i]);return n}function P(e,t,r){const n=e.length;(!t||t<0)&&(t=0),(!r||r<0||r>n)&&(r=n);let i="";for(let n=t;n<r;++n)i+=Q[e[n]];return i}function R(e,t,r){const n=e.slice(t,r);let i="";for(let e=0;e<n.length-1;e+=2)i+=String.fromCharCode(n[e]+256*n[e+1]);return i}function N(e,t,r){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+t>r)throw new RangeError("Trying to access beyond buffer length")}function C(e,t,r,n,i,o){if(!c.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>i||t<o)throw new RangeError('"value" argument is out of bounds');if(r+n>e.length)throw new RangeError("Index out of range")}function M(e,t,r,n,i){q(t,n,i,e,r,7);let o=Number(t&BigInt(4294967295));e[r++]=o,o>>=8,e[r++]=o,o>>=8,e[r++]=o,o>>=8,e[r++]=o;let s=Number(t>>BigInt(32)&BigInt(4294967295));return e[r++]=s,s>>=8,e[r++]=s,s>>=8,e[r++]=s,s>>=8,e[r++]=s,r}function L(e,t,r,n,i){q(t,n,i,e,r,7);let o=Number(t&BigInt(4294967295));e[r+7]=o,o>>=8,e[r+6]=o,o>>=8,e[r+5]=o,o>>=8,e[r+4]=o;let s=Number(t>>BigInt(32)&BigInt(4294967295));return e[r+3]=s,s>>=8,e[r+2]=s,s>>=8,e[r+1]=s,s>>=8,e[r]=s,r+8}function B(e,t,r,n,i,o){if(r+n>e.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function U(e,t,r,n,o){return t=+t,r>>>=0,o||B(e,0,r,4),i.write(e,t,r,n,23,4),r+4}function D(e,t,r,n,o){return t=+t,r>>>=0,o||B(e,0,r,8),i.write(e,t,r,n,52,8),r+8}c.prototype.slice=function(e,t){const r=this.length;(e=~~e)<0?(e+=r)<0&&(e=0):e>r&&(e=r),(t=void 0===t?r:~~t)<0?(t+=r)<0&&(t=0):t>r&&(t=r),t<e&&(t=e);const n=this.subarray(e,t);return Object.setPrototypeOf(n,c.prototype),n},c.prototype.readUintLE=c.prototype.readUIntLE=function(e,t,r){e>>>=0,t>>>=0,r||N(e,t,this.length);let n=this[e],i=1,o=0;for(;++o<t&&(i*=256);)n+=this[e+o]*i;return n},c.prototype.readUintBE=c.prototype.readUIntBE=function(e,t,r){e>>>=0,t>>>=0,r||N(e,t,this.length);let n=this[e+--t],i=1;for(;t>0&&(i*=256);)n+=this[e+--t]*i;return n},c.prototype.readUint8=c.prototype.readUInt8=function(e,t){return e>>>=0,t||N(e,1,this.length),this[e]},c.prototype.readUint16LE=c.prototype.readUInt16LE=function(e,t){return e>>>=0,t||N(e,2,this.length),this[e]|this[e+1]<<8},c.prototype.readUint16BE=c.prototype.readUInt16BE=function(e,t){return e>>>=0,t||N(e,2,this.length),this[e]<<8|this[e+1]},c.prototype.readUint32LE=c.prototype.readUInt32LE=function(e,t){return e>>>=0,t||N(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},c.prototype.readUint32BE=c.prototype.readUInt32BE=function(e,t){return e>>>=0,t||N(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},c.prototype.readBigUInt64LE=X((function(e){G(e>>>=0,"offset");const t=this[e],r=this[e+7];void 0!==t&&void 0!==r||H(e,this.length-8);const n=t+256*this[++e]+65536*this[++e]+this[++e]*2**24,i=this[++e]+256*this[++e]+65536*this[++e]+r*2**24;return BigInt(n)+(BigInt(i)<<BigInt(32))})),c.prototype.readBigUInt64BE=X((function(e){G(e>>>=0,"offset");const t=this[e],r=this[e+7];void 0!==t&&void 0!==r||H(e,this.length-8);const n=t*2**24+65536*this[++e]+256*this[++e]+this[++e],i=this[++e]*2**24+65536*this[++e]+256*this[++e]+r;return(BigInt(n)<<BigInt(32))+BigInt(i)})),c.prototype.readIntLE=function(e,t,r){e>>>=0,t>>>=0,r||N(e,t,this.length);let n=this[e],i=1,o=0;for(;++o<t&&(i*=256);)n+=this[e+o]*i;return i*=128,n>=i&&(n-=Math.pow(2,8*t)),n},c.prototype.readIntBE=function(e,t,r){e>>>=0,t>>>=0,r||N(e,t,this.length);let n=t,i=1,o=this[e+--n];for(;n>0&&(i*=256);)o+=this[e+--n]*i;return i*=128,o>=i&&(o-=Math.pow(2,8*t)),o},c.prototype.readInt8=function(e,t){return e>>>=0,t||N(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},c.prototype.readInt16LE=function(e,t){e>>>=0,t||N(e,2,this.length);const r=this[e]|this[e+1]<<8;return 32768&r?4294901760|r:r},c.prototype.readInt16BE=function(e,t){e>>>=0,t||N(e,2,this.length);const r=this[e+1]|this[e]<<8;return 32768&r?4294901760|r:r},c.prototype.readInt32LE=function(e,t){return e>>>=0,t||N(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},c.prototype.readInt32BE=function(e,t){return e>>>=0,t||N(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},c.prototype.readBigInt64LE=X((function(e){G(e>>>=0,"offset");const t=this[e],r=this[e+7];void 0!==t&&void 0!==r||H(e,this.length-8);const n=this[e+4]+256*this[e+5]+65536*this[e+6]+(r<<24);return(BigInt(n)<<BigInt(32))+BigInt(t+256*this[++e]+65536*this[++e]+this[++e]*2**24)})),c.prototype.readBigInt64BE=X((function(e){G(e>>>=0,"offset");const t=this[e],r=this[e+7];void 0!==t&&void 0!==r||H(e,this.length-8);const n=(t<<24)+65536*this[++e]+256*this[++e]+this[++e];return(BigInt(n)<<BigInt(32))+BigInt(this[++e]*2**24+65536*this[++e]+256*this[++e]+r)})),c.prototype.readFloatLE=function(e,t){return e>>>=0,t||N(e,4,this.length),i.read(this,e,!0,23,4)},c.prototype.readFloatBE=function(e,t){return e>>>=0,t||N(e,4,this.length),i.read(this,e,!1,23,4)},c.prototype.readDoubleLE=function(e,t){return e>>>=0,t||N(e,8,this.length),i.read(this,e,!0,52,8)},c.prototype.readDoubleBE=function(e,t){return e>>>=0,t||N(e,8,this.length),i.read(this,e,!1,52,8)},c.prototype.writeUintLE=c.prototype.writeUIntLE=function(e,t,r,n){e=+e,t>>>=0,r>>>=0,n||C(this,e,t,r,Math.pow(2,8*r)-1,0);let i=1,o=0;for(this[t]=255&e;++o<r&&(i*=256);)this[t+o]=e/i&255;return t+r},c.prototype.writeUintBE=c.prototype.writeUIntBE=function(e,t,r,n){e=+e,t>>>=0,r>>>=0,n||C(this,e,t,r,Math.pow(2,8*r)-1,0);let i=r-1,o=1;for(this[t+i]=255&e;--i>=0&&(o*=256);)this[t+i]=e/o&255;return t+r},c.prototype.writeUint8=c.prototype.writeUInt8=function(e,t,r){return e=+e,t>>>=0,r||C(this,e,t,1,255,0),this[t]=255&e,t+1},c.prototype.writeUint16LE=c.prototype.writeUInt16LE=function(e,t,r){return e=+e,t>>>=0,r||C(this,e,t,2,65535,0),this[t]=255&e,this[t+1]=e>>>8,t+2},c.prototype.writeUint16BE=c.prototype.writeUInt16BE=function(e,t,r){return e=+e,t>>>=0,r||C(this,e,t,2,65535,0),this[t]=e>>>8,this[t+1]=255&e,t+2},c.prototype.writeUint32LE=c.prototype.writeUInt32LE=function(e,t,r){return e=+e,t>>>=0,r||C(this,e,t,4,4294967295,0),this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e,t+4},c.prototype.writeUint32BE=c.prototype.writeUInt32BE=function(e,t,r){return e=+e,t>>>=0,r||C(this,e,t,4,4294967295,0),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},c.prototype.writeBigUInt64LE=X((function(e,t=0){return M(this,e,t,BigInt(0),BigInt("0xffffffffffffffff"))})),c.prototype.writeBigUInt64BE=X((function(e,t=0){return L(this,e,t,BigInt(0),BigInt("0xffffffffffffffff"))})),c.prototype.writeIntLE=function(e,t,r,n){if(e=+e,t>>>=0,!n){const n=Math.pow(2,8*r-1);C(this,e,t,r,n-1,-n)}let i=0,o=1,s=0;for(this[t]=255&e;++i<r&&(o*=256);)e<0&&0===s&&0!==this[t+i-1]&&(s=1),this[t+i]=(e/o|0)-s&255;return t+r},c.prototype.writeIntBE=function(e,t,r,n){if(e=+e,t>>>=0,!n){const n=Math.pow(2,8*r-1);C(this,e,t,r,n-1,-n)}let i=r-1,o=1,s=0;for(this[t+i]=255&e;--i>=0&&(o*=256);)e<0&&0===s&&0!==this[t+i+1]&&(s=1),this[t+i]=(e/o|0)-s&255;return t+r},c.prototype.writeInt8=function(e,t,r){return e=+e,t>>>=0,r||C(this,e,t,1,127,-128),e<0&&(e=255+e+1),this[t]=255&e,t+1},c.prototype.writeInt16LE=function(e,t,r){return e=+e,t>>>=0,r||C(this,e,t,2,32767,-32768),this[t]=255&e,this[t+1]=e>>>8,t+2},c.prototype.writeInt16BE=function(e,t,r){return e=+e,t>>>=0,r||C(this,e,t,2,32767,-32768),this[t]=e>>>8,this[t+1]=255&e,t+2},c.prototype.writeInt32LE=function(e,t,r){return e=+e,t>>>=0,r||C(this,e,t,4,2147483647,-2147483648),this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24,t+4},c.prototype.writeInt32BE=function(e,t,r){return e=+e,t>>>=0,r||C(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},c.prototype.writeBigInt64LE=X((function(e,t=0){return M(this,e,t,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))})),c.prototype.writeBigInt64BE=X((function(e,t=0){return L(this,e,t,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))})),c.prototype.writeFloatLE=function(e,t,r){return U(this,e,t,!0,r)},c.prototype.writeFloatBE=function(e,t,r){return U(this,e,t,!1,r)},c.prototype.writeDoubleLE=function(e,t,r){return D(this,e,t,!0,r)},c.prototype.writeDoubleBE=function(e,t,r){return D(this,e,t,!1,r)},c.prototype.copy=function(e,t,r,n){if(!c.isBuffer(e))throw new TypeError("argument should be a Buffer");if(r||(r=0),n||0===n||(n=this.length),t>=e.length&&(t=e.length),t||(t=0),n>0&&n<r&&(n=r),n===r)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),e.length-t<n-r&&(n=e.length-t+r);const i=n-r;return this===e&&"function"==typeof Uint8Array.prototype.copyWithin?this.copyWithin(t,r,n):Uint8Array.prototype.set.call(e,this.subarray(r,n),t),i},c.prototype.fill=function(e,t,r,n){if("string"==typeof e){if("string"==typeof t?(n=t,t=0,r=this.length):"string"==typeof r&&(n=r,r=this.length),void 0!==n&&"string"!=typeof n)throw new TypeError("encoding must be a string");if("string"==typeof n&&!c.isEncoding(n))throw new TypeError("Unknown encoding: "+n);if(1===e.length){const t=e.charCodeAt(0);("utf8"===n&&t<128||"latin1"===n)&&(e=t)}}else"number"==typeof e?e&=255:"boolean"==typeof e&&(e=Number(e));if(t<0||this.length<t||this.length<r)throw new RangeError("Out of range index");if(r<=t)return this;let i;if(t>>>=0,r=void 0===r?this.length:r>>>0,e||(e=0),"number"==typeof e)for(i=t;i<r;++i)this[i]=e;else{const o=c.isBuffer(e)?e:c.from(e,n),s=o.length;if(0===s)throw new TypeError('The value "'+e+'" is invalid for argument "value"');for(i=0;i<r-t;++i)this[i+t]=o[i%s]}return this};const j={};function F(e,t,r){j[e]=class extends r{constructor(){super(),Object.defineProperty(this,"message",{value:t.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${e}]`,this.stack,delete this.name}get code(){return e}set code(e){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:e,writable:!0})}toString(){return`${this.name} [${e}]: ${this.message}`}}}function z(e){let t="",r=e.length;const n="-"===e[0]?1:0;for(;r>=n+4;r-=3)t=`_${e.slice(r-3,r)}${t}`;return`${e.slice(0,r)}${t}`}function q(e,t,r,n,i,o){if(e>r||e<t){const n="bigint"==typeof t?"n":"";let i;throw i=o>3?0===t||t===BigInt(0)?`>= 0${n} and < 2${n} ** ${8*(o+1)}${n}`:`>= -(2${n} ** ${8*(o+1)-1}${n}) and < 2 ** ${8*(o+1)-1}${n}`:`>= ${t}${n} and <= ${r}${n}`,new j.ERR_OUT_OF_RANGE("value",i,e)}!function(e,t,r){G(t,"offset"),void 0!==e[t]&&void 0!==e[t+r]||H(t,e.length-(r+1))}(n,i,o)}function G(e,t){if("number"!=typeof e)throw new j.ERR_INVALID_ARG_TYPE(t,"number",e)}function H(e,t,r){if(Math.floor(e)!==e)throw G(e,r),new j.ERR_OUT_OF_RANGE(r||"offset","an integer",e);if(t<0)throw new j.ERR_BUFFER_OUT_OF_BOUNDS;throw new j.ERR_OUT_OF_RANGE(r||"offset",`>= ${r?1:0} and <= ${t}`,e)}F("ERR_BUFFER_OUT_OF_BOUNDS",(function(e){return e?`${e} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"}),RangeError),F("ERR_INVALID_ARG_TYPE",(function(e,t){return`The "${e}" argument must be of type number. Received type ${typeof t}`}),TypeError),F("ERR_OUT_OF_RANGE",(function(e,t,r){let n=`The value of "${e}" is out of range.`,i=r;return Number.isInteger(r)&&Math.abs(r)>2**32?i=z(String(r)):"bigint"==typeof r&&(i=String(r),(r>BigInt(2)**BigInt(32)||r<-(BigInt(2)**BigInt(32)))&&(i=z(i)),i+="n"),n+=` It must be ${t}. Received ${i}`,n}),RangeError);const K=/[^+/0-9A-Za-z-_]/g;function V(e,t){let r;t=t||1/0;const n=e.length;let i=null;const o=[];for(let s=0;s<n;++s){if(r=e.charCodeAt(s),r>55295&&r<57344){if(!i){if(r>56319){(t-=3)>-1&&o.push(239,191,189);continue}if(s+1===n){(t-=3)>-1&&o.push(239,191,189);continue}i=r;continue}if(r<56320){(t-=3)>-1&&o.push(239,191,189),i=r;continue}r=65536+(i-55296<<10|r-56320)}else i&&(t-=3)>-1&&o.push(239,191,189);if(i=null,r<128){if((t-=1)<0)break;o.push(r)}else if(r<2048){if((t-=2)<0)break;o.push(r>>6|192,63&r|128)}else if(r<65536){if((t-=3)<0)break;o.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(!(r<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;o.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return o}function W(e){return n.toByteArray(function(e){if((e=(e=e.split("=")[0]).trim().replace(K,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function $(e,t,r,n){let i;for(i=0;i<n&&!(i+r>=t.length||i>=e.length);++i)t[i+r]=e[i];return i}function J(e,t){return e instanceof t||null!=e&&null!=e.constructor&&null!=e.constructor.name&&e.constructor.name===t.name}function Y(e){return e!=e}const Q=function(){const e="0123456789abcdef",t=new Array(256);for(let r=0;r<16;++r){const n=16*r;for(let i=0;i<16;++i)t[n+i]=e[r]+e[i]}return t}();function X(e){return"undefined"==typeof BigInt?Z:e}function Z(){throw new Error("BigInt not supported")}},8900:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(5215);n.__exportStar(r(9606),t),n.__exportStar(r(9883),t),n.__exportStar(r(2010),t),n.__exportStar(r(9026),t)},8948:(e,t,r)=>{"use strict";var n=r(7426),i=r(3349);function o(e,t,r){if(!(this instanceof o))return new o(e,t,r);this.Hash=e,this.blockSize=e.blockSize/8,this.outSize=e.outSize/8,this.inner=null,this.outer=null,this._init(n.toArray(t,r))}e.exports=o,o.prototype._init=function(e){e.length>this.blockSize&&(e=(new this.Hash).update(e).digest()),i(e.length<=this.blockSize);for(var t=e.length;t<this.blockSize;t++)e.push(0);for(t=0;t<e.length;t++)e[t]^=54;for(this.inner=(new this.Hash).update(e),t=0;t<e.length;t++)e[t]^=106;this.outer=(new this.Hash).update(e)},o.prototype.update=function(e,t){return this.inner.update(e,t),this},o.prototype.digest=function(e){return this.outer.update(this.inner.digest()),this.outer.digest(e)}},9026:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(5215);n.__exportStar(r(9244),t),n.__exportStar(r(1861),t)},9244:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ONE_THOUSAND=t.ONE_HUNDRED=void 0,t.ONE_HUNDRED=100,t.ONE_THOUSAND=1e3},9404:function(e,t,r){!function(e,t){"use strict";function n(e,t){if(!e)throw new Error(t||"Assertion failed")}function i(e,t){e.super_=t;var r=function(){};r.prototype=t.prototype,e.prototype=new r,e.prototype.constructor=e}function o(e,t,r){if(o.isBN(e))return e;this.negative=0,this.words=null,this.length=0,this.red=null,null!==e&&("le"!==t&&"be"!==t||(r=t,t=10),this._init(e||0,t||10,r||"be"))}var s;"object"==typeof e?e.exports=o:t.BN=o,o.BN=o,o.wordSize=26;try{s="undefined"!=typeof window&&void 0!==window.Buffer?window.Buffer:r(7790).Buffer}catch(e){}function a(e,t){var r=e.charCodeAt(t);return r>=48&&r<=57?r-48:r>=65&&r<=70?r-55:r>=97&&r<=102?r-87:void n(!1,"Invalid character in "+e)}function c(e,t,r){var n=a(e,r);return r-1>=t&&(n|=a(e,r-1)<<4),n}function u(e,t,r,i){for(var o=0,s=0,a=Math.min(e.length,r),c=t;c<a;c++){var u=e.charCodeAt(c)-48;o*=i,s=u>=49?u-49+10:u>=17?u-17+10:u,n(u>=0&&s<i,"Invalid character"),o+=s}return o}function l(e,t){e.words=t.words,e.length=t.length,e.negative=t.negative,e.red=t.red}if(o.isBN=function(e){return e instanceof o||null!==e&&"object"==typeof e&&e.constructor.wordSize===o.wordSize&&Array.isArray(e.words)},o.max=function(e,t){return e.cmp(t)>0?e:t},o.min=function(e,t){return e.cmp(t)<0?e:t},o.prototype._init=function(e,t,r){if("number"==typeof e)return this._initNumber(e,t,r);if("object"==typeof e)return this._initArray(e,t,r);"hex"===t&&(t=16),n(t===(0|t)&&t>=2&&t<=36);var i=0;"-"===(e=e.toString().replace(/\s+/g,""))[0]&&(i++,this.negative=1),i<e.length&&(16===t?this._parseHex(e,i,r):(this._parseBase(e,t,i),"le"===r&&this._initArray(this.toArray(),t,r)))},o.prototype._initNumber=function(e,t,r){e<0&&(this.negative=1,e=-e),e<67108864?(this.words=[67108863&e],this.length=1):e<4503599627370496?(this.words=[67108863&e,e/67108864&67108863],this.length=2):(n(e<9007199254740992),this.words=[67108863&e,e/67108864&67108863,1],this.length=3),"le"===r&&this._initArray(this.toArray(),t,r)},o.prototype._initArray=function(e,t,r){if(n("number"==typeof e.length),e.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(e.length/3),this.words=new Array(this.length);for(var i=0;i<this.length;i++)this.words[i]=0;var o,s,a=0;if("be"===r)for(i=e.length-1,o=0;i>=0;i-=3)s=e[i]|e[i-1]<<8|e[i-2]<<16,this.words[o]|=s<<a&67108863,this.words[o+1]=s>>>26-a&67108863,(a+=24)>=26&&(a-=26,o++);else if("le"===r)for(i=0,o=0;i<e.length;i+=3)s=e[i]|e[i+1]<<8|e[i+2]<<16,this.words[o]|=s<<a&67108863,this.words[o+1]=s>>>26-a&67108863,(a+=24)>=26&&(a-=26,o++);return this._strip()},o.prototype._parseHex=function(e,t,r){this.length=Math.ceil((e.length-t)/6),this.words=new Array(this.length);for(var n=0;n<this.length;n++)this.words[n]=0;var i,o=0,s=0;if("be"===r)for(n=e.length-1;n>=t;n-=2)i=c(e,t,n)<<o,this.words[s]|=67108863&i,o>=18?(o-=18,s+=1,this.words[s]|=i>>>26):o+=8;else for(n=(e.length-t)%2==0?t+1:t;n<e.length;n+=2)i=c(e,t,n)<<o,this.words[s]|=67108863&i,o>=18?(o-=18,s+=1,this.words[s]|=i>>>26):o+=8;this._strip()},o.prototype._parseBase=function(e,t,r){this.words=[0],this.length=1;for(var n=0,i=1;i<=67108863;i*=t)n++;n--,i=i/t|0;for(var o=e.length-r,s=o%n,a=Math.min(o,o-s)+r,c=0,l=r;l<a;l+=n)c=u(e,l,l+n,t),this.imuln(i),this.words[0]+c<67108864?this.words[0]+=c:this._iaddn(c);if(0!==s){var h=1;for(c=u(e,l,e.length,t),l=0;l<s;l++)h*=t;this.imuln(h),this.words[0]+c<67108864?this.words[0]+=c:this._iaddn(c)}this._strip()},o.prototype.copy=function(e){e.words=new Array(this.length);for(var t=0;t<this.length;t++)e.words[t]=this.words[t];e.length=this.length,e.negative=this.negative,e.red=this.red},o.prototype._move=function(e){l(e,this)},o.prototype.clone=function(){var e=new o(null);return this.copy(e),e},o.prototype._expand=function(e){for(;this.length<e;)this.words[this.length++]=0;return this},o.prototype._strip=function(){for(;this.length>1&&0===this.words[this.length-1];)this.length--;return this._normSign()},o.prototype._normSign=function(){return 1===this.length&&0===this.words[0]&&(this.negative=0),this},"undefined"!=typeof Symbol&&"function"==typeof Symbol.for)try{o.prototype[Symbol.for("nodejs.util.inspect.custom")]=h}catch(e){o.prototype.inspect=h}else o.prototype.inspect=h;function h(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"}var f=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],d=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],p=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];function g(e,t,r){r.negative=t.negative^e.negative;var n=e.length+t.length|0;r.length=n,n=n-1|0;var i=0|e.words[0],o=0|t.words[0],s=i*o,a=67108863&s,c=s/67108864|0;r.words[0]=a;for(var u=1;u<n;u++){for(var l=c>>>26,h=67108863&c,f=Math.min(u,t.length-1),d=Math.max(0,u-e.length+1);d<=f;d++){var p=u-d|0;l+=(s=(i=0|e.words[p])*(o=0|t.words[d])+h)/67108864|0,h=67108863&s}r.words[u]=0|h,c=0|l}return 0!==c?r.words[u]=0|c:r.length--,r._strip()}o.prototype.toString=function(e,t){var r;if(t=0|t||1,16===(e=e||10)||"hex"===e){r="";for(var i=0,o=0,s=0;s<this.length;s++){var a=this.words[s],c=(16777215&(a<<i|o)).toString(16);o=a>>>24-i&16777215,(i+=2)>=26&&(i-=26,s--),r=0!==o||s!==this.length-1?f[6-c.length]+c+r:c+r}for(0!==o&&(r=o.toString(16)+r);r.length%t!=0;)r="0"+r;return 0!==this.negative&&(r="-"+r),r}if(e===(0|e)&&e>=2&&e<=36){var u=d[e],l=p[e];r="";var h=this.clone();for(h.negative=0;!h.isZero();){var g=h.modrn(l).toString(e);r=(h=h.idivn(l)).isZero()?g+r:f[u-g.length]+g+r}for(this.isZero()&&(r="0"+r);r.length%t!=0;)r="0"+r;return 0!==this.negative&&(r="-"+r),r}n(!1,"Base should be between 2 and 36")},o.prototype.toNumber=function(){var e=this.words[0];return 2===this.length?e+=67108864*this.words[1]:3===this.length&&1===this.words[2]?e+=4503599627370496+67108864*this.words[1]:this.length>2&&n(!1,"Number can only safely store up to 53 bits"),0!==this.negative?-e:e},o.prototype.toJSON=function(){return this.toString(16,2)},s&&(o.prototype.toBuffer=function(e,t){return this.toArrayLike(s,e,t)}),o.prototype.toArray=function(e,t){return this.toArrayLike(Array,e,t)},o.prototype.toArrayLike=function(e,t,r){this._strip();var i=this.byteLength(),o=r||Math.max(1,i);n(i<=o,"byte array longer than desired length"),n(o>0,"Requested array length <= 0");var s=function(e,t){return e.allocUnsafe?e.allocUnsafe(t):new e(t)}(e,o);return this["_toArrayLike"+("le"===t?"LE":"BE")](s,i),s},o.prototype._toArrayLikeLE=function(e,t){for(var r=0,n=0,i=0,o=0;i<this.length;i++){var s=this.words[i]<<o|n;e[r++]=255&s,r<e.length&&(e[r++]=s>>8&255),r<e.length&&(e[r++]=s>>16&255),6===o?(r<e.length&&(e[r++]=s>>24&255),n=0,o=0):(n=s>>>24,o+=2)}if(r<e.length)for(e[r++]=n;r<e.length;)e[r++]=0},o.prototype._toArrayLikeBE=function(e,t){for(var r=e.length-1,n=0,i=0,o=0;i<this.length;i++){var s=this.words[i]<<o|n;e[r--]=255&s,r>=0&&(e[r--]=s>>8&255),r>=0&&(e[r--]=s>>16&255),6===o?(r>=0&&(e[r--]=s>>24&255),n=0,o=0):(n=s>>>24,o+=2)}if(r>=0)for(e[r--]=n;r>=0;)e[r--]=0},Math.clz32?o.prototype._countBits=function(e){return 32-Math.clz32(e)}:o.prototype._countBits=function(e){var t=e,r=0;return t>=4096&&(r+=13,t>>>=13),t>=64&&(r+=7,t>>>=7),t>=8&&(r+=4,t>>>=4),t>=2&&(r+=2,t>>>=2),r+t},o.prototype._zeroBits=function(e){if(0===e)return 26;var t=e,r=0;return 8191&t||(r+=13,t>>>=13),127&t||(r+=7,t>>>=7),15&t||(r+=4,t>>>=4),3&t||(r+=2,t>>>=2),1&t||r++,r},o.prototype.bitLength=function(){var e=this.words[this.length-1],t=this._countBits(e);return 26*(this.length-1)+t},o.prototype.zeroBits=function(){if(this.isZero())return 0;for(var e=0,t=0;t<this.length;t++){var r=this._zeroBits(this.words[t]);if(e+=r,26!==r)break}return e},o.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},o.prototype.toTwos=function(e){return 0!==this.negative?this.abs().inotn(e).iaddn(1):this.clone()},o.prototype.fromTwos=function(e){return this.testn(e-1)?this.notn(e).iaddn(1).ineg():this.clone()},o.prototype.isNeg=function(){return 0!==this.negative},o.prototype.neg=function(){return this.clone().ineg()},o.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},o.prototype.iuor=function(e){for(;this.length<e.length;)this.words[this.length++]=0;for(var t=0;t<e.length;t++)this.words[t]=this.words[t]|e.words[t];return this._strip()},o.prototype.ior=function(e){return n(!(this.negative|e.negative)),this.iuor(e)},o.prototype.or=function(e){return this.length>e.length?this.clone().ior(e):e.clone().ior(this)},o.prototype.uor=function(e){return this.length>e.length?this.clone().iuor(e):e.clone().iuor(this)},o.prototype.iuand=function(e){var t;t=this.length>e.length?e:this;for(var r=0;r<t.length;r++)this.words[r]=this.words[r]&e.words[r];return this.length=t.length,this._strip()},o.prototype.iand=function(e){return n(!(this.negative|e.negative)),this.iuand(e)},o.prototype.and=function(e){return this.length>e.length?this.clone().iand(e):e.clone().iand(this)},o.prototype.uand=function(e){return this.length>e.length?this.clone().iuand(e):e.clone().iuand(this)},o.prototype.iuxor=function(e){var t,r;this.length>e.length?(t=this,r=e):(t=e,r=this);for(var n=0;n<r.length;n++)this.words[n]=t.words[n]^r.words[n];if(this!==t)for(;n<t.length;n++)this.words[n]=t.words[n];return this.length=t.length,this._strip()},o.prototype.ixor=function(e){return n(!(this.negative|e.negative)),this.iuxor(e)},o.prototype.xor=function(e){return this.length>e.length?this.clone().ixor(e):e.clone().ixor(this)},o.prototype.uxor=function(e){return this.length>e.length?this.clone().iuxor(e):e.clone().iuxor(this)},o.prototype.inotn=function(e){n("number"==typeof e&&e>=0);var t=0|Math.ceil(e/26),r=e%26;this._expand(t),r>0&&t--;for(var i=0;i<t;i++)this.words[i]=67108863&~this.words[i];return r>0&&(this.words[i]=~this.words[i]&67108863>>26-r),this._strip()},o.prototype.notn=function(e){return this.clone().inotn(e)},o.prototype.setn=function(e,t){n("number"==typeof e&&e>=0);var r=e/26|0,i=e%26;return this._expand(r+1),this.words[r]=t?this.words[r]|1<<i:this.words[r]&~(1<<i),this._strip()},o.prototype.iadd=function(e){var t,r,n;if(0!==this.negative&&0===e.negative)return this.negative=0,t=this.isub(e),this.negative^=1,this._normSign();if(0===this.negative&&0!==e.negative)return e.negative=0,t=this.isub(e),e.negative=1,t._normSign();this.length>e.length?(r=this,n=e):(r=e,n=this);for(var i=0,o=0;o<n.length;o++)t=(0|r.words[o])+(0|n.words[o])+i,this.words[o]=67108863&t,i=t>>>26;for(;0!==i&&o<r.length;o++)t=(0|r.words[o])+i,this.words[o]=67108863&t,i=t>>>26;if(this.length=r.length,0!==i)this.words[this.length]=i,this.length++;else if(r!==this)for(;o<r.length;o++)this.words[o]=r.words[o];return this},o.prototype.add=function(e){var t;return 0!==e.negative&&0===this.negative?(e.negative=0,t=this.sub(e),e.negative^=1,t):0===e.negative&&0!==this.negative?(this.negative=0,t=e.sub(this),this.negative=1,t):this.length>e.length?this.clone().iadd(e):e.clone().iadd(this)},o.prototype.isub=function(e){if(0!==e.negative){e.negative=0;var t=this.iadd(e);return e.negative=1,t._normSign()}if(0!==this.negative)return this.negative=0,this.iadd(e),this.negative=1,this._normSign();var r,n,i=this.cmp(e);if(0===i)return this.negative=0,this.length=1,this.words[0]=0,this;i>0?(r=this,n=e):(r=e,n=this);for(var o=0,s=0;s<n.length;s++)o=(t=(0|r.words[s])-(0|n.words[s])+o)>>26,this.words[s]=67108863&t;for(;0!==o&&s<r.length;s++)o=(t=(0|r.words[s])+o)>>26,this.words[s]=67108863&t;if(0===o&&s<r.length&&r!==this)for(;s<r.length;s++)this.words[s]=r.words[s];return this.length=Math.max(this.length,s),r!==this&&(this.negative=1),this._strip()},o.prototype.sub=function(e){return this.clone().isub(e)};var m=function(e,t,r){var n,i,o,s=e.words,a=t.words,c=r.words,u=0,l=0|s[0],h=8191&l,f=l>>>13,d=0|s[1],p=8191&d,g=d>>>13,m=0|s[2],y=8191&m,v=m>>>13,b=0|s[3],w=8191&b,E=b>>>13,A=0|s[4],_=8191&A,x=A>>>13,S=0|s[5],k=8191&S,I=S>>>13,O=0|s[6],T=8191&O,P=O>>>13,R=0|s[7],N=8191&R,C=R>>>13,M=0|s[8],L=8191&M,B=M>>>13,U=0|s[9],D=8191&U,j=U>>>13,F=0|a[0],z=8191&F,q=F>>>13,G=0|a[1],H=8191&G,K=G>>>13,V=0|a[2],W=8191&V,$=V>>>13,J=0|a[3],Y=8191&J,Q=J>>>13,X=0|a[4],Z=8191&X,ee=X>>>13,te=0|a[5],re=8191&te,ne=te>>>13,ie=0|a[6],oe=8191&ie,se=ie>>>13,ae=0|a[7],ce=8191&ae,ue=ae>>>13,le=0|a[8],he=8191&le,fe=le>>>13,de=0|a[9],pe=8191&de,ge=de>>>13;r.negative=e.negative^t.negative,r.length=19;var me=(u+(n=Math.imul(h,z))|0)+((8191&(i=(i=Math.imul(h,q))+Math.imul(f,z)|0))<<13)|0;u=((o=Math.imul(f,q))+(i>>>13)|0)+(me>>>26)|0,me&=67108863,n=Math.imul(p,z),i=(i=Math.imul(p,q))+Math.imul(g,z)|0,o=Math.imul(g,q);var ye=(u+(n=n+Math.imul(h,H)|0)|0)+((8191&(i=(i=i+Math.imul(h,K)|0)+Math.imul(f,H)|0))<<13)|0;u=((o=o+Math.imul(f,K)|0)+(i>>>13)|0)+(ye>>>26)|0,ye&=67108863,n=Math.imul(y,z),i=(i=Math.imul(y,q))+Math.imul(v,z)|0,o=Math.imul(v,q),n=n+Math.imul(p,H)|0,i=(i=i+Math.imul(p,K)|0)+Math.imul(g,H)|0,o=o+Math.imul(g,K)|0;var ve=(u+(n=n+Math.imul(h,W)|0)|0)+((8191&(i=(i=i+Math.imul(h,$)|0)+Math.imul(f,W)|0))<<13)|0;u=((o=o+Math.imul(f,$)|0)+(i>>>13)|0)+(ve>>>26)|0,ve&=67108863,n=Math.imul(w,z),i=(i=Math.imul(w,q))+Math.imul(E,z)|0,o=Math.imul(E,q),n=n+Math.imul(y,H)|0,i=(i=i+Math.imul(y,K)|0)+Math.imul(v,H)|0,o=o+Math.imul(v,K)|0,n=n+Math.imul(p,W)|0,i=(i=i+Math.imul(p,$)|0)+Math.imul(g,W)|0,o=o+Math.imul(g,$)|0;var be=(u+(n=n+Math.imul(h,Y)|0)|0)+((8191&(i=(i=i+Math.imul(h,Q)|0)+Math.imul(f,Y)|0))<<13)|0;u=((o=o+Math.imul(f,Q)|0)+(i>>>13)|0)+(be>>>26)|0,be&=67108863,n=Math.imul(_,z),i=(i=Math.imul(_,q))+Math.imul(x,z)|0,o=Math.imul(x,q),n=n+Math.imul(w,H)|0,i=(i=i+Math.imul(w,K)|0)+Math.imul(E,H)|0,o=o+Math.imul(E,K)|0,n=n+Math.imul(y,W)|0,i=(i=i+Math.imul(y,$)|0)+Math.imul(v,W)|0,o=o+Math.imul(v,$)|0,n=n+Math.imul(p,Y)|0,i=(i=i+Math.imul(p,Q)|0)+Math.imul(g,Y)|0,o=o+Math.imul(g,Q)|0;var we=(u+(n=n+Math.imul(h,Z)|0)|0)+((8191&(i=(i=i+Math.imul(h,ee)|0)+Math.imul(f,Z)|0))<<13)|0;u=((o=o+Math.imul(f,ee)|0)+(i>>>13)|0)+(we>>>26)|0,we&=67108863,n=Math.imul(k,z),i=(i=Math.imul(k,q))+Math.imul(I,z)|0,o=Math.imul(I,q),n=n+Math.imul(_,H)|0,i=(i=i+Math.imul(_,K)|0)+Math.imul(x,H)|0,o=o+Math.imul(x,K)|0,n=n+Math.imul(w,W)|0,i=(i=i+Math.imul(w,$)|0)+Math.imul(E,W)|0,o=o+Math.imul(E,$)|0,n=n+Math.imul(y,Y)|0,i=(i=i+Math.imul(y,Q)|0)+Math.imul(v,Y)|0,o=o+Math.imul(v,Q)|0,n=n+Math.imul(p,Z)|0,i=(i=i+Math.imul(p,ee)|0)+Math.imul(g,Z)|0,o=o+Math.imul(g,ee)|0;var Ee=(u+(n=n+Math.imul(h,re)|0)|0)+((8191&(i=(i=i+Math.imul(h,ne)|0)+Math.imul(f,re)|0))<<13)|0;u=((o=o+Math.imul(f,ne)|0)+(i>>>13)|0)+(Ee>>>26)|0,Ee&=67108863,n=Math.imul(T,z),i=(i=Math.imul(T,q))+Math.imul(P,z)|0,o=Math.imul(P,q),n=n+Math.imul(k,H)|0,i=(i=i+Math.imul(k,K)|0)+Math.imul(I,H)|0,o=o+Math.imul(I,K)|0,n=n+Math.imul(_,W)|0,i=(i=i+Math.imul(_,$)|0)+Math.imul(x,W)|0,o=o+Math.imul(x,$)|0,n=n+Math.imul(w,Y)|0,i=(i=i+Math.imul(w,Q)|0)+Math.imul(E,Y)|0,o=o+Math.imul(E,Q)|0,n=n+Math.imul(y,Z)|0,i=(i=i+Math.imul(y,ee)|0)+Math.imul(v,Z)|0,o=o+Math.imul(v,ee)|0,n=n+Math.imul(p,re)|0,i=(i=i+Math.imul(p,ne)|0)+Math.imul(g,re)|0,o=o+Math.imul(g,ne)|0;var Ae=(u+(n=n+Math.imul(h,oe)|0)|0)+((8191&(i=(i=i+Math.imul(h,se)|0)+Math.imul(f,oe)|0))<<13)|0;u=((o=o+Math.imul(f,se)|0)+(i>>>13)|0)+(Ae>>>26)|0,Ae&=67108863,n=Math.imul(N,z),i=(i=Math.imul(N,q))+Math.imul(C,z)|0,o=Math.imul(C,q),n=n+Math.imul(T,H)|0,i=(i=i+Math.imul(T,K)|0)+Math.imul(P,H)|0,o=o+Math.imul(P,K)|0,n=n+Math.imul(k,W)|0,i=(i=i+Math.imul(k,$)|0)+Math.imul(I,W)|0,o=o+Math.imul(I,$)|0,n=n+Math.imul(_,Y)|0,i=(i=i+Math.imul(_,Q)|0)+Math.imul(x,Y)|0,o=o+Math.imul(x,Q)|0,n=n+Math.imul(w,Z)|0,i=(i=i+Math.imul(w,ee)|0)+Math.imul(E,Z)|0,o=o+Math.imul(E,ee)|0,n=n+Math.imul(y,re)|0,i=(i=i+Math.imul(y,ne)|0)+Math.imul(v,re)|0,o=o+Math.imul(v,ne)|0,n=n+Math.imul(p,oe)|0,i=(i=i+Math.imul(p,se)|0)+Math.imul(g,oe)|0,o=o+Math.imul(g,se)|0;var _e=(u+(n=n+Math.imul(h,ce)|0)|0)+((8191&(i=(i=i+Math.imul(h,ue)|0)+Math.imul(f,ce)|0))<<13)|0;u=((o=o+Math.imul(f,ue)|0)+(i>>>13)|0)+(_e>>>26)|0,_e&=67108863,n=Math.imul(L,z),i=(i=Math.imul(L,q))+Math.imul(B,z)|0,o=Math.imul(B,q),n=n+Math.imul(N,H)|0,i=(i=i+Math.imul(N,K)|0)+Math.imul(C,H)|0,o=o+Math.imul(C,K)|0,n=n+Math.imul(T,W)|0,i=(i=i+Math.imul(T,$)|0)+Math.imul(P,W)|0,o=o+Math.imul(P,$)|0,n=n+Math.imul(k,Y)|0,i=(i=i+Math.imul(k,Q)|0)+Math.imul(I,Y)|0,o=o+Math.imul(I,Q)|0,n=n+Math.imul(_,Z)|0,i=(i=i+Math.imul(_,ee)|0)+Math.imul(x,Z)|0,o=o+Math.imul(x,ee)|0,n=n+Math.imul(w,re)|0,i=(i=i+Math.imul(w,ne)|0)+Math.imul(E,re)|0,o=o+Math.imul(E,ne)|0,n=n+Math.imul(y,oe)|0,i=(i=i+Math.imul(y,se)|0)+Math.imul(v,oe)|0,o=o+Math.imul(v,se)|0,n=n+Math.imul(p,ce)|0,i=(i=i+Math.imul(p,ue)|0)+Math.imul(g,ce)|0,o=o+Math.imul(g,ue)|0;var xe=(u+(n=n+Math.imul(h,he)|0)|0)+((8191&(i=(i=i+Math.imul(h,fe)|0)+Math.imul(f,he)|0))<<13)|0;u=((o=o+Math.imul(f,fe)|0)+(i>>>13)|0)+(xe>>>26)|0,xe&=67108863,n=Math.imul(D,z),i=(i=Math.imul(D,q))+Math.imul(j,z)|0,o=Math.imul(j,q),n=n+Math.imul(L,H)|0,i=(i=i+Math.imul(L,K)|0)+Math.imul(B,H)|0,o=o+Math.imul(B,K)|0,n=n+Math.imul(N,W)|0,i=(i=i+Math.imul(N,$)|0)+Math.imul(C,W)|0,o=o+Math.imul(C,$)|0,n=n+Math.imul(T,Y)|0,i=(i=i+Math.imul(T,Q)|0)+Math.imul(P,Y)|0,o=o+Math.imul(P,Q)|0,n=n+Math.imul(k,Z)|0,i=(i=i+Math.imul(k,ee)|0)+Math.imul(I,Z)|0,o=o+Math.imul(I,ee)|0,n=n+Math.imul(_,re)|0,i=(i=i+Math.imul(_,ne)|0)+Math.imul(x,re)|0,o=o+Math.imul(x,ne)|0,n=n+Math.imul(w,oe)|0,i=(i=i+Math.imul(w,se)|0)+Math.imul(E,oe)|0,o=o+Math.imul(E,se)|0,n=n+Math.imul(y,ce)|0,i=(i=i+Math.imul(y,ue)|0)+Math.imul(v,ce)|0,o=o+Math.imul(v,ue)|0,n=n+Math.imul(p,he)|0,i=(i=i+Math.imul(p,fe)|0)+Math.imul(g,he)|0,o=o+Math.imul(g,fe)|0;var Se=(u+(n=n+Math.imul(h,pe)|0)|0)+((8191&(i=(i=i+Math.imul(h,ge)|0)+Math.imul(f,pe)|0))<<13)|0;u=((o=o+Math.imul(f,ge)|0)+(i>>>13)|0)+(Se>>>26)|0,Se&=67108863,n=Math.imul(D,H),i=(i=Math.imul(D,K))+Math.imul(j,H)|0,o=Math.imul(j,K),n=n+Math.imul(L,W)|0,i=(i=i+Math.imul(L,$)|0)+Math.imul(B,W)|0,o=o+Math.imul(B,$)|0,n=n+Math.imul(N,Y)|0,i=(i=i+Math.imul(N,Q)|0)+Math.imul(C,Y)|0,o=o+Math.imul(C,Q)|0,n=n+Math.imul(T,Z)|0,i=(i=i+Math.imul(T,ee)|0)+Math.imul(P,Z)|0,o=o+Math.imul(P,ee)|0,n=n+Math.imul(k,re)|0,i=(i=i+Math.imul(k,ne)|0)+Math.imul(I,re)|0,o=o+Math.imul(I,ne)|0,n=n+Math.imul(_,oe)|0,i=(i=i+Math.imul(_,se)|0)+Math.imul(x,oe)|0,o=o+Math.imul(x,se)|0,n=n+Math.imul(w,ce)|0,i=(i=i+Math.imul(w,ue)|0)+Math.imul(E,ce)|0,o=o+Math.imul(E,ue)|0,n=n+Math.imul(y,he)|0,i=(i=i+Math.imul(y,fe)|0)+Math.imul(v,he)|0,o=o+Math.imul(v,fe)|0;var ke=(u+(n=n+Math.imul(p,pe)|0)|0)+((8191&(i=(i=i+Math.imul(p,ge)|0)+Math.imul(g,pe)|0))<<13)|0;u=((o=o+Math.imul(g,ge)|0)+(i>>>13)|0)+(ke>>>26)|0,ke&=67108863,n=Math.imul(D,W),i=(i=Math.imul(D,$))+Math.imul(j,W)|0,o=Math.imul(j,$),n=n+Math.imul(L,Y)|0,i=(i=i+Math.imul(L,Q)|0)+Math.imul(B,Y)|0,o=o+Math.imul(B,Q)|0,n=n+Math.imul(N,Z)|0,i=(i=i+Math.imul(N,ee)|0)+Math.imul(C,Z)|0,o=o+Math.imul(C,ee)|0,n=n+Math.imul(T,re)|0,i=(i=i+Math.imul(T,ne)|0)+Math.imul(P,re)|0,o=o+Math.imul(P,ne)|0,n=n+Math.imul(k,oe)|0,i=(i=i+Math.imul(k,se)|0)+Math.imul(I,oe)|0,o=o+Math.imul(I,se)|0,n=n+Math.imul(_,ce)|0,i=(i=i+Math.imul(_,ue)|0)+Math.imul(x,ce)|0,o=o+Math.imul(x,ue)|0,n=n+Math.imul(w,he)|0,i=(i=i+Math.imul(w,fe)|0)+Math.imul(E,he)|0,o=o+Math.imul(E,fe)|0;var Ie=(u+(n=n+Math.imul(y,pe)|0)|0)+((8191&(i=(i=i+Math.imul(y,ge)|0)+Math.imul(v,pe)|0))<<13)|0;u=((o=o+Math.imul(v,ge)|0)+(i>>>13)|0)+(Ie>>>26)|0,Ie&=67108863,n=Math.imul(D,Y),i=(i=Math.imul(D,Q))+Math.imul(j,Y)|0,o=Math.imul(j,Q),n=n+Math.imul(L,Z)|0,i=(i=i+Math.imul(L,ee)|0)+Math.imul(B,Z)|0,o=o+Math.imul(B,ee)|0,n=n+Math.imul(N,re)|0,i=(i=i+Math.imul(N,ne)|0)+Math.imul(C,re)|0,o=o+Math.imul(C,ne)|0,n=n+Math.imul(T,oe)|0,i=(i=i+Math.imul(T,se)|0)+Math.imul(P,oe)|0,o=o+Math.imul(P,se)|0,n=n+Math.imul(k,ce)|0,i=(i=i+Math.imul(k,ue)|0)+Math.imul(I,ce)|0,o=o+Math.imul(I,ue)|0,n=n+Math.imul(_,he)|0,i=(i=i+Math.imul(_,fe)|0)+Math.imul(x,he)|0,o=o+Math.imul(x,fe)|0;var Oe=(u+(n=n+Math.imul(w,pe)|0)|0)+((8191&(i=(i=i+Math.imul(w,ge)|0)+Math.imul(E,pe)|0))<<13)|0;u=((o=o+Math.imul(E,ge)|0)+(i>>>13)|0)+(Oe>>>26)|0,Oe&=67108863,n=Math.imul(D,Z),i=(i=Math.imul(D,ee))+Math.imul(j,Z)|0,o=Math.imul(j,ee),n=n+Math.imul(L,re)|0,i=(i=i+Math.imul(L,ne)|0)+Math.imul(B,re)|0,o=o+Math.imul(B,ne)|0,n=n+Math.imul(N,oe)|0,i=(i=i+Math.imul(N,se)|0)+Math.imul(C,oe)|0,o=o+Math.imul(C,se)|0,n=n+Math.imul(T,ce)|0,i=(i=i+Math.imul(T,ue)|0)+Math.imul(P,ce)|0,o=o+Math.imul(P,ue)|0,n=n+Math.imul(k,he)|0,i=(i=i+Math.imul(k,fe)|0)+Math.imul(I,he)|0,o=o+Math.imul(I,fe)|0;var Te=(u+(n=n+Math.imul(_,pe)|0)|0)+((8191&(i=(i=i+Math.imul(_,ge)|0)+Math.imul(x,pe)|0))<<13)|0;u=((o=o+Math.imul(x,ge)|0)+(i>>>13)|0)+(Te>>>26)|0,Te&=67108863,n=Math.imul(D,re),i=(i=Math.imul(D,ne))+Math.imul(j,re)|0,o=Math.imul(j,ne),n=n+Math.imul(L,oe)|0,i=(i=i+Math.imul(L,se)|0)+Math.imul(B,oe)|0,o=o+Math.imul(B,se)|0,n=n+Math.imul(N,ce)|0,i=(i=i+Math.imul(N,ue)|0)+Math.imul(C,ce)|0,o=o+Math.imul(C,ue)|0,n=n+Math.imul(T,he)|0,i=(i=i+Math.imul(T,fe)|0)+Math.imul(P,he)|0,o=o+Math.imul(P,fe)|0;var Pe=(u+(n=n+Math.imul(k,pe)|0)|0)+((8191&(i=(i=i+Math.imul(k,ge)|0)+Math.imul(I,pe)|0))<<13)|0;u=((o=o+Math.imul(I,ge)|0)+(i>>>13)|0)+(Pe>>>26)|0,Pe&=67108863,n=Math.imul(D,oe),i=(i=Math.imul(D,se))+Math.imul(j,oe)|0,o=Math.imul(j,se),n=n+Math.imul(L,ce)|0,i=(i=i+Math.imul(L,ue)|0)+Math.imul(B,ce)|0,o=o+Math.imul(B,ue)|0,n=n+Math.imul(N,he)|0,i=(i=i+Math.imul(N,fe)|0)+Math.imul(C,he)|0,o=o+Math.imul(C,fe)|0;var Re=(u+(n=n+Math.imul(T,pe)|0)|0)+((8191&(i=(i=i+Math.imul(T,ge)|0)+Math.imul(P,pe)|0))<<13)|0;u=((o=o+Math.imul(P,ge)|0)+(i>>>13)|0)+(Re>>>26)|0,Re&=67108863,n=Math.imul(D,ce),i=(i=Math.imul(D,ue))+Math.imul(j,ce)|0,o=Math.imul(j,ue),n=n+Math.imul(L,he)|0,i=(i=i+Math.imul(L,fe)|0)+Math.imul(B,he)|0,o=o+Math.imul(B,fe)|0;var Ne=(u+(n=n+Math.imul(N,pe)|0)|0)+((8191&(i=(i=i+Math.imul(N,ge)|0)+Math.imul(C,pe)|0))<<13)|0;u=((o=o+Math.imul(C,ge)|0)+(i>>>13)|0)+(Ne>>>26)|0,Ne&=67108863,n=Math.imul(D,he),i=(i=Math.imul(D,fe))+Math.imul(j,he)|0,o=Math.imul(j,fe);var Ce=(u+(n=n+Math.imul(L,pe)|0)|0)+((8191&(i=(i=i+Math.imul(L,ge)|0)+Math.imul(B,pe)|0))<<13)|0;u=((o=o+Math.imul(B,ge)|0)+(i>>>13)|0)+(Ce>>>26)|0,Ce&=67108863;var Me=(u+(n=Math.imul(D,pe))|0)+((8191&(i=(i=Math.imul(D,ge))+Math.imul(j,pe)|0))<<13)|0;return u=((o=Math.imul(j,ge))+(i>>>13)|0)+(Me>>>26)|0,Me&=67108863,c[0]=me,c[1]=ye,c[2]=ve,c[3]=be,c[4]=we,c[5]=Ee,c[6]=Ae,c[7]=_e,c[8]=xe,c[9]=Se,c[10]=ke,c[11]=Ie,c[12]=Oe,c[13]=Te,c[14]=Pe,c[15]=Re,c[16]=Ne,c[17]=Ce,c[18]=Me,0!==u&&(c[19]=u,r.length++),r};function y(e,t,r){r.negative=t.negative^e.negative,r.length=e.length+t.length;for(var n=0,i=0,o=0;o<r.length-1;o++){var s=i;i=0;for(var a=67108863&n,c=Math.min(o,t.length-1),u=Math.max(0,o-e.length+1);u<=c;u++){var l=o-u,h=(0|e.words[l])*(0|t.words[u]),f=67108863&h;a=67108863&(f=f+a|0),i+=(s=(s=s+(h/67108864|0)|0)+(f>>>26)|0)>>>26,s&=67108863}r.words[o]=a,n=s,s=i}return 0!==n?r.words[o]=n:r.length--,r._strip()}function v(e,t,r){return y(e,t,r)}function b(e,t){this.x=e,this.y=t}Math.imul||(m=g),o.prototype.mulTo=function(e,t){var r=this.length+e.length;return 10===this.length&&10===e.length?m(this,e,t):r<63?g(this,e,t):r<1024?y(this,e,t):v(this,e,t)},b.prototype.makeRBT=function(e){for(var t=new Array(e),r=o.prototype._countBits(e)-1,n=0;n<e;n++)t[n]=this.revBin(n,r,e);return t},b.prototype.revBin=function(e,t,r){if(0===e||e===r-1)return e;for(var n=0,i=0;i<t;i++)n|=(1&e)<<t-i-1,e>>=1;return n},b.prototype.permute=function(e,t,r,n,i,o){for(var s=0;s<o;s++)n[s]=t[e[s]],i[s]=r[e[s]]},b.prototype.transform=function(e,t,r,n,i,o){this.permute(o,e,t,r,n,i);for(var s=1;s<i;s<<=1)for(var a=s<<1,c=Math.cos(2*Math.PI/a),u=Math.sin(2*Math.PI/a),l=0;l<i;l+=a)for(var h=c,f=u,d=0;d<s;d++){var p=r[l+d],g=n[l+d],m=r[l+d+s],y=n[l+d+s],v=h*m-f*y;y=h*y+f*m,m=v,r[l+d]=p+m,n[l+d]=g+y,r[l+d+s]=p-m,n[l+d+s]=g-y,d!==a&&(v=c*h-u*f,f=c*f+u*h,h=v)}},b.prototype.guessLen13b=function(e,t){var r=1|Math.max(t,e),n=1&r,i=0;for(r=r/2|0;r;r>>>=1)i++;return 1<<i+1+n},b.prototype.conjugate=function(e,t,r){if(!(r<=1))for(var n=0;n<r/2;n++){var i=e[n];e[n]=e[r-n-1],e[r-n-1]=i,i=t[n],t[n]=-t[r-n-1],t[r-n-1]=-i}},b.prototype.normalize13b=function(e,t){for(var r=0,n=0;n<t/2;n++){var i=8192*Math.round(e[2*n+1]/t)+Math.round(e[2*n]/t)+r;e[n]=67108863&i,r=i<67108864?0:i/67108864|0}return e},b.prototype.convert13b=function(e,t,r,i){for(var o=0,s=0;s<t;s++)o+=0|e[s],r[2*s]=8191&o,o>>>=13,r[2*s+1]=8191&o,o>>>=13;for(s=2*t;s<i;++s)r[s]=0;n(0===o),n(!(-8192&o))},b.prototype.stub=function(e){for(var t=new Array(e),r=0;r<e;r++)t[r]=0;return t},b.prototype.mulp=function(e,t,r){var n=2*this.guessLen13b(e.length,t.length),i=this.makeRBT(n),o=this.stub(n),s=new Array(n),a=new Array(n),c=new Array(n),u=new Array(n),l=new Array(n),h=new Array(n),f=r.words;f.length=n,this.convert13b(e.words,e.length,s,n),this.convert13b(t.words,t.length,u,n),this.transform(s,o,a,c,n,i),this.transform(u,o,l,h,n,i);for(var d=0;d<n;d++){var p=a[d]*l[d]-c[d]*h[d];c[d]=a[d]*h[d]+c[d]*l[d],a[d]=p}return this.conjugate(a,c,n),this.transform(a,c,f,o,n,i),this.conjugate(f,o,n),this.normalize13b(f,n),r.negative=e.negative^t.negative,r.length=e.length+t.length,r._strip()},o.prototype.mul=function(e){var t=new o(null);return t.words=new Array(this.length+e.length),this.mulTo(e,t)},o.prototype.mulf=function(e){var t=new o(null);return t.words=new Array(this.length+e.length),v(this,e,t)},o.prototype.imul=function(e){return this.clone().mulTo(e,this)},o.prototype.imuln=function(e){var t=e<0;t&&(e=-e),n("number"==typeof e),n(e<67108864);for(var r=0,i=0;i<this.length;i++){var o=(0|this.words[i])*e,s=(67108863&o)+(67108863&r);r>>=26,r+=o/67108864|0,r+=s>>>26,this.words[i]=67108863&s}return 0!==r&&(this.words[i]=r,this.length++),t?this.ineg():this},o.prototype.muln=function(e){return this.clone().imuln(e)},o.prototype.sqr=function(){return this.mul(this)},o.prototype.isqr=function(){return this.imul(this.clone())},o.prototype.pow=function(e){var t=function(e){for(var t=new Array(e.bitLength()),r=0;r<t.length;r++){var n=r/26|0,i=r%26;t[r]=e.words[n]>>>i&1}return t}(e);if(0===t.length)return new o(1);for(var r=this,n=0;n<t.length&&0===t[n];n++,r=r.sqr());if(++n<t.length)for(var i=r.sqr();n<t.length;n++,i=i.sqr())0!==t[n]&&(r=r.mul(i));return r},o.prototype.iushln=function(e){n("number"==typeof e&&e>=0);var t,r=e%26,i=(e-r)/26,o=67108863>>>26-r<<26-r;if(0!==r){var s=0;for(t=0;t<this.length;t++){var a=this.words[t]&o,c=(0|this.words[t])-a<<r;this.words[t]=c|s,s=a>>>26-r}s&&(this.words[t]=s,this.length++)}if(0!==i){for(t=this.length-1;t>=0;t--)this.words[t+i]=this.words[t];for(t=0;t<i;t++)this.words[t]=0;this.length+=i}return this._strip()},o.prototype.ishln=function(e){return n(0===this.negative),this.iushln(e)},o.prototype.iushrn=function(e,t,r){var i;n("number"==typeof e&&e>=0),i=t?(t-t%26)/26:0;var o=e%26,s=Math.min((e-o)/26,this.length),a=67108863^67108863>>>o<<o,c=r;if(i-=s,i=Math.max(0,i),c){for(var u=0;u<s;u++)c.words[u]=this.words[u];c.length=s}if(0===s);else if(this.length>s)for(this.length-=s,u=0;u<this.length;u++)this.words[u]=this.words[u+s];else this.words[0]=0,this.length=1;var l=0;for(u=this.length-1;u>=0&&(0!==l||u>=i);u--){var h=0|this.words[u];this.words[u]=l<<26-o|h>>>o,l=h&a}return c&&0!==l&&(c.words[c.length++]=l),0===this.length&&(this.words[0]=0,this.length=1),this._strip()},o.prototype.ishrn=function(e,t,r){return n(0===this.negative),this.iushrn(e,t,r)},o.prototype.shln=function(e){return this.clone().ishln(e)},o.prototype.ushln=function(e){return this.clone().iushln(e)},o.prototype.shrn=function(e){return this.clone().ishrn(e)},o.prototype.ushrn=function(e){return this.clone().iushrn(e)},o.prototype.testn=function(e){n("number"==typeof e&&e>=0);var t=e%26,r=(e-t)/26,i=1<<t;return!(this.length<=r||!(this.words[r]&i))},o.prototype.imaskn=function(e){n("number"==typeof e&&e>=0);var t=e%26,r=(e-t)/26;if(n(0===this.negative,"imaskn works only with positive numbers"),this.length<=r)return this;if(0!==t&&r++,this.length=Math.min(r,this.length),0!==t){var i=67108863^67108863>>>t<<t;this.words[this.length-1]&=i}return this._strip()},o.prototype.maskn=function(e){return this.clone().imaskn(e)},o.prototype.iaddn=function(e){return n("number"==typeof e),n(e<67108864),e<0?this.isubn(-e):0!==this.negative?1===this.length&&(0|this.words[0])<=e?(this.words[0]=e-(0|this.words[0]),this.negative=0,this):(this.negative=0,this.isubn(e),this.negative=1,this):this._iaddn(e)},o.prototype._iaddn=function(e){this.words[0]+=e;for(var t=0;t<this.length&&this.words[t]>=67108864;t++)this.words[t]-=67108864,t===this.length-1?this.words[t+1]=1:this.words[t+1]++;return this.length=Math.max(this.length,t+1),this},o.prototype.isubn=function(e){if(n("number"==typeof e),n(e<67108864),e<0)return this.iaddn(-e);if(0!==this.negative)return this.negative=0,this.iaddn(e),this.negative=1,this;if(this.words[0]-=e,1===this.length&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var t=0;t<this.length&&this.words[t]<0;t++)this.words[t]+=67108864,this.words[t+1]-=1;return this._strip()},o.prototype.addn=function(e){return this.clone().iaddn(e)},o.prototype.subn=function(e){return this.clone().isubn(e)},o.prototype.iabs=function(){return this.negative=0,this},o.prototype.abs=function(){return this.clone().iabs()},o.prototype._ishlnsubmul=function(e,t,r){var i,o,s=e.length+r;this._expand(s);var a=0;for(i=0;i<e.length;i++){o=(0|this.words[i+r])+a;var c=(0|e.words[i])*t;a=((o-=67108863&c)>>26)-(c/67108864|0),this.words[i+r]=67108863&o}for(;i<this.length-r;i++)a=(o=(0|this.words[i+r])+a)>>26,this.words[i+r]=67108863&o;if(0===a)return this._strip();for(n(-1===a),a=0,i=0;i<this.length;i++)a=(o=-(0|this.words[i])+a)>>26,this.words[i]=67108863&o;return this.negative=1,this._strip()},o.prototype._wordDiv=function(e,t){var r=(this.length,e.length),n=this.clone(),i=e,s=0|i.words[i.length-1];0!=(r=26-this._countBits(s))&&(i=i.ushln(r),n.iushln(r),s=0|i.words[i.length-1]);var a,c=n.length-i.length;if("mod"!==t){(a=new o(null)).length=c+1,a.words=new Array(a.length);for(var u=0;u<a.length;u++)a.words[u]=0}var l=n.clone()._ishlnsubmul(i,1,c);0===l.negative&&(n=l,a&&(a.words[c]=1));for(var h=c-1;h>=0;h--){var f=67108864*(0|n.words[i.length+h])+(0|n.words[i.length+h-1]);for(f=Math.min(f/s|0,67108863),n._ishlnsubmul(i,f,h);0!==n.negative;)f--,n.negative=0,n._ishlnsubmul(i,1,h),n.isZero()||(n.negative^=1);a&&(a.words[h]=f)}return a&&a._strip(),n._strip(),"div"!==t&&0!==r&&n.iushrn(r),{div:a||null,mod:n}},o.prototype.divmod=function(e,t,r){return n(!e.isZero()),this.isZero()?{div:new o(0),mod:new o(0)}:0!==this.negative&&0===e.negative?(a=this.neg().divmod(e,t),"mod"!==t&&(i=a.div.neg()),"div"!==t&&(s=a.mod.neg(),r&&0!==s.negative&&s.iadd(e)),{div:i,mod:s}):0===this.negative&&0!==e.negative?(a=this.divmod(e.neg(),t),"mod"!==t&&(i=a.div.neg()),{div:i,mod:a.mod}):this.negative&e.negative?(a=this.neg().divmod(e.neg(),t),"div"!==t&&(s=a.mod.neg(),r&&0!==s.negative&&s.isub(e)),{div:a.div,mod:s}):e.length>this.length||this.cmp(e)<0?{div:new o(0),mod:this}:1===e.length?"div"===t?{div:this.divn(e.words[0]),mod:null}:"mod"===t?{div:null,mod:new o(this.modrn(e.words[0]))}:{div:this.divn(e.words[0]),mod:new o(this.modrn(e.words[0]))}:this._wordDiv(e,t);var i,s,a},o.prototype.div=function(e){return this.divmod(e,"div",!1).div},o.prototype.mod=function(e){return this.divmod(e,"mod",!1).mod},o.prototype.umod=function(e){return this.divmod(e,"mod",!0).mod},o.prototype.divRound=function(e){var t=this.divmod(e);if(t.mod.isZero())return t.div;var r=0!==t.div.negative?t.mod.isub(e):t.mod,n=e.ushrn(1),i=e.andln(1),o=r.cmp(n);return o<0||1===i&&0===o?t.div:0!==t.div.negative?t.div.isubn(1):t.div.iaddn(1)},o.prototype.modrn=function(e){var t=e<0;t&&(e=-e),n(e<=67108863);for(var r=(1<<26)%e,i=0,o=this.length-1;o>=0;o--)i=(r*i+(0|this.words[o]))%e;return t?-i:i},o.prototype.modn=function(e){return this.modrn(e)},o.prototype.idivn=function(e){var t=e<0;t&&(e=-e),n(e<=67108863);for(var r=0,i=this.length-1;i>=0;i--){var o=(0|this.words[i])+67108864*r;this.words[i]=o/e|0,r=o%e}return this._strip(),t?this.ineg():this},o.prototype.divn=function(e){return this.clone().idivn(e)},o.prototype.egcd=function(e){n(0===e.negative),n(!e.isZero());var t=this,r=e.clone();t=0!==t.negative?t.umod(e):t.clone();for(var i=new o(1),s=new o(0),a=new o(0),c=new o(1),u=0;t.isEven()&&r.isEven();)t.iushrn(1),r.iushrn(1),++u;for(var l=r.clone(),h=t.clone();!t.isZero();){for(var f=0,d=1;!(t.words[0]&d)&&f<26;++f,d<<=1);if(f>0)for(t.iushrn(f);f-- >0;)(i.isOdd()||s.isOdd())&&(i.iadd(l),s.isub(h)),i.iushrn(1),s.iushrn(1);for(var p=0,g=1;!(r.words[0]&g)&&p<26;++p,g<<=1);if(p>0)for(r.iushrn(p);p-- >0;)(a.isOdd()||c.isOdd())&&(a.iadd(l),c.isub(h)),a.iushrn(1),c.iushrn(1);t.cmp(r)>=0?(t.isub(r),i.isub(a),s.isub(c)):(r.isub(t),a.isub(i),c.isub(s))}return{a,b:c,gcd:r.iushln(u)}},o.prototype._invmp=function(e){n(0===e.negative),n(!e.isZero());var t=this,r=e.clone();t=0!==t.negative?t.umod(e):t.clone();for(var i,s=new o(1),a=new o(0),c=r.clone();t.cmpn(1)>0&&r.cmpn(1)>0;){for(var u=0,l=1;!(t.words[0]&l)&&u<26;++u,l<<=1);if(u>0)for(t.iushrn(u);u-- >0;)s.isOdd()&&s.iadd(c),s.iushrn(1);for(var h=0,f=1;!(r.words[0]&f)&&h<26;++h,f<<=1);if(h>0)for(r.iushrn(h);h-- >0;)a.isOdd()&&a.iadd(c),a.iushrn(1);t.cmp(r)>=0?(t.isub(r),s.isub(a)):(r.isub(t),a.isub(s))}return(i=0===t.cmpn(1)?s:a).cmpn(0)<0&&i.iadd(e),i},o.prototype.gcd=function(e){if(this.isZero())return e.abs();if(e.isZero())return this.abs();var t=this.clone(),r=e.clone();t.negative=0,r.negative=0;for(var n=0;t.isEven()&&r.isEven();n++)t.iushrn(1),r.iushrn(1);for(;;){for(;t.isEven();)t.iushrn(1);for(;r.isEven();)r.iushrn(1);var i=t.cmp(r);if(i<0){var o=t;t=r,r=o}else if(0===i||0===r.cmpn(1))break;t.isub(r)}return r.iushln(n)},o.prototype.invm=function(e){return this.egcd(e).a.umod(e)},o.prototype.isEven=function(){return!(1&this.words[0])},o.prototype.isOdd=function(){return!(1&~this.words[0])},o.prototype.andln=function(e){return this.words[0]&e},o.prototype.bincn=function(e){n("number"==typeof e);var t=e%26,r=(e-t)/26,i=1<<t;if(this.length<=r)return this._expand(r+1),this.words[r]|=i,this;for(var o=i,s=r;0!==o&&s<this.length;s++){var a=0|this.words[s];o=(a+=o)>>>26,a&=67108863,this.words[s]=a}return 0!==o&&(this.words[s]=o,this.length++),this},o.prototype.isZero=function(){return 1===this.length&&0===this.words[0]},o.prototype.cmpn=function(e){var t,r=e<0;if(0!==this.negative&&!r)return-1;if(0===this.negative&&r)return 1;if(this._strip(),this.length>1)t=1;else{r&&(e=-e),n(e<=67108863,"Number is too big");var i=0|this.words[0];t=i===e?0:i<e?-1:1}return 0!==this.negative?0|-t:t},o.prototype.cmp=function(e){if(0!==this.negative&&0===e.negative)return-1;if(0===this.negative&&0!==e.negative)return 1;var t=this.ucmp(e);return 0!==this.negative?0|-t:t},o.prototype.ucmp=function(e){if(this.length>e.length)return 1;if(this.length<e.length)return-1;for(var t=0,r=this.length-1;r>=0;r--){var n=0|this.words[r],i=0|e.words[r];if(n!==i){n<i?t=-1:n>i&&(t=1);break}}return t},o.prototype.gtn=function(e){return 1===this.cmpn(e)},o.prototype.gt=function(e){return 1===this.cmp(e)},o.prototype.gten=function(e){return this.cmpn(e)>=0},o.prototype.gte=function(e){return this.cmp(e)>=0},o.prototype.ltn=function(e){return-1===this.cmpn(e)},o.prototype.lt=function(e){return-1===this.cmp(e)},o.prototype.lten=function(e){return this.cmpn(e)<=0},o.prototype.lte=function(e){return this.cmp(e)<=0},o.prototype.eqn=function(e){return 0===this.cmpn(e)},o.prototype.eq=function(e){return 0===this.cmp(e)},o.red=function(e){return new k(e)},o.prototype.toRed=function(e){return n(!this.red,"Already a number in reduction context"),n(0===this.negative,"red works only with positives"),e.convertTo(this)._forceRed(e)},o.prototype.fromRed=function(){return n(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},o.prototype._forceRed=function(e){return this.red=e,this},o.prototype.forceRed=function(e){return n(!this.red,"Already a number in reduction context"),this._forceRed(e)},o.prototype.redAdd=function(e){return n(this.red,"redAdd works only with red numbers"),this.red.add(this,e)},o.prototype.redIAdd=function(e){return n(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,e)},o.prototype.redSub=function(e){return n(this.red,"redSub works only with red numbers"),this.red.sub(this,e)},o.prototype.redISub=function(e){return n(this.red,"redISub works only with red numbers"),this.red.isub(this,e)},o.prototype.redShl=function(e){return n(this.red,"redShl works only with red numbers"),this.red.shl(this,e)},o.prototype.redMul=function(e){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,e),this.red.mul(this,e)},o.prototype.redIMul=function(e){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,e),this.red.imul(this,e)},o.prototype.redSqr=function(){return n(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},o.prototype.redISqr=function(){return n(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},o.prototype.redSqrt=function(){return n(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},o.prototype.redInvm=function(){return n(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},o.prototype.redNeg=function(){return n(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},o.prototype.redPow=function(e){return n(this.red&&!e.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,e)};var w={k256:null,p224:null,p192:null,p25519:null};function E(e,t){this.name=e,this.p=new o(t,16),this.n=this.p.bitLength(),this.k=new o(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function A(){E.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function _(){E.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function x(){E.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function S(){E.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function k(e){if("string"==typeof e){var t=o._prime(e);this.m=t.p,this.prime=t}else n(e.gtn(1),"modulus must be greater than 1"),this.m=e,this.prime=null}function I(e){k.call(this,e),this.shift=this.m.bitLength(),this.shift%26!=0&&(this.shift+=26-this.shift%26),this.r=new o(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}E.prototype._tmp=function(){var e=new o(null);return e.words=new Array(Math.ceil(this.n/13)),e},E.prototype.ireduce=function(e){var t,r=e;do{this.split(r,this.tmp),t=(r=(r=this.imulK(r)).iadd(this.tmp)).bitLength()}while(t>this.n);var n=t<this.n?-1:r.ucmp(this.p);return 0===n?(r.words[0]=0,r.length=1):n>0?r.isub(this.p):void 0!==r.strip?r.strip():r._strip(),r},E.prototype.split=function(e,t){e.iushrn(this.n,0,t)},E.prototype.imulK=function(e){return e.imul(this.k)},i(A,E),A.prototype.split=function(e,t){for(var r=4194303,n=Math.min(e.length,9),i=0;i<n;i++)t.words[i]=e.words[i];if(t.length=n,e.length<=9)return e.words[0]=0,void(e.length=1);var o=e.words[9];for(t.words[t.length++]=o&r,i=10;i<e.length;i++){var s=0|e.words[i];e.words[i-10]=(s&r)<<4|o>>>22,o=s}o>>>=22,e.words[i-10]=o,0===o&&e.length>10?e.length-=10:e.length-=9},A.prototype.imulK=function(e){e.words[e.length]=0,e.words[e.length+1]=0,e.length+=2;for(var t=0,r=0;r<e.length;r++){var n=0|e.words[r];t+=977*n,e.words[r]=67108863&t,t=64*n+(t/67108864|0)}return 0===e.words[e.length-1]&&(e.length--,0===e.words[e.length-1]&&e.length--),e},i(_,E),i(x,E),i(S,E),S.prototype.imulK=function(e){for(var t=0,r=0;r<e.length;r++){var n=19*(0|e.words[r])+t,i=67108863&n;n>>>=26,e.words[r]=i,t=n}return 0!==t&&(e.words[e.length++]=t),e},o._prime=function(e){if(w[e])return w[e];var t;if("k256"===e)t=new A;else if("p224"===e)t=new _;else if("p192"===e)t=new x;else{if("p25519"!==e)throw new Error("Unknown prime "+e);t=new S}return w[e]=t,t},k.prototype._verify1=function(e){n(0===e.negative,"red works only with positives"),n(e.red,"red works only with red numbers")},k.prototype._verify2=function(e,t){n(!(e.negative|t.negative),"red works only with positives"),n(e.red&&e.red===t.red,"red works only with red numbers")},k.prototype.imod=function(e){return this.prime?this.prime.ireduce(e)._forceRed(this):(l(e,e.umod(this.m)._forceRed(this)),e)},k.prototype.neg=function(e){return e.isZero()?e.clone():this.m.sub(e)._forceRed(this)},k.prototype.add=function(e,t){this._verify2(e,t);var r=e.add(t);return r.cmp(this.m)>=0&&r.isub(this.m),r._forceRed(this)},k.prototype.iadd=function(e,t){this._verify2(e,t);var r=e.iadd(t);return r.cmp(this.m)>=0&&r.isub(this.m),r},k.prototype.sub=function(e,t){this._verify2(e,t);var r=e.sub(t);return r.cmpn(0)<0&&r.iadd(this.m),r._forceRed(this)},k.prototype.isub=function(e,t){this._verify2(e,t);var r=e.isub(t);return r.cmpn(0)<0&&r.iadd(this.m),r},k.prototype.shl=function(e,t){return this._verify1(e),this.imod(e.ushln(t))},k.prototype.imul=function(e,t){return this._verify2(e,t),this.imod(e.imul(t))},k.prototype.mul=function(e,t){return this._verify2(e,t),this.imod(e.mul(t))},k.prototype.isqr=function(e){return this.imul(e,e.clone())},k.prototype.sqr=function(e){return this.mul(e,e)},k.prototype.sqrt=function(e){if(e.isZero())return e.clone();var t=this.m.andln(3);if(n(t%2==1),3===t){var r=this.m.add(new o(1)).iushrn(2);return this.pow(e,r)}for(var i=this.m.subn(1),s=0;!i.isZero()&&0===i.andln(1);)s++,i.iushrn(1);n(!i.isZero());var a=new o(1).toRed(this),c=a.redNeg(),u=this.m.subn(1).iushrn(1),l=this.m.bitLength();for(l=new o(2*l*l).toRed(this);0!==this.pow(l,u).cmp(c);)l.redIAdd(c);for(var h=this.pow(l,i),f=this.pow(e,i.addn(1).iushrn(1)),d=this.pow(e,i),p=s;0!==d.cmp(a);){for(var g=d,m=0;0!==g.cmp(a);m++)g=g.redSqr();n(m<p);var y=this.pow(h,new o(1).iushln(p-m-1));f=f.redMul(y),h=y.redSqr(),d=d.redMul(h),p=m}return f},k.prototype.invm=function(e){var t=e._invmp(this.m);return 0!==t.negative?(t.negative=0,this.imod(t).redNeg()):this.imod(t)},k.prototype.pow=function(e,t){if(t.isZero())return new o(1).toRed(this);if(0===t.cmpn(1))return e.clone();var r=new Array(16);r[0]=new o(1).toRed(this),r[1]=e;for(var n=2;n<r.length;n++)r[n]=this.mul(r[n-1],e);var i=r[0],s=0,a=0,c=t.bitLength()%26;for(0===c&&(c=26),n=t.length-1;n>=0;n--){for(var u=t.words[n],l=c-1;l>=0;l--){var h=u>>l&1;i!==r[0]&&(i=this.sqr(i)),0!==h||0!==s?(s<<=1,s|=h,(4==++a||0===n&&0===l)&&(i=this.mul(i,r[s]),a=0,s=0)):a=0}c=26}return i},k.prototype.convertTo=function(e){var t=e.umod(this.m);return t===e?t.clone():t},k.prototype.convertFrom=function(e){var t=e.clone();return t.red=null,t},o.mont=function(e){return new I(e)},i(I,k),I.prototype.convertTo=function(e){return this.imod(e.ushln(this.shift))},I.prototype.convertFrom=function(e){var t=this.imod(e.mul(this.rinv));return t.red=null,t},I.prototype.imul=function(e,t){if(e.isZero()||t.isZero())return e.words[0]=0,e.length=1,e;var r=e.imul(t),n=r.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),i=r.isub(n).iushrn(this.shift),o=i;return i.cmp(this.m)>=0?o=i.isub(this.m):i.cmpn(0)<0&&(o=i.iadd(this.m)),o._forceRed(this)},I.prototype.mul=function(e,t){if(e.isZero()||t.isZero())return new o(0)._forceRed(this);var r=e.mul(t),n=r.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),i=r.isub(n).iushrn(this.shift),s=i;return i.cmp(this.m)>=0?s=i.isub(this.m):i.cmpn(0)<0&&(s=i.iadd(this.m)),s._forceRed(this)},I.prototype.invm=function(e){return this.imod(e._invmp(this.m).mul(this.r2))._forceRed(this)}}(e=r.nmd(e),this)},9606:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(5215);n.__exportStar(r(2985),t),n.__exportStar(r(221),t)},9674:e=>{"use strict";for(var t="qpzry9x8gf2tvdw0s3jn54khce6mua7l",r={},n=0;n<32;n++){var i=t.charAt(n);if(void 0!==r[i])throw new TypeError(i+" is ambiguous");r[i]=n}function o(e){var t=e>>25;return(33554431&e)<<5^996825010&-(1&t)^642813549&-(t>>1&1)^513874426&-(t>>2&1)^1027748829&-(t>>3&1)^705979059&-(t>>4&1)}function s(e){for(var t=1,r=0;r<e.length;++r){var n=e.charCodeAt(r);if(n<33||n>126)return"Invalid prefix ("+e+")";t=o(t)^n>>5}for(t=o(t),r=0;r<e.length;++r){var i=e.charCodeAt(r);t=o(t)^31&i}return t}function a(e,t){if(t=t||90,e.length<8)return e+" too short";if(e.length>t)return"Exceeds length limit";var n=e.toLowerCase(),i=e.toUpperCase();if(e!==n&&e!==i)return"Mixed-case string "+e;var a=(e=n).lastIndexOf("1");if(-1===a)return"No separator character for "+e;if(0===a)return"Missing prefix for "+e;var c=e.slice(0,a),u=e.slice(a+1);if(u.length<6)return"Data too short";var l=s(c);if("string"==typeof l)return l;for(var h=[],f=0;f<u.length;++f){var d=u.charAt(f),p=r[d];if(void 0===p)return"Unknown character "+d;l=o(l)^p,f+6>=u.length||h.push(p)}return 1!==l?"Invalid checksum for "+e:{prefix:c,words:h}}function c(e,t,r,n){for(var i=0,o=0,s=(1<<r)-1,a=[],c=0;c<e.length;++c)for(i=i<<t|e[c],o+=t;o>=r;)o-=r,a.push(i>>o&s);if(n)o>0&&a.push(i<<r-o&s);else{if(o>=t)return"Excess padding";if(i<<r-o&s)return"Non-zero padding"}return a}e.exports={decodeUnsafe:function(){var e=a.apply(null,arguments);if("object"==typeof e)return e},decode:function(e){var t=a.apply(null,arguments);if("object"==typeof t)return t;throw new Error(t)},encode:function(e,r,n){if(n=n||90,e.length+7+r.length>n)throw new TypeError("Exceeds length limit");var i=s(e=e.toLowerCase());if("string"==typeof i)throw new Error(i);for(var a=e+"1",c=0;c<r.length;++c){var u=r[c];if(u>>5)throw new Error("Non 5-bit word");i=o(i)^u,a+=t.charAt(u)}for(c=0;c<6;++c)i=o(i);for(i^=1,c=0;c<6;++c)a+=t.charAt(i>>5*(5-c)&31);return a},toWordsUnsafe:function(e){var t=c(e,8,5,!0);if(Array.isArray(t))return t},toWords:function(e){var t=c(e,8,5,!0);if(Array.isArray(t))return t;throw new Error(t)},fromWordsUnsafe:function(e){var t=c(e,5,8,!1);if(Array.isArray(t))return t},fromWords:function(e){var t=c(e,5,8,!1);if(Array.isArray(t))return t;throw new Error(t)}}},9883:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Watch=void 0;class r{constructor(){this.timestamps=new Map}start(e){if(this.timestamps.has(e))throw new Error(`Watch already started for label: ${e}`);this.timestamps.set(e,{started:Date.now()})}stop(e){const t=this.get(e);if(void 0!==t.elapsed)throw new Error(`Watch already stopped for label: ${e}`);const r=Date.now()-t.started;this.timestamps.set(e,{started:t.started,elapsed:r})}get(e){const t=this.timestamps.get(e);if(void 0===t)throw new Error(`No timestamp found for label: ${e}`);return t}elapsed(e){const t=this.get(e);return t.elapsed||Date.now()-t.started}}t.Watch=r,t.default=r},9983:function(e){"use strict";!function(){const t=2147483647;function r(e){const t=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]);let r=1779033703,n=3144134277,i=1013904242,o=2773480762,s=1359893119,a=2600822924,c=528734635,u=1541459225;const l=new Uint32Array(64);function h(e){let h=0,f=e.length;for(;f>=64;){let d,p,g,m,y,v=r,b=n,w=i,E=o,A=s,_=a,x=c,S=u;for(p=0;p<16;p++)g=h+4*p,l[p]=(255&e[g])<<24|(255&e[g+1])<<16|(255&e[g+2])<<8|255&e[g+3];for(p=16;p<64;p++)d=l[p-2],m=(d>>>17|d<<15)^(d>>>19|d<<13)^d>>>10,d=l[p-15],y=(d>>>7|d<<25)^(d>>>18|d<<14)^d>>>3,l[p]=(m+l[p-7]|0)+(y+l[p-16]|0)|0;for(p=0;p<64;p++)m=(((A>>>6|A<<26)^(A>>>11|A<<21)^(A>>>25|A<<7))+(A&_^~A&x)|0)+(S+(t[p]+l[p]|0)|0)|0,y=((v>>>2|v<<30)^(v>>>13|v<<19)^(v>>>22|v<<10))+(v&b^v&w^b&w)|0,S=x,x=_,_=A,A=E+m|0,E=w,w=b,b=v,v=m+y|0;r=r+v|0,n=n+b|0,i=i+w|0,o=o+E|0,s=s+A|0,a=a+_|0,c=c+x|0,u=u+S|0,h+=64,f-=64}}h(e);let f,d=e.length%64,p=e.length/536870912|0,g=e.length<<3,m=d<56?56:120,y=e.slice(e.length-d,e.length);for(y.push(128),f=d+1;f<m;f++)y.push(0);return y.push(p>>>24&255),y.push(p>>>16&255),y.push(p>>>8&255),y.push(p>>>0&255),y.push(g>>>24&255),y.push(g>>>16&255),y.push(g>>>8&255),y.push(g>>>0&255),h(y),[r>>>24&255,r>>>16&255,r>>>8&255,r>>>0&255,n>>>24&255,n>>>16&255,n>>>8&255,n>>>0&255,i>>>24&255,i>>>16&255,i>>>8&255,i>>>0&255,o>>>24&255,o>>>16&255,o>>>8&255,o>>>0&255,s>>>24&255,s>>>16&255,s>>>8&255,s>>>0&255,a>>>24&255,a>>>16&255,a>>>8&255,a>>>0&255,c>>>24&255,c>>>16&255,c>>>8&255,c>>>0&255,u>>>24&255,u>>>16&255,u>>>8&255,u>>>0&255]}function n(e,t,n){e=e.length<=64?e:r(e);const i=64+t.length+4,o=new Array(i),s=new Array(64);let a,c=[];for(a=0;a<64;a++)o[a]=54;for(a=0;a<e.length;a++)o[a]^=e[a];for(a=0;a<t.length;a++)o[64+a]=t[a];for(a=i-4;a<i;a++)o[a]=0;for(a=0;a<64;a++)s[a]=92;for(a=0;a<e.length;a++)s[a]^=e[a];function u(){for(let e=i-1;e>=i-4;e--){if(o[e]++,o[e]<=255)return;o[e]=0}}for(;n>=32;)u(),c=c.concat(r(s.concat(r(o)))),n-=32;return n>0&&(u(),c=c.concat(r(s.concat(r(o))).slice(0,n))),c}function i(e,t,r,n,i){let o;for(c(e,16*(2*r-1),i,0,16),o=0;o<2*r;o++)a(e,16*o,i,16),s(i,n),c(i,0,e,t+16*o,16);for(o=0;o<r;o++)c(e,t+2*o*16,e,16*o,16);for(o=0;o<r;o++)c(e,t+16*(2*o+1),e,16*(o+r),16)}function o(e,t){return e<<t|e>>>32-t}function s(e,t){c(e,0,t,0,16);for(let e=8;e>0;e-=2)t[4]^=o(t[0]+t[12],7),t[8]^=o(t[4]+t[0],9),t[12]^=o(t[8]+t[4],13),t[0]^=o(t[12]+t[8],18),t[9]^=o(t[5]+t[1],7),t[13]^=o(t[9]+t[5],9),t[1]^=o(t[13]+t[9],13),t[5]^=o(t[1]+t[13],18),t[14]^=o(t[10]+t[6],7),t[2]^=o(t[14]+t[10],9),t[6]^=o(t[2]+t[14],13),t[10]^=o(t[6]+t[2],18),t[3]^=o(t[15]+t[11],7),t[7]^=o(t[3]+t[15],9),t[11]^=o(t[7]+t[3],13),t[15]^=o(t[11]+t[7],18),t[1]^=o(t[0]+t[3],7),t[2]^=o(t[1]+t[0],9),t[3]^=o(t[2]+t[1],13),t[0]^=o(t[3]+t[2],18),t[6]^=o(t[5]+t[4],7),t[7]^=o(t[6]+t[5],9),t[4]^=o(t[7]+t[6],13),t[5]^=o(t[4]+t[7],18),t[11]^=o(t[10]+t[9],7),t[8]^=o(t[11]+t[10],9),t[9]^=o(t[8]+t[11],13),t[10]^=o(t[9]+t[8],18),t[12]^=o(t[15]+t[14],7),t[13]^=o(t[12]+t[15],9),t[14]^=o(t[13]+t[12],13),t[15]^=o(t[14]+t[13],18);for(let r=0;r<16;++r)e[r]+=t[r]}function a(e,t,r,n){for(let i=0;i<n;i++)r[i]^=e[t+i]}function c(e,t,r,n,i){for(;i--;)r[n++]=e[t++]}function u(e){if(!e||"number"!=typeof e.length)return!1;for(let t=0;t<e.length;t++){const r=e[t];if("number"!=typeof r||r%1||r<0||r>=256)return!1}return!0}function l(e,t){if("number"!=typeof e||e%1)throw new Error("invalid "+t);return e}function h(e,r,o,s,h,f,d){if(o=l(o,"N"),s=l(s,"r"),h=l(h,"p"),f=l(f,"dkLen"),0===o||o&o-1)throw new Error("N must be power of 2");if(o>t/128/s)throw new Error("N too large");if(s>t/128/h)throw new Error("r too large");if(!u(e))throw new Error("password must be an array or buffer");if(e=Array.prototype.slice.call(e),!u(r))throw new Error("salt must be an array or buffer");r=Array.prototype.slice.call(r);let p=n(e,r,128*h*s);const g=new Uint32Array(32*h*s);for(let e=0;e<g.length;e++){const t=4*e;g[e]=(255&p[t+3])<<24|(255&p[t+2])<<16|(255&p[t+1])<<8|255&p[t+0]}const m=new Uint32Array(64*s),y=new Uint32Array(32*s*o),v=32*s,b=new Uint32Array(16),w=new Uint32Array(16),E=h*o*2;let A,_,x=0,S=null,k=!1,I=0,O=0;const T=d?parseInt(1e3/s):4294967295,P="undefined"!=typeof setImmediate?setImmediate:setTimeout,R=function(){if(k)return d(new Error("cancelled"),x/E);let t;switch(I){case 0:_=32*O*s,c(g,_,m,0,v),I=1,A=0;case 1:t=o-A,t>T&&(t=T);for(let e=0;e<t;e++)c(m,0,y,(A+e)*v,v),i(m,v,s,b,w);if(A+=t,x+=t,d){const e=parseInt(1e3*x/E);if(e!==S){if(k=d(null,x/E),k)break;S=e}}if(A<o)break;A=0,I=2;case 2:t=o-A,t>T&&(t=T);for(let e=0;e<t;e++){const e=m[16*(2*s-1)]&o-1;a(y,e*v,m,v),i(m,v,s,b,w)}if(A+=t,x+=t,d){const e=parseInt(1e3*x/E);if(e!==S){if(k=d(null,x/E),k)break;S=e}}if(A<o)break;if(c(m,0,g,_,v),O++,O<h){I=0;break}p=[];for(let e=0;e<g.length;e++)p.push(255&g[e]),p.push(g[e]>>8&255),p.push(g[e]>>16&255),p.push(g[e]>>24&255);const r=n(e,p,f);return d&&d(null,1,r),r}d&&P(R)};if(!d)for(;;){const e=R();if(null!=e)return e}R()}const f={scrypt:function(e,t,r,n,i,o,s){return new Promise((function(a,c){let u=0;s&&s(0),h(e,t,r,n,i,o,(function(e,t,r){if(e)c(e);else if(r)s&&1!==u&&s(1),a(new Uint8Array(r));else if(s&&t!==u)return u=t,s(t)}))}))},syncScrypt:function(e,t,r,n,i,o){return new Uint8Array(h(e,t,r,n,i,o))}};e.exports=f}()},9999:(e,t,r)=>{"use strict";function n(e){if(!Number.isSafeInteger(e)||e<0)throw new Error("positive integer expected, got "+e)}function i(e,...t){if(!((r=e)instanceof Uint8Array||ArrayBuffer.isView(r)&&"Uint8Array"===r.constructor.name))throw new Error("Uint8Array expected");var r;if(t.length>0&&!t.includes(e.length))throw new Error("Uint8Array expected of length "+t+", got length="+e.length)}function o(e){if("function"!=typeof e||"function"!=typeof e.create)throw new Error("Hash should be wrapped by utils.wrapConstructor");n(e.outputLen),n(e.blockLen)}function s(e,t=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")}function a(e,t){i(e);const r=t.outputLen;if(e.length<r)throw new Error("digestInto() expects output buffer of length at least "+r)}r.d(t,{CC:()=>s,DO:()=>i,Fe:()=>n,Ht:()=>a,sd:()=>o})}},n={};function i(e){var t=n[e];if(void 0!==t)return t.exports;var o=n[e]={id:e,loaded:!1,exports:{}};return r[e].call(o.exports,o,o.exports,i),o.loaded=!0,o.exports}function o(e){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(e)}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function a(){"use strict";a=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,i=Object.defineProperty||function(e,t,r){e[t]=r.value},s="function"==typeof Symbol?Symbol:{},c=s.iterator||"@@iterator",u=s.asyncIterator||"@@asyncIterator",l=s.toStringTag||"@@toStringTag";function h(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{h({},"")}catch(e){h=function(e,t,r){return e[t]=r}}function f(e,t,r,n){var o=t&&t.prototype instanceof b?t:b,s=Object.create(o.prototype),a=new N(n||[]);return i(s,"_invoke",{value:O(e,r,a)}),s}function d(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=f;var p="suspendedStart",g="suspendedYield",m="executing",y="completed",v={};function b(){}function w(){}function E(){}var A={};h(A,c,(function(){return this}));var _=Object.getPrototypeOf,x=_&&_(_(C([])));x&&x!==r&&n.call(x,c)&&(A=x);var S=E.prototype=b.prototype=Object.create(A);function k(e){["next","throw","return"].forEach((function(t){h(e,t,(function(e){return this._invoke(t,e)}))}))}function I(e,t){function r(i,s,a,c){var u=d(e[i],e,s);if("throw"!==u.type){var l=u.arg,h=l.value;return h&&"object"==o(h)&&n.call(h,"__await")?t.resolve(h.__await).then((function(e){r("next",e,a,c)}),(function(e){r("throw",e,a,c)})):t.resolve(h).then((function(e){l.value=e,a(l)}),(function(e){return r("throw",e,a,c)}))}c(u.arg)}var s;i(this,"_invoke",{value:function(e,n){function i(){return new t((function(t,i){r(e,n,t,i)}))}return s=s?s.then(i,i):i()}})}function O(t,r,n){var i=p;return function(o,s){if(i===m)throw Error("Generator is already running");if(i===y){if("throw"===o)throw s;return{value:e,done:!0}}for(n.method=o,n.arg=s;;){var a=n.delegate;if(a){var c=T(a,n);if(c){if(c===v)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(i===p)throw i=y,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);i=m;var u=d(t,r,n);if("normal"===u.type){if(i=n.done?y:g,u.arg===v)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(i=y,n.method="throw",n.arg=u.arg)}}}function T(t,r){var n=r.method,i=t.iterator[n];if(i===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,T(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),v;var o=d(i,t.iterator,r.arg);if("throw"===o.type)return r.method="throw",r.arg=o.arg,r.delegate=null,v;var s=o.arg;return s?s.done?(r[t.resultName]=s.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,v):s:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,v)}function P(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function R(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function N(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(P,this),this.reset(!0)}function C(t){if(t||""===t){var r=t[c];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var i=-1,s=function r(){for(;++i<t.length;)if(n.call(t,i))return r.value=t[i],r.done=!1,r;return r.value=e,r.done=!0,r};return s.next=s}}throw new TypeError(o(t)+" is not iterable")}return w.prototype=E,i(S,"constructor",{value:E,configurable:!0}),i(E,"constructor",{value:w,configurable:!0}),w.displayName=h(E,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===w||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,E):(e.__proto__=E,h(e,l,"GeneratorFunction")),e.prototype=Object.create(S),e},t.awrap=function(e){return{__await:e}},k(I.prototype),h(I.prototype,u,(function(){return this})),t.AsyncIterator=I,t.async=function(e,r,n,i,o){void 0===o&&(o=Promise);var s=new I(f(e,r,n,i),o);return t.isGeneratorFunction(r)?s:s.next().then((function(e){return e.done?e.value:s.next()}))},k(S),h(S,l,"Generator"),h(S,c,(function(){return this})),h(S,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=C,N.prototype={constructor:N,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(R),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function i(n,i){return a.type="throw",a.arg=t,r.next=n,i&&(r.method="next",r.arg=e),!!i}for(var o=this.tryEntries.length-1;o>=0;--o){var s=this.tryEntries[o],a=s.completion;if("root"===s.tryLoc)return i("end");if(s.tryLoc<=this.prev){var c=n.call(s,"catchLoc"),u=n.call(s,"finallyLoc");if(c&&u){if(this.prev<s.catchLoc)return i(s.catchLoc,!0);if(this.prev<s.finallyLoc)return i(s.finallyLoc)}else if(c){if(this.prev<s.catchLoc)return i(s.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<s.finallyLoc)return i(s.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var s=o?o.completion:{};return s.type=e,s.arg=t,o?(this.method="next",this.next=o.finallyLoc,v):this.complete(s)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),v},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),R(r),v}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var i=n.arg;R(r)}return i}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:C(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),v}},t}function c(e,t,r,n,i,o,s){try{var a=e[o](s),c=a.value}catch(e){return void r(e)}a.done?t(c):Promise.resolve(c).then(n,i)}function u(e){return function(){var t=this,r=arguments;return new Promise((function(n,i){var o=e.apply(t,r);function s(e){c(o,n,i,s,a,"next",e)}function a(e){c(o,n,i,s,a,"throw",e)}s(void 0)}))}}i.m=r,i.amdO={},i.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return i.d(t,{a:t}),t},i.d=(e,t)=>{for(var r in t)i.o(t,r)&&!i.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},i.f={},i.e=e=>Promise.all(Object.keys(i.f).reduce(((t,r)=>(i.f[r](e,t),t)),[])),i.u=e=>e+".bundle.js",i.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),i.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),e={},t="flow-cadence-eth-utils:",i.l=(r,n,o,s)=>{if(e[r])e[r].push(n);else{var a,c;if(void 0!==o)for(var u=document.getElementsByTagName("script"),l=0;l<u.length;l++){var h=u[l];if(h.getAttribute("src")==r||h.getAttribute("data-webpack")==t+o){a=h;break}}a||(c=!0,(a=document.createElement("script")).charset="utf-8",a.timeout=120,i.nc&&a.setAttribute("nonce",i.nc),a.setAttribute("data-webpack",t+o),a.src=r),e[r]=[n];var f=(t,n)=>{a.onerror=a.onload=null,clearTimeout(d);var i=e[r];if(delete e[r],a.parentNode&&a.parentNode.removeChild(a),i&&i.forEach((e=>e(n))),t)return t(n)},d=setTimeout(f.bind(null,void 0,{type:"timeout",target:a}),12e4);a.onerror=f.bind(null,a.onerror),a.onload=f.bind(null,a.onload),c&&document.head.appendChild(a)}},i.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.nmd=e=>(e.paths=[],e.children||(e.children=[]),e),(()=>{var e;i.g.importScripts&&(e=i.g.location+"");var t=i.g.document;if(!e&&t&&(t.currentScript&&"SCRIPT"===t.currentScript.tagName.toUpperCase()&&(e=t.currentScript.src),!e)){var r=t.getElementsByTagName("script");if(r.length)for(var n=r.length-1;n>-1&&(!e||!/^http(s?):/.test(e));)e=r[n--].src}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/^blob:/,"").replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),i.p=e})(),(()=>{var e={792:0};i.f.j=(t,r)=>{var n=i.o(e,t)?e[t]:void 0;if(0!==n)if(n)r.push(n[2]);else{var o=new Promise(((r,i)=>n=e[t]=[r,i]));r.push(n[2]=o);var s=i.p+i.u(t),a=new Error;i.l(s,(r=>{if(i.o(e,t)&&(0!==(n=e[t])&&(e[t]=void 0),n)){var o=r&&("load"===r.type?"missing":r.type),s=r&&r.target&&r.target.src;a.message="Loading chunk "+t+" failed.\n("+o+": "+s+")",a.name="ChunkLoadError",a.type=o,a.request=s,n[1](a)}}),"chunk-"+t,t)}};var t=(t,r)=>{var n,o,[s,a,c]=r,u=0;if(s.some((t=>0!==e[t]))){for(n in a)i.o(a,n)&&(i.m[n]=a[n]);c&&c(i)}for(t&&t(r);u<s.length;u++)o=s[u],i.o(e,o)&&e[o]&&e[o][0](),e[o]=0},r=self.webpackChunkflow_cadence_eth_utils=self.webpackChunkflow_cadence_eth_utils||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))})();var l=i(8118),h=i(6986),f=i(2347),d=f.network,p=f.fclConfigInfo,g=f.updateAuthUI,m=i(653),y=m.CREATE_ATTESTATION,v=m.GET_ATTESTED_ADDRESSES_WITH_STATUS,b=m.GET_CURRENT_BLOCK_TIMESTAMP,w=m.REMOVE_ATTESTATIONS,E=i(934);document.addEventListener("DOMContentLoaded",function(){var e=u(a().mark((function e(t){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:h.currentUser().subscribe(function(){var e=u(a().mark((function e(t){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(g(A=t),!A.loggedIn){e.next=5;break}return e.next=5,O(A.addr);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),document.getElementById("attestButton").addEventListener("click",F),document.getElementById("loginButton").addEventListener("click",_),document.getElementById("logoutButton").addEventListener("click",S);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),h.config({"app.detail.title":"Flow Affiliated Accounts","app.detail.icon":"https://assets-global.website-files.com/5f734f4dbd95382f4fdfa0ea/63ce603ae36f46f6bb67e51e_flow-logo.svg","flow.network":d,"accessNode.api":p[d].accessNode,"discovery.wallet":p[d].discoveryWallet,"discovery.authn.endpoint":p[d].discoveryAuthnEndpoint,"discovery.authn.include":p[d].discoveryAuthInclude}).load({flowJSON:E});var A={loggedIn:!1,addr:""};function _(){return x.apply(this,arguments)}function x(){return x=u(a().mark((function e(){var t;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.authenticate();case 2:return t=e.sent,e.next=5,O(t.addr);case 5:return e.abrupt("return",t);case 6:case"end":return e.stop()}}),e)}))),x.apply(this,arguments)}function S(){console.log("Logging out..."),h.unauthenticate(),window.location.reload()}function k(e,t,r,n){return I.apply(this,arguments)}function I(){return(I=u(a().mark((function e(t,r,n,i){var o,s;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.mutate({cadence:y,proposer:h.currentUser,payer:h.currentUser,authorizations:[h.currentUser],args:function(e,o){return[e(t,o.String),e(r,o.String),e(n,o.String),e(i,o.UFix64)]},limit:9999});case 2:return o=e.sent,e.next=5,h.tx(o).onceSealed();case 5:return s=e.sent,console.log(s),e.next=9,O(A.addr);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function O(e){return T.apply(this,arguments)}function T(){return(T=u(a().mark((function e(t){var r;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.query({cadence:v,args:function(e,r){return[h.arg(t,r.Address)]}});case 2:r=e.sent,console.log("Attested addresses: ",r),D(r);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function P(){return R.apply(this,arguments)}function R(){return(R=u(a().mark((function e(){var t;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("Getting current block timestamp..."),e.next=3,h.query({cadence:b,args:function(e,t){return[]}});case 3:return t=e.sent,console.log("Current block timestamp: ",t),e.abrupt("return",t);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function N(e){var t,r,n="<table>";n+='<tr><th class="remove-header">Remove</th><th>Attested Address</th><th>Verified</th></tr>';for(var i=0,o=Object.entries(e);i<o.length;i++){var a=(t=o[i],r=2,function(e){if(Array.isArray(e))return e}(t)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,i,o,s,a=[],c=!0,u=!1;try{if(o=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=o.call(r)).done)&&(a.push(n.value),a.length!==t);c=!0);}catch(e){u=!0,i=e}finally{try{if(!c&&null!=r.return&&(s=r.return(),Object(s)!==s))return}finally{if(u)throw i}}return a}}(t,r)||function(e,t){if(e){if("string"==typeof e)return s(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?s(e,t):void 0}}(t,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),c=a[0],u=a[1],l="https://etherscan.io/address/".concat(c);n+='\n            <tr>\n                <td><input type="checkbox" class="address-checkbox" data-address="'.concat(c,'"></td>\n                <td><a href="').concat(l,'" target="_blank">').concat(c,"</a></td>\n                <td>").concat(u?"":"","</td>\n            </tr>\n        ")}return n+"</table>"}function C(){var e=document.querySelector(".remove-header"),t=document.querySelectorAll(".address-checkbox");t.forEach((function(r){r.addEventListener("change",(function(){return function(e,t){Array.from(e).some((function(e){return e.checked}))?t.classList.add("active"):t.classList.remove("active")}(t,e)}))})),e.addEventListener("click",(function(){return function(e,t){return M.apply(this,arguments)}(t,e)}))}function M(){return(M=u(a().mark((function e(t,r){var n;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!r.classList.contains("active")){e.next=4;break}return n=L(t),e.next=4,B(n);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function L(e){return Array.from(e).filter((function(e){return e.checked})).map((function(e){return e.getAttribute("data-address")}))}function B(e){return U.apply(this,arguments)}function U(){return(U=u(a().mark((function e(t){var r,n;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,h.mutate({cadence:w,args:function(e,r){return[e(t,r.Array(r.String))]},proposer:h.currentUser,payer:h.currentUser,authorizations:[h.currentUser],limit:9999});case 3:return r=e.sent,e.next=6,h.tx(r).onceSealed();case 6:return n=e.sent,console.log("Transaction confirmed:",n),e.next=10,O(A.addr);case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),console.error("Error sending transaction:",e.t0);case 15:case"end":return e.stop()}}),e,null,[[0,12]])})))).apply(this,arguments)}function D(e){return j.apply(this,arguments)}function j(){return(j=u(a().mark((function e(t){var r;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=document.getElementById("attestedAddressesTable"),0!==Object.keys(t).length){e.next=4;break}return r.innerHTML="<p>No attested addresses found.</p>",e.abrupt("return");case 4:r.innerHTML=N(t),C();case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function F(){return z.apply(this,arguments)}function z(){return(z=u(a().mark((function e(){var t,r,n,i,o,s,c,u,l;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(window.ethereum||(alert("Please install MetaMask first."),0)){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,q();case 5:return t=e.sent,r=t.getSigner(),e.next=9,H(r);case 9:return n=e.sent,e.next=12,_();case 12:return i=e.sent,e.next=15,P();case 15:return o=e.sent,s=V(i.addr,n,o),e.next=19,W(r,s);case 19:return c=e.sent,u=J(c),l=Y(s,c),console.log("Signed message: ".concat(s)),console.log("Signature: ".concat(u)),console.log("Signer address: ".concat(n)),console.log("Signer public key: ".concat(l)),e.next=28,k(l,u,n,o);case 28:e.next=33;break;case 30:e.prev=30,e.t0=e.catch(2),console.error(e.t0);case 33:case"end":return e.stop()}}),e,null,[[2,30]])})))).apply(this,arguments)}function q(){return G.apply(this,arguments)}function G(){return(G=u(a().mark((function e(){var t;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=new l.providers.Web3Provider(window.ethereum,"any"),e.next=3,t.send("eth_requestAccounts",[]);case 3:return e.abrupt("return",t);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function H(e){return K.apply(this,arguments)}function K(){return(K=u(a().mark((function e(t){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getAddress();case 2:return e.abrupt("return",e.sent.toLowerCase());case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function V(e,t,r){return"".concat(e,":").concat(t,":").concat(r)}function W(e,t){return $.apply(this,arguments)}function $(){return($=u(a().mark((function e(t,r){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.signMessage(r);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function J(e){var t=e.replace(/^0x/,""),r=t.slice(0,64),n=t.slice(64,128);return parseInt(t.slice(128,130),16),r+n}function Y(e,t){var r="Ethereum Signed Message:\n".concat(e.length).concat(e),n=l.utils.keccak256(l.utils.toUtf8Bytes(r));return l.utils.recoverPublicKey(n,t).slice(4)}})();